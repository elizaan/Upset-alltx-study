var I5e=Object.defineProperty;var k5e=(e,t,n)=>t in e?I5e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var R5e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var sl=(e,t,n)=>(k5e(e,typeof t!="symbol"?t+"":t,n),n);var tsn=R5e((fon,_re)=>{function N5e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ul(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function P5e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var c0e={exports:{}},gM={},f0e={exports:{}},$n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yI=Symbol.for("react.element"),D5e=Symbol.for("react.portal"),O5e=Symbol.for("react.fragment"),$5e=Symbol.for("react.strict_mode"),M5e=Symbol.for("react.profiler"),L5e=Symbol.for("react.provider"),F5e=Symbol.for("react.context"),j5e=Symbol.for("react.forward_ref"),B5e=Symbol.for("react.suspense"),U5e=Symbol.for("react.memo"),z5e=Symbol.for("react.lazy"),jre=Symbol.iterator;function V5e(e){return e===null||typeof e!="object"?null:(e=jre&&e[jre]||e["@@iterator"],typeof e=="function"?e:null)}var d0e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h0e=Object.assign,p0e={};function px(e,t,n){this.props=e,this.context=t,this.refs=p0e,this.updater=n||d0e}px.prototype.isReactComponent={};px.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};px.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function m0e(){}m0e.prototype=px.prototype;function WH(e,t,n){this.props=e,this.context=t,this.refs=p0e,this.updater=n||d0e}var GH=WH.prototype=new m0e;GH.constructor=WH;h0e(GH,px.prototype);GH.isPureReactComponent=!0;var Bre=Array.isArray,g0e=Object.prototype.hasOwnProperty,YH={current:null},y0e={key:!0,ref:!0,__self:!0,__source:!0};function v0e(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)g0e.call(t,r)&&!y0e.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:yI,type:e,key:s,ref:o,props:i,_owner:YH.current}}function H5e(e,t){return{$$typeof:yI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function KH(e){return typeof e=="object"&&e!==null&&e.$$typeof===yI}function q5e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ure=/\/+/g;function d5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?q5e(""+e.key):t.toString(36)}function pP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yI:case D5e:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+d5(o,0):r,Bre(i)?(n="",e!=null&&(n=e.replace(Ure,"$&/")+"/"),pP(i,t,n,"",function(l){return l})):i!=null&&(KH(i)&&(i=H5e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ure,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Bre(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+d5(s,a);o+=pP(s,t,n,u,i)}else if(u=V5e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+d5(s,a++),o+=pP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function TR(e,t,n){if(e==null)return e;var r=[],i=0;return pP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function W5e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var eu={current:null},mP={transition:null},G5e={ReactCurrentDispatcher:eu,ReactCurrentBatchConfig:mP,ReactCurrentOwner:YH};function b0e(){throw Error("act(...) is not supported in production builds of React.")}$n.Children={map:TR,forEach:function(e,t,n){TR(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return TR(e,function(){t++}),t},toArray:function(e){return TR(e,function(t){return t})||[]},only:function(e){if(!KH(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$n.Component=px;$n.Fragment=O5e;$n.Profiler=M5e;$n.PureComponent=WH;$n.StrictMode=$5e;$n.Suspense=B5e;$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G5e;$n.act=b0e;$n.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=h0e({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=YH.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)g0e.call(t,u)&&!y0e.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:yI,type:e.type,key:i,ref:s,props:r,_owner:o}};$n.createContext=function(e){return e={$$typeof:F5e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:L5e,_context:e},e.Consumer=e};$n.createElement=v0e;$n.createFactory=function(e){var t=v0e.bind(null,e);return t.type=e,t};$n.createRef=function(){return{current:null}};$n.forwardRef=function(e){return{$$typeof:j5e,render:e}};$n.isValidElement=KH;$n.lazy=function(e){return{$$typeof:z5e,_payload:{_status:-1,_result:e},_init:W5e}};$n.memo=function(e,t){return{$$typeof:U5e,type:e,compare:t===void 0?null:t}};$n.startTransition=function(e){var t=mP.transition;mP.transition={};try{e()}finally{mP.transition=t}};$n.unstable_act=b0e;$n.useCallback=function(e,t){return eu.current.useCallback(e,t)};$n.useContext=function(e){return eu.current.useContext(e)};$n.useDebugValue=function(){};$n.useDeferredValue=function(e){return eu.current.useDeferredValue(e)};$n.useEffect=function(e,t){return eu.current.useEffect(e,t)};$n.useId=function(){return eu.current.useId()};$n.useImperativeHandle=function(e,t,n){return eu.current.useImperativeHandle(e,t,n)};$n.useInsertionEffect=function(e,t){return eu.current.useInsertionEffect(e,t)};$n.useLayoutEffect=function(e,t){return eu.current.useLayoutEffect(e,t)};$n.useMemo=function(e,t){return eu.current.useMemo(e,t)};$n.useReducer=function(e,t,n){return eu.current.useReducer(e,t,n)};$n.useRef=function(e){return eu.current.useRef(e)};$n.useState=function(e){return eu.current.useState(e)};$n.useSyncExternalStore=function(e,t,n){return eu.current.useSyncExternalStore(e,t,n)};$n.useTransition=function(){return eu.current.useTransition()};$n.version="18.3.1";f0e.exports=$n;var N=f0e.exports;const qi=Ul(N),DD=N5e({__proto__:null,default:qi},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y5e=N,K5e=Symbol.for("react.element"),X5e=Symbol.for("react.fragment"),Q5e=Object.prototype.hasOwnProperty,J5e=Y5e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z5e={key:!0,ref:!0,__self:!0,__source:!0};function _0e(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Q5e.call(t,r)&&!Z5e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:K5e,type:e,key:s,ref:o,props:i,_owner:J5e.current}}gM.Fragment=X5e;gM.jsx=_0e;gM.jsxs=_0e;c0e.exports=gM;var _=c0e.exports,aB={},w0e={exports:{}},zl={},E0e={exports:{}},x0e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,H){var D=U.length;U.push(H);e:for(;0<D;){var z=D-1>>>1,W=U[z];if(0<i(W,H))U[z]=H,U[D]=W,D=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],D=U.pop();if(D!==H){U[0]=D;e:for(var z=0,W=U.length,j=W>>>1;z<j;){var q=2*(z+1)-1,G=U[q],ne=q+1,ce=U[ne];if(0>i(G,D))ne<W&&0>i(ce,G)?(U[z]=ce,U[ne]=D,z=ne):(U[z]=G,U[q]=D,z=q);else if(ne<W&&0>i(ce,D))U[z]=ce,U[ne]=D,z=ne;else break e}}return H}function i(U,H){var D=U.sortIndex-H.sortIndex;return D!==0?D:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=U)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function w(U){if(m=!1,b(U),!p)if(n(u)!==null)p=!0,L(E);else{var H=n(l);H!==null&&B(w,H.startTime-U)}}function E(U,H){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var D=d;try{for(b(H),f=n(u);f!==null&&(!(f.expirationTime>H)||U&&!R());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=H);H=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(H)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&B(w,q.startTime-H),j=!1}return j}finally{f=null,d=D,h=!1}}var S=!1,T=null,A=-1,C=5,I=-1;function R(){return!(e.unstable_now()-I<C)}function M(){if(T!==null){var U=e.unstable_now();I=U;var H=!0;try{H=T(!0,U)}finally{H?P():(S=!1,T=null)}}else S=!1}var P;if(typeof v=="function")P=function(){v(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,F=O.port2;O.port1.onmessage=M,P=function(){F.postMessage(null)}}else P=function(){g(M,0)};function L(U){T=U,S||(S=!0,P())}function B(U,H){A=g(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,L(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var D=d;d=H;try{return U()}finally{d=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var D=d;d=U;try{return H()}finally{d=D}},e.unstable_scheduleCallback=function(U,H,D){var z=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?z+D:z):D=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,U={id:c++,callback:H,priorityLevel:U,startTime:D,expirationTime:W,sortIndex:-1},D>z?(U.sortIndex=D,t(l,U),n(u)===null&&U===n(l)&&(m?(y(A),A=-1):m=!0,B(w,D-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,L(E))),U},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(U){var H=d;return function(){var D=d;d=H;try{return U.apply(this,arguments)}finally{d=D}}}})(x0e);E0e.exports=x0e;var e8e=E0e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t8e=N,Cl=e8e;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var S0e=new Set,kC={};function pb(e,t){Xw(e,t),Xw(e+"Capture",t)}function Xw(e,t){for(kC[e]=t,e=0;e<t.length;e++)S0e.add(t[e])}var im=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uB=Object.prototype.hasOwnProperty,n8e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zre={},Vre={};function r8e(e){return uB.call(Vre,e)?!0:uB.call(zre,e)?!1:n8e.test(e)?Vre[e]=!0:(zre[e]=!0,!1)}function i8e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function s8e(e,t,n,r){if(t===null||typeof t>"u"||i8e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tu(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var No={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){No[e]=new tu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];No[t]=new tu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){No[e]=new tu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){No[e]=new tu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){No[e]=new tu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){No[e]=new tu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){No[e]=new tu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){No[e]=new tu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){No[e]=new tu(e,5,!1,e.toLowerCase(),null,!1,!1)});var XH=/[\-:]([a-z])/g;function QH(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(XH,QH);No[t]=new tu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(XH,QH);No[t]=new tu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(XH,QH);No[t]=new tu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){No[e]=new tu(e,1,!1,e.toLowerCase(),null,!1,!1)});No.xlinkHref=new tu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){No[e]=new tu(e,1,!1,e.toLowerCase(),null,!0,!0)});function JH(e,t,n,r){var i=No.hasOwnProperty(t)?No[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(s8e(t,n,i,r)&&(n=null),r||i===null?r8e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $m=t8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,AR=Symbol.for("react.element"),L_=Symbol.for("react.portal"),F_=Symbol.for("react.fragment"),ZH=Symbol.for("react.strict_mode"),lB=Symbol.for("react.profiler"),T0e=Symbol.for("react.provider"),A0e=Symbol.for("react.context"),eq=Symbol.for("react.forward_ref"),cB=Symbol.for("react.suspense"),fB=Symbol.for("react.suspense_list"),tq=Symbol.for("react.memo"),Eg=Symbol.for("react.lazy"),C0e=Symbol.for("react.offscreen"),Hre=Symbol.iterator;function FS(e){return e===null||typeof e!="object"?null:(e=Hre&&e[Hre]||e["@@iterator"],typeof e=="function"?e:null)}var Ni=Object.assign,h5;function jT(e){if(h5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);h5=t&&t[1]||""}return`
`+h5+e}var p5=!1;function m5(e,t){if(!e||p5)return"";p5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{p5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jT(e):""}function o8e(e){switch(e.tag){case 5:return jT(e.type);case 16:return jT("Lazy");case 13:return jT("Suspense");case 19:return jT("SuspenseList");case 0:case 2:case 15:return e=m5(e.type,!1),e;case 11:return e=m5(e.type.render,!1),e;case 1:return e=m5(e.type,!0),e;default:return""}}function dB(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F_:return"Fragment";case L_:return"Portal";case lB:return"Profiler";case ZH:return"StrictMode";case cB:return"Suspense";case fB:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case A0e:return(e.displayName||"Context")+".Consumer";case T0e:return(e._context.displayName||"Context")+".Provider";case eq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tq:return t=e.displayName||null,t!==null?t:dB(e.type)||"Memo";case Eg:t=e._payload,e=e._init;try{return dB(e(t))}catch{}}return null}function a8e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dB(t);case 8:return t===ZH?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function C0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function I0e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function u8e(e){var t=I0e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function CR(e){e._valueTracker||(e._valueTracker=u8e(e))}function k0e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=I0e(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function OD(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function hB(e,t){var n=t.checked;return Ni({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function qre(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=C0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function R0e(e,t){t=t.checked,t!=null&&JH(e,"checked",t,!1)}function pB(e,t){R0e(e,t);var n=C0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mB(e,t.type,n):t.hasOwnProperty("defaultValue")&&mB(e,t.type,C0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wre(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function mB(e,t,n){(t!=="number"||OD(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var BT=Array.isArray;function lw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+C0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function gB(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return Ni({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gre(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(et(92));if(BT(n)){if(1<n.length)throw Error(et(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:C0(n)}}function N0e(e,t){var n=C0(t.value),r=C0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Yre(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function P0e(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yB(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?P0e(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var IR,D0e=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(IR=IR||document.createElement("div"),IR.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=IR.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function RC(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var RA={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},l8e=["Webkit","ms","Moz","O"];Object.keys(RA).forEach(function(e){l8e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),RA[t]=RA[e]})});function O0e(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||RA.hasOwnProperty(e)&&RA[e]?(""+t).trim():t+"px"}function $0e(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=O0e(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var c8e=Ni({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vB(e,t){if(t){if(c8e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function bB(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _B=null;function nq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wB=null,cw=null,fw=null;function Kre(e){if(e=_I(e)){if(typeof wB!="function")throw Error(et(280));var t=e.stateNode;t&&(t=wM(t),wB(e.stateNode,e.type,t))}}function M0e(e){cw?fw?fw.push(e):fw=[e]:cw=e}function L0e(){if(cw){var e=cw,t=fw;if(fw=cw=null,Kre(e),t)for(e=0;e<t.length;e++)Kre(t[e])}}function F0e(e,t){return e(t)}function j0e(){}var g5=!1;function B0e(e,t,n){if(g5)return e(t,n);g5=!0;try{return F0e(e,t,n)}finally{g5=!1,(cw!==null||fw!==null)&&(j0e(),L0e())}}function NC(e,t){var n=e.stateNode;if(n===null)return null;var r=wM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(et(231,t,typeof n));return n}var EB=!1;if(im)try{var jS={};Object.defineProperty(jS,"passive",{get:function(){EB=!0}}),window.addEventListener("test",jS,jS),window.removeEventListener("test",jS,jS)}catch{EB=!1}function f8e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var NA=!1,$D=null,MD=!1,xB=null,d8e={onError:function(e){NA=!0,$D=e}};function h8e(e,t,n,r,i,s,o,a,u){NA=!1,$D=null,f8e.apply(d8e,arguments)}function p8e(e,t,n,r,i,s,o,a,u){if(h8e.apply(this,arguments),NA){if(NA){var l=$D;NA=!1,$D=null}else throw Error(et(198));MD||(MD=!0,xB=l)}}function mb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function U0e(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xre(e){if(mb(e)!==e)throw Error(et(188))}function m8e(e){var t=e.alternate;if(!t){if(t=mb(e),t===null)throw Error(et(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Xre(i),e;if(s===r)return Xre(i),t;s=s.sibling}throw Error(et(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(et(189))}}if(n.alternate!==r)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?e:t}function z0e(e){return e=m8e(e),e!==null?V0e(e):null}function V0e(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=V0e(e);if(t!==null)return t;e=e.sibling}return null}var H0e=Cl.unstable_scheduleCallback,Qre=Cl.unstable_cancelCallback,g8e=Cl.unstable_shouldYield,y8e=Cl.unstable_requestPaint,ns=Cl.unstable_now,v8e=Cl.unstable_getCurrentPriorityLevel,rq=Cl.unstable_ImmediatePriority,q0e=Cl.unstable_UserBlockingPriority,LD=Cl.unstable_NormalPriority,b8e=Cl.unstable_LowPriority,W0e=Cl.unstable_IdlePriority,yM=null,Yd=null;function _8e(e){if(Yd&&typeof Yd.onCommitFiberRoot=="function")try{Yd.onCommitFiberRoot(yM,e,void 0,(e.current.flags&128)===128)}catch{}}var Tf=Math.clz32?Math.clz32:x8e,w8e=Math.log,E8e=Math.LN2;function x8e(e){return e>>>=0,e===0?32:31-(w8e(e)/E8e|0)|0}var kR=64,RR=4194304;function UT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function FD(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=UT(a):(s&=o,s!==0&&(r=UT(s)))}else o=n&~i,o!==0?r=UT(o):s!==0&&(r=UT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Tf(t),i=1<<n,r|=e[n],t&=~i;return r}function S8e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T8e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Tf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=S8e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function SB(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function G0e(){var e=kR;return kR<<=1,!(kR&4194240)&&(kR=64),e}function y5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tf(t),e[t]=n}function A8e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Tf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function iq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Tf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Pr=0;function Y0e(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var K0e,sq,X0e,Q0e,J0e,TB=!1,NR=[],n0=null,r0=null,i0=null,PC=new Map,DC=new Map,Ng=[],C8e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jre(e,t){switch(e){case"focusin":case"focusout":n0=null;break;case"dragenter":case"dragleave":r0=null;break;case"mouseover":case"mouseout":i0=null;break;case"pointerover":case"pointerout":PC.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":DC.delete(t.pointerId)}}function BS(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=_I(t),t!==null&&sq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function I8e(e,t,n,r,i){switch(t){case"focusin":return n0=BS(n0,e,t,n,r,i),!0;case"dragenter":return r0=BS(r0,e,t,n,r,i),!0;case"mouseover":return i0=BS(i0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return PC.set(s,BS(PC.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,DC.set(s,BS(DC.get(s)||null,e,t,n,r,i)),!0}return!1}function Z0e(e){var t=j1(e.target);if(t!==null){var n=mb(t);if(n!==null){if(t=n.tag,t===13){if(t=U0e(n),t!==null){e.blockedOn=t,J0e(e.priority,function(){X0e(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=AB(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);_B=r,n.target.dispatchEvent(r),_B=null}else return t=_I(n),t!==null&&sq(t),e.blockedOn=n,!1;t.shift()}return!0}function Zre(e,t,n){gP(e)&&n.delete(t)}function k8e(){TB=!1,n0!==null&&gP(n0)&&(n0=null),r0!==null&&gP(r0)&&(r0=null),i0!==null&&gP(i0)&&(i0=null),PC.forEach(Zre),DC.forEach(Zre)}function US(e,t){e.blockedOn===t&&(e.blockedOn=null,TB||(TB=!0,Cl.unstable_scheduleCallback(Cl.unstable_NormalPriority,k8e)))}function OC(e){function t(i){return US(i,e)}if(0<NR.length){US(NR[0],e);for(var n=1;n<NR.length;n++){var r=NR[n];r.blockedOn===e&&(r.blockedOn=null)}}for(n0!==null&&US(n0,e),r0!==null&&US(r0,e),i0!==null&&US(i0,e),PC.forEach(t),DC.forEach(t),n=0;n<Ng.length;n++)r=Ng[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ng.length&&(n=Ng[0],n.blockedOn===null);)Z0e(n),n.blockedOn===null&&Ng.shift()}var dw=$m.ReactCurrentBatchConfig,jD=!0;function R8e(e,t,n,r){var i=Pr,s=dw.transition;dw.transition=null;try{Pr=1,oq(e,t,n,r)}finally{Pr=i,dw.transition=s}}function N8e(e,t,n,r){var i=Pr,s=dw.transition;dw.transition=null;try{Pr=4,oq(e,t,n,r)}finally{Pr=i,dw.transition=s}}function oq(e,t,n,r){if(jD){var i=AB(e,t,n,r);if(i===null)C5(e,t,r,BD,n),Jre(e,r);else if(I8e(i,e,t,n,r))r.stopPropagation();else if(Jre(e,r),t&4&&-1<C8e.indexOf(e)){for(;i!==null;){var s=_I(i);if(s!==null&&K0e(s),s=AB(e,t,n,r),s===null&&C5(e,t,r,BD,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else C5(e,t,r,null,n)}}var BD=null;function AB(e,t,n,r){if(BD=null,e=nq(r),e=j1(e),e!==null)if(t=mb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=U0e(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return BD=e,null}function eye(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v8e()){case rq:return 1;case q0e:return 4;case LD:case b8e:return 16;case W0e:return 536870912;default:return 16}default:return 16}}var Ug=null,aq=null,yP=null;function tye(){if(yP)return yP;var e,t=aq,n=t.length,r,i="value"in Ug?Ug.value:Ug.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return yP=i.slice(e,1<r?1-r:void 0)}function vP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function PR(){return!0}function eie(){return!1}function Vl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?PR:eie,this.isPropagationStopped=eie,this}return Ni(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=PR)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=PR)},persist:function(){},isPersistent:PR}),t}var mx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uq=Vl(mx),bI=Ni({},mx,{view:0,detail:0}),P8e=Vl(bI),v5,b5,zS,vM=Ni({},bI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lq,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zS&&(zS&&e.type==="mousemove"?(v5=e.screenX-zS.screenX,b5=e.screenY-zS.screenY):b5=v5=0,zS=e),v5)},movementY:function(e){return"movementY"in e?e.movementY:b5}}),tie=Vl(vM),D8e=Ni({},vM,{dataTransfer:0}),O8e=Vl(D8e),$8e=Ni({},bI,{relatedTarget:0}),_5=Vl($8e),M8e=Ni({},mx,{animationName:0,elapsedTime:0,pseudoElement:0}),L8e=Vl(M8e),F8e=Ni({},mx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),j8e=Vl(F8e),B8e=Ni({},mx,{data:0}),nie=Vl(B8e),U8e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z8e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},V8e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H8e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=V8e[e])?!!t[e]:!1}function lq(){return H8e}var q8e=Ni({},bI,{key:function(e){if(e.key){var t=U8e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?z8e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lq,charCode:function(e){return e.type==="keypress"?vP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),W8e=Vl(q8e),G8e=Ni({},vM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rie=Vl(G8e),Y8e=Ni({},bI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lq}),K8e=Vl(Y8e),X8e=Ni({},mx,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q8e=Vl(X8e),J8e=Ni({},vM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Z8e=Vl(J8e),eje=[9,13,27,32],cq=im&&"CompositionEvent"in window,PA=null;im&&"documentMode"in document&&(PA=document.documentMode);var tje=im&&"TextEvent"in window&&!PA,nye=im&&(!cq||PA&&8<PA&&11>=PA),iie=" ",sie=!1;function rye(e,t){switch(e){case"keyup":return eje.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iye(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var j_=!1;function nje(e,t){switch(e){case"compositionend":return iye(t);case"keypress":return t.which!==32?null:(sie=!0,iie);case"textInput":return e=t.data,e===iie&&sie?null:e;default:return null}}function rje(e,t){if(j_)return e==="compositionend"||!cq&&rye(e,t)?(e=tye(),yP=aq=Ug=null,j_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nye&&t.locale!=="ko"?null:t.data;default:return null}}var ije={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ije[e.type]:t==="textarea"}function sye(e,t,n,r){M0e(r),t=UD(t,"onChange"),0<t.length&&(n=new uq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var DA=null,$C=null;function sje(e){gye(e,0)}function bM(e){var t=z_(e);if(k0e(t))return e}function oje(e,t){if(e==="change")return t}var oye=!1;if(im){var w5;if(im){var E5="oninput"in document;if(!E5){var aie=document.createElement("div");aie.setAttribute("oninput","return;"),E5=typeof aie.oninput=="function"}w5=E5}else w5=!1;oye=w5&&(!document.documentMode||9<document.documentMode)}function uie(){DA&&(DA.detachEvent("onpropertychange",aye),$C=DA=null)}function aye(e){if(e.propertyName==="value"&&bM($C)){var t=[];sye(t,$C,e,nq(e)),B0e(sje,t)}}function aje(e,t,n){e==="focusin"?(uie(),DA=t,$C=n,DA.attachEvent("onpropertychange",aye)):e==="focusout"&&uie()}function uje(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bM($C)}function lje(e,t){if(e==="click")return bM(t)}function cje(e,t){if(e==="input"||e==="change")return bM(t)}function fje(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $f=typeof Object.is=="function"?Object.is:fje;function MC(e,t){if($f(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!uB.call(t,i)||!$f(e[i],t[i]))return!1}return!0}function lie(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cie(e,t){var n=lie(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lie(n)}}function uye(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uye(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lye(){for(var e=window,t=OD();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=OD(e.document)}return t}function fq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function dje(e){var t=lye(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&uye(n.ownerDocument.documentElement,n)){if(r!==null&&fq(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cie(n,s);var o=cie(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hje=im&&"documentMode"in document&&11>=document.documentMode,B_=null,CB=null,OA=null,IB=!1;function fie(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;IB||B_==null||B_!==OD(r)||(r=B_,"selectionStart"in r&&fq(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),OA&&MC(OA,r)||(OA=r,r=UD(CB,"onSelect"),0<r.length&&(t=new uq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=B_)))}function DR(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var U_={animationend:DR("Animation","AnimationEnd"),animationiteration:DR("Animation","AnimationIteration"),animationstart:DR("Animation","AnimationStart"),transitionend:DR("Transition","TransitionEnd")},x5={},cye={};im&&(cye=document.createElement("div").style,"AnimationEvent"in window||(delete U_.animationend.animation,delete U_.animationiteration.animation,delete U_.animationstart.animation),"TransitionEvent"in window||delete U_.transitionend.transition);function _M(e){if(x5[e])return x5[e];if(!U_[e])return e;var t=U_[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in cye)return x5[e]=t[n];return e}var fye=_M("animationend"),dye=_M("animationiteration"),hye=_M("animationstart"),pye=_M("transitionend"),mye=new Map,die="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function py(e,t){mye.set(e,t),pb(t,[e])}for(var S5=0;S5<die.length;S5++){var T5=die[S5],pje=T5.toLowerCase(),mje=T5[0].toUpperCase()+T5.slice(1);py(pje,"on"+mje)}py(fye,"onAnimationEnd");py(dye,"onAnimationIteration");py(hye,"onAnimationStart");py("dblclick","onDoubleClick");py("focusin","onFocus");py("focusout","onBlur");py(pye,"onTransitionEnd");Xw("onMouseEnter",["mouseout","mouseover"]);Xw("onMouseLeave",["mouseout","mouseover"]);Xw("onPointerEnter",["pointerout","pointerover"]);Xw("onPointerLeave",["pointerout","pointerover"]);pb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pb("onBeforeInput",["compositionend","keypress","textInput","paste"]);pb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gje=new Set("cancel close invalid load scroll toggle".split(" ").concat(zT));function hie(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,p8e(r,t,void 0,e),e.currentTarget=null}function gye(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;hie(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;hie(i,a,l),s=u}}}if(MD)throw e=xB,MD=!1,xB=null,e}function ii(e,t){var n=t[DB];n===void 0&&(n=t[DB]=new Set);var r=e+"__bubble";n.has(r)||(yye(t,e,2,!1),n.add(r))}function A5(e,t,n){var r=0;t&&(r|=4),yye(n,e,r,t)}var OR="_reactListening"+Math.random().toString(36).slice(2);function LC(e){if(!e[OR]){e[OR]=!0,S0e.forEach(function(n){n!=="selectionchange"&&(gje.has(n)||A5(n,!1,e),A5(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[OR]||(t[OR]=!0,A5("selectionchange",!1,t))}}function yye(e,t,n,r){switch(eye(t)){case 1:var i=R8e;break;case 4:i=N8e;break;default:i=oq}n=i.bind(null,t,n,e),i=void 0,!EB||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function C5(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=j1(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}B0e(function(){var l=s,c=nq(n),f=[];e:{var d=mye.get(e);if(d!==void 0){var h=uq,p=e;switch(e){case"keypress":if(vP(n)===0)break e;case"keydown":case"keyup":h=W8e;break;case"focusin":p="focus",h=_5;break;case"focusout":p="blur",h=_5;break;case"beforeblur":case"afterblur":h=_5;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=tie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=O8e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=K8e;break;case fye:case dye:case hye:h=L8e;break;case pye:h=Q8e;break;case"scroll":h=P8e;break;case"wheel":h=Z8e;break;case"copy":case"cut":case"paste":h=j8e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=rie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=NC(v,y),w!=null&&m.push(FC(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==_B&&(p=n.relatedTarget||n.fromElement)&&(j1(p)||p[sm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?j1(p):null,p!==null&&(g=mb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=tie,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=rie,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:z_(h),b=p==null?d:z_(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,j1(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=Zb(b))v++;for(b=0,w=y;w;w=Zb(w))b++;for(;0<v-b;)m=Zb(m),v--;for(;0<b-v;)y=Zb(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Zb(m),y=Zb(y)}m=null}else m=null;h!==null&&pie(f,d,h,m,!1),p!==null&&g!==null&&pie(f,g,p,m,!0)}}e:{if(d=l?z_(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=oje;else if(oie(d))if(oye)E=cje;else{E=uje;var S=aje}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=lje);if(E&&(E=E(e,l))){sye(f,E,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&mB(d,"number",d.value)}switch(S=l?z_(l):window,e){case"focusin":(oie(S)||S.contentEditable==="true")&&(B_=S,CB=l,OA=null);break;case"focusout":OA=CB=B_=null;break;case"mousedown":IB=!0;break;case"contextmenu":case"mouseup":case"dragend":IB=!1,fie(f,n,c);break;case"selectionchange":if(hje)break;case"keydown":case"keyup":fie(f,n,c)}var T;if(cq)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else j_?rye(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(nye&&n.locale!=="ko"&&(j_||A!=="onCompositionStart"?A==="onCompositionEnd"&&j_&&(T=tye()):(Ug=c,aq="value"in Ug?Ug.value:Ug.textContent,j_=!0)),S=UD(l,A),0<S.length&&(A=new nie(A,e,null,n,c),f.push({event:A,listeners:S}),T?A.data=T:(T=iye(n),T!==null&&(A.data=T)))),(T=tje?nje(e,n):rje(e,n))&&(l=UD(l,"onBeforeInput"),0<l.length&&(c=new nie("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=T))}gye(f,t)})}function FC(e,t,n){return{instance:e,listener:t,currentTarget:n}}function UD(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=NC(e,n),s!=null&&r.unshift(FC(e,s,i)),s=NC(e,t),s!=null&&r.push(FC(e,s,i))),e=e.return}return r}function Zb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pie(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=NC(n,s),u!=null&&o.unshift(FC(n,u,a))):i||(u=NC(n,s),u!=null&&o.push(FC(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var yje=/\r\n?/g,vje=/\u0000|\uFFFD/g;function mie(e){return(typeof e=="string"?e:""+e).replace(yje,`
`).replace(vje,"")}function $R(e,t,n){if(t=mie(t),mie(e)!==t&&n)throw Error(et(425))}function zD(){}var kB=null,RB=null;function NB(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var PB=typeof setTimeout=="function"?setTimeout:void 0,bje=typeof clearTimeout=="function"?clearTimeout:void 0,gie=typeof Promise=="function"?Promise:void 0,_je=typeof queueMicrotask=="function"?queueMicrotask:typeof gie<"u"?function(e){return gie.resolve(null).then(e).catch(wje)}:PB;function wje(e){setTimeout(function(){throw e})}function I5(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),OC(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);OC(t)}function s0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yie(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gx=Math.random().toString(36).slice(2),Cd="__reactFiber$"+gx,jC="__reactProps$"+gx,sm="__reactContainer$"+gx,DB="__reactEvents$"+gx,Eje="__reactListeners$"+gx,xje="__reactHandles$"+gx;function j1(e){var t=e[Cd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sm]||n[Cd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yie(e);e!==null;){if(n=e[Cd])return n;e=yie(e)}return t}e=n,n=e.parentNode}return null}function _I(e){return e=e[Cd]||e[sm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function z_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function wM(e){return e[jC]||null}var OB=[],V_=-1;function my(e){return{current:e}}function li(e){0>V_||(e.current=OB[V_],OB[V_]=null,V_--)}function Jr(e,t){V_++,OB[V_]=e.current,e.current=t}var I0={},ma=my(I0),Pu=my(!1),Ev=I0;function Qw(e,t){var n=e.type.contextTypes;if(!n)return I0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Du(e){return e=e.childContextTypes,e!=null}function VD(){li(Pu),li(ma)}function vie(e,t,n){if(ma.current!==I0)throw Error(et(168));Jr(ma,t),Jr(Pu,n)}function vye(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(et(108,a8e(e)||"Unknown",i));return Ni({},n,r)}function HD(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||I0,Ev=ma.current,Jr(ma,e),Jr(Pu,Pu.current),!0}function bie(e,t,n){var r=e.stateNode;if(!r)throw Error(et(169));n?(e=vye(e,t,Ev),r.__reactInternalMemoizedMergedChildContext=e,li(Pu),li(ma),Jr(ma,e)):li(Pu),Jr(Pu,n)}var bp=null,EM=!1,k5=!1;function bye(e){bp===null?bp=[e]:bp.push(e)}function Sje(e){EM=!0,bye(e)}function gy(){if(!k5&&bp!==null){k5=!0;var e=0,t=Pr;try{var n=bp;for(Pr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}bp=null,EM=!1}catch(i){throw bp!==null&&(bp=bp.slice(e+1)),H0e(rq,gy),i}finally{Pr=t,k5=!1}}return null}var H_=[],q_=0,qD=null,WD=0,rc=[],ic=0,xv=null,Pp=1,Dp="";function f1(e,t){H_[q_++]=WD,H_[q_++]=qD,qD=e,WD=t}function _ye(e,t,n){rc[ic++]=Pp,rc[ic++]=Dp,rc[ic++]=xv,xv=e;var r=Pp;e=Dp;var i=32-Tf(r)-1;r&=~(1<<i),n+=1;var s=32-Tf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Pp=1<<32-Tf(t)+i|n<<i|r,Dp=s+e}else Pp=1<<s|n<<i|r,Dp=e}function dq(e){e.return!==null&&(f1(e,1),_ye(e,1,0))}function hq(e){for(;e===qD;)qD=H_[--q_],H_[q_]=null,WD=H_[--q_],H_[q_]=null;for(;e===xv;)xv=rc[--ic],rc[ic]=null,Dp=rc[--ic],rc[ic]=null,Pp=rc[--ic],rc[ic]=null}var xl=null,gl=null,bi=!1,lf=null;function wye(e,t){var n=fc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function _ie(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xl=e,gl=s0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xl=e,gl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=xv!==null?{id:Pp,overflow:Dp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=fc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xl=e,gl=null,!0):!1;default:return!1}}function $B(e){return(e.mode&1)!==0&&(e.flags&128)===0}function MB(e){if(bi){var t=gl;if(t){var n=t;if(!_ie(e,t)){if($B(e))throw Error(et(418));t=s0(n.nextSibling);var r=xl;t&&_ie(e,t)?wye(r,n):(e.flags=e.flags&-4097|2,bi=!1,xl=e)}}else{if($B(e))throw Error(et(418));e.flags=e.flags&-4097|2,bi=!1,xl=e}}}function wie(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xl=e}function MR(e){if(e!==xl)return!1;if(!bi)return wie(e),bi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!NB(e.type,e.memoizedProps)),t&&(t=gl)){if($B(e))throw Eye(),Error(et(418));for(;t;)wye(e,t),t=s0(t.nextSibling)}if(wie(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gl=s0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gl=null}}else gl=xl?s0(e.stateNode.nextSibling):null;return!0}function Eye(){for(var e=gl;e;)e=s0(e.nextSibling)}function Jw(){gl=xl=null,bi=!1}function pq(e){lf===null?lf=[e]:lf.push(e)}var Tje=$m.ReactCurrentBatchConfig;function VS(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var r=n.stateNode}if(!r)throw Error(et(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,e))}return e}function LR(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Eie(e){var t=e._init;return t(e._payload)}function xye(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=l0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=M5(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===F_?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Eg&&Eie(E)===v.type)?(w=i(v,b.props),w.ref=VS(y,v,b),w.return=y,w):(w=TP(b.type,b.key,b.props,null,y.mode,w),w.ref=VS(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=L5(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=ov(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=M5(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case AR:return b=TP(v.type,v.key,v.props,null,y.mode,b),b.ref=VS(y,null,v),b.return=y,b;case L_:return v=L5(v,y.mode,b),v.return=y,v;case Eg:var w=v._init;return f(y,w(v._payload),b)}if(BT(v)||FS(v))return v=ov(v,y.mode,b,null),v.return=y,v;LR(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case AR:return b.key===E?u(y,v,b,w):null;case L_:return b.key===E?l(y,v,b,w):null;case Eg:return E=b._init,d(y,v,E(b._payload),w)}if(BT(b)||FS(b))return E!==null?null:c(y,v,b,w,null);LR(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case AR:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case L_:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case Eg:var S=w._init;return h(y,v,b,S(w._payload),E)}if(BT(w)||FS(w))return y=y.get(b)||null,c(v,y,w,E,null);LR(v,w)}return null}function p(y,v,b,w){for(var E=null,S=null,T=v,A=v=0,C=null;T!==null&&A<b.length;A++){T.index>A?(C=T,T=null):C=T.sibling;var I=d(y,T,b[A],w);if(I===null){T===null&&(T=C);break}e&&T&&I.alternate===null&&t(y,T),v=s(I,v,A),S===null?E=I:S.sibling=I,S=I,T=C}if(A===b.length)return n(y,T),bi&&f1(y,A),E;if(T===null){for(;A<b.length;A++)T=f(y,b[A],w),T!==null&&(v=s(T,v,A),S===null?E=T:S.sibling=T,S=T);return bi&&f1(y,A),E}for(T=r(y,T);A<b.length;A++)C=h(T,y,A,b[A],w),C!==null&&(e&&C.alternate!==null&&T.delete(C.key===null?A:C.key),v=s(C,v,A),S===null?E=C:S.sibling=C,S=C);return e&&T.forEach(function(R){return t(y,R)}),bi&&f1(y,A),E}function m(y,v,b,w){var E=FS(b);if(typeof E!="function")throw Error(et(150));if(b=E.call(b),b==null)throw Error(et(151));for(var S=E=null,T=v,A=v=0,C=null,I=b.next();T!==null&&!I.done;A++,I=b.next()){T.index>A?(C=T,T=null):C=T.sibling;var R=d(y,T,I.value,w);if(R===null){T===null&&(T=C);break}e&&T&&R.alternate===null&&t(y,T),v=s(R,v,A),S===null?E=R:S.sibling=R,S=R,T=C}if(I.done)return n(y,T),bi&&f1(y,A),E;if(T===null){for(;!I.done;A++,I=b.next())I=f(y,I.value,w),I!==null&&(v=s(I,v,A),S===null?E=I:S.sibling=I,S=I);return bi&&f1(y,A),E}for(T=r(y,T);!I.done;A++,I=b.next())I=h(T,y,A,I.value,w),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?A:I.key),v=s(I,v,A),S===null?E=I:S.sibling=I,S=I);return e&&T.forEach(function(M){return t(y,M)}),bi&&f1(y,A),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===F_&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case AR:e:{for(var E=b.key,S=v;S!==null;){if(S.key===E){if(E=b.type,E===F_){if(S.tag===7){n(y,S.sibling),v=i(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Eg&&Eie(E)===S.type){n(y,S.sibling),v=i(S,b.props),v.ref=VS(y,S,b),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}b.type===F_?(v=ov(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=TP(b.type,b.key,b.props,null,y.mode,w),w.ref=VS(y,v,b),w.return=y,y=w)}return o(y);case L_:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=L5(b,y.mode,w),v.return=y,y=v}return o(y);case Eg:return S=b._init,g(y,v,S(b._payload),w)}if(BT(b))return p(y,v,b,w);if(FS(b))return m(y,v,b,w);LR(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=M5(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var Zw=xye(!0),Sye=xye(!1),GD=my(null),YD=null,W_=null,mq=null;function gq(){mq=W_=YD=null}function yq(e){var t=GD.current;li(GD),e._currentValue=t}function LB(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function hw(e,t){YD=e,mq=W_=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Au=!0),e.firstContext=null)}function bc(e){var t=e._currentValue;if(mq!==e)if(e={context:e,memoizedValue:t,next:null},W_===null){if(YD===null)throw Error(et(308));W_=e,YD.dependencies={lanes:0,firstContext:e}}else W_=W_.next=e;return t}var B1=null;function vq(e){B1===null?B1=[e]:B1.push(e)}function Tye(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,vq(t)):(n.next=i.next,i.next=n),t.interleaved=n,om(e,r)}function om(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xg=!1;function bq(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aye(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function o0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ar&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,om(e,n)}return i=r.interleaved,i===null?(t.next=t,vq(r)):(t.next=i.next,i.next=t),r.interleaved=t,om(e,n)}function bP(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iq(e,n)}}function xie(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function KD(e,t,n,r){var i=e.updateQueue;xg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Ni({},f,d);break e;case 2:xg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Tv|=o,e.lanes=o,e.memoizedState=f}}function Sie(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(et(191,i));i.call(r)}}}var wI={},Kd=my(wI),BC=my(wI),UC=my(wI);function U1(e){if(e===wI)throw Error(et(174));return e}function _q(e,t){switch(Jr(UC,t),Jr(BC,e),Jr(Kd,wI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yB(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=yB(t,e)}li(Kd),Jr(Kd,t)}function eE(){li(Kd),li(BC),li(UC)}function Cye(e){U1(UC.current);var t=U1(Kd.current),n=yB(t,e.type);t!==n&&(Jr(BC,e),Jr(Kd,n))}function wq(e){BC.current===e&&(li(Kd),li(BC))}var Ci=my(0);function XD(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var R5=[];function Eq(){for(var e=0;e<R5.length;e++)R5[e]._workInProgressVersionPrimary=null;R5.length=0}var _P=$m.ReactCurrentDispatcher,N5=$m.ReactCurrentBatchConfig,Sv=0,Ii=null,ws=null,Gs=null,QD=!1,$A=!1,zC=0,Aje=0;function Vo(){throw Error(et(321))}function xq(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$f(e[n],t[n]))return!1;return!0}function Sq(e,t,n,r,i,s){if(Sv=s,Ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_P.current=e===null||e.memoizedState===null?Rje:Nje,e=n(r,i),$A){s=0;do{if($A=!1,zC=0,25<=s)throw Error(et(301));s+=1,Gs=ws=null,t.updateQueue=null,_P.current=Pje,e=n(r,i)}while($A)}if(_P.current=JD,t=ws!==null&&ws.next!==null,Sv=0,Gs=ws=Ii=null,QD=!1,t)throw Error(et(300));return e}function Tq(){var e=zC!==0;return zC=0,e}function yd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gs===null?Ii.memoizedState=Gs=e:Gs=Gs.next=e,Gs}function _c(){if(ws===null){var e=Ii.alternate;e=e!==null?e.memoizedState:null}else e=ws.next;var t=Gs===null?Ii.memoizedState:Gs.next;if(t!==null)Gs=t,ws=e;else{if(e===null)throw Error(et(310));ws=e,e={memoizedState:ws.memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},Gs===null?Ii.memoizedState=Gs=e:Gs=Gs.next=e}return Gs}function VC(e,t){return typeof t=="function"?t(e):t}function P5(e){var t=_c(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=ws,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Sv&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ii.lanes|=c,Tv|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,$f(r,t.memoizedState)||(Au=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ii.lanes|=s,Tv|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function D5(e){var t=_c(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);$f(s,t.memoizedState)||(Au=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Iye(){}function kye(e,t){var n=Ii,r=_c(),i=t(),s=!$f(r.memoizedState,i);if(s&&(r.memoizedState=i,Au=!0),r=r.queue,Aq(Pye.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Gs!==null&&Gs.memoizedState.tag&1){if(n.flags|=2048,HC(9,Nye.bind(null,n,r,i,t),void 0,null),io===null)throw Error(et(349));Sv&30||Rye(n,t,i)}return i}function Rye(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ii.updateQueue,t===null?(t={lastEffect:null,stores:null},Ii.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Nye(e,t,n,r){t.value=n,t.getSnapshot=r,Dye(t)&&Oye(e)}function Pye(e,t,n){return n(function(){Dye(t)&&Oye(e)})}function Dye(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$f(e,n)}catch{return!0}}function Oye(e){var t=om(e,1);t!==null&&Af(t,e,1,-1)}function Tie(e){var t=yd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:VC,lastRenderedState:e},t.queue=e,e=e.dispatch=kje.bind(null,Ii,e),[t.memoizedState,e]}function HC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ii.updateQueue,t===null?(t={lastEffect:null,stores:null},Ii.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function $ye(){return _c().memoizedState}function wP(e,t,n,r){var i=yd();Ii.flags|=e,i.memoizedState=HC(1|t,n,void 0,r===void 0?null:r)}function xM(e,t,n,r){var i=_c();r=r===void 0?null:r;var s=void 0;if(ws!==null){var o=ws.memoizedState;if(s=o.destroy,r!==null&&xq(r,o.deps)){i.memoizedState=HC(t,n,s,r);return}}Ii.flags|=e,i.memoizedState=HC(1|t,n,s,r)}function Aie(e,t){return wP(8390656,8,e,t)}function Aq(e,t){return xM(2048,8,e,t)}function Mye(e,t){return xM(4,2,e,t)}function Lye(e,t){return xM(4,4,e,t)}function Fye(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jye(e,t,n){return n=n!=null?n.concat([e]):null,xM(4,4,Fye.bind(null,t,e),n)}function Cq(){}function Bye(e,t){var n=_c();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xq(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Uye(e,t){var n=_c();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xq(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zye(e,t,n){return Sv&21?($f(n,t)||(n=G0e(),Ii.lanes|=n,Tv|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Au=!0),e.memoizedState=n)}function Cje(e,t){var n=Pr;Pr=n!==0&&4>n?n:4,e(!0);var r=N5.transition;N5.transition={};try{e(!1),t()}finally{Pr=n,N5.transition=r}}function Vye(){return _c().memoizedState}function Ije(e,t,n){var r=u0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hye(e))qye(t,n);else if(n=Tye(e,t,n,r),n!==null){var i=Va();Af(n,e,r,i),Wye(n,t,r)}}function kje(e,t,n){var r=u0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hye(e))qye(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,$f(a,o)){var u=t.interleaved;u===null?(i.next=i,vq(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Tye(e,t,i,r),n!==null&&(i=Va(),Af(n,e,r,i),Wye(n,t,r))}}function Hye(e){var t=e.alternate;return e===Ii||t!==null&&t===Ii}function qye(e,t){$A=QD=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wye(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iq(e,n)}}var JD={readContext:bc,useCallback:Vo,useContext:Vo,useEffect:Vo,useImperativeHandle:Vo,useInsertionEffect:Vo,useLayoutEffect:Vo,useMemo:Vo,useReducer:Vo,useRef:Vo,useState:Vo,useDebugValue:Vo,useDeferredValue:Vo,useTransition:Vo,useMutableSource:Vo,useSyncExternalStore:Vo,useId:Vo,unstable_isNewReconciler:!1},Rje={readContext:bc,useCallback:function(e,t){return yd().memoizedState=[e,t===void 0?null:t],e},useContext:bc,useEffect:Aie,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,wP(4194308,4,Fye.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wP(4194308,4,e,t)},useInsertionEffect:function(e,t){return wP(4,2,e,t)},useMemo:function(e,t){var n=yd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ije.bind(null,Ii,e),[r.memoizedState,e]},useRef:function(e){var t=yd();return e={current:e},t.memoizedState=e},useState:Tie,useDebugValue:Cq,useDeferredValue:function(e){return yd().memoizedState=e},useTransition:function(){var e=Tie(!1),t=e[0];return e=Cje.bind(null,e[1]),yd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ii,i=yd();if(bi){if(n===void 0)throw Error(et(407));n=n()}else{if(n=t(),io===null)throw Error(et(349));Sv&30||Rye(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Aie(Pye.bind(null,r,s,e),[e]),r.flags|=2048,HC(9,Nye.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=yd(),t=io.identifierPrefix;if(bi){var n=Dp,r=Pp;n=(r&~(1<<32-Tf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=zC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Aje++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nje={readContext:bc,useCallback:Bye,useContext:bc,useEffect:Aq,useImperativeHandle:jye,useInsertionEffect:Mye,useLayoutEffect:Lye,useMemo:Uye,useReducer:P5,useRef:$ye,useState:function(){return P5(VC)},useDebugValue:Cq,useDeferredValue:function(e){var t=_c();return zye(t,ws.memoizedState,e)},useTransition:function(){var e=P5(VC)[0],t=_c().memoizedState;return[e,t]},useMutableSource:Iye,useSyncExternalStore:kye,useId:Vye,unstable_isNewReconciler:!1},Pje={readContext:bc,useCallback:Bye,useContext:bc,useEffect:Aq,useImperativeHandle:jye,useInsertionEffect:Mye,useLayoutEffect:Lye,useMemo:Uye,useReducer:D5,useRef:$ye,useState:function(){return D5(VC)},useDebugValue:Cq,useDeferredValue:function(e){var t=_c();return ws===null?t.memoizedState=e:zye(t,ws.memoizedState,e)},useTransition:function(){var e=D5(VC)[0],t=_c().memoizedState;return[e,t]},useMutableSource:Iye,useSyncExternalStore:kye,useId:Vye,unstable_isNewReconciler:!1};function nf(e,t){if(e&&e.defaultProps){t=Ni({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function FB(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ni({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var SM={isMounted:function(e){return(e=e._reactInternals)?mb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Va(),i=u0(e),s=qp(r,i);s.payload=t,n!=null&&(s.callback=n),t=o0(e,s,i),t!==null&&(Af(t,e,i,r),bP(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Va(),i=u0(e),s=qp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=o0(e,s,i),t!==null&&(Af(t,e,i,r),bP(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Va(),r=u0(e),i=qp(n,r);i.tag=2,t!=null&&(i.callback=t),t=o0(e,i,r),t!==null&&(Af(t,e,r,n),bP(t,e,r))}};function Cie(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!MC(n,r)||!MC(i,s):!0}function Gye(e,t,n){var r=!1,i=I0,s=t.contextType;return typeof s=="object"&&s!==null?s=bc(s):(i=Du(t)?Ev:ma.current,r=t.contextTypes,s=(r=r!=null)?Qw(e,i):I0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=SM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Iie(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&SM.enqueueReplaceState(t,t.state,null)}function jB(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},bq(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=bc(s):(s=Du(t)?Ev:ma.current,i.context=Qw(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(FB(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&SM.enqueueReplaceState(i,i.state,null),KD(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function tE(e,t){try{var n="",r=t;do n+=o8e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function O5(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function BB(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Dje=typeof WeakMap=="function"?WeakMap:Map;function Yye(e,t,n){n=qp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){eO||(eO=!0,XB=r),BB(e,t)},n}function Kye(e,t,n){n=qp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){BB(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){BB(e,t),typeof r!="function"&&(a0===null?a0=new Set([this]):a0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function kie(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Dje;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Gje.bind(null,e,t,n),t.then(e,e))}function Rie(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Nie(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qp(-1,1),t.tag=2,o0(n,t,1))),n.lanes|=1),e)}var Oje=$m.ReactCurrentOwner,Au=!1;function Pa(e,t,n,r){t.child=e===null?Sye(t,null,n,r):Zw(t,e.child,n,r)}function Pie(e,t,n,r,i){n=n.render;var s=t.ref;return hw(t,i),r=Sq(e,t,n,r,s,i),n=Tq(),e!==null&&!Au?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,am(e,t,i)):(bi&&n&&dq(t),t.flags|=1,Pa(e,t,r,i),t.child)}function Die(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!$q(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Xye(e,t,s,r,i)):(e=TP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:MC,n(o,r)&&e.ref===t.ref)return am(e,t,i)}return t.flags|=1,e=l0(s,r),e.ref=t.ref,e.return=t,t.child=e}function Xye(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(MC(s,r)&&e.ref===t.ref)if(Au=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Au=!0);else return t.lanes=e.lanes,am(e,t,i)}return UB(e,t,n,r,i)}function Qye(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jr(Y_,ll),ll|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Jr(Y_,ll),ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Jr(Y_,ll),ll|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Jr(Y_,ll),ll|=r;return Pa(e,t,i,n),t.child}function Jye(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function UB(e,t,n,r,i){var s=Du(n)?Ev:ma.current;return s=Qw(t,s),hw(t,i),n=Sq(e,t,n,r,s,i),r=Tq(),e!==null&&!Au?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,am(e,t,i)):(bi&&r&&dq(t),t.flags|=1,Pa(e,t,n,i),t.child)}function Oie(e,t,n,r,i){if(Du(n)){var s=!0;HD(t)}else s=!1;if(hw(t,i),t.stateNode===null)EP(e,t),Gye(t,n,r),jB(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=bc(l):(l=Du(n)?Ev:ma.current,l=Qw(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Iie(t,o,r,l),xg=!1;var d=t.memoizedState;o.state=d,KD(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Pu.current||xg?(typeof c=="function"&&(FB(t,n,c,r),u=t.memoizedState),(a=xg||Cie(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Aye(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:nf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=bc(u):(u=Du(n)?Ev:ma.current,u=Qw(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Iie(t,o,r,u),xg=!1,d=t.memoizedState,o.state=d,KD(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Pu.current||xg?(typeof h=="function"&&(FB(t,n,h,r),p=t.memoizedState),(l=xg||Cie(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return zB(e,t,n,r,s,i)}function zB(e,t,n,r,i,s){Jye(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&bie(t,n,!1),am(e,t,s);r=t.stateNode,Oje.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Zw(t,e.child,null,s),t.child=Zw(t,null,a,s)):Pa(e,t,a,s),t.memoizedState=r.state,i&&bie(t,n,!0),t.child}function Zye(e){var t=e.stateNode;t.pendingContext?vie(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vie(e,t.context,!1),_q(e,t.containerInfo)}function $ie(e,t,n,r,i){return Jw(),pq(i),t.flags|=256,Pa(e,t,n,r),t.child}var VB={dehydrated:null,treeContext:null,retryLane:0};function HB(e){return{baseLanes:e,cachePool:null,transitions:null}}function e1e(e,t,n){var r=t.pendingProps,i=Ci.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Jr(Ci,i&1),e===null)return MB(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=CM(o,r,0,null),e=ov(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=HB(n),t.memoizedState=VB,e):Iq(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $je(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=l0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=l0(a,s):(s=ov(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?HB(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=VB,r}return s=e.child,e=s.sibling,r=l0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Iq(e,t){return t=CM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function FR(e,t,n,r){return r!==null&&pq(r),Zw(t,e.child,null,n),e=Iq(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $je(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=O5(Error(et(422))),FR(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=CM({mode:"visible",children:r.children},i,0,null),s=ov(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Zw(t,e.child,null,o),t.child.memoizedState=HB(o),t.memoizedState=VB,s);if(!(t.mode&1))return FR(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(et(419)),r=O5(s,r,void 0),FR(e,t,o,r)}if(a=(o&e.childLanes)!==0,Au||a){if(r=io,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,om(e,i),Af(r,e,i,-1))}return Oq(),r=O5(Error(et(421))),FR(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Yje.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,gl=s0(i.nextSibling),xl=t,bi=!0,lf=null,e!==null&&(rc[ic++]=Pp,rc[ic++]=Dp,rc[ic++]=xv,Pp=e.id,Dp=e.overflow,xv=t),t=Iq(t,r.children),t.flags|=4096,t)}function Mie(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),LB(e.return,t,n)}function $5(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function t1e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Pa(e,t,r.children,n),r=Ci.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mie(e,n,t);else if(e.tag===19)Mie(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Jr(Ci,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&XD(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$5(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&XD(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$5(t,!0,n,null,s);break;case"together":$5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function EP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function am(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Tv|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,n=l0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=l0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Mje(e,t,n){switch(t.tag){case 3:Zye(t),Jw();break;case 5:Cye(t);break;case 1:Du(t.type)&&HD(t);break;case 4:_q(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Jr(GD,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Jr(Ci,Ci.current&1),t.flags|=128,null):n&t.child.childLanes?e1e(e,t,n):(Jr(Ci,Ci.current&1),e=am(e,t,n),e!==null?e.sibling:null);Jr(Ci,Ci.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return t1e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Jr(Ci,Ci.current),r)break;return null;case 22:case 23:return t.lanes=0,Qye(e,t,n)}return am(e,t,n)}var n1e,qB,r1e,i1e;n1e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qB=function(){};r1e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,U1(Kd.current);var s=null;switch(n){case"input":i=hB(e,i),r=hB(e,r),s=[];break;case"select":i=Ni({},i,{value:void 0}),r=Ni({},r,{value:void 0}),s=[];break;case"textarea":i=gB(e,i),r=gB(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=zD)}vB(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(kC.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(kC.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ii("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};i1e=function(e,t,n,r){n!==r&&(t.flags|=4)};function HS(e,t){if(!bi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ho(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Lje(e,t,n){var r=t.pendingProps;switch(hq(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:return Du(t.type)&&VD(),Ho(t),null;case 3:return r=t.stateNode,eE(),li(Pu),li(ma),Eq(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(MR(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,lf!==null&&(ZB(lf),lf=null))),qB(e,t),Ho(t),null;case 5:wq(t);var i=U1(UC.current);if(n=t.type,e!==null&&t.stateNode!=null)r1e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(et(166));return Ho(t),null}if(e=U1(Kd.current),MR(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Cd]=t,r[jC]=s,e=(t.mode&1)!==0,n){case"dialog":ii("cancel",r),ii("close",r);break;case"iframe":case"object":case"embed":ii("load",r);break;case"video":case"audio":for(i=0;i<zT.length;i++)ii(zT[i],r);break;case"source":ii("error",r);break;case"img":case"image":case"link":ii("error",r),ii("load",r);break;case"details":ii("toggle",r);break;case"input":qre(r,s),ii("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ii("invalid",r);break;case"textarea":Gre(r,s),ii("invalid",r)}vB(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&$R(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$R(r.textContent,a,e),i=["children",""+a]):kC.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ii("scroll",r)}switch(n){case"input":CR(r),Wre(r,s,!0);break;case"textarea":CR(r),Yre(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=zD)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=P0e(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Cd]=t,e[jC]=r,n1e(e,t,!1,!1),t.stateNode=e;e:{switch(o=bB(n,r),n){case"dialog":ii("cancel",e),ii("close",e),i=r;break;case"iframe":case"object":case"embed":ii("load",e),i=r;break;case"video":case"audio":for(i=0;i<zT.length;i++)ii(zT[i],e);i=r;break;case"source":ii("error",e),i=r;break;case"img":case"image":case"link":ii("error",e),ii("load",e),i=r;break;case"details":ii("toggle",e),i=r;break;case"input":qre(e,r),i=hB(e,r),ii("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ni({},r,{value:void 0}),ii("invalid",e);break;case"textarea":Gre(e,r),i=gB(e,r),ii("invalid",e);break;default:i=r}vB(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?$0e(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&D0e(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&RC(e,u):typeof u=="number"&&RC(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(kC.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ii("scroll",e):u!=null&&JH(e,s,u,o))}switch(n){case"input":CR(e),Wre(e,r,!1);break;case"textarea":CR(e),Yre(e);break;case"option":r.value!=null&&e.setAttribute("value",""+C0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?lw(e,!!r.multiple,s,!1):r.defaultValue!=null&&lw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=zD)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&t.stateNode!=null)i1e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(et(166));if(n=U1(UC.current),U1(Kd.current),MR(t)){if(r=t.stateNode,n=t.memoizedProps,r[Cd]=t,(s=r.nodeValue!==n)&&(e=xl,e!==null))switch(e.tag){case 3:$R(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$R(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cd]=t,t.stateNode=r}return Ho(t),null;case 13:if(li(Ci),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(bi&&gl!==null&&t.mode&1&&!(t.flags&128))Eye(),Jw(),t.flags|=98560,s=!1;else if(s=MR(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(et(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[Cd]=t}else Jw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ho(t),s=!1}else lf!==null&&(ZB(lf),lf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ci.current&1?Cs===0&&(Cs=3):Oq())),t.updateQueue!==null&&(t.flags|=4),Ho(t),null);case 4:return eE(),qB(e,t),e===null&&LC(t.stateNode.containerInfo),Ho(t),null;case 10:return yq(t.type._context),Ho(t),null;case 17:return Du(t.type)&&VD(),Ho(t),null;case 19:if(li(Ci),s=t.memoizedState,s===null)return Ho(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)HS(s,!1);else{if(Cs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=XD(e),o!==null){for(t.flags|=128,HS(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Jr(Ci,Ci.current&1|2),t.child}e=e.sibling}s.tail!==null&&ns()>nE&&(t.flags|=128,r=!0,HS(s,!1),t.lanes=4194304)}else{if(!r)if(e=XD(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),HS(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bi)return Ho(t),null}else 2*ns()-s.renderingStartTime>nE&&n!==1073741824&&(t.flags|=128,r=!0,HS(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ns(),t.sibling=null,n=Ci.current,Jr(Ci,r?n&1|2:n&1),t):(Ho(t),null);case 22:case 23:return Dq(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ll&1073741824&&(Ho(t),t.subtreeFlags&6&&(t.flags|=8192)):Ho(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function Fje(e,t){switch(hq(t),t.tag){case 1:return Du(t.type)&&VD(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return eE(),li(Pu),li(ma),Eq(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wq(t),null;case 13:if(li(Ci),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));Jw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return li(Ci),null;case 4:return eE(),null;case 10:return yq(t.type._context),null;case 22:case 23:return Dq(),null;case 24:return null;default:return null}}var jR=!1,na=!1,jje=typeof WeakSet=="function"?WeakSet:Set,xt=null;function G_(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Bi(e,t,r)}else n.current=null}function WB(e,t,n){try{n()}catch(r){Bi(e,t,r)}}var Lie=!1;function Bje(e,t){if(kB=jD,e=lye(),fq(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(RB={focusedElem:e,selectionRange:n},jD=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:nf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(w){Bi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=Lie,Lie=!1,p}function MA(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&WB(t,n,s)}i=i.next}while(i!==r)}}function TM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function GB(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function s1e(e){var t=e.alternate;t!==null&&(e.alternate=null,s1e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Cd],delete t[jC],delete t[DB],delete t[Eje],delete t[xje])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function o1e(e){return e.tag===5||e.tag===3||e.tag===4}function Fie(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||o1e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function YB(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=zD));else if(r!==4&&(e=e.child,e!==null))for(YB(e,t,n),e=e.sibling;e!==null;)YB(e,t,n),e=e.sibling}function KB(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(KB(e,t,n),e=e.sibling;e!==null;)KB(e,t,n),e=e.sibling}var vo=null,sf=!1;function lg(e,t,n){for(n=n.child;n!==null;)a1e(e,t,n),n=n.sibling}function a1e(e,t,n){if(Yd&&typeof Yd.onCommitFiberUnmount=="function")try{Yd.onCommitFiberUnmount(yM,n)}catch{}switch(n.tag){case 5:na||G_(n,t);case 6:var r=vo,i=sf;vo=null,lg(e,t,n),vo=r,sf=i,vo!==null&&(sf?(e=vo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):vo.removeChild(n.stateNode));break;case 18:vo!==null&&(sf?(e=vo,n=n.stateNode,e.nodeType===8?I5(e.parentNode,n):e.nodeType===1&&I5(e,n),OC(e)):I5(vo,n.stateNode));break;case 4:r=vo,i=sf,vo=n.stateNode.containerInfo,sf=!0,lg(e,t,n),vo=r,sf=i;break;case 0:case 11:case 14:case 15:if(!na&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&WB(n,t,o),i=i.next}while(i!==r)}lg(e,t,n);break;case 1:if(!na&&(G_(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Bi(n,t,a)}lg(e,t,n);break;case 21:lg(e,t,n);break;case 22:n.mode&1?(na=(r=na)||n.memoizedState!==null,lg(e,t,n),na=r):lg(e,t,n);break;default:lg(e,t,n)}}function jie(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new jje),t.forEach(function(r){var i=Kje.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:vo=a.stateNode,sf=!1;break e;case 3:vo=a.stateNode.containerInfo,sf=!0;break e;case 4:vo=a.stateNode.containerInfo,sf=!0;break e}a=a.return}if(vo===null)throw Error(et(160));a1e(s,o,i),vo=null,sf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Bi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)u1e(t,e),t=t.sibling}function u1e(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hc(t,e),ld(e),r&4){try{MA(3,e,e.return),TM(3,e)}catch(m){Bi(e,e.return,m)}try{MA(5,e,e.return)}catch(m){Bi(e,e.return,m)}}break;case 1:Hc(t,e),ld(e),r&512&&n!==null&&G_(n,n.return);break;case 5:if(Hc(t,e),ld(e),r&512&&n!==null&&G_(n,n.return),e.flags&32){var i=e.stateNode;try{RC(i,"")}catch(m){Bi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&R0e(i,s),bB(a,o);var l=bB(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?$0e(i,f):c==="dangerouslySetInnerHTML"?D0e(i,f):c==="children"?RC(i,f):JH(i,c,f,l)}switch(a){case"input":pB(i,s);break;case"textarea":N0e(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?lw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?lw(i,!!s.multiple,s.defaultValue,!0):lw(i,!!s.multiple,s.multiple?[]:"",!1))}i[jC]=s}catch(m){Bi(e,e.return,m)}}break;case 6:if(Hc(t,e),ld(e),r&4){if(e.stateNode===null)throw Error(et(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Bi(e,e.return,m)}}break;case 3:if(Hc(t,e),ld(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{OC(t.containerInfo)}catch(m){Bi(e,e.return,m)}break;case 4:Hc(t,e),ld(e);break;case 13:Hc(t,e),ld(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Nq=ns())),r&4&&jie(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(na=(l=na)||c,Hc(t,e),na=l):Hc(t,e),ld(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:MA(4,d,d.return);break;case 1:G_(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Bi(r,n,m)}}break;case 5:G_(d,d.return);break;case 22:if(d.memoizedState!==null){Uie(f);continue}}h!==null?(h.return=d,xt=h):Uie(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=O0e("display",o))}catch(m){Bi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Bi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Hc(t,e),ld(e),r&4&&jie(e);break;case 21:break;default:Hc(t,e),ld(e)}}function ld(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(o1e(n)){var r=n;break e}n=n.return}throw Error(et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(RC(i,""),r.flags&=-33);var s=Fie(e);KB(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Fie(e);YB(e,a,o);break;default:throw Error(et(161))}}catch(u){Bi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uje(e,t,n){xt=e,l1e(e)}function l1e(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||jR;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||na;a=jR;var l=na;if(jR=o,(na=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?zie(i):u!==null?(u.return=o,xt=u):zie(i);for(;s!==null;)xt=s,l1e(s),s=s.sibling;xt=i,jR=a,na=l}Bie(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):Bie(e)}}function Bie(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:na||TM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!na)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:nf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Sie(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Sie(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&OC(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}na||t.flags&512&&GB(t)}catch(d){Bi(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function Uie(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function zie(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{TM(4,t)}catch(u){Bi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Bi(t,i,u)}}var s=t.return;try{GB(t)}catch(u){Bi(t,s,u)}break;case 5:var o=t.return;try{GB(t)}catch(u){Bi(t,o,u)}}}catch(u){Bi(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var zje=Math.ceil,ZD=$m.ReactCurrentDispatcher,kq=$m.ReactCurrentOwner,gc=$m.ReactCurrentBatchConfig,ar=0,io=null,gs=null,Ao=0,ll=0,Y_=my(0),Cs=0,qC=null,Tv=0,AM=0,Rq=0,LA=null,vu=null,Nq=0,nE=1/0,pp=null,eO=!1,XB=null,a0=null,BR=!1,zg=null,tO=0,FA=0,QB=null,xP=-1,SP=0;function Va(){return ar&6?ns():xP!==-1?xP:xP=ns()}function u0(e){return e.mode&1?ar&2&&Ao!==0?Ao&-Ao:Tje.transition!==null?(SP===0&&(SP=G0e()),SP):(e=Pr,e!==0||(e=window.event,e=e===void 0?16:eye(e.type)),e):1}function Af(e,t,n,r){if(50<FA)throw FA=0,QB=null,Error(et(185));vI(e,n,r),(!(ar&2)||e!==io)&&(e===io&&(!(ar&2)&&(AM|=n),Cs===4&&Pg(e,Ao)),Ou(e,r),n===1&&ar===0&&!(t.mode&1)&&(nE=ns()+500,EM&&gy()))}function Ou(e,t){var n=e.callbackNode;T8e(e,t);var r=FD(e,e===io?Ao:0);if(r===0)n!==null&&Qre(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Qre(n),t===1)e.tag===0?Sje(Vie.bind(null,e)):bye(Vie.bind(null,e)),_je(function(){!(ar&6)&&gy()}),n=null;else{switch(Y0e(r)){case 1:n=rq;break;case 4:n=q0e;break;case 16:n=LD;break;case 536870912:n=W0e;break;default:n=LD}n=y1e(n,c1e.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function c1e(e,t){if(xP=-1,SP=0,ar&6)throw Error(et(327));var n=e.callbackNode;if(pw()&&e.callbackNode!==n)return null;var r=FD(e,e===io?Ao:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=nO(e,r);else{t=r;var i=ar;ar|=2;var s=d1e();(io!==e||Ao!==t)&&(pp=null,nE=ns()+500,sv(e,t));do try{qje();break}catch(a){f1e(e,a)}while(!0);gq(),ZD.current=s,ar=i,gs!==null?t=0:(io=null,Ao=0,t=Cs)}if(t!==0){if(t===2&&(i=SB(e),i!==0&&(r=i,t=JB(e,i))),t===1)throw n=qC,sv(e,0),Pg(e,r),Ou(e,ns()),n;if(t===6)Pg(e,r);else{if(i=e.current.alternate,!(r&30)&&!Vje(i)&&(t=nO(e,r),t===2&&(s=SB(e),s!==0&&(r=s,t=JB(e,s))),t===1))throw n=qC,sv(e,0),Pg(e,r),Ou(e,ns()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(et(345));case 2:d1(e,vu,pp);break;case 3:if(Pg(e,r),(r&130023424)===r&&(t=Nq+500-ns(),10<t)){if(FD(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Va(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=PB(d1.bind(null,e,vu,pp),t);break}d1(e,vu,pp);break;case 4:if(Pg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Tf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ns()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zje(r/1960))-r,10<r){e.timeoutHandle=PB(d1.bind(null,e,vu,pp),r);break}d1(e,vu,pp);break;case 5:d1(e,vu,pp);break;default:throw Error(et(329))}}}return Ou(e,ns()),e.callbackNode===n?c1e.bind(null,e):null}function JB(e,t){var n=LA;return e.current.memoizedState.isDehydrated&&(sv(e,t).flags|=256),e=nO(e,t),e!==2&&(t=vu,vu=n,t!==null&&ZB(t)),e}function ZB(e){vu===null?vu=e:vu.push.apply(vu,e)}function Vje(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$f(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pg(e,t){for(t&=~Rq,t&=~AM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Tf(t),r=1<<n;e[n]=-1,t&=~r}}function Vie(e){if(ar&6)throw Error(et(327));pw();var t=FD(e,0);if(!(t&1))return Ou(e,ns()),null;var n=nO(e,t);if(e.tag!==0&&n===2){var r=SB(e);r!==0&&(t=r,n=JB(e,r))}if(n===1)throw n=qC,sv(e,0),Pg(e,t),Ou(e,ns()),n;if(n===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,d1(e,vu,pp),Ou(e,ns()),null}function Pq(e,t){var n=ar;ar|=1;try{return e(t)}finally{ar=n,ar===0&&(nE=ns()+500,EM&&gy())}}function Av(e){zg!==null&&zg.tag===0&&!(ar&6)&&pw();var t=ar;ar|=1;var n=gc.transition,r=Pr;try{if(gc.transition=null,Pr=1,e)return e()}finally{Pr=r,gc.transition=n,ar=t,!(ar&6)&&gy()}}function Dq(){ll=Y_.current,li(Y_)}function sv(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,bje(n)),gs!==null)for(n=gs.return;n!==null;){var r=n;switch(hq(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&VD();break;case 3:eE(),li(Pu),li(ma),Eq();break;case 5:wq(r);break;case 4:eE();break;case 13:li(Ci);break;case 19:li(Ci);break;case 10:yq(r.type._context);break;case 22:case 23:Dq()}n=n.return}if(io=e,gs=e=l0(e.current,null),Ao=ll=t,Cs=0,qC=null,Rq=AM=Tv=0,vu=LA=null,B1!==null){for(t=0;t<B1.length;t++)if(n=B1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}B1=null}return e}function f1e(e,t){do{var n=gs;try{if(gq(),_P.current=JD,QD){for(var r=Ii.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}QD=!1}if(Sv=0,Gs=ws=Ii=null,$A=!1,zC=0,kq.current=null,n===null||n.return===null){Cs=1,qC=t,gs=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Ao,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Rie(o);if(h!==null){h.flags&=-257,Nie(h,o,a,s,t),h.mode&1&&kie(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){kie(s,l,t),Oq();break e}u=Error(et(426))}}else if(bi&&a.mode&1){var g=Rie(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Nie(g,o,a,s,t),pq(tE(u,a));break e}}s=u=tE(u,a),Cs!==4&&(Cs=2),LA===null?LA=[s]:LA.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Yye(s,u,t);xie(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(a0===null||!a0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=Kye(s,a,t);xie(s,w);break e}}s=s.return}while(s!==null)}p1e(n)}catch(E){t=E,gs===n&&n!==null&&(gs=n=n.return);continue}break}while(!0)}function d1e(){var e=ZD.current;return ZD.current=JD,e===null?JD:e}function Oq(){(Cs===0||Cs===3||Cs===2)&&(Cs=4),io===null||!(Tv&268435455)&&!(AM&268435455)||Pg(io,Ao)}function nO(e,t){var n=ar;ar|=2;var r=d1e();(io!==e||Ao!==t)&&(pp=null,sv(e,t));do try{Hje();break}catch(i){f1e(e,i)}while(!0);if(gq(),ar=n,ZD.current=r,gs!==null)throw Error(et(261));return io=null,Ao=0,Cs}function Hje(){for(;gs!==null;)h1e(gs)}function qje(){for(;gs!==null&&!g8e();)h1e(gs)}function h1e(e){var t=g1e(e.alternate,e,ll);e.memoizedProps=e.pendingProps,t===null?p1e(e):gs=t,kq.current=null}function p1e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Fje(n,t),n!==null){n.flags&=32767,gs=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Cs=6,gs=null;return}}else if(n=Lje(n,t,ll),n!==null){gs=n;return}if(t=t.sibling,t!==null){gs=t;return}gs=t=e}while(t!==null);Cs===0&&(Cs=5)}function d1(e,t,n){var r=Pr,i=gc.transition;try{gc.transition=null,Pr=1,Wje(e,t,n,r)}finally{gc.transition=i,Pr=r}return null}function Wje(e,t,n,r){do pw();while(zg!==null);if(ar&6)throw Error(et(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(A8e(e,s),e===io&&(gs=io=null,Ao=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||BR||(BR=!0,y1e(LD,function(){return pw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gc.transition,gc.transition=null;var o=Pr;Pr=1;var a=ar;ar|=4,kq.current=null,Bje(e,n),u1e(n,e),dje(RB),jD=!!kB,RB=kB=null,e.current=n,Uje(n),y8e(),ar=a,Pr=o,gc.transition=s}else e.current=n;if(BR&&(BR=!1,zg=e,tO=i),s=e.pendingLanes,s===0&&(a0=null),_8e(n.stateNode),Ou(e,ns()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(eO)throw eO=!1,e=XB,XB=null,e;return tO&1&&e.tag!==0&&pw(),s=e.pendingLanes,s&1?e===QB?FA++:(FA=0,QB=e):FA=0,gy(),null}function pw(){if(zg!==null){var e=Y0e(tO),t=gc.transition,n=Pr;try{if(gc.transition=null,Pr=16>e?16:e,zg===null)var r=!1;else{if(e=zg,zg=null,tO=0,ar&6)throw Error(et(331));var i=ar;for(ar|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:MA(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(s1e(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:MA(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,xt=b;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:TM(9,a)}}catch(E){Bi(a,a.return,E)}if(a===o){xt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,xt=w;break e}xt=a.return}}if(ar=i,gy(),Yd&&typeof Yd.onPostCommitFiberRoot=="function")try{Yd.onPostCommitFiberRoot(yM,e)}catch{}r=!0}return r}finally{Pr=n,gc.transition=t}}return!1}function Hie(e,t,n){t=tE(n,t),t=Yye(e,t,1),e=o0(e,t,1),t=Va(),e!==null&&(vI(e,1,t),Ou(e,t))}function Bi(e,t,n){if(e.tag===3)Hie(e,e,n);else for(;t!==null;){if(t.tag===3){Hie(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(a0===null||!a0.has(r))){e=tE(n,e),e=Kye(t,e,1),t=o0(t,e,1),e=Va(),t!==null&&(vI(t,1,e),Ou(t,e));break}}t=t.return}}function Gje(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Va(),e.pingedLanes|=e.suspendedLanes&n,io===e&&(Ao&n)===n&&(Cs===4||Cs===3&&(Ao&130023424)===Ao&&500>ns()-Nq?sv(e,0):Rq|=n),Ou(e,t)}function m1e(e,t){t===0&&(e.mode&1?(t=RR,RR<<=1,!(RR&130023424)&&(RR=4194304)):t=1);var n=Va();e=om(e,t),e!==null&&(vI(e,t,n),Ou(e,n))}function Yje(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),m1e(e,n)}function Kje(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(et(314))}r!==null&&r.delete(t),m1e(e,n)}var g1e;g1e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pu.current)Au=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Au=!1,Mje(e,t,n);Au=!!(e.flags&131072)}else Au=!1,bi&&t.flags&1048576&&_ye(t,WD,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;EP(e,t),e=t.pendingProps;var i=Qw(t,ma.current);hw(t,n),i=Sq(null,t,r,e,i,n);var s=Tq();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Du(r)?(s=!0,HD(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bq(t),i.updater=SM,t.stateNode=i,i._reactInternals=t,jB(t,r,e,n),t=zB(null,t,r,!0,s,n)):(t.tag=0,bi&&s&&dq(t),Pa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(EP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Qje(r),e=nf(r,e),i){case 0:t=UB(null,t,r,e,n);break e;case 1:t=Oie(null,t,r,e,n);break e;case 11:t=Pie(null,t,r,e,n);break e;case 14:t=Die(null,t,r,nf(r.type,e),n);break e}throw Error(et(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nf(r,i),UB(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nf(r,i),Oie(e,t,r,i,n);case 3:e:{if(Zye(t),e===null)throw Error(et(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Aye(e,t),KD(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=tE(Error(et(423)),t),t=$ie(e,t,r,n,i);break e}else if(r!==i){i=tE(Error(et(424)),t),t=$ie(e,t,r,n,i);break e}else for(gl=s0(t.stateNode.containerInfo.firstChild),xl=t,bi=!0,lf=null,n=Sye(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jw(),r===i){t=am(e,t,n);break e}Pa(e,t,r,n)}t=t.child}return t;case 5:return Cye(t),e===null&&MB(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,NB(r,i)?o=null:s!==null&&NB(r,s)&&(t.flags|=32),Jye(e,t),Pa(e,t,o,n),t.child;case 6:return e===null&&MB(t),null;case 13:return e1e(e,t,n);case 4:return _q(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Zw(t,null,r,n):Pa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nf(r,i),Pie(e,t,r,i,n);case 7:return Pa(e,t,t.pendingProps,n),t.child;case 8:return Pa(e,t,t.pendingProps.children,n),t.child;case 12:return Pa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Jr(GD,r._currentValue),r._currentValue=o,s!==null)if($f(s.value,o)){if(s.children===i.children&&!Pu.current){t=am(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=qp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),LB(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(et(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),LB(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Pa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,hw(t,n),i=bc(i),r=r(i),t.flags|=1,Pa(e,t,r,n),t.child;case 14:return r=t.type,i=nf(r,t.pendingProps),i=nf(r.type,i),Die(e,t,r,i,n);case 15:return Xye(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nf(r,i),EP(e,t),t.tag=1,Du(r)?(e=!0,HD(t)):e=!1,hw(t,n),Gye(t,r,i),jB(t,r,i,n),zB(null,t,r,!0,e,n);case 19:return t1e(e,t,n);case 22:return Qye(e,t,n)}throw Error(et(156,t.tag))};function y1e(e,t){return H0e(e,t)}function Xje(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fc(e,t,n,r){return new Xje(e,t,n,r)}function $q(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qje(e){if(typeof e=="function")return $q(e)?1:0;if(e!=null){if(e=e.$$typeof,e===eq)return 11;if(e===tq)return 14}return 2}function l0(e,t){var n=e.alternate;return n===null?(n=fc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function TP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")$q(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case F_:return ov(n.children,i,s,t);case ZH:o=8,i|=8;break;case lB:return e=fc(12,n,t,i|2),e.elementType=lB,e.lanes=s,e;case cB:return e=fc(13,n,t,i),e.elementType=cB,e.lanes=s,e;case fB:return e=fc(19,n,t,i),e.elementType=fB,e.lanes=s,e;case C0e:return CM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T0e:o=10;break e;case A0e:o=9;break e;case eq:o=11;break e;case tq:o=14;break e;case Eg:o=16,r=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=fc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function ov(e,t,n,r){return e=fc(7,e,r,t),e.lanes=n,e}function CM(e,t,n,r){return e=fc(22,e,r,t),e.elementType=C0e,e.lanes=n,e.stateNode={isHidden:!1},e}function M5(e,t,n){return e=fc(6,e,null,t),e.lanes=n,e}function L5(e,t,n){return t=fc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jje(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=y5(0),this.expirationTimes=y5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=y5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mq(e,t,n,r,i,s,o,a,u){return e=new Jje(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=fc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bq(s),e}function Zje(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function v1e(e){if(!e)return I0;e=e._reactInternals;e:{if(mb(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Du(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var n=e.type;if(Du(n))return vye(e,n,t)}return t}function b1e(e,t,n,r,i,s,o,a,u){return e=Mq(n,r,!0,e,i,s,o,a,u),e.context=v1e(null),n=e.current,r=Va(),i=u0(n),s=qp(r,i),s.callback=t??null,o0(n,s,i),e.current.lanes=i,vI(e,i,r),Ou(e,r),e}function IM(e,t,n,r){var i=t.current,s=Va(),o=u0(i);return n=v1e(n),t.context===null?t.context=n:t.pendingContext=n,t=qp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=o0(i,t,o),e!==null&&(Af(e,i,o,s),bP(e,i,o)),o}function rO(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qie(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Lq(e,t){qie(e,t),(e=e.alternate)&&qie(e,t)}function e9e(){return null}var _1e=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fq(e){this._internalRoot=e}kM.prototype.render=Fq.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));IM(e,t,null,null)};kM.prototype.unmount=Fq.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Av(function(){IM(null,e,null,null)}),t[sm]=null}};function kM(e){this._internalRoot=e}kM.prototype.unstable_scheduleHydration=function(e){if(e){var t=Q0e();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ng.length&&t!==0&&t<Ng[n].priority;n++);Ng.splice(n,0,e),n===0&&Z0e(e)}};function jq(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function RM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wie(){}function t9e(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=rO(o);s.call(l)}}var o=b1e(t,r,e,0,null,!1,!1,"",Wie);return e._reactRootContainer=o,e[sm]=o.current,LC(e.nodeType===8?e.parentNode:e),Av(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=rO(u);a.call(l)}}var u=Mq(e,0,!1,null,null,!1,!1,"",Wie);return e._reactRootContainer=u,e[sm]=u.current,LC(e.nodeType===8?e.parentNode:e),Av(function(){IM(t,u,n,r)}),u}function NM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=rO(o);a.call(u)}}IM(t,o,e,i)}else o=t9e(n,t,e,i,r);return rO(o)}K0e=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=UT(t.pendingLanes);n!==0&&(iq(t,n|1),Ou(t,ns()),!(ar&6)&&(nE=ns()+500,gy()))}break;case 13:Av(function(){var r=om(e,1);if(r!==null){var i=Va();Af(r,e,1,i)}}),Lq(e,1)}};sq=function(e){if(e.tag===13){var t=om(e,134217728);if(t!==null){var n=Va();Af(t,e,134217728,n)}Lq(e,134217728)}};X0e=function(e){if(e.tag===13){var t=u0(e),n=om(e,t);if(n!==null){var r=Va();Af(n,e,t,r)}Lq(e,t)}};Q0e=function(){return Pr};J0e=function(e,t){var n=Pr;try{return Pr=e,t()}finally{Pr=n}};wB=function(e,t,n){switch(t){case"input":if(pB(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wM(r);if(!i)throw Error(et(90));k0e(r),pB(r,i)}}}break;case"textarea":N0e(e,n);break;case"select":t=n.value,t!=null&&lw(e,!!n.multiple,t,!1)}};F0e=Pq;j0e=Av;var n9e={usingClientEntryPoint:!1,Events:[_I,z_,wM,M0e,L0e,Pq]},qS={findFiberByHostInstance:j1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r9e={bundleType:qS.bundleType,version:qS.version,rendererPackageName:qS.rendererPackageName,rendererConfig:qS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$m.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=z0e(e),e===null?null:e.stateNode},findFiberByHostInstance:qS.findFiberByHostInstance||e9e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var UR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!UR.isDisabled&&UR.supportsFiber)try{yM=UR.inject(r9e),Yd=UR}catch{}}zl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n9e;zl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jq(t))throw Error(et(200));return Zje(e,t,null,n)};zl.createRoot=function(e,t){if(!jq(e))throw Error(et(299));var n=!1,r="",i=_1e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Mq(e,1,!1,null,null,n,!1,r,i),e[sm]=t.current,LC(e.nodeType===8?e.parentNode:e),new Fq(t)};zl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=z0e(t),e=e===null?null:e.stateNode,e};zl.flushSync=function(e){return Av(e)};zl.hydrate=function(e,t,n){if(!RM(t))throw Error(et(200));return NM(null,e,t,!0,n)};zl.hydrateRoot=function(e,t,n){if(!jq(e))throw Error(et(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=_1e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=b1e(t,null,e,1,n??null,i,!1,s,o),e[sm]=t.current,LC(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new kM(t)};zl.render=function(e,t,n){if(!RM(t))throw Error(et(200));return NM(null,e,t,!1,n)};zl.unmountComponentAtNode=function(e){if(!RM(e))throw Error(et(40));return e._reactRootContainer?(Av(function(){NM(null,null,e,!1,function(){e._reactRootContainer=null,e[sm]=null})}),!0):!1};zl.unstable_batchedUpdates=Pq;zl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!RM(n))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return NM(e,t,n,!1,r)};zl.version="18.3.1-next-f1338f8080-20240426";function w1e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w1e)}catch(e){console.error(e)}}w1e(),w0e.exports=zl;var EI=w0e.exports;const i9e=Ul(EI);var Gie=EI;aB.createRoot=Gie.createRoot,aB.hydrateRoot=Gie.hydrateRoot;var Id=function(){return Id=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Id.apply(this,arguments)};function xI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Tp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Yie(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function s9e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Gn(e){return this instanceof Gn?(this.v=e,this):new Gn(e)}function z1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Gn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function F5(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Gn(e[i](o)),done:!1}:s?s(o):o}:s}}function jA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Yie=="function"?Yie(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var AP="right-scroll-bar-position",CP="width-before-scroll-bar",o9e="with-scroll-bars-hidden",a9e="--removed-body-scroll-bar-size";function j5(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function u9e(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var l9e=typeof window<"u"?N.useLayoutEffect:N.useEffect,Kie=new WeakMap;function c9e(e,t){var n=u9e(null,function(r){return e.forEach(function(i){return j5(i,r)})});return l9e(function(){var r=Kie.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||j5(a,null)}),s.forEach(function(a){i.has(a)||j5(a,o)})}Kie.set(n,e)},[e]),n}function f9e(e){return e}function d9e(e,t){t===void 0&&(t=f9e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function h9e(e){e===void 0&&(e={});var t=d9e(null);return t.options=Id({async:!0,ssr:!1},e),t}var E1e=function(e){var t=e.sideCar,n=xI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,Id({},n))};E1e.isSideCarExport=!0;function p9e(e,t){return e.useMedium(t),E1e}var x1e=h9e(),B5=function(){},PM=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:B5,onWheelCapture:B5,onTouchMoveCapture:B5}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=xI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=c9e([n,t]),S=Id(Id({},b),i);return N.createElement(N.Fragment,null,c&&N.createElement(w,{sideCar:x1e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?N.cloneElement(N.Children.only(a),Id(Id({},S),{ref:E})):N.createElement(y,Id({},S,{className:u,ref:E}),a))});PM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};PM.classNames={fullWidth:CP,zeroRight:AP};var m9e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function g9e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=m9e();return t&&e.setAttribute("nonce",t),e}function y9e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function v9e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var b9e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=g9e())&&(y9e(t,n),v9e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},_9e=function(){var e=b9e();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},S1e=function(){var e=_9e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},w9e={left:0,top:0,right:0,gap:0},U5=function(e){return parseInt(e||"",10)||0},E9e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[U5(n),U5(r),U5(i)]},x9e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return w9e;var t=E9e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},S9e=S1e(),mw="data-scroll-locked",T9e=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(o9e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(mw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(AP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(CP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(AP," .").concat(AP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(CP," .").concat(CP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(mw,`] {
    `).concat(a9e,": ").concat(a,`px;
  }
`)},Xie=function(){var e=parseInt(document.body.getAttribute(mw)||"0",10);return isFinite(e)?e:0},A9e=function(){N.useEffect(function(){return document.body.setAttribute(mw,(Xie()+1).toString()),function(){var e=Xie()-1;e<=0?document.body.removeAttribute(mw):document.body.setAttribute(mw,e.toString())}},[])},C9e=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;A9e();var s=N.useMemo(function(){return x9e(i)},[i]);return N.createElement(S9e,{styles:T9e(s,!t,i,n?"":"!important")})},eU=!1;if(typeof window<"u")try{var zR=Object.defineProperty({},"passive",{get:function(){return eU=!0,!0}});window.addEventListener("test",zR,zR),window.removeEventListener("test",zR,zR)}catch{eU=!1}var e_=eU?{passive:!1}:!1,I9e=function(e){return e.tagName==="TEXTAREA"},T1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!I9e(e)&&n[t]==="visible")},k9e=function(e){return T1e(e,"overflowY")},R9e=function(e){return T1e(e,"overflowX")},Qie=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=A1e(e,r);if(i){var s=C1e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},N9e=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},P9e=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},A1e=function(e,t){return e==="v"?k9e(t):R9e(t)},C1e=function(e,t){return e==="v"?N9e(t):P9e(t)},D9e=function(e,t){return e==="h"&&t==="rtl"?-1:1},O9e=function(e,t,n,r,i){var s=D9e(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=C1e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&A1e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},VR=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Jie=function(e){return[e.deltaX,e.deltaY]},Zie=function(e){return e&&"current"in e?e.current:e},$9e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},M9e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},L9e=0,t_=[];function F9e(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),i=N.useState(L9e++)[0],s=N.useState(S1e)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=s9e([e.lockRef.current],(e.shards||[]).map(Zie),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=N.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=VR(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,S=m.target,T=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&T==="h"&&S.type==="range")return!1;var A=Qie(T,S);if(!A)return!0;if(A?E=T:(E=T==="v"?"h":"v",A=Qie(T,S)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var C=r.current||E;return O9e(C,g,m,C==="h"?b:w,!0)},[]),u=N.useCallback(function(m){var g=m;if(!(!t_.length||t_[t_.length-1]!==s)){var y="deltaY"in g?Jie(g):VR(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&$9e(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(Zie).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=N.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:j9e(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=N.useCallback(function(m){n.current=VR(m),r.current=void 0},[]),f=N.useCallback(function(m){l(m.type,Jie(m),m.target,a(m,e.lockRef.current))},[]),d=N.useCallback(function(m){l(m.type,VR(m),m.target,a(m,e.lockRef.current))},[]);N.useEffect(function(){return t_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,e_),document.addEventListener("touchmove",u,e_),document.addEventListener("touchstart",c,e_),function(){t_=t_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,e_),document.removeEventListener("touchmove",u,e_),document.removeEventListener("touchstart",c,e_)}},[]);var h=e.removeScrollBar,p=e.inert;return N.createElement(N.Fragment,null,p?N.createElement(s,{styles:M9e(i)}):null,h?N.createElement(C9e,{gapMode:e.gapMode}):null)}function j9e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const B9e=p9e(x1e,F9e);var DM=N.forwardRef(function(e,t){return N.createElement(PM,Id({},e,{ref:t,sideCar:B9e}))});DM.classNames=PM.classNames;function ki(e){return Object.keys(e)}function z5(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Bq(e,t){const n={...e},r=t;return z5(e)&&z5(t)&&Object.keys(t).forEach(i=>{z5(r[i])&&i in e?n[i]=Bq(n[i],r[i]):n[i]=r[i]}),n}function U9e(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function z9e(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function tU(e){const t=z9e(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function V5(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function I1e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?V5(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?V5(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?V5(s):s}}return r}return n}const Te=I1e("rem",{shouldScale:!0}),iO=I1e("em");function yx(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function k1e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function yy(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==N.Fragment:!1}function _a(e){const t=N.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=N.useContext(t);if(i===null)throw new Error(e);return i}]}function vx(e=null){const t=N.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>N.useContext(t)]}function ese(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function sO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function V9e(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function H9e(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function q9e(e,t,n){return sO(e,n)===sO(t,n)}function R1e({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=sO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>q9e(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=H9e(l,u,r),f=V9e(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const W9e={app:100,modal:200,popover:300,overlay:400,max:9999};function Nc(e){return W9e[e]}const G9e=()=>{};function Y9e(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||G9e:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function yn(e,t="size",n=!0){if(e!==void 0)return k1e(e)?n?Te(e):e:`var(--${t}-${e})`}function Il(e){return yn(e,"mantine-spacing")}function di(e){return e===void 0?"var(--mantine-radius-default)":yn(e,"mantine-radius")}function so(e){return yn(e,"mantine-font-size")}function N1e(e){return yn(e,"mantine-line-height",!1)}function Uq(e){if(e)return yn(e,"mantine-shadow",!1)}function Op(e,t){return n=>{e==null||e(n),t==null||t(n)}}function zq(e,t){return e in t.breakpoints?tU(t.breakpoints[e]):tU(e)}function oO(e,t){const n=e.map(r=>({value:r,px:zq(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function VT(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function K9e(e,t,n){var r;return n?Array.from(((r=sO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function X9e(){const[e,t]=N.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Ud(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function BA(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function T1(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function OM(e,t){const n=T1(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const tse=["mousedown","touchstart"];function Q9e(e,t,n){const r=N.useRef();return N.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||tse).forEach(s=>document.addEventListener(s,i)),()=>{(t||tse).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function J9e(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function Z9e(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function eBe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=N.useState(n?t:Z9e(e)),s=N.useRef();return N.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),J9e(s.current,o=>i(o.matches))},[e]),r}const gb=typeof document<"u"?N.useLayoutEffect:N.useEffect;function um(e,t){const n=N.useRef(!1);N.useEffect(()=>()=>{n.current=!1},[]),N.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function P1e({opened:e,shouldReturnFocus:t=!0}){const n=N.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return um(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function tBe(e,t="body > :not(script)"){const n=BA(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const nBe=/input|select|textarea|button|object/,D1e="a, input, select, textarea, button, object, [tabindex]";function rBe(e){return e.style.display==="none"}function iBe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(rBe(n))return!1;n=n.parentNode}return!0}function O1e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function nU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(O1e(e));return(nBe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&iBe(e)}function $1e(e){const t=O1e(e);return(Number.isNaN(t)||t>=0)&&nU(e)}function sBe(e){return Array.from(e.querySelectorAll(D1e)).filter($1e)}function oBe(e,t){const n=sBe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function aBe(e=!0){const t=N.useRef(),n=N.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(D1e));o=a.find($1e)||a.find(nU)||null,!o&&nU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=N.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=tBe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return N.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&oBe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const uBe=qi.useId||(()=>{});function lBe(){const e=uBe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Zu(e){const t=lBe(),[n,r]=N.useState(t);return gb(()=>{r(BA())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function M1e(e,t,n){N.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function Vq(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function L1e(...e){return t=>{e.forEach(n=>Vq(n,t))}}function ls(...e){return N.useCallback(L1e(...e),e)}function F1e(e,t,n="ltr"){const r=N.useRef(null),i=N.useRef(!1),s=N.useRef(!1),o=N.useRef(0),[a,u]=N.useState(!1);return N.useEffect(()=>{i.current=!0},[]),N.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const T=Ud((w-S.left)/S.width,0,1);e({x:n==="ltr"?T:1-T,y:Ud((E-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Po({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=N.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function Hq(e,t){return eBe("(prefers-reduced-motion: reduce)",e,t)}const cBe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function gw(e){const t=N.useRef(0),n=N.useRef(null),[r,i]=N.useState(cBe),s=N.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return N.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function fBe(e){const[t,{width:n,height:r}]=gw(e);return{ref:t,width:n,height:r}}function dBe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function hBe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function pBe(e){return t=>hBe(dBe(e),t)}function mBe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{pBe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function yw(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=N.useState(e),o=N.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=N.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=N.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function gBe(e,t,n={autoInvoke:!1}){const r=N.useRef(null),i=N.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=N.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return N.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function yBe(e,t,n){const r=N.useRef(),i=N.useRef(null);return N.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function vBe(){const[e,t]=N.useState(!1);return N.useEffect(()=>t(!0),[]),e}function bBe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function _Be(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});gb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>bBe(`${e}:${String(r)}`,i[0])}return[t,n]}var wBe={};function j1e(){return typeof process<"u"&&wBe?"production":"development"}function B1e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=B1e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Yi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=B1e(e))&&(r&&(r+=" "),r+=t);return r}const EBe={};function xBe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Yi(t[r],i):t[r]=i})}),t}function $M({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||EBe);return xBe(s)}function aO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const U1e=N.createContext(null);function vy(){const e=N.useContext(U1e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function SBe(){return vy().cssVariablesResolver}function TBe(){return vy().classNamesPrefix}function qq(){return vy().getStyleNonce}function ABe(){return vy().withStaticClasses}function CBe(){return vy().headless}function IBe(){var e;return(e=vy().stylesTransform)==null?void 0:e.sx}function kBe(){var e;return(e=vy().stylesTransform)==null?void 0:e.styles}function RBe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function NBe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function PBe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function DBe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function Wq(e){return RBe(e)?NBe(e):e.startsWith("rgb")?PBe(e):e.startsWith("hsl")?DBe(e):{r:0,g:0,b:0,a:1}}function HR(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=Wq(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function WC(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function H5(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function OBe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function $Be(e){if(e.startsWith("oklch("))return(OBe(e)||0)/100;const{r:t,g:n,b:r}=Wq(e),i=t/255,s=n/255,o=r/255,a=H5(i),u=H5(s),l=H5(o);return .2126*a+.7152*u+.0722*l}function WS(e,t=.179){return e.startsWith("var(")?!1:$Be(e)>t}function kh({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:WS(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:WS(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:WS(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][WC(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:WS(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:WS(e,t.luminanceThreshold),shade:s,variable:void 0}}function ei(e,t){const n=kh({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function rU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=ei(n.from,t),i=ei(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function vd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=Wq(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const n_=vd,MBe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=kh({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Te(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Te(1)} solid transparent`}:{background:e,hover:HR(e,.1),color:a,border:`${Te(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:vd(a,.1),hover:vd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:vd(e,.1),hover:vd(e,.12),color:e,border:`${Te(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Te(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:vd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:vd(e,.05),color:e,border:`${Te(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:vd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:"transparent",hover:vd(e,.12),color:e,border:`${Te(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Te(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:HR(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:HR(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:HR(t.white,.01),color:e,border:`${Te(1)} solid transparent`}:n==="gradient"?{background:rU(r,t),hover:rU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Te(1)} solid var(--mantine-color-default-border)`}:{}},LBe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},nse="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Gq={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:LBe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:MBe,autoContrast:!1,luminanceThreshold:.3,fontFamily:nse,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:nse,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Te(34),lineHeight:"1.3"},h2:{fontSize:Te(26),lineHeight:"1.35"},h3:{fontSize:Te(22),lineHeight:"1.4"},h4:{fontSize:Te(18),lineHeight:"1.45"},h5:{fontSize:Te(16),lineHeight:"1.5"},h6:{fontSize:Te(14),lineHeight:"1.5"}}},fontSizes:{xs:Te(12),sm:Te(14),md:Te(16),lg:Te(18),xl:Te(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Te(2),sm:Te(4),md:Te(8),lg:Te(16),xl:Te(32)},spacing:{xs:Te(10),sm:Te(12),md:Te(16),lg:Te(20),xl:Te(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), 0 ${Te(1)} ${Te(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(10)} ${Te(15)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(7)} ${Te(7)} ${Te(-5)}`,md:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(20)} ${Te(25)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(10)} ${Te(10)} ${Te(-5)}`,lg:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(28)} ${Te(23)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(12)} ${Te(12)} ${Te(-7)}`,xl:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(36)} ${Te(28)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(17)} ${Te(17)} ${Te(-7)}`},other:{},components:{}};function rse(e){return e==="auto"||e==="dark"||e==="light"}function FBe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return rse(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&rse(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const jBe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",ise="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function q5(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function sse(e){if(!(e.primaryColor in e.colors))throw new Error(jBe);if(typeof e.primaryShade=="object"&&(!q5(e.primaryShade.dark)||!q5(e.primaryShade.light)))throw new Error(ise);if(typeof e.primaryShade=="number"&&!q5(e.primaryShade))throw new Error(ise)}function BBe(e,t){var r;if(!t)return sse(e),e;const n=Bq(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),sse(n),n}const Yq=N.createContext(null),UBe=()=>N.useContext(Yq)||Gq;function Ms(){const e=N.useContext(Yq);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function z1e({theme:e,children:t,inherit:n=!0}){const r=UBe(),i=N.useMemo(()=>BBe(n?r:Gq,e),[e,r,n]);return _.jsx(Yq.Provider,{value:i,children:t})}z1e.displayName="@mantine/core/MantineThemeProvider";function zBe(){const e=Ms(),t=qq(),n=ki(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=tU(e.breakpoints[i]),a=s?`${o-.1}px`:iO(o-.1),u=s?`${o}px`:iO(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function W5(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function G5(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function VBe(e,t){const n=W5(e.variables),r=n?G5(t,n):"",i=W5(e.dark),s=i?G5(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=W5(e.light),a=o?G5(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function by({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&kh({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function ose(e,t){return by({color:e.colors[e.primaryColor][WC(e,t)],theme:e,autoContrast:null})}function qR({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=WC(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:n_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:n_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:n_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=WC(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:n_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:n_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:n_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function HBe(e){return Array.isArray(e)?e:Array(10).fill(e)}function qBe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function r_(e,t,n){ki(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const V1e=e=>{const t=WC(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Te(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":ose(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":ose(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};r_(r.variables,e.breakpoints,"breakpoint"),r_(r.variables,e.spacing,"spacing"),r_(r.variables,e.fontSizes,"font-size"),r_(r.variables,e.lineHeights,"line-height"),r_(r.variables,e.shadows,"shadow"),r_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),ki(e.colors).forEach(s=>{const o=e.colors[s];if(qBe(o)){Object.assign(r.light,qR({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,qR({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,qR({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,qR({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return ki(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function WBe({theme:e,generator:t}){const n=V1e(e),r=t==null?void 0:t(e);return r?Bq(n,r):n}const Y5=V1e(Gq);function GBe(e){const t={variables:{},light:{},dark:{}};return ki(e.variables).forEach(n=>{Y5.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),ki(e.light).forEach(n=>{Y5.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),ki(e.dark).forEach(n=>{Y5.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function YBe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function H1e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Ms(),r=qq(),i=SBe(),s=WBe({theme:n,generator:i}),o=e===":root"&&t,a=o?GBe(s):s,u=VBe(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":YBe(e)}`}}):null}H1e.displayName="@mantine/CssVariables";function KBe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function i_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function XBe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=N.useRef(),[s,o]=N.useState(()=>e.get(t)),a=r||s,u=N.useCallback(c=>{r||(i_(c,n),o(c),e.set(c))},[e.set,a,r]),l=N.useCallback(()=>{o(t),i_(t,n),e.clear()},[e.clear,t]);return N.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),gb(()=>{i_(e.get(t),n)},[]),N.useEffect(()=>{var f;if(r)return i_(r,n),()=>{};r===void 0&&i_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&i_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function QBe({respectReducedMotion:e,getRootElement:t}){gb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}KBe();function q1e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=FBe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=XBe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return QBe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(U1e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(z1e,{theme:e,children:[o&&_.jsx(H1e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(zBe,{}),t]})})}q1e.displayName="@mantine/core/MantineProvider";function Mm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Ms();return{resolvedClassNames:$M({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:aO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const JBe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function ZBe({theme:e,options:t,unstyled:n}){return Yi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||JBe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function eUe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return $M({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function ase({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return $M({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function tUe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function nUe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function rUe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function iUe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=$M({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function sUe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function oUe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Yi(ZBe({theme:e,options:t,unstyled:a||h}),iUe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),sUe({options:t,classes:o,selector:r,unstyled:a}),ase({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),ase({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),eUe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),tUe({rootSelector:l,selector:r,className:u}),nUe({selector:r,classes:o,unstyled:a||h}),d&&!h&&rUe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function aUe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return aO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function iU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...iU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function uUe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...yx(n[r])}}),t),{})}function lUe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=uUe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function cUe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&aUe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&aO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&aO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...lUe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?iU({style:u,theme:e}):null,...iU({style:r==null?void 0:r.style,theme:e})}}function fUe({props:e,stylesCtx:t,themeName:n}){var o;const r=Ms(),i=(o=kBe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function vt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Ms(),h=TBe(),p=ABe(),m=CBe(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=fUe({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:oUe({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:cUe({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function bx(e,t){return typeof e=="boolean"?e:t.autoContrast}function Ae(e,t,n){var o;const r=Ms(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...yx(n)}}function K5(e){return ki(e).reduce((t,n)=>e[n]!==void 0?`${t}${U9e(n)}:${e[n]};`:t,"").trim()}function dUe({selector:e,styles:t,media:n,container:r}){const i=t?K5(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${K5(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${K5(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function SI(e){const t=qq();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:dUe(e)}})}function _x(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:S,ff:T,fz:A,fw:C,lts:I,ta:R,lh:M,fs:P,tt:O,td:F,w:L,miw:B,maw:U,h:H,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ye,inset:Ie,display:ve,flex:Ke,hiddenFrom:Ue,visibleFrom:gt,lightHidden:rt,darkHidden:be,sx:ke,...ze}=e;return{styleProps:yx({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:S,ff:T,fz:A,fw:C,lts:I,ta:R,lh:M,fs:P,tt:O,td:F,w:L,miw:B,maw:U,h:H,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ye,inset:Ie,display:ve,flex:Ke,hiddenFrom:Ue,visibleFrom:gt,lightHidden:rt,darkHidden:be,sx:ke}),rest:ze}}const hUe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Kq(e,t){const n=kh({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function pUe(e,t){const n=kh({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:Kq(e,t)}function mUe(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Te(n)}`;return r&&(s+=` ${r}`),HBe.length>0&&(s+=` ${Kq(i.join(" "),t)}`),s.trim()}return e}const use={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function gUe(e){return typeof e=="string"&&e in use?use[e]:e}const yUe=["h1","h2","h3","h4","h5","h6"];function vUe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&yUe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Te(e):e}function bUe(e){return e}const _Ue=["h1","h2","h3","h4","h5","h6"];function wUe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&_Ue.includes(e)?`var(--mantine-${e}-line-height)`:e}function EUe(e){return typeof e=="number"?Te(e):e}function xUe(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Te(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const X5={color:Kq,textColor:pUe,fontSize:vUe,spacing:xUe,identity:bUe,size:EUe,lineHeight:wUe,fontFamily:gUe,border:mUe};function lse(e){return e.replace("(min-width: ","").replace("em)","")}function SUe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(lse(i))-Number(lse(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function TUe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function AUe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function CUe(e){return typeof e=="object"&&e!==null?ki(e).filter(t=>t!=="base"):[]}function IUe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function W1e({styleProps:e,data:t,theme:n}){return SUe(ki(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=AUe(e[i]);if(!TUe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=X5[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=CUe(e[i]);return o.forEach(l=>{a&&(r.styles[l]=X5[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:X5[s.type](IUe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function MM(){return`__m__-${N.useId().replace(/:/g,"")}`}function Xq(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Xq(r,t)}),{}):typeof e=="function"?e(t):e??{}}function G1e(e){return e.startsWith("data-")?e:`data-${e}`}function kUe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[G1e(n)]=e[n]),t},{})}function Y1e(e){return e?typeof e=="string"?{[G1e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...Y1e(n)}),{}):kUe(e):null}function sU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...sU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function RUe({theme:e,style:t,vars:n,styleProps:r}){const i=sU(t,e),s=sU(n,e);return{...i,...s,...r}}const K1e=N.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var A;const m=Ms(),g=e||"div",{styleProps:y,rest:v}=_x(h),b=IBe(),w=(A=b==null?void 0:b())==null?void 0:A(y.sx),E=MM(),S=W1e({styleProps:y,theme:m,data:hUe}),T={ref:p,style:RUe({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:Yi(r,w,{[E]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":k1e(o)?void 0:o||void 0,size:d,...Y1e(s),...v};return _.jsxs(_.Fragment,{children:[S.hasResponsiveStyles&&_.jsx(SI,{selector:`.${E}`,styles:S.styles,media:S.media}),typeof f=="function"?f(T):_.jsx(g,{...T})]})});K1e.displayName="@mantine/core/Box";const Ee=K1e;function X1e(e){return e}function je(e){const t=N.forwardRef(e);return t.extend=X1e,t}function Ls(e){const t=N.forwardRef(e);return t.extend=X1e,t}const NUe=N.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Rh(){return N.useContext(NUe)}function PUe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Q5(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const GS=typeof window<"u"&&window.requestAnimationFrame;function DUe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=N.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=N.useState(r?{}:o),l=p=>{EI.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||PUe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}um(()=>{typeof GS=="function"&&GS(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),GS(()=>{const p=Q5(i);c({...f(p),height:p})})}:()=>{const p=Q5(i);c({...f(p),willChange:"height",height:p}),GS(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=Q5(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:L1e(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const OUe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},Q1e=je((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Ae("Collapse",OUe,e),c=Ms(),f=Hq(),h=(c.respectReducedMotion?f:!1)?0:i,p=DUe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(Ee,{...l,children:n}):null:_.jsx(Ee,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...Xq(o,c)},ref:t,...l}),children:n})});Q1e.displayName="@mantine/core/Collapse";const[$Ue,Pc]=_a("ScrollArea.Root component was not found in tree");function rE(e,t){const n=T1(t);gb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const MUe=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Pc(),[s,o]=N.useState(0),[a,u]=N.useState(0),l=!!(s&&a);return rE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),rE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),LUe=N.forwardRef((e,t)=>{const n=Pc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(MUe,{...e,ref:t}):null}),FUe={scrollHideDelay:1e3,type:"hover"},J1e=N.forwardRef((e,t)=>{const n=Ae("ScrollAreaRoot",FUe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=N.useState(null),[l,c]=N.useState(null),[f,d]=N.useState(null),[h,p]=N.useState(null),[m,g]=N.useState(null),[y,v]=N.useState(0),[b,w]=N.useState(0),[E,S]=N.useState(!1),[T,A]=N.useState(!1),C=ls(t,I=>u(I));return _.jsx($Ue,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:T,onScrollbarYEnabledChange:A,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(Ee,{...o,ref:C,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});J1e.displayName="@mantine/core/ScrollAreaRoot";function Z1e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function LM(e){const t=Z1e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function eve(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function jUe(e,[t,n]){return Math.min(n,Math.max(t,e))}function cse(e,t,n="ltr"){const r=LM(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=jUe(e,u);return eve([0,o],[0,a])(l)}function BUe(e,t,n,r="ltr"){const i=LM(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return eve([u,l],f)(e)}function tve(e,t){return e>0&&e<t}function uO(e){return e?parseInt(e,10):0}function av(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[UUe,nve]=_a("ScrollAreaScrollbar was not found in tree"),rve=N.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Pc(),[h,p]=N.useState(null),m=ls(t,A=>p(A)),g=N.useRef(null),y=N.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=T1(l),E=T1(a),S=OM(c,10),T=A=>{if(g.current){const C=A.clientX-g.current.left,I=A.clientY-g.current.top;u({x:C,y:I})}};return N.useEffect(()=>{const A=C=>{const I=C.target;(h==null?void 0:h.contains(I))&&w(C,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[v,h,b,w]),N.useEffect(E,[n,E]),rE(h,S),rE(d.content,S),_.jsx(UUe,{value:{scrollbar:h,hasThumb:r,onThumbChange:T1(i),onThumbPointerUp:T1(s),onThumbPositionChange:E,onThumbPointerDown:T1(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:av(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(A))}),onPointerMove:av(e.onPointerMove,T),onPointerUp:av(e.onPointerUp,A=>{const C=A.target;C.hasPointerCapture(A.pointerId)&&C.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),zUe=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Pc(),[a,u]=N.useState(),l=N.useRef(null),c=ls(t,l,o.onScrollbarXChange);return N.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(rve,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${LM(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),tve(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:uO(a.paddingLeft),paddingEnd:uO(a.paddingRight)}})}})}),VUe=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Pc(),[a,u]=N.useState(),l=N.useRef(null),c=ls(t,l,o.onScrollbarYChange);return N.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(rve,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${LM(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),tve(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:uO(a.paddingTop),paddingEnd:uO(a.paddingBottom)}})}})}),Qq=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Rh(),s=Pc(),o=N.useRef(null),a=N.useRef(0),[u,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Z1e(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>BUe(h,a.current,u,p);return n==="horizontal"?_.jsx(zUe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=cse(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(VUe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=cse(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),ive=N.forwardRef((e,t)=>{const n=Pc(),{forceMount:r,...i}=e,[s,o]=N.useState(!1),a=e.orientation==="horizontal",u=OM(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return rE(n.viewport,u),rE(n.content,u),r||s?_.jsx(Qq,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),HUe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Pc(),[s,o]=N.useState(!1);return N.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(ive,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),qUe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Pc(),s=e.orientation==="horizontal",[o,a]=N.useState("hidden"),u=OM(()=>a("idle"),100);return N.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),N.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(Qq,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:av(e.onPointerEnter,()=>a("interacting")),onPointerLeave:av(e.onPointerLeave,()=>a("idle"))}):null}),fse=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Pc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return N.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(HUe,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(qUe,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(ive,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(Qq,{...r,ref:t}):null});function WUe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const GUe=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Pc(),s=nve(),{onThumbPositionChange:o}=s,a=ls(t,c=>s.onThumbChange(c)),u=N.useRef(),l=OM(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=WUe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:av(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:av(e.onPointerUp,s.onThumbPointerUp)})}),dse=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=nve();return n||i.hasThumb?_.jsx(GUe,{ref:t,...r}):null}),sve=N.forwardRef(({children:e,style:t,...n},r)=>{const i=Pc(),s=ls(r,i.onViewportChange);return _.jsx(Ee,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});sve.displayName="@mantine/core/ScrollAreaViewport";var Jq={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const ove={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},YUe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Te(t)}}),yb=je((e,t)=>{const n=Ae("ScrollArea",ove,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=N.useState(!1),E=vt({name:"ScrollArea",props:n,classes:Jq,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:YUe});return _.jsxs(J1e,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(sve,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var T;(T=d==null?void 0:d.onScroll)==null||T.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(fse,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(dse,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(fse,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(dse,{...E("thumb")})}),_.jsx(LUe,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});yb.displayName="@mantine/core/ScrollArea";const Zq=je((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=Ae("ScrollAreaAutosize",ove,e);return _.jsx(Ee,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(Ee,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(yb,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});yb.classes=Jq;Zq.displayName="@mantine/core/ScrollAreaAutosize";Zq.classes=Jq;yb.Autosize=Zq;var ave={root:"m_87cf2631"};const KUe={__staticSelector:"UnstyledButton"},Rs=Ls((e,t)=>{const n=Ae("UnstyledButton",KUe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=vt({name:s,props:n,classes:ave,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(Ee,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Rs.classes=ave;Rs.displayName="@mantine/core/UnstyledButton";var uve={root:"m_515a97f8"};const XUe={},eW=je((e,t)=>{const n=Ae("VisuallyHidden",XUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=vt({name:"VisuallyHidden",classes:uve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(Ee,{component:"span",ref:t,...c("root"),...l})});eW.classes=uve;eW.displayName="@mantine/core/VisuallyHidden";var lve={root:"m_1b7284a3"};const QUe={},JUe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:di(t),"--paper-shadow":Uq(n)}}),FM=Ls((e,t)=>{const n=Ae("Paper",QUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=vt({name:"Paper",props:n,classes:lve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:JUe});return _.jsx(Ee,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});FM.classes=lve;FM.displayName="@mantine/core/Paper";function wx(e){return cve(e)?(e.nodeName||"").toLowerCase():"#document"}function $u(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Lm(e){var t;return(t=(cve(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function cve(e){return e instanceof Node||e instanceof $u(e).Node}function _i(e){return e instanceof Element||e instanceof $u(e).Element}function kl(e){return e instanceof HTMLElement||e instanceof $u(e).HTMLElement}function oU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof $u(e).ShadowRoot}function TI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=wc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function ZUe(e){return["table","td","th"].includes(wx(e))}function tW(e){const t=nW(),n=wc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function e7e(e){let t=lm(e);for(;kl(t)&&!k0(t);){if(tW(t))return t;t=lm(t)}return null}function nW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function k0(e){return["html","body","#document"].includes(wx(e))}function wc(e){return $u(e).getComputedStyle(e)}function jM(e){return _i(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function lm(e){if(wx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||oU(e)&&e.host||Lm(e);return oU(t)?t.host:t}function fve(e){const t=lm(e);return k0(t)?e.ownerDocument?e.ownerDocument.body:e.body:kl(t)&&TI(t)?t:fve(t)}function Wp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=fve(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=$u(i);return s?t.concat(o,o.visualViewport||[],TI(i)?i:[],o.frameElement&&n?Wp(o.frameElement):[]):t.concat(i,Wp(i,[],n))}function hse(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function GC(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&oU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function dve(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function hve(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function t7e(e){return i7e()?!1:!pse()&&e.width===0&&e.height===0||pse()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function n7e(){return/apple/i.test(navigator.vendor)}function pse(){const e=/android/i;return e.test(dve())||e.test(hve())}function r7e(){return dve().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function i7e(){return hve().includes("jsdom/")}function aU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function s7e(e){return"nativeEvent"in e}function o7e(e){return e.matches("html,body")}function V1(e){return(e==null?void 0:e.ownerDocument)||document}function J5(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function T_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const a7e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function u7e(e){return kl(e)&&e.matches(a7e)}const yl=Math.min,ra=Math.max,lO=Math.round,WR=Math.floor,R0=e=>({x:e,y:e}),l7e={left:"right",right:"left",bottom:"top",top:"bottom"},c7e={start:"end",end:"start"};function uU(e,t,n){return ra(e,yl(t,n))}function cm(e,t){return typeof e=="function"?e(t):e}function Mf(e){return e.split("-")[0]}function Ex(e){return e.split("-")[1]}function rW(e){return e==="x"?"y":"x"}function iW(e){return e==="y"?"height":"width"}function vb(e){return["top","bottom"].includes(Mf(e))?"y":"x"}function sW(e){return rW(vb(e))}function f7e(e,t,n){n===void 0&&(n=!1);const r=Ex(e),i=sW(e),s=iW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=cO(o)),[o,cO(o)]}function d7e(e){const t=cO(e);return[lU(e),t,lU(t)]}function lU(e){return e.replace(/start|end/g,t=>c7e[t])}function h7e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function p7e(e,t,n,r){const i=Ex(e);let s=h7e(Mf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(lU)))),s}function cO(e){return e.replace(/left|right|bottom|top/g,t=>l7e[t])}function m7e(e){return{top:0,right:0,bottom:0,left:0,...e}}function oW(e){return typeof e!="number"?m7e(e):{top:e,right:e,bottom:e,left:e}}function iE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function mse(e,t,n){let{reference:r,floating:i}=e;const s=vb(t),o=sW(t),a=iW(o),u=Mf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Ex(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const g7e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=mse(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=mse(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function aW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=cm(t,e),p=oW(h),g=a[d?f==="floating"?"reference":"floating":f],y=iE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=iE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const y7e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=cm(e,t)||{};if(l==null)return{};const f=oW(c),d={x:n,y:r},h=sW(i),p=iW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let T=S?S[b]:0;(!T||!await(o.isElement==null?void 0:o.isElement(S)))&&(T=a.floating[b]||s.floating[p]);const A=w/2-E/2,C=T/2-m[p]/2-1,I=yl(f[y],C),R=yl(f[v],C),M=I,P=T-m[p]-R,O=T/2-m[p]/2+A,F=uU(M,O,P),L=!u.arrow&&Ex(i)!=null&&O!==F&&s.reference[p]/2-(O<M?I:R)-m[p]/2<0,B=L?O<M?O-M:O-P:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:O-F-B,...L&&{alignmentOffset:B}},reset:L}}}),v7e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=cm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Mf(i),v=Mf(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[cO(a)]:d7e(a));!d&&p!=="none"&&w.push(...p7e(a,m,p,b));const E=[a,...w],S=await aW(t,g),T=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&T.push(S[y]),f){const M=f7e(i,o,b);T.push(S[M[0]],S[M[1]])}if(A=[...A,{placement:i,overflows:T}],!T.every(M=>M<=0)){var C,I;const M=(((C=s.flip)==null?void 0:C.index)||0)+1,P=E[M];if(P)return{data:{index:M,overflows:A},reset:{placement:P}};let O=(I=A.filter(F=>F.overflows[0]<=0).sort((F,L)=>F.overflows[1]-L.overflows[1])[0])==null?void 0:I.placement;if(!O)switch(h){case"bestFit":{var R;const F=(R=A.map(L=>[L.placement,L.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((L,B)=>L[1]-B[1])[0])==null?void 0:R[0];F&&(O=F);break}case"initialPlacement":O=a;break}if(i!==O)return{reset:{placement:O}}}return{}}}};function pve(e){const t=yl(...e.map(s=>s.left)),n=yl(...e.map(s=>s.top)),r=ra(...e.map(s=>s.right)),i=ra(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function b7e(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>iE(pve(i)))}const _7e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=cm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=b7e(c),d=iE(pve(c)),h=oW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(vb(n)==="y"){const I=f[0],R=f[f.length-1],M=Mf(n)==="top",P=I.top,O=R.bottom,F=M?I.left:R.left,L=M?I.right:R.right,B=L-F,U=O-P;return{top:P,bottom:O,left:F,right:L,width:B,height:U,x:F,y:P}}const g=Mf(n)==="left",y=ra(...f.map(I=>I.right)),v=yl(...f.map(I=>I.left)),b=f.filter(I=>g?I.left===v:I.right===y),w=b[0].top,E=b[b.length-1].bottom,S=v,T=y,A=T-S,C=E-w;return{top:w,bottom:E,left:S,right:T,width:A,height:C,x:S,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function w7e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Mf(n),a=Ex(n),u=vb(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=cm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const E7e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await w7e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},x7e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=cm(e,t),l={x:n,y:r},c=await aW(t,u),f=vb(Mf(i)),d=rW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=uU(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=uU(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},S7e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=cm(e,t),c={x:n,y:r},f=vb(i),d=rW(f);let h=c[d],p=c[f];const m=cm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(Mf(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),S=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>S&&(p=S)}return{[d]:h,[f]:p}}}},T7e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=cm(e,t),u=await aW(t,a),l=Mf(n),c=Ex(n),f=vb(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=yl(h-u[p],g),b=yl(d-u[m],y),w=!t.middlewareData.shift;let E=v,S=b;if(f?S=c||w?yl(b,y):y:E=c||w?yl(v,g):g,w&&!c){const A=ra(u.left,0),C=ra(u.right,0),I=ra(u.top,0),R=ra(u.bottom,0);f?S=d-2*(A!==0||C!==0?A+C:ra(u.left,u.right)):E=h-2*(I!==0||R!==0?I+R:ra(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:E});const T=await i.getDimensions(s.floating);return d!==T.width||h!==T.height?{reset:{rects:!0}}:{}}}};function mve(e){const t=wc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=kl(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=lO(n)!==s||lO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function uW(e){return _i(e)?e:e.contextElement}function vw(e){const t=uW(e);if(!kl(t))return R0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=mve(t);let o=(s?lO(n.width):n.width)/r,a=(s?lO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const A7e=R0(0);function gve(e){const t=$u(e);return!nW()||!t.visualViewport?A7e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function C7e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==$u(e)?!1:t}function Cv(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=uW(e);let o=R0(1);t&&(r?_i(r)&&(o=vw(r)):o=vw(e));const a=C7e(s,n,r)?gve(s):R0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=$u(s),h=r&&_i(r)?$u(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=vw(m),y=m.getBoundingClientRect(),v=wc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=$u(m),m=p.frameElement}}return iE({width:c,height:f,x:u,y:l})}const I7e=[":popover-open",":modal"];function lW(e){return I7e.some(t=>{try{return e.matches(t)}catch{return!1}})}function k7e(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Lm(r),a=t?lW(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=R0(1);const c=R0(0),f=kl(r);if((f||!f&&!s)&&((wx(r)!=="body"||TI(o))&&(u=jM(r)),kl(r))){const d=Cv(r);l=vw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function R7e(e){return Array.from(e.getClientRects())}function yve(e){return Cv(Lm(e)).left+jM(e).scrollLeft}function N7e(e){const t=Lm(e),n=jM(e),r=e.ownerDocument.body,i=ra(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ra(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+yve(e);const a=-n.scrollTop;return wc(r).direction==="rtl"&&(o+=ra(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function P7e(e,t){const n=$u(e),r=Lm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=nW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function D7e(e,t){const n=Cv(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=kl(e)?vw(e):R0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function gse(e,t,n){let r;if(t==="viewport")r=P7e(e,n);else if(t==="document")r=N7e(Lm(e));else if(_i(t))r=D7e(t,n);else{const i=gve(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return iE(r)}function vve(e,t){const n=lm(e);return n===t||!_i(n)||k0(n)?!1:wc(n).position==="fixed"||vve(n,t)}function O7e(e,t){const n=t.get(e);if(n)return n;let r=Wp(e,[],!1).filter(a=>_i(a)&&wx(a)!=="body"),i=null;const s=wc(e).position==="fixed";let o=s?lm(e):e;for(;_i(o)&&!k0(o);){const a=wc(o),u=tW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||TI(o)&&!u&&vve(e,o))?r=r.filter(c=>c!==o):i=a,o=lm(o)}return t.set(e,r),r}function $7e(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?lW(t)?[]:O7e(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=gse(t,c,i);return l.top=ra(f.top,l.top),l.right=yl(f.right,l.right),l.bottom=yl(f.bottom,l.bottom),l.left=ra(f.left,l.left),l},gse(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function M7e(e){const{width:t,height:n}=mve(e);return{width:t,height:n}}function L7e(e,t,n){const r=kl(t),i=Lm(t),s=n==="fixed",o=Cv(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=R0(0);if(r||!r&&!s)if((wx(t)!=="body"||TI(i))&&(a=jM(t)),r){const f=Cv(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=yve(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function Z5(e){return wc(e).position==="static"}function yse(e,t){return!kl(e)||wc(e).position==="fixed"?null:t?t(e):e.offsetParent}function bve(e,t){const n=$u(e);if(lW(e))return n;if(!kl(e)){let i=lm(e);for(;i&&!k0(i);){if(_i(i)&&!Z5(i))return i;i=lm(i)}return n}let r=yse(e,t);for(;r&&ZUe(r)&&Z5(r);)r=yse(r,t);return r&&k0(r)&&Z5(r)&&!tW(r)?n:r||e7e(e)||n}const F7e=async function(e){const t=this.getOffsetParent||bve,n=this.getDimensions,r=await n(e.floating);return{reference:L7e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function j7e(e){return wc(e).direction==="rtl"}const B7e={convertOffsetParentRelativeRectToViewportRelativeRect:k7e,getDocumentElement:Lm,getClippingRect:$7e,getOffsetParent:bve,getElementRects:F7e,getClientRects:R7e,getDimensions:M7e,getScale:vw,isElement:_i,isRTL:j7e};function U7e(e,t){let n=null,r;const i=Lm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=WR(c),p=WR(i.clientWidth-(l+f)),m=WR(i.clientHeight-(c+d)),g=WR(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:ra(0,yl(1,u))||1};let b=!0;function w(E){const S=E[0].intersectionRatio;if(S!==u){if(!b)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function z7e(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=uW(e),c=i||s?[...l?Wp(l):[],...Wp(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?U7e(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Cv(e):null;u&&g();function g(){const y=Cv(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const V7e=E7e,H7e=x7e,q7e=v7e,W7e=T7e,vse=y7e,G7e=_7e,Y7e=S7e,K7e=(e,t,n)=>{const r=new Map,i={platform:B7e,...n},s={...i.platform,_c:r};return g7e(e,t,{...i,platform:s})};var IP=typeof document<"u"?N.useLayoutEffect:N.useEffect;function fO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!fO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!fO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function _ve(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function bse(e,t){const n=_ve(e);return Math.round(t*n)/n}function _se(e){const t=N.useRef(e);return IP(()=>{t.current=e}),t}function X7e(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=N.useState(r);fO(d,r)||h(r);const[p,m]=N.useState(null),[g,y]=N.useState(null),v=N.useCallback(B=>{B!==S.current&&(S.current=B,m(B))},[]),b=N.useCallback(B=>{B!==T.current&&(T.current=B,y(B))},[]),w=s||p,E=o||g,S=N.useRef(null),T=N.useRef(null),A=N.useRef(c),C=u!=null,I=_se(u),R=_se(i),M=N.useCallback(()=>{if(!S.current||!T.current)return;const B={placement:t,strategy:n,middleware:d};R.current&&(B.platform=R.current),K7e(S.current,T.current,B).then(U=>{const H={...U,isPositioned:!0};P.current&&!fO(A.current,H)&&(A.current=H,EI.flushSync(()=>{f(H)}))})},[d,t,n,R]);IP(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const P=N.useRef(!1);IP(()=>(P.current=!0,()=>{P.current=!1}),[]),IP(()=>{if(w&&(S.current=w),E&&(T.current=E),w&&E){if(I.current)return I.current(w,E,M);M()}},[w,E,M,I,C]);const O=N.useMemo(()=>({reference:S,floating:T,setReference:v,setFloating:b}),[v,b]),F=N.useMemo(()=>({reference:w,floating:E}),[w,E]),L=N.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const U=bse(F.floating,c.x),H=bse(F.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+H+"px)",..._ve(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:H}},[n,a,F.floating,c.x,c.y]);return N.useMemo(()=>({...c,update:M,refs:O,elements:F,floatingStyles:L}),[c,M,O,F,L])}const Q7e=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?vse({element:r.current,padding:i}).fn(n):{}:r?vse({element:r,padding:i}).fn(n):{}}}},wve=(e,t)=>({...V7e(e),options:[e,t]}),cW=(e,t)=>({...H7e(e),options:[e,t]}),wse=(e,t)=>({...Y7e(e),options:[e,t]}),cU=(e,t)=>({...q7e(e),options:[e,t]}),J7e=(e,t)=>({...W7e(e),options:[e,t]}),fU=(e,t)=>({...G7e(e),options:[e,t]}),Eve=(e,t)=>({...Q7e(e),options:[e,t]}),xve={...DD},Z7e=xve.useInsertionEffect,eze=Z7e||(e=>e());function Dg(e){const t=N.useRef(()=>{});return eze(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Xd=typeof document<"u"?N.useLayoutEffect:N.useEffect;let Ese=!1,tze=0;const xse=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+tze++;function nze(){const[e,t]=N.useState(()=>Ese?xse():void 0);return Xd(()=>{e==null&&t(xse())},[]),N.useEffect(()=>{Ese=!0},[]),e}const rze=xve.useId,Sve=rze||nze;function ize(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const sze=N.createContext(null),oze=N.createContext(null),fW=()=>{var e;return((e=N.useContext(sze))==null?void 0:e.id)||null},dW=()=>N.useContext(oze);function hW(e){return"data-floating-ui-"+e}function Sse(e){const t=N.useRef(e);return Xd(()=>{t.current=e}),t}const Tse=hW("safe-polygon");function kP(e,t,n){return n&&!aU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function aze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=dW(),m=fW(),g=Sse(c),y=Sse(l),v=N.useRef(),b=N.useRef(-1),w=N.useRef(),E=N.useRef(-1),S=N.useRef(!0),T=N.useRef(!1),A=N.useRef(()=>{}),C=N.useCallback(()=>{var P;const O=(P=i.current.openEvent)==null?void 0:P.type;return(O==null?void 0:O.includes("mouse"))&&O!=="mousedown"},[i]);N.useEffect(()=>{if(!u)return;function P(O){let{open:F}=O;F||(clearTimeout(b.current),clearTimeout(E.current),S.current=!0)}return s.on("openchange",P),()=>{s.off("openchange",P)}},[u,s]),N.useEffect(()=>{if(!u||!g.current||!n)return;function P(F){C()&&r(!1,F,"hover")}const O=V1(a).documentElement;return O.addEventListener("mouseleave",P),()=>{O.removeEventListener("mouseleave",P)}},[a,n,r,u,g,C]);const I=N.useCallback(function(P,O,F){O===void 0&&(O=!0),F===void 0&&(F="hover");const L=kP(y.current,"close",v.current);L&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,P,F),L)):O&&(clearTimeout(b.current),r(!1,P,F))},[y,r]),R=Dg(()=>{A.current(),w.current=void 0}),M=Dg(()=>{if(T.current){const P=V1(a).body;P.style.pointerEvents="",P.removeAttribute(Tse),T.current=!1}});return N.useEffect(()=>{if(!u)return;function P(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function O(B){if(clearTimeout(b.current),S.current=!1,f&&!aU(v.current)||d>0&&!kP(y.current,"open"))return;const U=kP(y.current,"open",v.current);U?b.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function F(B){if(P())return;A.current();const U=V1(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){M(),R(),I(B,!0,"safe-polygon")}});const D=w.current;U.addEventListener("mousemove",D),A.current=()=>{U.removeEventListener("mousemove",D)};return}(v.current==="touch"?!GC(a,B.relatedTarget):!0)&&I(B)}function L(B){P()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){M(),R(),I(B)}})(B))}if(_i(o)){const B=o;return n&&B.addEventListener("mouseleave",L),a==null||a.addEventListener("mouseleave",L),h&&B.addEventListener("mousemove",O,{once:!0}),B.addEventListener("mouseenter",O),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",L),a==null||a.removeEventListener("mouseleave",L),h&&B.removeEventListener("mousemove",O),B.removeEventListener("mouseenter",O),B.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,I,R,M,r,n,p,y,g,i]),Xd(()=>{var P;if(u&&n&&(P=g.current)!=null&&P.__options.blockPointerEvents&&C()){const F=V1(a).body;if(F.setAttribute(Tse,""),F.style.pointerEvents="none",T.current=!0,_i(o)&&a){var O;const L=o,B=p==null||(O=p.nodesRef.current.find(U=>U.id===m))==null||(O=O.context)==null?void 0:O.elements.floating;return B&&(B.style.pointerEvents=""),L.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{L.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,C]),Xd(()=>{n||(v.current=void 0,R(),M())},[n,R,M]),N.useEffect(()=>()=>{R(),clearTimeout(b.current),clearTimeout(E.current),M()},[u,o,R,M]),N.useMemo(()=>{if(!u)return{};function P(O){v.current=O.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove(O){function F(){S.current||r(!0,O.nativeEvent,"hover")}f&&!aU(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(O){I(O.nativeEvent,!1)}}}},[u,f,n,d,r,I])}const dU=()=>{},Tve=N.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:dU,setState:dU,isInstantPhase:!1}),Ave=()=>N.useContext(Tve);function uze(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=N.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=N.useRef(null),a=N.useCallback(u=>{s({currentId:u})},[]);return Xd(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),N.createElement(Tve.Provider,{value:N.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function lze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Ave(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Xd(()=>{u&&(f({delay:{open:1,close:kP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Xd(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Xd(()=>{l===dU||!n||l(o)},[n,l,o]),a}function e8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const cze={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},fze={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Ase=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function dze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=dW(),v=Dg(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=N.useRef(!1),E=N.useRef(!1),{escapeKey:S,outsidePress:T}=Ase(m),{escapeKey:A,outsidePress:C}=Ase(g),I=Dg(O=>{var F;if(!n||!u||!l||O.key!=="Escape")return;const L=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?e8(y.nodesRef.current,L):[];if(!S&&(O.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(H=>{var D;if((D=H.context)!=null&&D.open&&!H.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,s7e(O)?O.nativeEvent:O,"escape-key")}),R=Dg(O=>{var F;const L=()=>{var B;I(O),(B=T_(O))==null||B.removeEventListener("keydown",L)};(F=T_(O))==null||F.addEventListener("keydown",L)}),M=Dg(O=>{var F;const L=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||L||typeof b=="function"&&!b(O))return;const U=T_(O),H="["+hW("inert")+"]",D=V1(o).querySelectorAll(H);let z=_i(U)?U:null;for(;z&&!k0(z);){const G=lm(z);if(k0(G)||!_i(G))break;z=G}if(D.length&&_i(U)&&!o7e(U)&&!GC(U,o)&&Array.from(D).every(G=>!GC(z,G)))return;if(kl(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,ne=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let ce=ne&&O.offsetX>U.clientWidth;if(ne&&wc(U).direction==="rtl"&&(ce=O.offsetX<=U.offsetWidth-U.clientWidth),ce||G&&O.offsetY>U.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&e8(y.nodesRef.current,W).some(G=>{var ne;return J5(O,(ne=G.context)==null?void 0:ne.elements.floating)});if(J5(O,o)||J5(O,s)||j)return;const q=y?e8(y.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(ne=>{var ce;if((ce=ne.context)!=null&&ce.open&&!ne.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,O,"outside-press")}),P=Dg(O=>{var F;const L=()=>{var B;M(O),(B=T_(O))==null||B.removeEventListener(f,L)};(F=T_(O))==null||F.addEventListener(f,L)});return N.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=T;function O(B){r(!1,B,"ancestor-scroll")}const F=V1(o);l&&F.addEventListener("keydown",A?R:I,A),b&&F.addEventListener(f,C?P:M,C);let L=[];return p&&(_i(s)&&(L=Wp(s)),_i(o)&&(L=L.concat(Wp(o))),!_i(i)&&i&&i.contextElement&&(L=L.concat(Wp(i.contextElement)))),L=L.filter(B=>{var U;return B!==((U=F.defaultView)==null?void 0:U.visualViewport)}),L.forEach(B=>{B.addEventListener("scroll",O,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",A?R:I,A),b&&F.removeEventListener(f,C?P:M,C),L.forEach(B=>{B.removeEventListener("scroll",O)})}},[a,o,s,i,l,b,f,n,r,p,u,S,T,I,A,R,M,C,P]),N.useEffect(()=>{w.current=!1},[b,f]),N.useMemo(()=>u?{reference:{onKeyDown:I,[cze[h]]:O=>{d&&r(!1,O.nativeEvent,"reference-press")}},floating:{onKeyDown:I,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[fze[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,I])}function hze(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Sve(),s=N.useRef({}),[o]=N.useState(()=>ize()),a=fW()!=null,[u,l]=N.useState(r.reference),c=Dg((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=N.useMemo(()=>({setPositionReference:l}),[]),d=N.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return N.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function pW(e){e===void 0&&(e={});const{nodeId:t}=e,n=hze({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=N.useState(null),[a,u]=N.useState(null),c=(i==null?void 0:i.reference)||s,f=N.useRef(null),d=dW();Xd(()=>{c&&(f.current=c)},[c]);const h=X7e({...e,elements:{...i,...a&&{reference:a}}}),p=N.useCallback(b=>{const w=_i(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=N.useCallback(b=>{(_i(b)||b===null)&&(f.current=b,o(b)),(_i(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!_i(b))&&h.refs.setReference(b)},[h.refs]),g=N.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=N.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=N.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Xd(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),N.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function pze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=N.useRef(!1),c=N.useRef(),f=N.useRef(!0);return N.useEffect(()=>{if(!a)return;const d=$u(o);function h(){!n&&kl(o)&&o===hse(V1(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),N.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),N.useEffect(()=>()=>{clearTimeout(c.current)},[]),N.useMemo(()=>a?{reference:{onPointerDown(d){t7e(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=T_(d.nativeEvent);if(u&&_i(h))try{if(n7e()&&r7e())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!u7e(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=_i(h)&&h.hasAttribute(hW("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=hse(o?o.ownerDocument:document);!h&&g===o||GC((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||GC(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Cse="active",Ise="selected";function t8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Cse]:o,[Ise]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Cse,Ise].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function mze(e){e===void 0&&(e=[]);const t=e,n=N.useCallback(s=>t8(s,e,"reference"),t),r=N.useCallback(s=>t8(s,e,"floating"),t),i=N.useCallback(s=>t8(s,e,"item"),e.map(s=>s==null?void 0:s.item));return N.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const gze=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function yze(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=gze.get(o))!=null?n:o,u=Sve(),c=fW()!=null;return N.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function Cve(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function kse(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Rse(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const vze={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function bze({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Te(t),height:Te(t),transform:"rotate(45deg)",position:"absolute",[vze[u]]:Te(r)},f=Te(-t/2);return u==="left"?{...c,...kse(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...kse(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Rse(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Rse(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const mW=N.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Rh();return s?_.jsx("div",{...l,ref:c,style:{...u,...bze({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});mW.displayName="@mantine/core/FloatingArrow";const[_ze,Ive]=_a("Popover component was not found in the tree");function BM({children:e,active:t=!0,refProp:n="ref"}){const r=aBe(t),i=ls(r,e==null?void 0:e.ref);return yy(e)?N.cloneElement(e,{[n]:i}):e}function kve(e){return _.jsx(eW,{tabIndex:-1,"data-autofocus":!0,...e})}BM.displayName="@mantine/core/FocusTrap";kve.displayName="@mantine/core/FocusTrapInitialFocus";BM.InitialFocus=kve;function wze(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const Eze={},Rve=N.forwardRef((e,t)=>{const{children:n,target:r,...i}=Ae("Portal",Eze,e),[s,o]=N.useState(!1),a=N.useRef(null);return gb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:wze(i),Vq(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:EI.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});Rve.displayName="@mantine/core/Portal";function AI({withinPortal:e=!0,children:t,...n}){return e?_.jsx(Rve,{...n,children:t}):_.jsx(_.Fragment,{children:t})}AI.displayName="@mantine/core/OptionalPortal";const YS=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Te(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),GR={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...YS("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...YS("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...YS("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...YS("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...YS("top"),common:{transformOrigin:"top right"}}},Nse={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function xze({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in GR?{transitionProperty:GR[e].transitionProperty,...i,...GR[e].common,...GR[e][Nse[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Nse[t]]}}function Sze({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=Ms(),l=Hq(),c=u.respectReducedMotion?l:!1,[f,d]=N.useState(c?0:e),[h,p]=N.useState(r?"entered":"exited"),m=N.useRef(-1),g=N.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{i9e.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return um(()=>{y(r)},[r]),N.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Fm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=Sze({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(xze({transition:t,duration:f,state:d,timingFunction:h}))})}Fm.displayName="@mantine/core/Transition";var Nve={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const Tze={},gW=je((e,t)=>{var g,y,v,b;const n=Ae("PopoverDropdown",Tze,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Ive(),h=P1e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ls(t,d.floating);return d.disabled?null:_.jsx(AI,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(Fm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(BM,{active:d.trapFocus,children:_.jsxs(Ee,{...p,...f,variant:u,ref:m,onKeyDownCapture:Y9e(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Te(d.width)},i]}),children:[o,_.jsx(mW,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});gW.classes=Nve;gW.displayName="@mantine/core/PopoverDropdown";const Aze={refProp:"ref",popupType:"dialog"},Pve=je((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Ae("PopoverTarget",Aze,e);if(!yy(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Ive(),u=ls(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return N.cloneElement(n,{...o,...l,...a.targetProps,className:Yi(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Pve.displayName="@mantine/core/PopoverTarget";function Dve({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=N.useState(0);N.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return z7e(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),um(()=>{t.update()},r),um(()=>{s(o=>o+1)},[e])}function Cze(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function Ize(e,t){const n=Cze(e.middlewares),r=[wve(e.offset)];return n.shift&&r.push(cW(typeof n.shift=="boolean"?{limiter:wse(),padding:5}:{limiter:wse(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?cU():cU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?fU():fU(n.inline)),r.push(Eve({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(J7e({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function kze(e){const[t,n]=Po({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=pW({strategy:e.strategy,placement:e.position,middleware:Ize(e,()=>s)});return Dve({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),um(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),um(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const Rze={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Nc("popover"),__staticSelector:"Popover",width:"max-content"},Nze=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:di(t),"--popover-shadow":Uq(n)}});function Qr(e){var be,ke,ze,ct,Dt,We;const t=Ae("Popover",Rze,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:S,clickOutsideEvents:T,trapFocus:A,onClose:C,onOpen:I,onChange:R,zIndex:M,radius:P,shadow:O,id:F,defaultOpened:L,__staticSelector:B,withRoles:U,disabled:H,returnFocus:D,variant:z,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,ne=vt({name:B,props:t,classes:Nve,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:Nze}),ce=N.useRef(null),[de,he]=N.useState(null),[ye,Ie]=N.useState(null),{dir:ve}=Rh(),Ke=Zu(F),Ue=kze({middlewares:c,width:l,position:Cve(ve,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ce,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:L,onChange:R,onOpen:I,onClose:C,strategy:q});Q9e(()=>b&&Ue.onClose(),T,[de,ye]);const gt=N.useCallback(me=>{he(me),Ue.floating.refs.setReference(me)},[Ue.floating.refs.setReference]),rt=N.useCallback(me=>{Ie(me),Ue.floating.refs.setFloating(me)},[Ue.floating.refs.setFloating]);return _.jsx(_ze,{value:{returnFocus:D,disabled:H,controlled:Ue.controlled,reference:gt,floating:rt,x:Ue.floating.x,y:Ue.floating.y,arrowX:(ze=(ke=(be=Ue.floating)==null?void 0:be.middlewareData)==null?void 0:ke.arrow)==null?void 0:ze.x,arrowY:(We=(Dt=(ct=Ue.floating)==null?void 0:ct.middlewareData)==null?void 0:Dt.arrow)==null?void 0:We.y,opened:Ue.opened,arrowRef:ce,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:A,withinPortal:w,portalProps:E,zIndex:M,radius:P,shadow:O,closeOnEscape:S,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${Ke}-target`,getDropdownId:()=>`${Ke}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:ne},children:n})}Qr.Target=Pve;Qr.Dropdown=gW;Qr.displayName="@mantine/core/Popover";Qr.extend=e=>e;var vf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Pze=N.forwardRef(({className:e,...t},n)=>_.jsxs(Ee,{component:"span",className:Yi(vf.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:vf.bar}),_.jsx("span",{className:vf.bar}),_.jsx("span",{className:vf.bar})]})),Dze=N.forwardRef(({className:e,...t},n)=>_.jsxs(Ee,{component:"span",className:Yi(vf.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:vf.dot}),_.jsx("span",{className:vf.dot}),_.jsx("span",{className:vf.dot})]})),Oze=N.forwardRef(({className:e,...t},n)=>_.jsx(Ee,{component:"span",className:Yi(vf.ovalLoader,e),...t,ref:n})),Ove={bars:Pze,oval:Oze,dots:Dze},$ze={loaders:Ove,type:"oval"},Mze=(e,{size:t,color:n})=>({root:{"--loader-size":yn(t,"loader-size"),"--loader-color":n?ei(n,e):void 0}}),jm=je((e,t)=>{const n=Ae("Loader",$ze,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=vt({name:"Loader",props:n,classes:vf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:Mze});return p?_.jsx(Ee,{...g("root"),ref:t,...m,children:p}):_.jsx(Ee,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});jm.defaultLoaders=Ove;jm.classes=vf;jm.displayName="@mantine/core/Loader";var UM={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Pse={orientation:"horizontal"},Lze=(e,{borderWidth:t})=>({group:{"--ai-border-width":Te(t)}}),yW=je((e,t)=>{const n=Ae("ActionIconGroup",Pse,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ae("ActionIconGroup",Pse,e),p=vt({name:"ActionIconGroup",props:n,classes:UM,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Lze,rootSelector:"group"});return _.jsx(Ee,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});yW.classes=UM;yW.displayName="@mantine/core/ActionIconGroup";const Fze={},jze=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":yn(t,"ai-size"),"--ai-radius":n===void 0?void 0:di(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},N0=Ls((e,t)=>{const n=Ae("ActionIcon",Fze,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...S}=n,T=vt({name:["ActionIcon",p],props:n,className:r,style:u,classes:UM,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:jze});return _.jsxs(Rs,{...T("root",{active:!v&&!l&&!b}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(Fm,{mounted:!!l,transition:"slide-down",duration:150,children:A=>_.jsx(Ee,{component:"span",...T("loader",{style:A}),"aria-hidden":!0,children:_.jsx(jm,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(Ee,{component:"span",mod:{loading:l},...T("icon"),children:y})]})});N0.classes=UM;N0.displayName="@mantine/core/ActionIcon";N0.Group=yW;const $ve=N.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));$ve.displayName="@mantine/core/CloseIcon";var Mve={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Bze={variant:"subtle"},Uze=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":yn(t,"cb-size"),"--cb-radius":n===void 0?void 0:di(n),"--cb-icon-size":Te(r)}}),_y=Ls((e,t)=>{const n=Ae("CloseButton",Bze,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=vt({name:"CloseButton",props:n,className:a,style:l,classes:Mve,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:Uze});return _.jsxs(Rs,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx($ve,{}),i]})});_y.classes=Mve;_y.displayName="@mantine/core/CloseButton";function zze(e){return N.Children.toArray(e).filter(Boolean)}var Lve={root:"m_4081bf90"};const Vze={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},Hze=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Il(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Os=je((e,t)=>{const n=Ae("Group",Vze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=zze(u),E=w.length,S=Il(l??"md"),A={childWidth:`calc(${100/E}% - (${S} - ${S} / ${E}))`},C=vt({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:Lve,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:Hze});return _.jsx(Ee,{...C("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});Os.classes=Lve;Os.displayName="@mantine/core/Group";var Fve={root:"m_9814e45f"};const qze={zIndex:Nc("modal")},Wze=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&vd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Te(i)})`:void 0,"--overlay-radius":s===void 0?void 0:di(s),"--overlay-z-index":o==null?void 0:o.toString()}}),YC=Ls((e,t)=>{const n=Ae("Overlay",qze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=vt({name:"Overlay",props:n,classes:Fve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Wze});return _.jsx(Ee,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});YC.classes=Fve;YC.displayName="@mantine/core/Overlay";const[Gze,Bm]=_a("ModalBase component was not found in tree");function Yze({opened:e,transitionDuration:t}){const[n,r]=N.useState(e),i=N.useRef(),o=Hq()?0:t;return N.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function Kze({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Zu(e),[u,l]=N.useState(!1),[c,f]=N.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=Yze({opened:n,transitionDuration:d});return M1e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),P1e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const jve=N.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:S,bodyMounted:T,shouldLockScroll:A,setTitleMounted:C,setBodyMounted:I}=Kze({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(AI,{...c,withinPortal:l,children:_.jsx(Gze,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:S,bodyMounted:T,setTitleMounted:C,setBodyMounted:I,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(DM,{enabled:A&&f,...v,children:_.jsx(Ee,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||Nc("modal")).toString(),"--mb-shadow":Uq(p),"--mb-padding":Il(m)},children:d})})})})});function Xze(){const e=Bm();return N.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var sE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const vW=N.forwardRef(({className:e,...t},n)=>{const r=Xze(),i=Bm();return _.jsx(Ee,{ref:n,...t,id:r,className:Yi({[sE.body]:!i.unstyled},e)})});vW.displayName="@mantine/core/ModalBaseBody";const bW=N.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Bm();return _.jsx(_y,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Yi({[sE.close]:!i.unstyled},e),unstyled:i.unstyled})});bW.displayName="@mantine/core/ModalBaseCloseButton";const Bve=N.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Bm();return _.jsx(Fm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Yi({[sE.inner]:!a.unstyled},n.className),children:_.jsx(BM,{active:a.opened&&a.trapFocus,children:_.jsx(FM,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Yi({[sE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),_W=N.forwardRef(({className:e,...t},n)=>{const r=Bm();return _.jsx(Ee,{component:"header",ref:n,className:Yi({[sE.header]:!r.unstyled},e),...t})});_W.displayName="@mantine/core/ModalBaseHeader";const Qze={duration:200,timingFunction:"ease",transition:"fade"};function Jze(e){const t=Bm();return{...Qze,...t.transitionProps,...e}}const wW=N.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Bm(),o=Jze(t);return _.jsx(Fm,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(YC,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});wW.displayName="@mantine/core/ModalBaseOverlay";function Zze(){const e=Bm();return N.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const EW=N.forwardRef(({className:e,...t},n)=>{const r=Zze(),i=Bm();return _.jsx(Ee,{component:"h2",ref:n,className:Yi({[sE.title]:!i.unstyled},e),...t,id:r})});EW.displayName="@mantine/core/ModalBaseTitle";function Uve({children:e}){return _.jsx(_.Fragment,{children:e})}const[eVe,xx]=vx({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Dc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Dse={},tVe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${so(t)} - ${Te(2)})`}}),zM=je((e,t)=>{const n=Ae("InputDescription",Dse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Ae("InputDescription",Dse,n),p=xx(),m=vt({name:["InputWrapper",c],props:n,classes:Dc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:tVe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(Ee,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});zM.classes=Dc;zM.displayName="@mantine/core/InputDescription";const nVe={},rVe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${so(t)} - ${Te(2)})`}}),VM=je((e,t)=>{const n=Ae("InputError",nVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=vt({name:["InputWrapper",c],props:n,classes:Dc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:rVe}),m=xx(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(Ee,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});VM.classes=Dc;VM.displayName="@mantine/core/InputError";const Ose={labelElement:"label"},iVe=(e,{size:t})=>({label:{"--input-label-size":so(t),"--input-asterisk-color":void 0}}),HM=je((e,t)=>{const n=Ae("InputLabel",Ose,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=Ae("InputLabel",Ose,n),b=vt({name:["InputWrapper",m],props:n,classes:Dc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:iVe}),w=xx(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(Ee,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});HM.classes=Dc;HM.displayName="@mantine/core/InputLabel";const $se={},xW=je((e,t)=>{const n=Ae("InputPlaceholder",$se,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Ae("InputPlaceholder",$se,n),p=vt({name:["InputPlaceholder",l],props:n,classes:Dc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(Ee,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});xW.classes=Dc;xW.displayName="@mantine/core/InputPlaceholder";function sVe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const oVe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},aVe=(e,{size:t})=>({label:{"--input-label-size":so(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${so(t)} - ${Te(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${so(t)} - ${Te(2)})`}}),SW=je((e,t)=>{const n=Ae("InputWrapper",oVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:S,id:T,required:A,__stylesApiProps:C,mod:I,...R}=n,M=vt({name:["InputWrapper",f],props:C||n,classes:Dc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aVe}),P={size:l,variant:c,__staticSelector:f},O=Zu(T),F=typeof S=="boolean"?S:A,L=(b==null?void 0:b.id)||`${O}-error`,B=(v==null?void 0:v.id)||`${O}-description`,U=O,H=!!m&&typeof m!="boolean",D=!!g,z=`${H?L:""} ${D?B:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${O}-label`,q=p&&_.jsx(HM,{labelElement:w,id:j,htmlFor:U,required:F,...P,...y,children:p},"label"),G=D&&_.jsx(zM,{...v,...P,size:(v==null?void 0:v.size)||P.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ne=_.jsx(N.Fragment,{children:d(E)},"input"),ce=H&&N.createElement(VM,{...b,...P,size:(b==null?void 0:b.size)||P.size,key:"error",id:(b==null?void 0:b.id)||L},m),de=h.map(he=>{switch(he){case"label":return q;case"input":return ne;case"description":return G;case"error":return ce;default:return null}});return _.jsx(eVe,{value:{getStyles:M,describedBy:W,inputId:U,labelId:j,...sVe(h,{hasDescription:D,hasError:H})},children:_.jsx(Ee,{ref:t,variant:c,size:l,mod:[{error:!!m},I],...M("root"),...R,children:de})})});SW.classes=Dc;SW.displayName="@mantine/core/InputWrapper";const uVe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},lVe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":yn(t.size,"input-height"),"--input-fz":so(t.size),"--input-radius":t.radius===void 0?void 0:di(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Te(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Te(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?yn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Ri=Ls((e,t)=>{const n=Ae("Input",uVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:S,variant:T,vars:A,pointer:C,multiline:I,radius:R,id:M,withAria:P,withErrorStyles:O,mod:F,inputSize:L,...B}=n,{styleProps:U,rest:H}=_x(B),D=xx(),z={offsetBottom:D==null?void 0:D.offsetBottom,offsetTop:D==null?void 0:D.offsetTop},W=vt({name:["Input",l],props:c||n,classes:Dc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:A,varsResolver:lVe}),j=P?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":D==null?void 0:D.describedBy,id:(D==null?void 0:D.inputId)||M}:{};return _.jsxs(Ee,{...W("wrapper"),...U,...d,mod:[{error:!!h&&O,pointer:C,disabled:p,multiline:I,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:T,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(Ee,{component:"input",...H,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&O},variant:T,__size:L,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});Ri.classes=Dc;Ri.Wrapper=SW;Ri.Label=HM;Ri.Error=VM;Ri.Description=zM;Ri.Placeholder=xW;Ri.displayName="@mantine/core/Input";function zve(e,t,n){const r=Ae(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:A,vars:C,mod:I,...R}=r,{styleProps:M,rest:P}=_x(R),O={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:A,id:v,mod:I,...y};return{...P,classNames:u,styles:l,unstyled:f,wrapperProps:{...O,...M},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:A,id:v}}}const cVe={__staticSelector:"InputBase",withAria:!0},Oc=Ls((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=zve("InputBase",cVe,e);return _.jsx(Ri.Wrapper,{...r,children:_.jsx(Ri,{...n,...i,ref:t})})});Oc.classes={...Ri.classes,...Ri.Wrapper.classes};Oc.displayName="@mantine/core/InputBase";const fVe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Vve={root:"m_8bffd616"};const dVe={},Jt=Ls((e,t)=>{const n=Ae("Flex",dVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=vt({name:"Flex",classes:Vve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=Ms(),b=MM(),w=W1e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:fVe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(SI,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(Ee,{ref:t,...y("root",{className:b,style:yx(w.inlineStyles)}),...g})]})});Jt.classes=Vve;Jt.displayName="@mantine/core/Flex";function hVe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function pVe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=N.useRef(),[s,o]=N.useState(!1),[a,u]=N.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=N.useRef(),d=N.useRef();return N.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),N.useEffect(()=>{if(t){const h=p=>{hVe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),gBe(()=>{j1e()!=="test"&&o(!0)},20,{autoInvoke:!0}),yBe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Hve={root:"m_96b553a6"};const mVe={},gVe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),TW=je((e,t)=>{const n=Ae("FloatingIndicator",mVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=vt({name:"FloatingIndicator",classes:Hve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gVe}),g=N.useRef(null),{initialized:y,hidden:v}=pVe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=ls(t,g);return!l||!c?null:_.jsx(Ee,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});TW.displayName="@mantine/core/FloatingIndicator";TW.classes=Hve;function dO({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Te(t),height:Te(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}dO.displayName="@mantine/core/AccordionChevron";var qve={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const yVe={},vVe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:di(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},AW=je((e,t)=>{const n=Ae("Alert",yVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=vt({name:"Alert",classes:qve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vVe}),S=Zu(h),T=f&&`${S}-title`||void 0,A=`${S}-body`;return _.jsx(Ee,{id:S,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":A,"aria-labelledby":T,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:T,...E("label"),children:f})}),d&&_.jsx("div",{id:A,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(_y,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});AW.classes=qve;AW.displayName="@mantine/core/Alert";var Wve={root:"m_b6d8b162"};function bVe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const _Ve={inherit:!1},wVe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":so(i),"--text-lh":N1e(i),"--text-gradient":t==="gradient"?rU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?ei(s,e):void 0}}),ot=Ls((e,t)=>{const n=Ae("Text",_Ve,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=vt({name:["Text",l],props:n,classes:Wve,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:wVe});return _.jsx(Ee,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":bVe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});ot.classes=Wve;ot.displayName="@mantine/core/Text";var Gve={root:"m_849cf0da"};const EVe={underline:"hover"},Sx=Ls((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Ae("Anchor",EVe,e);return _.jsx(ot,{component:"a",ref:t,className:Yi({[Gve.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Sx.classes=Gve;Sx.displayName="@mantine/core/Anchor";const[xVe,Tx]=_a("AppShell was not found in tree");var wy={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const SVe={},CW=je((e,t)=>{const n=Ae("AppShellAside",SVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Tx();return h.disabled?null:_.jsx(Ee,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});CW.classes=wy;CW.displayName="@mantine/core/AppShellAside";const TVe={},IW=je((e,t)=>{var p;const n=Ae("AppShellFooter",TVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Tx();return h.disabled?null:_.jsx(Ee,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Yi({[DM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});IW.classes=wy;IW.displayName="@mantine/core/AppShellFooter";const AVe={},kW=je((e,t)=>{var p;const n=Ae("AppShellHeader",AVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Tx();return h.disabled?null:_.jsx(Ee,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Yi({[DM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});kW.classes=wy;kW.displayName="@mantine/core/AppShellHeader";const CVe={},RW=je((e,t)=>{const n=Ae("AppShellMain",CVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Tx();return _.jsx(Ee,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});RW.classes=wy;RW.displayName="@mantine/core/AppShellMain";function CI(e){return typeof e=="object"?e.base:e}function II(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function kI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function IVe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),II(s)){const f=Te(CI(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(kI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Te(s.base),e["--app-shell-aside-offset"]=Te(s.base)),ki(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Te(s[f]),t[f]["--app-shell-aside-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=zq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function kVe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(II(r)){const o=Te(CI(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}kI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Te(r.base),s&&(e["--app-shell-footer-offset"]=Te(r.base))),ki(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Te(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function RVe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(II(r)){const o=Te(CI(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}kI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Te(r.base),s&&(e["--app-shell-header-offset"]=Te(r.base))),ki(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Te(r[o]),s&&(t[o]["--app-shell-header-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function NVe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),II(s)){const f=Te(CI(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(kI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Te(s.base),e["--app-shell-navbar-offset"]=Te(s.base)),ki(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Te(s[f]),t[f]["--app-shell-navbar-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=zq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function n8(e){return Number(e)===0?"0px":Il(e)}function PVe({padding:e,baseStyles:t,minMediaStyles:n}){II(e)&&(t["--app-shell-padding"]=n8(CI(e))),kI(e)&&(e.base&&(t["--app-shell-padding"]=n8(e.base)),ki(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=n8(e[r]))}))}function DVe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};NVe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),IVe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),RVe({baseStyles:u,minMediaStyles:o,header:t}),kVe({baseStyles:u,minMediaStyles:o,footer:n}),PVe({baseStyles:u,minMediaStyles:o,padding:i});const l=oO(ki(o),s).map(d=>({query:`(min-width: ${iO(d.px)})`,styles:o[d.value]})),c=oO(ki(a),s).map(d=>({query:`(max-width: ${iO(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function OVe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Ms(),o=vy(),{media:a,baseStyles:u}=DVe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(SI,{media:a,styles:u,selector:o.cssVariablesSelector})}const $Ve={},NW=je((e,t)=>{const n=Ae("AppShellNavbar",$Ve,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Tx();return h.disabled?null:_.jsx(Ee,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});NW.classes=wy;NW.displayName="@mantine/core/AppShellNavbar";const MVe={},PW=Ls((e,t)=>{const n=Ae("AppShellSection",MVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Tx();return _.jsx(Ee,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});PW.classes=wy;PW.displayName="@mantine/core/AppShellSection";function LVe({transitionDuration:e,disabled:t}){const[n,r]=N.useState(!0),i=N.useRef(),s=N.useRef();return M1e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),gb(()=>{N.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const FVe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Nc("app")},jVe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),ci=je((e,t)=>{const n=Ae("AppShell",FVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...S}=n,T=vt({name:"AppShell",classes:wy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jVe}),A=LVe({disabled:y,transitionDuration:d});return _.jsxs(xVe,{value:{getStyles:T,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(OVe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(Ee,{ref:t,...T("root"),mod:[{resizing:A,layout:g,disabled:y},E],...S})]})});ci.classes=wy;ci.displayName="@mantine/core/AppShell";ci.Navbar=NW;ci.Header=kW;ci.Main=RW;ci.Aside=CW;ci.Footer=IW;ci.Section=PW;function Yve(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Yve(t))}:e}function Kve(e){return e?e.map(t=>Yve(t)):[]}function DW(e){return e.reduce((t,n)=>"group"in n?{...t,...DW(n.items)}:(t[n.value]=n,t),{})}var zu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const BVe={error:null},UVe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":yn(t,"combobox-chevron-size")}}),OW=je((e,t)=>{const n=Ae("ComboboxChevron",BVe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=vt({name:"ComboboxChevron",classes:zu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:UVe,rootSelector:"chevron"});return _.jsx(Ee,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});OW.classes=zu;OW.displayName="@mantine/core/ComboboxChevron";const[zVe,$c]=_a("Combobox component was not found in tree"),Xve=N.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(_y,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Xve.displayName="@mantine/core/ComboboxClearButton";const VVe={},$W=je((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Ae("ComboboxDropdown",VVe,e),u=$c();return _.jsx(Qr.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});$W.classes=zu;$W.displayName="@mantine/core/ComboboxDropdown";const HVe={refProp:"ref"},Qve=je((e,t)=>{const{children:n,refProp:r}=Ae("ComboboxDropdownTarget",HVe,e);if($c(),!yy(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(Qr.Target,{ref:t,refProp:r,children:n})});Qve.displayName="@mantine/core/ComboboxDropdownTarget";const qVe={},MW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ComboboxEmpty",qVe,e),u=$c();return _.jsx(Ee,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});MW.classes=zu;MW.displayName="@mantine/core/ComboboxEmpty";function LW({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=$c(),[a,u]=N.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const WVe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Jve=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ae("ComboboxEventsTarget",WVe,e);if(!yy(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=$c(),f=LW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return N.cloneElement(n,{...f,...l,[r]:ls(t,c.store.targetRef,n==null?void 0:n.ref)})});Jve.displayName="@mantine/core/ComboboxEventsTarget";const GVe={},FW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ComboboxFooter",GVe,e),u=$c();return _.jsx(Ee,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});FW.classes=zu;FW.displayName="@mantine/core/ComboboxFooter";const YVe={},jW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Ae("ComboboxGroup",YVe,e),c=$c();return _.jsxs(Ee,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});jW.classes=zu;jW.displayName="@mantine/core/ComboboxGroup";const KVe={},BW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ComboboxHeader",KVe,e),u=$c();return _.jsx(Ee,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});BW.classes=zu;BW.displayName="@mantine/core/ComboboxHeader";function Zve({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Zve.displayName="@mantine/core/ComboboxHiddenInput";const XVe={},UW=je((e,t)=>{const n=Ae("ComboboxOption",XVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=$c(),v=N.useId(),b=l||v;return _.jsx(Ee,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});UW.classes=zu;UW.displayName="@mantine/core/ComboboxOption";const QVe={},zW=je((e,t)=>{const n=Ae("ComboboxOptions",QVe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=$c(),d=Zu(a);return N.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(Ee,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});zW.classes=zu;zW.displayName="@mantine/core/ComboboxOptions";const JVe={withAriaAttributes:!0,withKeyboardNavigation:!0},VW=je((e,t)=>{const n=Ae("ComboboxSearch",JVe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=$c(),h=d.getStyles("search"),p=LW({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(Ri,{ref:ls(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});VW.classes=zu;VW.displayName="@mantine/core/ComboboxSearch";const ZVe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},ebe=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ae("ComboboxTarget",ZVe,e);if(!yy(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=$c(),f=LW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=N.cloneElement(n,{...f,...l});return _.jsx(Qr.Target,{ref:ls(t,c.store.targetRef),children:d})});ebe.displayName="@mantine/core/ComboboxTarget";function eHe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function tHe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function nHe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function HW({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Po({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=N.useRef(null),c=N.useRef(-1),f=N.useRef(null),d=N.useRef(null),h=N.useRef(-1),p=N.useRef(-1),m=N.useRef(-1),g=N.useCallback((L="unknown")=>{a||(u(!0),i==null||i(L))},[u,i,a]),y=N.useCallback((L="unknown")=>{a&&(u(!1),r==null||r(L))},[u,r,a]),v=N.useCallback((L="unknown")=>{a?y(L):g(L)},[y,g,a]),b=N.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-selected]`);L==null||L.removeAttribute("data-combobox-selected"),L==null||L.removeAttribute("aria-selected")},[]),w=N.useCallback(L=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const H=L>=U.length?0:L<0?U.length-1:L;return c.current=H,U!=null&&U[H]&&!U[H].hasAttribute("data-combobox-disabled")?(b(),U[H].setAttribute("data-combobox-selected","true"),U[H].setAttribute("aria-selected","true"),U[H].scrollIntoView({block:"nearest",behavior:o}),U[H].id):null},[o,b]),E=N.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-active]`);if(L){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(H=>H===L);return w(U)}return w(0)},[w]),S=N.useCallback(()=>w(tHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),T=N.useCallback(()=>w(eHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),A=N.useCallback(()=>w(nHe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),C=N.useCallback((L="selected",B)=>{m.current=window.setTimeout(()=>{var D;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${L}`));c.current=H,B!=null&&B.scrollIntoView&&((D=U[H])==null||D.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),I=N.useCallback(()=>{c.current=-1,b()},[b]),R=N.useCallback(()=>{const L=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=L==null?void 0:L[c.current];B==null||B.click()},[]),M=N.useCallback(L=>{l.current=L},[]),P=N.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),O=N.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=N.useCallback(()=>c.current,[]);return N.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:A,selectActiveOption:E,selectNextOption:S,selectPreviousOption:T,resetSelectedOption:I,updateSelectedOptionIndex:C,listId:l.current,setListId:M,clickSelectedOption:R,searchRef:f,focusSearchInput:P,targetRef:d,focusTarget:O}}const rHe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},iHe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":so(t),"--combobox-option-padding":yn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Te(n),"--combobox-option-fz":so(t),"--combobox-option-padding":yn(t,"combobox-option-padding")}});function Yn(e){const t=Ae("Combobox",rHe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=HW(),y=o||g,v=vt({name:h||"Combobox",classes:zu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:iHe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(zVe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(Qr,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const sHe=e=>e;Yn.extend=sHe;Yn.classes=zu;Yn.displayName="@mantine/core/Combobox";Yn.Target=ebe;Yn.Dropdown=$W;Yn.Options=zW;Yn.Option=UW;Yn.Search=VW;Yn.Empty=MW;Yn.Chevron=OW;Yn.Footer=FW;Yn.Header=BW;Yn.EventsTarget=Jve;Yn.DropdownTarget=Qve;Yn.Group=jW;Yn.ClearButton=Xve;Yn.HiddenInput=Zve;var tbe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const oHe=tbe,qW=N.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const S=vt({name:e,props:t,className:n,style:y,classes:tbe,classNames:r,styles:i,unstyled:s});return _.jsx(Ee,{...S("root"),ref:E,__vars:{"--label-fz":so(d),"--label-lh":yn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(Ee,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,_.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(Ee,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(Ri.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(Ri.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});qW.displayName="@mantine/core/InlineInput";const nbe=N.createContext(null),aHe=nbe.Provider,rbe=()=>N.useContext(nbe),[uHe,lHe]=vx();var ibe={card:"m_26775b0a"};const cHe={withBorder:!0},fHe=(e,{radius:t})=>({card:{"--card-radius":di(t)}}),WW=je((e,t)=>{const n=Ae("CheckboxCard",cHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=vt({name:"CheckboxCard",classes:ibe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fHe,rootSelector:"card"}),g=rbe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(uHe,{value:{checked:y},children:_.jsx(Rs,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});WW.displayName="@mantine/core/CheckboxCard";WW.classes=ibe;function sbe({children:e,role:t}){const n=xx();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const dHe={},GW=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Ae("CheckboxGroup",dHe,e),[c,f]=Po({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(aHe,{value:{value:c,onChange:d,size:s},children:_.jsx(Ri.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(sbe,{role:"group",children:a})})})});GW.classes=Ri.Wrapper.classes;GW.displayName="@mantine/core/CheckboxGroup";function obe({size:e,style:t,...n}){const r=e!==void 0?{width:Te(e),height:Te(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function abe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(obe,{...t})}var ube={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const hHe={icon:abe},pHe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=kh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":yn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:di(t),"--checkbox-color":s==="outline"?u:ei(n,e),"--checkbox-icon-color":i?ei(i,e):bx(o,e)?by({color:n,theme:e,autoContrast:o}):void 0}}},YW=je((e,t)=>{const n=Ae("CheckboxIndicator",hHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=vt({name:"CheckboxIndicator",classes:ube,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pHe,rootSelector:"indicator"}),S=lHe(),T=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return _.jsx(Ee,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});YW.displayName="@mantine/core/CheckboxIndicator";YW.classes=ube;var lbe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const mHe={labelPosition:"right",icon:abe},gHe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=kh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":yn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:di(t),"--checkbox-color":s==="outline"?u:ei(n,e),"--checkbox-icon-color":i?ei(i,e):bx(o,e)?by({color:n,theme:e,autoContrast:o}):void 0}}},fm=je((e,t)=>{const n=Ae("Checkbox",mHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:S,icon:T,rootRef:A,iconColor:C,onChange:I,autoContrast:R,mod:M,...P}=n,O=rbe(),F=d||(O==null?void 0:O.size),L=T,B=vt({name:"Checkbox",props:n,classes:lbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gHe}),{styleProps:U,rest:H}=_x(P),D=Zu(f),z=O?{checked:O.value.includes(H.value),onChange:W=>{O.onChange(W),I==null||I(W)}}:{};return _.jsx(qW,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:D,size:F,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:A,mod:M,...U,...p,children:_.jsxs(Ee,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(Ee,{component:"input",id:D,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:S},...B("input",{focusable:!0,variant:E}),onChange:I,...H,...z,type:"checkbox"}),_.jsx(L,{indeterminate:S,...B("icon")})]})})});fm.classes={...lbe,...oHe};fm.displayName="@mantine/core/Checkbox";fm.Group=GW;fm.Indicator=YW;fm.Card=WW;function oE(e){return"group"in e}function cbe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;oE(o)&&i.push({group:o.group,items:cbe({options:o.items,search:t,limit:n-i.length})}),oE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function yHe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function fbe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(oE(n))fbe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function vHe(e,t){return Array.isArray(e)?e.includes(t):e===t}function dbe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!oE(e)){const a=vHe(n,e.value),u=t&&a&&_.jsx(obe,{className:zu.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Yn.Option,{value:e.value,disabled:e.disabled,className:Yi({[zu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(dbe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Yn.Group,{label:e.group,children:o})}function hbe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){fbe(e);const b=typeof i=="string"?(r||cbe)({options:e,search:u?i:"",limit:s??1/0}):e,w=yHe(b),E=b.map(S=>_.jsx(dbe,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},oE(S)?S.group:S.value));return _.jsx(Yn.Dropdown,{hidden:t||n&&w,children:_.jsxs(Yn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(yb.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(Yn.Empty,{children:d})]})})}var pbe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const bHe={},_He=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":yn(s,"badge-height"),"--badge-padding-x":yn(s,"badge-padding-x"),"--badge-fz":yn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:di(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?ei(n,e):void 0}}},Gp=Ls((e,t)=>{const n=Ae("Badge",bHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=vt({name:"Badge",props:n,classes:pbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_He});return _.jsxs(Ee,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});Gp.classes=pbe;Gp.displayName="@mantine/core/Badge";var mbe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const wHe={},EHe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?ei(t,e):void 0,"--burger-size":yn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),KW=je((e,t)=>{const n=Ae("Burger",wHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=vt({name:"Burger",classes:mbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EHe});return _.jsxs(Rs,{...p("root"),ref:t,...h,children:[_.jsx(Ee,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});KW.classes=mbe;KW.displayName="@mantine/core/Burger";var qM={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Mse={orientation:"horizontal"},xHe=(e,{borderWidth:t})=>({group:{"--button-border-width":Te(t)}}),XW=je((e,t)=>{const n=Ae("ButtonGroup",Mse,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ae("ButtonGroup",Mse,e),p=vt({name:"ButtonGroup",props:n,classes:qM,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:xHe,rootSelector:"group"});return _.jsx(Ee,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});XW.classes=qM;XW.displayName="@mantine/core/ButtonGroup";const SHe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},THe={},AHe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":yn(s,"button-height"),"--button-padding-x":yn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?so(s.replace("compact-","")):so(s),"--button-radius":t===void 0?void 0:di(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},Rn=Ls((e,t)=>{const n=Ae("Button",THe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:S,...T}=n,A=vt({name:"Button",props:n,classes:qM,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:AHe}),C=!!l,I=!!c;return _.jsxs(Rs,{ref:t,...A("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":C,"with-right-section":I},S],...T,children:[_.jsx(Fm,{mounted:!!p,transition:SHe,duration:150,children:R=>_.jsx(Ee,{component:"span",...A("loader",{style:R}),"aria-hidden":!0,children:_.jsx(jm,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...A("inner"),children:[l&&_.jsx(Ee,{component:"span",...A("section"),mod:{position:"left"},children:l}),_.jsx(Ee,{component:"span",mod:{loading:p},...A("label"),children:u}),c&&_.jsx(Ee,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});Rn.classes=qM;Rn.displayName="@mantine/core/Button";Rn.Group=XW;const[CHe,IHe]=_a("Card component was not found in tree");var QW={root:"m_e615b15f",section:"m_599a2148"};const kHe={},WM=Ls((e,t)=>{const n=Ae("CardSection",kHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=IHe();return _.jsx(Ee,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});WM.classes=QW;WM.displayName="@mantine/core/CardSection";const RHe={},NHe=(e,{padding:t})=>({root:{"--card-padding":Il(t)}}),Ey=Ls((e,t)=>{const n=Ae("Card",RHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=vt({name:"Card",props:n,classes:QW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NHe}),h=N.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===WM?N.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(CHe,{value:{getStyles:d},children:_.jsx(FM,{ref:t,unstyled:a,...d("root"),...f,children:p})})});Ey.classes=QW;Ey.displayName="@mantine/core/Card";Ey.Section=WM;var gbe={root:"m_4451eb3a"};const PHe={},dm=Ls((e,t)=>{const n=Ae("Center",PHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=vt({name:"Center",props:n,classes:gbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(Ee,{ref:t,mod:[{inline:l},c],...d("root"),...f})});dm.classes=gbe;dm.displayName="@mantine/core/Center";var ybe={root:"m_7485cace"};const DHe={},OHe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:yn(t,"container-size")}}),Nh=je((e,t)=>{const n=Ae("Container",DHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=vt({name:"Container",classes:ybe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OHe});return _.jsx(Ee,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Nh.classes=ybe;Nh.displayName="@mantine/core/Container";var vbe={root:"m_3eebeb36",label:"m_9e365f20"};const $He={orientation:"horizontal"},MHe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?ei(t,e):void 0,"--divider-border-style":n,"--divider-size":yn(r,"divider-size")}}),JW=je((e,t)=>{const n=Ae("Divider",$He,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=vt({name:"Divider",classes:vbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MHe});return _.jsx(Ee,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(Ee,{component:"span",mod:{position:d},...m("label"),children:f})})});JW.classes=vbe;JW.displayName="@mantine/core/Divider";const[LHe,Ax]=_a("Drawer component was not found in tree");var Um={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const FHe={},GM=je((e,t)=>{const n=Ae("DrawerBody",FHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(vW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});GM.classes=Um;GM.displayName="@mantine/core/DrawerBody";const jHe={},YM=je((e,t)=>{const n=Ae("DrawerCloseButton",jHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(bW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});YM.classes=Um;YM.displayName="@mantine/core/DrawerCloseButton";const BHe={},KM=je((e,t)=>{const n=Ae("DrawerContent",BHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=Ax(),d=f.scrollAreaComponent||Uve;return _.jsx(Bve,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});KM.classes=Um;KM.displayName="@mantine/core/DrawerContent";const UHe={},XM=je((e,t)=>{const n=Ae("DrawerHeader",UHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(_W,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});XM.classes=Um;XM.displayName="@mantine/core/DrawerHeader";const zHe={},QM=je((e,t)=>{const n=Ae("DrawerOverlay",zHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(wW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});QM.classes=Um;QM.displayName="@mantine/core/DrawerOverlay";function VHe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function HHe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const qHe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},WHe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},GHe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nc("modal"),position:"left"},YHe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":yn(n,"drawer-size"),"--drawer-flex":HHe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":VHe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Te(r)}}),JM=je((e,t)=>{const n=Ae("DrawerRoot",GHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Rh(),m=vt({name:"Drawer",classes:Um,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YHe}),g=(p==="rtl"?WHe:qHe)[c];return _.jsx(LHe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(jve,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});JM.classes=Um;JM.displayName="@mantine/core/DrawerRoot";const KHe={},ZM=je((e,t)=>{const n=Ae("DrawerTitle",KHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(EW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});ZM.classes=Um;ZM.displayName="@mantine/core/DrawerTitle";const XHe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nc("modal"),withOverlay:!0,withCloseButton:!0},Ph=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=Ae("Drawer",XHe,e),l=!!n||s;return _.jsxs(JM,{ref:t,...u,children:[r&&_.jsx(QM,{...i}),_.jsxs(KM,{children:[l&&_.jsxs(XM,{children:[n&&_.jsx(ZM,{children:n}),s&&_.jsx(YM,{...o})]}),_.jsx(GM,{children:a})]})]})});Ph.classes=Um;Ph.displayName="@mantine/core/Drawer";Ph.Root=JM;Ph.Overlay=QM;Ph.Content=KM;Ph.Body=GM;Ph.Header=XM;Ph.Title=ZM;Ph.CloseButton=YM;function QHe({open:e,close:t,openDelay:n,closeDelay:r}){const i=N.useRef(-1),s=N.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return N.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[JHe,bbe]=_a("Grid component was not found in tree"),hU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Lse=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":hU(e,t),Fse=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},jse=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function ZHe({span:e,order:t,offset:n,selector:r}){var d;const i=Ms(),s=bbe(),a=VT(e)===void 0?12:VT(e),u=yx({"--col-order":(d=VT(t))==null?void 0:d.toString(),"--col-flex-grow":Fse(a,s.grow),"--col-flex-basis":hU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Lse(a,s.columns,s.grow),"--col-offset":jse(VT(n),s.columns)}),l=ki(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Fse(e[p],s.grow),h[p]["--col-flex-basis"]=hU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Lse(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=jse(n[p],s.columns)),h},{}),f=oO(ki(l),i).filter(h=>ki(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(SI,{styles:u,media:f,selector:r})}var ZW={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const eqe={span:12},eG=je((e,t)=>{const n=Ae("GridCol",eqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=bbe(),h=MM();return _.jsxs(_.Fragment,{children:[_.jsx(ZHe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(Ee,{ref:t,...d.getStyles("col",{className:Yi(i,h),style:s,classNames:r,styles:o}),...f})]})});eG.classes=ZW;eG.displayName="@mantine/core/GridCol";function tqe({gutter:e,selector:t}){const n=Ms(),r=yx({"--grid-gutter":Il(VT(e))}),i=ki(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Il(e[u])),a),{}),o=oO(ki(i),n).filter(a=>ki(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(SI,{styles:r,media:o,selector:t})}const nqe={gutter:"md",grow:!1,columns:12},rqe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Ba=je((e,t)=>{const n=Ae("Grid",nqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=vt({name:"Grid",classes:ZW,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rqe}),y=MM();return _.jsxs(JHe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(tqe,{selector:`.${y}`,...n}),_.jsx(Ee,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});Ba.classes=ZW;Ba.displayName="@mantine/core/Grid";Ba.Col=eG;var _be={root:"m_9e117634"};const iqe={},sqe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:di(t),"--image-object-fit":n}}),xy=Ls((e,t)=>{const n=Ae("Image",iqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=N.useState(!c);N.useEffect(()=>y(!c),[c]);const v=vt({name:"Image",classes:_be,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sqe});return g&&h?_.jsx(Ee,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(Ee,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});xy.classes=_be;xy.displayName="@mantine/core/Image";function pU(){return pU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pU.apply(null,arguments)}function oqe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var aqe=N.useLayoutEffect,uqe=function(t){var n=N.useRef(t);return aqe(function(){n.current=t}),n},Bse=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},lqe=function(t,n){var r=N.useRef();return N.useCallback(function(i){t.current=i,r.current&&Bse(r.current,null),r.current=n,n&&Bse(n,i)},[n])},Use={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},cqe=function(t){Object.keys(Use).forEach(function(n){t.style.setProperty(n,Use[n],"important")})},zse=cqe,Ca=null,Vse=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function fqe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ca||(Ca=document.createElement("textarea"),Ca.setAttribute("tabindex","-1"),Ca.setAttribute("aria-hidden","true"),zse(Ca)),Ca.parentNode===null&&document.body.appendChild(Ca);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Ca.style[h]=o[h]}),zse(Ca),Ca.value=t;var u=Vse(Ca,e);Ca.value=t,u=Vse(Ca,e),Ca.value="x";var l=Ca.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Hse=function(){},dqe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},hqe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],pqe=!!document.documentElement.currentStyle,mqe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=dqe(hqe,n),i=r.boxSizing;if(i==="")return null;pqe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},gqe=mqe;function wbe(e,t,n){var r=uqe(n);N.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var yqe=function(t){wbe(window,"resize",t)},vqe=function(t){wbe(document.fonts,"loadingdone",t)},bqe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],_qe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Hse:o,u=t.onHeightChange,l=u===void 0?Hse:u,c=oqe(t,bqe),f=c.value!==void 0,d=N.useRef(null),h=lqe(d,n),p=N.useRef(0),m=N.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:gqe(b);if(w){m.current=w;var E=fqe(w,b.value||b.placeholder||"x",s,i),S=E[0],T=E[1];p.current!==S&&(p.current=S,b.style.setProperty("height",S+"px","important"),l(S,{rowHeight:T}))}},y=function(b){f||g(),a(b)};return N.useLayoutEffect(g),yqe(g),vqe(g),N.createElement("textarea",pU({},c,{onChange:y,ref:h}))},wqe=N.forwardRef(_qe);const Eqe={},tG=je((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Ae("Textarea",Eqe,e),u=n&&j1e()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(Oc,{component:u?wqe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});tG.classes=Oc.classes;tG.displayName="@mantine/core/Textarea";const[xqe,Sqe]=_a("List component was not found in tree");var nG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const Tqe={},rG=je((e,t)=>{const n=Ae("ListItem",Tqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=Sqe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(Ee,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});rG.classes=nG;rG.displayName="@mantine/core/ListItem";const Aqe={type:"unordered"},Cqe=(e,{size:t,spacing:n})=>({root:{"--list-fz":so(t),"--list-lh":N1e(t),"--list-spacing":Il(n)}}),Cf=je((e,t)=>{const n=Ae("List",Aqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=vt({name:"List",classes:nG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Cqe});return _.jsx(xqe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(Ee,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Cf.classes=nG;Cf.displayName="@mantine/core/List";Cf.Item=rG;var Ebe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const qse={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Nc("overlay")},Iqe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Ec=je((e,t)=>{const n=Ae("LoadingOverlay",qse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Ms(),g=vt({name:"LoadingOverlay",classes:Ebe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Iqe}),y={...qse.overlayProps,...f};return _.jsx(Fm,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(Ee,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(jm,{...g("loader"),unstyled:a,...c}),_.jsx(YC,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(YC,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Ec.classes=Ebe;Ec.displayName="@mantine/core/LoadingOverlay";const[kqe,RI]=_a("Menu component was not found in the tree");var Cx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Rqe={},iG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("MenuDivider",Rqe,e),u=RI();return _.jsx(Ee,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});iG.classes=Cx;iG.displayName="@mantine/core/MenuDivider";const Nqe={},sG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Ae("MenuDropdown",Nqe,e),f=N.useRef(null),d=RI(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=Op(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Op(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(Qr.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ls(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});sG.classes=Cx;sG.displayName="@mantine/core/MenuDropdown";const Pqe={},oG=Ls((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Ae("MenuItem",Pqe,e),p=RI(),m=Ms(),{dir:g}=Rh(),y=N.useRef(),v=p.getItemIndex(y.current),b=h,w=Op(b.onMouseLeave,()=>p.setHovered(-1)),E=Op(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=Op(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),T=Op(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),A=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,C=a?kh({color:a,theme:m}):null;return _.jsxs(Rs,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:T,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ls(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:S,onKeyDown:R1e({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":C!=null&&C.isThemeColor&&(C==null?void 0:C.shade)===void 0?`var(--mantine-color-${C.color}-6)`:A==null?void 0:A.color,"--menu-item-hover":A==null?void 0:A.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});oG.classes=Cx;oG.displayName="@mantine/core/MenuItem";const Dqe={},aG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("MenuLabel",Dqe,e),u=RI();return _.jsx(Ee,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});aG.classes=Cx;aG.displayName="@mantine/core/MenuLabel";const Oqe={refProp:"ref"},xbe=N.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Ae("MenuTarget",Oqe,e);if(!yy(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=RI(),o=Op(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Op(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=Op(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(Qr.Target,{refProp:r,popupType:"menu",ref:t,...i,children:N.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});xbe.displayName="@mantine/core/MenuTarget";const $qe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function bu(e){const t=Ae("Menu",$qe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...S}=t,T=vt({name:"Menu",classes:Cx,props:t,classNames:m,styles:g,unstyled:y}),[A,{setHovered:C,resetHovered:I}]=X9e(),[R,M]=Po({value:s,defaultValue:o,finalValue:!1,onChange:u}),[P,O]=N.useState(!1),F=()=>{M(!1),O(!1),R&&(i==null||i())},L=()=>{M(!0),!R&&(r==null||r())},B=()=>{R?F():L()},{openDropdown:U,closeDropdown:H}=QHe({open:L,close:F,closeDelay:p,openDelay:h}),D=j=>K9e("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=Mm({classNames:m,styles:g,props:t});return um(()=>{I()},[R]),_.jsx(kqe,{value:{getStyles:T,opened:R,toggleDropdown:B,getItemIndex:D,hovered:A,setHovered:C,openedViaClick:P,setOpenedViaClick:O,closeOnItemClick:l,closeDropdown:d==="click"?F:H,openDropdown:d==="click"?L:U,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(Qr,{...S,opened:R,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}bu.extend=e=>e;bu.classes=Cx;bu.displayName="@mantine/core/Menu";bu.Item=oG;bu.Label=aG;bu.Dropdown=sG;bu.Target=xbe;bu.Divider=iG;const[Mqe,Ix]=_a("Modal component was not found in tree");var zm={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const Lqe={},eL=je((e,t)=>{const n=Ae("ModalBody",Lqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(vW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});eL.classes=zm;eL.displayName="@mantine/core/ModalBody";const Fqe={},tL=je((e,t)=>{const n=Ae("ModalCloseButton",Fqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(bW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});tL.classes=zm;tL.displayName="@mantine/core/ModalCloseButton";const jqe={},nL=je((e,t)=>{const n=Ae("ModalContent",jqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Ix(),f=c.scrollAreaComponent||Uve;return _.jsx(Bve,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Te(c.yOffset)} * 2))`},children:u})})});nL.classes=zm;nL.displayName="@mantine/core/ModalContent";const Bqe={},rL=je((e,t)=>{const n=Ae("ModalHeader",Bqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(_W,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});rL.classes=zm;rL.displayName="@mantine/core/ModalHeader";const Uqe={},iL=je((e,t)=>{const n=Ae("ModalOverlay",Uqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(wW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});iL.classes=zm;iL.displayName="@mantine/core/ModalOverlay";const zqe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},Vqe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:di(t),"--modal-size":yn(n,"modal-size"),"--modal-y-offset":Te(r),"--modal-x-offset":Te(i)}}),sL=je((e,t)=>{const n=Ae("ModalRoot",zqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=vt({name:m,classes:zm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Vqe});return _.jsx(Mqe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(jve,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});sL.classes=zm;sL.displayName="@mantine/core/ModalRoot";const Hqe={},oL=je((e,t)=>{const n=Ae("ModalTitle",Hqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(EW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});oL.classes=zm;oL.displayName="@mantine/core/ModalTitle";const qqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},vs=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Ae("Modal",qqe,e),c=!!n||s;return _.jsxs(sL,{ref:t,radius:u,...l,children:[r&&_.jsx(iL,{...i}),_.jsxs(nL,{radius:u,children:[c&&_.jsxs(rL,{children:[n&&_.jsx(oL,{children:n}),s&&_.jsx(tL,{...o})]}),_.jsx(eL,{children:a})]})]})});vs.classes=zm;vs.displayName="@mantine/core/Modal";vs.Root=sL;vs.Overlay=iL;vs.Content=nL;vs.Body=eL;vs.Header=rL;vs.Title=oL;vs.CloseButton=tL;const[Wqe,uG]=vx(),[Gqe,Yqe]=vx();var aL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const Kqe={},Xqe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?yn(t):yn(n,"pg-gap")}}),lG=je((e,t)=>{const n=Ae("PillGroup",Kqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=uG(),h=(d==null?void 0:d.size)||l||void 0,p=vt({name:"PillGroup",classes:aL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Xqe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(Gqe,{value:{size:h,disabled:c},children:_.jsx(Ee,{ref:t,size:h,...p("group"),...f})})});lG.classes=aL;lG.displayName="@mantine/core/PillGroup";const Qqe={variant:"default"},Jqe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":yn(n,"pill-fz"),"--pill-height":yn(n,"pill-height"),"--pill-radius":t===void 0?void 0:di(t)}}),KC=je((e,t)=>{const n=Ae("Pill",Qqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=Yqe(),w=uG(),E=m||(b==null?void 0:b.size)||void 0,S=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",T=vt({name:"Pill",classes:aL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Jqe,stylesCtx:{size:E}});return _.jsxs(Ee,{component:"span",ref:t,variant:S,size:E,...T("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...T("label"),children:c}),f&&_.jsx(_y,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...T("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:A=>{var C;A.preventDefault(),A.stopPropagation(),(C=h==null?void 0:h.onMouseDown)==null||C.call(h,A)},onClick:A=>{var C;A.stopPropagation(),d==null||d(),(C=h==null?void 0:h.onClick)==null||C.call(h,A)}})]})});KC.classes=aL;KC.displayName="@mantine/core/Pill";KC.Group=lG;var Sbe={field:"m_45c4369d"};const Zqe={type:"visible"},cG=je((e,t)=>{const n=Ae("PillsInputField",Zqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=uG(),g=xx(),y=vt({name:"PillsInputField",classes:Sbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(Ee,{component:"input",ref:ls(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});cG.classes=Sbe;cG.displayName="@mantine/core/PillsInputField";const eWe={},hO=je((e,t)=>{const n=Ae("PillsInput",eWe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=N.useRef();return _.jsx(Wqe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(Oc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});hO.displayName="@mantine/core/PillsInput";hO.Field=cG;function tWe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(oE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const nWe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},fG=je((e,t)=>{const n=Ae("MultiSelect",nWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:S,filter:T,limit:A,withScrollArea:C,maxDropdownHeight:I,searchValue:R,defaultSearchValue:M,onSearchChange:P,readOnly:O,disabled:F,onFocus:L,onBlur:B,onPaste:U,radius:H,rightSection:D,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ie,descriptionProps:ve,errorProps:Ke,wrapperProps:Ue,description:gt,label:rt,error:be,maxValues:ke,searchable:ze,nothingFoundMessage:ct,withCheckIcon:Dt,checkIconPosition:We,hidePickedOptions:me,withErrorStyles:dt,name:yt,form:pe,id:Ce,clearable:He,clearButtonProps:ut,hiddenInputProps:_t,placeholder:Mn,hiddenInputValuesDivider:Sr,required:Ln,mod:lr,renderOption:hn,onRemove:Sn,onClear:tr,scrollAreaProps:nr,...Lo}=n,Di=Zu(Ce),Tn=Kve(m),Oi=DW(Tn),Tr=HW({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Tr.resetSelectedOption()}}),{styleProps:fs,rest:{type:ep,autoComplete:rl,...od}}=_x(Lo),[wr,Si]=Po({value:c,defaultValue:f,finalValue:[],onChange:d}),[Gr,ou]=Po({value:R,defaultValue:M,finalValue:"",onChange:P}),Sa=vt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ta,resolvedStyles:oe}=Mm({props:n,styles:o,classNames:r}),ee=st=>{h==null||h(st),st.key===" "&&!ze&&(st.preventDefault(),Tr.toggleDropdown()),st.key==="Backspace"&&Gr.length===0&&wr.length>0&&(Sn==null||Sn(wr[wr.length-1]),Si(wr.slice(0,wr.length-1)))},ae=wr.map((st,St)=>{var Vt,Dn;return _.jsx(KC,{withRemoveButton:!O&&!((Vt=Oi[st])!=null&&Vt.disabled),onRemove:()=>{Si(wr.filter(Fn=>st!==Fn)),Sn==null||Sn(st)},unstyled:a,disabled:F,...Sa("pill"),children:((Dn=Oi[st])==null?void 0:Dn.label)||st},`${st}-${St}`)});N.useEffect(()=>{w&&Tr.selectFirstOption()},[w,wr]);const Se=He&&wr.length>0&&!F&&!O&&_.jsx(Yn.ClearButton,{size:l,...ut,onClear:()=>{tr==null||tr(),Si([]),ou("")}}),xe=tWe({data:Tn,value:wr});return _.jsxs(_.Fragment,{children:[_.jsxs(Yn,{store:Tr,classNames:Ta,styles:oe,unstyled:a,size:l,readOnly:O,__staticSelector:"MultiSelect",onOptionSubmit:st=>{E==null||E(st),ou(""),Tr.updateSelectedOptionIndex("selected"),wr.includes(Oi[st].value)?(Si(wr.filter(St=>St!==Oi[st].value)),Sn==null||Sn(Oi[st].value)):wr.length<ke&&Si([...wr,Oi[st].value])},...S,children:[_.jsx(Yn.DropdownTarget,{children:_.jsx(hO,{...fs,__staticSelector:"MultiSelect",classNames:Ta,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:H,rightSection:D||Se||_.jsx(Yn.Chevron,{size:l,error:be,unstyled:a}),rightSectionPointerEvents:W||(Se?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ie,descriptionProps:ve,errorProps:Ke,wrapperProps:Ue,description:gt,label:rt,error:be,multiline:!0,withErrorStyles:dt,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Se?"all":"none"),multiline:!0},pointer:!ze,onClick:()=>ze?Tr.openDropdown():Tr.toggleDropdown(),"data-expanded":Tr.dropdownOpened||void 0,id:Di,required:Ln,mod:lr,children:_.jsxs(KC.Group,{disabled:F,unstyled:a,...Sa("pillsList"),children:[ae,_.jsx(Yn.EventsTarget,{autoComplete:rl,children:_.jsx(hO.Field,{...od,ref:t,id:Di,placeholder:Mn,type:!ze&&!Mn?"hidden":"visible",...Sa("inputField"),unstyled:a,onFocus:st=>{L==null||L(st),ze&&Tr.openDropdown()},onBlur:st=>{B==null||B(st),Tr.closeDropdown(),ou("")},onKeyDown:ee,value:Gr,onChange:st=>{ou(st.currentTarget.value),ze&&Tr.openDropdown(),w&&Tr.selectFirstOption()},disabled:F,readOnly:O||!ze,pointer:!ze})})]})})}),_.jsx(hbe,{data:me?xe:Tn,hidden:O||F,filter:T,search:Gr,limit:A,hiddenWhenEmpty:!ze||!ct||me&&xe.length===0&&Gr.trim().length===0,withScrollArea:C,maxDropdownHeight:I,filterOptions:ze,value:wr,checkIconPosition:We,withCheckIcon:Dt,nothingFoundMessage:ct,unstyled:a,labelId:rt?`${Di}-label`:void 0,"aria-label":rt?void 0:Lo["aria-label"],renderOption:hn,scrollAreaProps:nr})]}),_.jsx(Yn.HiddenInput,{name:yt,valuesDivider:Sr,value:wr,form:pe,disabled:F,..._t})]})});fG.classes={...Oc.classes,...Yn.classes};fG.displayName="@mantine/core/MultiSelect";var Tbe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const rWe={},iWe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Il(r)}}},uL=Ls((e,t)=>{const n=Ae("NavLink",rWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:E,childrenOffset:S,onKeyDown:T,autoContrast:A,mod:C,...I}=n,R=vt({name:"NavLink",props:n,classes:Tbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iWe}),[M,P]=Po({value:l,defaultValue:c,finalValue:!1,onChange:f}),O=!!d,F=L=>{h==null||h(L),O&&(L.preventDefault(),P(!M))};return _.jsxs(_.Fragment,{children:[_.jsxs(Rs,{...R("root"),component:"a",ref:t,onClick:F,onKeyDown:L=>{T==null||T(L),L.nativeEvent.code==="Space"&&O&&(L.preventDefault(),P(!M))},unstyled:a,mod:[{disabled:m,active:p,expanded:M},C],...I,children:[g&&_.jsx(Ee,{component:"span",...R("section"),mod:{position:"left"},children:g}),_.jsxs(Ee,{...R("body"),mod:{"no-wrap":E},children:[_.jsx(Ee,{component:"span",...R("label"),children:v}),_.jsx(Ee,{component:"span",mod:{active:p},...R("description"),children:b})]}),(O||y)&&_.jsx(Ee,{...R("section"),component:"span",mod:{rotate:M&&!w,position:"right"},children:O?y||_.jsx(dO,{...R("chevron")}):y})]}),_.jsx(Q1e,{in:M,...R("collapse"),children:_.jsx("div",{...R("children"),children:d})})]})});uL.classes=Tbe;uL.displayName="@mantine/core/NavLink";function Abe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var XC;(function(e){e.event="event",e.props="prop"})(XC||(XC={}));function Og(){}function sWe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function QC(e){return!!(e||"").match(/\d/)}function bw(e){return e==null}function oWe(e){return typeof e=="number"&&isNaN(e)}function Cbe(e){return bw(e)||oWe(e)||typeof e=="number"&&!isFinite(e)}function Ibe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function aWe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function uWe(e,t,n){var r=aWe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function lWe(e){var t=N.useRef(e);t.current=e;var n=N.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function dG(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function cWe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function kbe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Wse(e,t){return Array(t+1).join(e)}function Rbe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Wse("0",Math.abs(o))+i:o>=a?i=i+Wse("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Gse(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=dG(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=kbe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function A1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Nbe=sWe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),fWe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function dWe(e,t,n){return Math.min(Math.max(e,t),n)}function r8(e){return Math.max(e.selectionStart,e.selectionEnd)}function hWe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function pWe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function mWe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function gWe(e,t,n,r,i,s,o){o===void 0&&(o=mWe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function Yse(e,t,n,r){var i=e.length;if(t=dWe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function yWe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(QC(e[n])||QC(e[n-1]));return t}function Pbe(e,t,n,r,i,s){s===void 0&&(s=Og);var o=lWe(function(p,m){var g,y;return Cbe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?Rbe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=N.useState(function(){return o(bw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;bw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return N.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function vWe(e){return e.replace(/[^0-9]/g,"")}function bWe(e){return e}function _We(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=bWe);var a=e.removeFormatting;a===void 0&&(a=vWe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Og);var h=e.onKeyDown;h===void 0&&(h=Og);var p=e.onMouseUp;p===void 0&&(p=Og);var m=e.onFocus;m===void 0&&(m=Og);var g=e.onBlur;g===void 0&&(g=Og);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=yWe);var b=e.isValidInputCharacter;b===void 0&&(b=QC);var w=e.isCharacterSame,E=Abe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=Pbe(y,u,!!l,o,a,c),T=S[0],A=T.formattedValue,C=T.numAsString,I=S[1],R=N.useRef(),M=N.useRef({formattedValue:A,numAsString:C}),P=function(be,ke){M.current={formattedValue:be.formattedValue,numAsString:be.value},I(be,ke)},O=N.useState(!1),F=O[0],L=O[1],B=N.useRef(null),U=N.useRef({setCaretTimeout:null,focusTimeout:null});N.useEffect(function(){return L(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var H=o,D=function(be,ke){var ze=parseFloat(ke);return{formattedValue:be,value:ke,floatValue:isNaN(ze)?void 0:ze}},z=function(be,ke,ze){be.selectionStart===0&&be.selectionEnd===be.value.length||(A1(be,ke),U.current.setCaretTimeout=setTimeout(function(){be.value===ze&&be.selectionStart!==ke&&A1(be,ke)},0))},W=function(be,ke,ze){return Yse(be,ke,v(be),ze)},j=function(be,ke,ze){var ct=v(ke),Dt=gWe(ke,A,be,ze,ct,b,w);return Dt=Yse(ke,Dt,ct),Dt},q=function(be){var ke=be.formattedValue;ke===void 0&&(ke="");var ze=be.input,ct=be.source,Dt=be.event,We=be.numAsString,me;if(ze){var dt=be.inputValue||ze.value,yt=r8(ze);ze.value=ke,me=j(dt,ke,yt),me!==void 0&&z(ze,me,ke)}ke!==A&&P(D(ke,We),{event:Dt,source:ct})};N.useEffect(function(){var be=M.current,ke=be.formattedValue,ze=be.numAsString;(A!==ke||C!==ze)&&P(D(A,C),{event:void 0,source:XC.props})},[A,C]);var G=B.current?r8(B.current):void 0,ne=typeof window<"u"?N.useLayoutEffect:N.useEffect;ne(function(){var be=B.current;if(A!==M.current.formattedValue&&be){var ke=j(M.current.formattedValue,A,G);be.value=A,z(be,ke,A)}},[A]);var ce=function(be,ke,ze){var ct=ke.target,Dt=R.current?fWe(R.current,ct.selectionEnd):Nbe(A,be),We=Object.assign(Object.assign({},Dt),{lastValue:A}),me=a(be,We),dt=H(me);if(me=a(dt,void 0),f&&!f(D(dt,me))){var yt=ke.target,pe=r8(yt),Ce=j(be,A,pe);return yt.value=A,z(yt,Ce,A),!1}return q({formattedValue:dt,numAsString:me,inputValue:be,event:ke,source:ze,input:ke.target}),!0},de=function(be,ke){ke===void 0&&(ke=0);var ze=be.selectionStart,ct=be.selectionEnd;R.current={selectionStart:ze,selectionEnd:ct+ke}},he=function(be){var ke=be.target,ze=ke.value,ct=ce(ze,be,XC.event);ct&&d(be),R.current=void 0},ye=function(be){var ke=be.target,ze=be.key,ct=ke.selectionStart,Dt=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var me;ze==="ArrowLeft"||ze==="Backspace"?me=Math.max(ct-1,0):ze==="ArrowRight"?me=Math.min(ct+1,We.length):ze==="Delete"&&(me=ct);var dt=0;ze==="Delete"&&ct===Dt&&(dt=1);var yt=ze==="ArrowLeft"||ze==="ArrowRight";if(me===void 0||ct!==Dt&&!yt){h(be),de(ke,dt);return}var pe=me;if(yt){var Ce=ze==="ArrowLeft"?"left":"right";pe=W(We,me,Ce),pe!==me&&be.preventDefault()}else ze==="Delete"&&!b(We[me])?pe=W(We,me,"right"):ze==="Backspace"&&!b(We[me])&&(pe=W(We,me,"left"));pe!==me&&z(ke,pe,We),h(be),de(ke,dt)},Ie=function(be){var ke=be.target,ze=function(){var ct=ke.selectionStart,Dt=ke.selectionEnd,We=ke.value;if(We===void 0&&(We=""),ct===Dt){var me=W(We,ct);me!==ct&&z(ke,me,We)}};ze(),requestAnimationFrame(function(){ze()}),p(be),de(ke)},ve=function(be){be.persist&&be.persist();var ke=be.target,ze=be.currentTarget;B.current=ke,U.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Dt=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var me=W(We,ct);me!==ct&&!(ct===0&&Dt===We.length)&&z(ke,me,We),m(Object.assign(Object.assign({},be),{currentTarget:ze}))},0)},Ke=function(be){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(be)},Ue=F&&hWe()?"numeric":void 0,gt=Object.assign({inputMode:Ue},E,{type:t,value:A,onChange:he,onKeyDown:ye,onMouseUp:Ie,onFocus:ve,onBlur:Ke});if(n==="text")return i?qi.createElement(qi.Fragment,null,i(A,E)||null):qi.createElement("span",Object.assign({},E,{ref:s}),A);if(r){var rt=r;return qi.createElement(rt,Object.assign({},gt,{ref:s}))}return qi.createElement("input",Object.assign({},gt,{ref:s}))}function Kse(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=lL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=dG(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=kbe(p,n,!!r)),l&&(h=uWe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function lL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function wWe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function EWe(e,t){return new RegExp("(^-)|[0-9]|"+Ibe(e),"g")}function xWe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function SWe(e,t,n){var r;t===void 0&&(t=pWe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=lL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(QC(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,H){var D=!1,z=!1;s.startsWith("-")?D=!1:B.startsWith("--")?(D=!1,z=!0):o.startsWith("-")&&B.length===o.length?D=!1:B[0]==="-"&&(D=!0);var W=D?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,H-=W),{value:B,start:U,end:H,hasNegation:D}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,S=w.end,T=w.value,A=e.substring(c,f);e.length&&T.length&&(E>T.length-o.length||S<s.length)&&!(A&&o.startsWith(A))&&(e=T);var C=0;e.startsWith(s)?C+=s.length:c<s.length&&(C=c),e=e.substring(C),f-=C;var I=e.length,R=e.length-o.length;e.endsWith(o)?I=R:(f>R||f>e.length-o.length)&&(I=f),e=e.substring(0,I),e=wWe(b?"-"+e:e,i),e=(e.match(EWe(p))||[]).join("");var M=e.indexOf(p);e=e.replace(new RegExp(Ibe(p),"g"),function(B,U){return U===M?".":""});var P=dG(e,i),O=P.beforeDecimal,F=P.afterDecimal,L=P.addNegation;return l.end-l.start<u.end-u.start&&O===""&&m&&!parseFloat(F)&&(e=L?"-":""),e}function TWe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function AWe(e){var t=lL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function CWe(e){e=AWe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Og);var s=e.onBlur;s===void 0&&(s=Og);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=Abe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=lL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(L){return Kse(L,e)},b=function(L,B){return SWe(L,B,e)},w=bw(f)?c:f,E=d??xWe(w,l,t);bw(f)?bw(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var S=function(L){return Cbe(L)?L:(typeof L=="number"&&(L=Rbe(L)),E&&typeof a=="number"?Gse(L,a,!!u):L)},T=Pbe(S(f),S(c),!!E,v,b,h),A=T[0],C=A.numAsString,I=A.formattedValue,R=T[1],M=function(L){var B=L.target,U=L.key,H=B.selectionStart,D=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&D<l.length){L.preventDefault();return}if(H!==D){i(L);return}U==="Backspace"&&z[0]==="-"&&H===l.length+1&&n&&A1(B,1),a&&u&&(U==="Backspace"&&z[H-1]===g?(A1(B,H-1),L.preventDefault()):U==="Delete"&&z[H]===g&&L.preventDefault()),y!=null&&y.includes(U)&&z[H]===g&&A1(B,H+1);var W=o===!0?",":o;U==="Backspace"&&z[H-1]===W&&A1(B,H-1),U==="Delete"&&z[H]===W&&A1(B,H+1),i(L)},P=function(L){var B=C;if(B.match(/\d/g)||(B=""),r||(B=cWe(B)),u&&a&&(B=Gse(B,a,u)),B!==C){var U=Kse(B,e);R({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:L,source:XC.event})}s(L)},O=function(L){return L===g?!0:QC(L)},F=function(L){var B=L.currentValue,U=L.lastValue,H=L.formattedValue,D=L.currentValueIndex,z=L.formattedValueIndex,W=B[D],j=H[z],q=Nbe(U,B),G=q.to;return D>=G.start&&D<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:I,valueIsNumericString:!1,isValidInputCharacter:O,isCharacterSame:F,onValueChange:R,format:v,removeFormatting:b,getCaretBoundary:function(L){return TWe(L,e)},onKeyDown:M,onBlur:P})}function IWe(e){var t=CWe(e);return qi.createElement(_We,Object.assign({},t))}function Xse({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var mU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const kWe=/^(0\.0*|-0(\.0*)?)$/,RWe=/^-?0\d+(\.\d+)?\.?$/;function NWe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Qse(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const PWe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},DWe=(e,{size:t})=>({controls:{"--ni-chevron-size":yn(t,"ni-chevron-size")}}),hG=je((e,t)=>{const n=Ae("NumberInput",PWe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:S,onKeyDownCapture:T,handlersRef:A,startValue:C,disabled:I,rightSectionPointerEvents:R,allowNegative:M,readOnly:P,size:O,rightSectionWidth:F,stepHoldInterval:L,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:H,trimLeadingZeroesOnBlur:D,...z}=n,W=vt({name:"NumberInput",classes:mU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:DWe}),{resolvedClassNames:j,resolvedStyles:q}=Mm({classNames:i,styles:s,props:n}),[G,ne]=Po({value:c,defaultValue:f,onChange:u}),ce=B!==void 0&&L!==void 0,de=N.useRef(null),he=N.useRef(null),ye=N.useRef(0),Ie=(me,dt)=>{dt.source==="event"&&ne(NWe(me.floatValue)&&!kWe.test(me.value)&&!(U&&RWe.test(me.value))?me.floatValue:me.value),l==null||l(me,dt)},ve=me=>{const dt=String(me).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return dt?Math.max(0,(dt[1]?dt[1].length:0)-(dt[2]?+dt[2]:0)):0},Ke=me=>{de.current&&typeof me<"u"&&de.current.setSelectionRange(me,me)},Ue=N.useRef();Ue.current=()=>{let me;const dt=ve(G),yt=ve(p),pe=Math.max(dt,yt),Ce=10**pe;if(typeof G!="number"||Number.isNaN(G))me=Ud(C,h,d);else if(d!==void 0){const ut=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;me=ut<=d?ut:d}else me=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;const He=me.toFixed(pe);ne(parseFloat(He)),l==null||l({floatValue:parseFloat(He),formattedValue:He,value:He},{source:"increment"}),setTimeout(()=>{var ut;return Ke((ut=de.current)==null?void 0:ut.value.length)},0)};const gt=N.useRef();gt.current=()=>{let me;const dt=h!==void 0?h:M?Number.MIN_SAFE_INTEGER:0,yt=ve(G),pe=ve(p),Ce=Math.max(yt,pe),He=10**Ce;if(typeof G!="number"||Number.isNaN(G))me=Ud(C,dt,d);else{const _t=(Math.round(G*He)-Math.round(p*He))/He;me=dt!==void 0&&_t<dt?dt:_t}const ut=me.toFixed(Ce);ne(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var _t;return Ke((_t=de.current)==null?void 0:_t.value.length)},0)};const rt=me=>{S==null||S(me),!(P||!H)&&(me.key==="ArrowUp"&&(me.preventDefault(),Ue.current()),me.key==="ArrowDown"&&(me.preventDefault(),gt.current()))},be=me=>{if(T==null||T(me),me.key==="Backspace"){const dt=de.current;dt.selectionStart===0&&dt.selectionStart===dt.selectionEnd&&(me.preventDefault(),window.setTimeout(()=>Ke(0),0))}};Vq(A,{increment:Ue.current,decrement:gt.current});const ke=me=>{me?Ue.current():gt.current(),ye.current+=1},ze=me=>{if(ke(me),ce){const dt=typeof L=="number"?L:L(ye.current);he.current=window.setTimeout(()=>ze(me),dt)}},ct=(me,dt)=>{var yt;me.preventDefault(),(yt=de.current)==null||yt.focus(),ke(dt),ce&&(he.current=window.setTimeout(()=>ze(dt),B))},Dt=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ye.current=0},We=_.jsxs("div",{...W("controls"),children:[_.jsx(Rs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{ct(me,!0)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(Xse,{direction:"up"})}),_.jsx(Rs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{ct(me,!1)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(Xse,{direction:"down"})})]});return _.jsx(Oc,{component:IWe,allowNegative:M,className:Yi(mU.root,r),size:O,...z,readOnly:P,disabled:I,value:G,getInputRef:ls(t,de),onValueChange:Ie,rightSection:m||P?g:g||We,classNames:j,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:rt,onKeyDownCapture:be,rightSectionPointerEvents:R??(I?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${O||"sm"})`,allowLeadingZeros:U,onBlur:me=>{if(b==null||b(me),v==="blur"&&typeof G=="number"&&Ud(G,h,d)!==G&&ne(Ud(G,h,d)),D&&typeof G=="string"){const dt=G.replace(/^0+/,""),yt=parseFloat(dt);ne(Number.isNaN(yt)?dt:yt)}},isAllowed:me=>v==="strict"?y?y(me)&&Qse(me.floatValue,h,d):Qse(me.floatValue,h,d):y?y(me):!0})});hG.classes={...Oc.classes,...mU};hG.displayName="@mantine/core/NumberInput";const[OWe,Dbe]=_a("Progress.Root component was not found in tree");var NI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const $We={},pG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ProgressLabel",$We,e),u=Dbe();return _.jsx(Ee,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});pG.classes=NI;pG.displayName="@mantine/core/ProgressLabel";const MWe={},LWe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":yn(t,"progress-size"),"--progress-radius":n===void 0?void 0:di(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),cL=je((e,t)=>{const n=Ae("ProgressRoot",MWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=vt({name:"Progress",classes:NI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:LWe});return _.jsx(OWe,{value:{getStyles:d,autoContrast:l},children:_.jsx(Ee,{ref:t,...d("root"),...f})})});cL.classes=NI;cL.displayName="@mantine/core/ProgressRoot";const FWe={withAria:!0},fL=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Ae("ProgressSection",FWe,e),p=Dbe(),m=Ms(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(Ee,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":ei(l,m),"--progress-label-color":bx(p.autoContrast,m)?by({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});fL.classes=NI;fL.displayName="@mantine/core/ProgressSection";const jWe={},kx=je((e,t)=>{const n=Ae("Progress",jWe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Mm({classNames:i,styles:s,props:n});return _.jsx(cL,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(fL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});kx.classes=NI;kx.displayName="@mantine/core/Progress";kx.Section=fL;kx.Root=cL;kx.Label=pG;const[BWe,Obe]=vx(),[UWe,zWe]=vx();var $be={card:"m_9dc8ae12"};const VWe={withBorder:!0},HWe=(e,{radius:t})=>({card:{"--card-radius":di(t)}}),mG=je((e,t)=>{const n=Ae("RadioCard",VWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=vt({name:"RadioCard",classes:$be,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:HWe,rootSelector:"card"}),{dir:v}=Rh(),b=Obe(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),S=T=>{if(m==null||m(T),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(T.nativeEvent.code)){T.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),C=A.findIndex(M=>M===T.target),I=C+1>=A.length?0:C+1,R=C-1<0?A.length-1:C-1;T.nativeEvent.code==="ArrowDown"&&(A[I].focus(),A[I].click()),T.nativeEvent.code==="ArrowUp"&&(A[R].focus(),A[R].click()),T.nativeEvent.code==="ArrowLeft"&&(A[v==="ltr"?R:I].focus(),A[v==="ltr"?R:I].click()),T.nativeEvent.code==="ArrowRight"&&(A[v==="ltr"?I:R].focus(),A[v==="ltr"?I:R].click())}};return _.jsx(UWe,{value:{checked:w},children:_.jsx(Rs,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:T=>{h==null||h(T),b==null||b.onChange(d||"")},onKeyDown:S})})});mG.displayName="@mantine/core/RadioCard";mG.classes=$be;const qWe={},gG=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Ae("RadioGroup",qWe,e),f=Zu(u),[d,h]=Po({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(BWe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(Ri.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(sbe,{role:"radiogroup",children:a})})})});gG.classes=Ri.Wrapper.classes;gG.displayName="@mantine/core/RadioGroup";function Mbe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Te(e),height:Te(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Lbe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const WWe={icon:Mbe},GWe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=kh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":yn(r,"radio-size"),"--radio-radius":t===void 0?void 0:di(t),"--radio-color":s==="outline"?u:ei(n,e),"--radio-icon-size":yn(r,"radio-icon-size"),"--radio-icon-color":i?ei(i,e):bx(o,e)?by({color:n,theme:e,autoContrast:o}):void 0}}},yG=je((e,t)=>{const n=Ae("RadioIndicator",WWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=vt({name:"RadioIndicator",classes:Lbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:GWe,rootSelector:"indicator"}),E=zWe(),S=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(Ee,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});yG.displayName="@mantine/core/RadioIndicator";yG.classes=Lbe;var Fbe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const YWe={labelPosition:"right"},KWe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=kh({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":yn(t,"radio-size"),"--radio-radius":n===void 0?void 0:di(n),"--radio-color":s==="outline"?u:ei(r,e),"--radio-icon-color":i?ei(i,e):bx(o,e)?by({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":yn(t,"radio-icon-size")}}},Iv=je((e,t)=>{const n=Ae("Radio",YWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=Mbe,rootRef:E,iconColor:S,onChange:T,mod:A,...C}=n,I=vt({name:"Radio",classes:Fbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:KWe}),R=Obe(),M=(R==null?void 0:R.size)??c,P=n.size?c:M,{styleProps:O,rest:F}=_x(C),L=Zu(l),B=R?{checked:R.value===F.value,name:F.name??R.name,onChange:U=>{R.onChange(U),T==null||T(U)}}:{};return _.jsx(qW,{...I("root"),__staticSelector:"Radio",__stylesApiProps:n,id:L,size:P,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:A,...O,...b,children:_.jsxs(Ee,{...I("inner"),mod:{"label-position":d},children:[_.jsx(Ee,{...I("radio",{focusable:!0,variant:y}),onChange:T,...F,...B,component:"input",mod:{error:!!p},ref:t,id:L,disabled:v,type:"radio"}),_.jsx(w,{...I("icon"),"aria-hidden":!0})]})})});Iv.classes=Fbe;Iv.displayName="@mantine/core/Radio";Iv.Group=gG;Iv.Card=mG;Iv.Indicator=yG;const XWe={duration:100,transition:"fade"};function QWe(e,t){return{...XWe,...t,...e}}function JWe({offset:e,position:t}){const[n,r]=N.useState(!1),i=N.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=pW({placement:t,middleware:[cW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=N.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return N.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Wp(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var dL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const ZWe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Nc("popover")},eGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:di(t),"--tooltip-bg":n?ei(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),vG=je((e,t)=>{const n=Ae("TooltipFloating",ZWe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:E,...S}=n,T=Ms(),A=vt({name:"TooltipFloating",props:n,classes:dL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:eGe}),{handleMouseMove:C,x:I,y:R,opened:M,boundaryRef:P,floating:O,setOpened:F}=JWe({offset:p,position:m});if(!yy(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const L=ls(P,r.ref,t),B=H=>{var D,z;(z=(D=r.props).onMouseEnter)==null||z.call(D,H),C(H),F(!0)},U=H=>{var D,z;(z=(D=r.props).onMouseLeave)==null||z.call(D,H),F(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(AI,{...E,withinPortal:s,children:_.jsx(Ee,{...S,...A("tooltip",{style:{...Xq(o,T),zIndex:y,display:!v&&M?"block":"none",top:(R&&Math.round(R))??"",left:(I&&Math.round(I))??""}}),variant:b,ref:O,mod:{multiline:g},children:h})}),N.cloneElement(r,{...r.props,[i]:L,onMouseEnter:B,onMouseLeave:U})]})});vG.classes=dL;vG.displayName="@mantine/core/TooltipFloating";const jbe=N.createContext(!1),tGe=jbe.Provider,nGe=()=>N.useContext(jbe),rGe={openDelay:0,closeDelay:0};function Bbe(e){const{openDelay:t,closeDelay:n,children:r}=Ae("TooltipGroup",rGe,e);return _.jsx(tGe,{value:!0,children:_.jsx(uze,{delay:{open:t,close:n},children:r})})}Bbe.displayName="@mantine/core/TooltipGroup";function iGe(e){var S,T,A;const[t,n]=N.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=nGe(),o=Zu(),{delay:a,currentId:u,setCurrentId:l}=Ave(),c=N.useCallback(C=>{n(C),C&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=pW({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[wve(e.offset),cW({padding:8}),cU(),Eve({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[fU()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=mze([aze(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((T=e.events)!=null&&T.touch)}),pze(h,{enabled:(A=e.events)==null?void 0:A.focus,visibleOnly:!0}),yze(h,{role:"tooltip"}),dze(h,{enabled:typeof e.opened>"u"}),lze(h,{id:o})]);Dve({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),um(()=>{var C;(C=e.onPositionChange)==null||C.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const Jse={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Nc("popover"),positionDependencies:[]},sGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:di(t),"--tooltip-bg":n?ei(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),sa=je((e,t)=>{const n=Ae("Tooltip",Jse,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:T,offset:A,transitionProps:C,multiline:I,events:R,zIndex:M,disabled:P,positionDependencies:O,onClick:F,onMouseEnter:L,onMouseLeave:B,inline:U,variant:H,keepMounted:D,vars:z,portalProps:W,mod:j,floatingStrategy:q,...G}=Ae("Tooltip",Jse,n),{dir:ne}=Rh(),ce=N.useRef(null),de=iGe({position:Cve(ne,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:R,arrowRef:ce,arrowOffset:E,offset:typeof A=="number"?A+(b?w/2:0):A,positionDependencies:[...O,r],inline:U,strategy:q}),he=vt({name:"Tooltip",props:n,classes:dL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:sGe});if(!yy(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ye=ls(de.reference,r.ref,t),Ie=QWe(C,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(AI,{...W,withinPortal:f,children:_.jsx(Fm,{...Ie,keepMounted:D,mounted:!P&&!!de.opened,duration:de.isGroupPhase?10:Ie.duration,children:ve=>_.jsxs(Ee,{...G,variant:H,mod:[{multiline:I},j],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...ve,zIndex:M,top:de.y??0,left:de.x??0}}),children:[o,_.jsx(mW,{ref:ce,arrowX:de.arrowX,arrowY:de.arrowY,visible:b,position:de.placement,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:T,...he("arrow")})]})})}),N.cloneElement(r,de.getReferenceProps({onClick:F,onMouseEnter:L,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ye,className:Yi(v,r.props.className),...r.props}))]})});sa.classes=dL;sa.displayName="@mantine/core/Tooltip";sa.Floating=vG;sa.Group=Bbe;var Ube={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const oGe={withItemsBorders:!0},aGe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:di(t),"--sc-color":n?ei(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":yn(i,"sc-padding"),"--sc-font-size":so(i)}}),bG=je((e,t)=>{var ne,ce;const n=Ae("SegmentedControl",oGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:S,variant:T,autoContrast:A,withItemsBorders:C,mod:I,...R}=n,M=vt({name:"SegmentedControl",props:n,classes:Ube,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aGe}),P=Ms(),O=l.map(de=>typeof de=="string"?{label:de,value:de}:de),F=vBe(),[L,B]=N.useState(null),[U,H]=N.useState({}),D=(de,he)=>{U[he]=de,H(U)},[z,W]=Po({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ne=O.find(de=>!de.disabled))==null?void 0:ne.value)??((ce=l[0])==null?void 0:ce.value)??null:null,onChange:d}),j=Zu(p),q=O.map(de=>N.createElement(Ee,{...M("control"),mod:{active:z===de.value,orientation:v},key:de.value},N.createElement("input",{...M("input"),disabled:m||de.disabled,type:"radio",name:j,value:de.value,id:`${j}-${de.value}`,checked:z===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":P.focusRing,key:`${de.value}-input`}),N.createElement(Ee,{component:"label",...M("label"),mod:{active:z===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${j}-${de.value}`,ref:he=>D(he,de.value),__vars:{"--sc-label-color":w!==void 0?by({color:w,theme:P,autoContrast:A}):void 0},key:`${de.value}-label`},_.jsx("span",{...M("innerLabel"),children:de.label})))),G=ls(t,de=>B(de));return l.length===0?null:_.jsxs(Ee,{...M("root"),variant:T,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":C},I],...R,role:"radiogroup",children:[typeof z=="string"&&_.jsx(TW,{target:U[z],parent:L,component:"span",transitionDuration:"var(--sc-transition-duration)",...M("indicator")}),q]})});bG.classes=Ube;bG.displayName="@mantine/core/SegmentedControl";const uGe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},PI=je((e,t)=>{const n=Ae("Select",uGe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:S,filter:T,limit:A,withScrollArea:C,maxDropdownHeight:I,size:R,searchable:M,rightSection:P,checkIconPosition:O,withCheckIcon:F,nothingFoundMessage:L,name:B,form:U,searchValue:H,defaultSearchValue:D,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:ne,clearButtonProps:ce,hiddenInputProps:de,renderOption:he,onClear:ye,autoComplete:Ie,scrollAreaProps:ve,...Ke}=n,Ue=N.useMemo(()=>Kve(m),[m]),gt=N.useMemo(()=>DW(Ue),[Ue]),rt=Zu(G),[be,ke,ze]=Po({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof be=="string"?gt[be]:void 0,[Dt,We]=Po({value:H,defaultValue:D,finalValue:ct?ct.label:"",onChange:z}),me=HW({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),me.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),me.resetSelectedOption()}}),{resolvedClassNames:dt,resolvedStyles:yt}=Mm({props:n,styles:i,classNames:r});N.useEffect(()=>{v&&me.selectFirstOption()},[v,be]),N.useEffect(()=>{g===null&&We(""),typeof g=="string"&&ct&&We(ct.label)},[g,ct]);const pe=ne&&!!be&&!S&&!E&&_.jsx(Yn.ClearButton,{size:R,...ce,onClear:()=>{ke(null,null),We(""),ye==null||ye()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Yn,{store:me,__staticSelector:"Select",classNames:dt,styles:yt,unstyled:s,readOnly:E,onOptionSubmit:Ce=>{b==null||b(Ce);const He=W&&gt[Ce].value===be?null:gt[Ce],ut=He?He.value:null;ke(ut,He),!ze&&We(typeof ut=="string"&&(He==null?void 0:He.label)||""),me.closeDropdown()},size:R,...w,children:[_.jsx(Yn.Target,{targetType:M?"input":"button",autoComplete:Ie,children:_.jsx(Oc,{id:rt,ref:t,rightSection:P||pe||_.jsx(Yn.Chevron,{size:R,error:j,unstyled:s}),rightSectionPointerEvents:q||(pe?"all":"none"),...Ke,size:R,__staticSelector:"Select",disabled:S,readOnly:E||!M,value:Dt,onChange:Ce=>{We(Ce.currentTarget.value),me.openDropdown(),v&&me.selectFirstOption()},onFocus:Ce=>{M&&me.openDropdown(),f==null||f(Ce)},onBlur:Ce=>{var He;M&&me.closeDropdown(),We(be!=null&&((He=gt[be])==null?void 0:He.label)||""),d==null||d(Ce)},onClick:Ce=>{M?me.openDropdown():me.toggleDropdown(),h==null||h(Ce)},classNames:dt,styles:yt,unstyled:s,pointer:!M,error:j})}),_.jsx(hbe,{data:Ue,hidden:E||S,filter:T,search:Dt,limit:A,hiddenWhenEmpty:!M||!L,withScrollArea:C,maxDropdownHeight:I,filterOptions:M&&(ct==null?void 0:ct.label)!==Dt,value:be,checkIconPosition:O,withCheckIcon:F,nothingFoundMessage:L,unstyled:s,labelId:Ke.label?`${rt}-label`:void 0,"aria-label":Ke.label?void 0:Ke["aria-label"],renderOption:he,scrollAreaProps:ve})]}),_.jsx(Yn.HiddenInput,{value:be,name:B,form:U,disabled:S,...de})]})});PI.classes={...Oc.classes,...Yn.classes};PI.displayName="@mantine/core/Select";const[zbe,hL]=_a("SliderProvider was not found in tree"),_G=N.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=hL();return _.jsx(Ee,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});_G.displayName="@mantine/core/SliderRoot";const pO=N.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=hL(),[b,w]=N.useState(!1),E=l||s||b||h&&p;return _.jsxs(Ee,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,_.jsx(Fm,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:S=>_.jsx("div",{...v("label",{style:S}),children:i})})]})});pO.displayName="@mantine/core/SliderThumb";function mO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function lGe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function Vbe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=hL();if(!e)return null;const u=e.map((l,c)=>N.createElement(Ee,{...a("markWrapper"),__vars:{"--mark-offset":`${mO({value:l.value,min:t,max:n})}%`},key:c},_.jsx(Ee,{...a("mark"),mod:{filled:lGe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}Vbe.displayName="@mantine/core/SliderMarks";function wG({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=hL();return _.jsx(_.Fragment,{children:_.jsx(Ee,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(Ee,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(Ee,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(Vbe,{...a,offset:i,disabled:r,inverted:s})]})})})}wG.displayName="@mantine/core/SliderTrack";function gU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function tc(e,t){return parseFloat(e.toFixed(t))}function Hbe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var pL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const cGe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},fGe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":yn(t,"slider-size"),"--slider-color":n?ei(n,e):void 0,"--slider-radius":i===void 0?void 0:di(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),mL=je((e,t)=>{const n=Ae("Slider",cGe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:S,unstyled:T,scale:A,inverted:C,className:I,style:R,vars:M,hiddenInputProps:P,...O}=n,F=vt({name:"Slider",props:n,classes:pL,classNames:r,className:I,styles:i,style:R,vars:M,varsResolver:fGe,unstyled:T}),{dir:L}=Rh(),[B,U]=N.useState(!1),[H,D]=Po({value:typeof s=="number"?Ud(s,l,c):s,defaultValue:typeof h=="number"?Ud(h,l,c):h,finalValue:Ud(0,l,c),onChange:o}),z=N.useRef(H),W=N.useRef(),j=N.useRef(),q=mO({value:H,min:l,max:c}),G=A(H),ne=typeof g=="function"?g(G):g,ce=d??Hbe(f),de=N.useCallback(({x:ve})=>{if(!S){const Ke=gU({value:ve,min:l,max:c,step:f,precision:ce});D(Ke),z.current=Ke}},[S,l,c,f,ce,D]),{ref:he,active:ye}=F1e(de,{onScrubEnd:()=>a==null?void 0:a(z.current)},L),Ie=ve=>{var Ke,Ue,gt,rt,be,ke;if(!S)switch(ve.key){case"ArrowUp":{ve.preventDefault(),(Ke=j.current)==null||Ke.focus();const ze=tc(Math.min(Math.max(H+f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowRight":{ve.preventDefault(),(Ue=j.current)==null||Ue.focus();const ze=tc(Math.min(Math.max(L==="rtl"?H-f:H+f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowDown":{ve.preventDefault(),(gt=j.current)==null||gt.focus();const ze=tc(Math.min(Math.max(H-f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowLeft":{ve.preventDefault(),(rt=j.current)==null||rt.focus();const ze=tc(Math.min(Math.max(L==="rtl"?H+f:H-f,l),c),ce);D(ze),a==null||a(ze);break}case"Home":{ve.preventDefault(),(be=j.current)==null||be.focus(),D(l),a==null||a(l);break}case"End":{ve.preventDefault(),(ke=j.current)==null||ke.focus(),D(c),a==null||a(c);break}}};return _.jsx(zbe,{value:{getStyles:F},children:_.jsxs(_G,{...O,ref:ls(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var ve;return(ve=W.current)==null?void 0:ve.focus()},size:u,disabled:S,children:[_.jsx(wG,{inverted:C,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:S,containerProps:{ref:he,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:_.jsx(pO,{max:c,min:l,value:G,position:q,dragging:ye,label:ne,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:S,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...P})]})})});mL.classes=pL;mL.displayName="@mantine/core/Slider";function dGe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const hGe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":yn(t,"slider-size"),"--slider-color":n?ei(n,e):void 0,"--slider-radius":i===void 0?void 0:di(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),pGe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},gO=je((e,t)=>{const n=Ae("RangeSlider",pGe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:S,showLabelOnHover:T,thumbChildren:A,disabled:C,unstyled:I,scale:R,inverted:M,className:P,style:O,vars:F,hiddenInputProps:L,...B}=n,U=vt({name:"Slider",props:n,classes:pL,classNames:r,className:P,styles:i,style:O,vars:F,varsResolver:hGe,unstyled:I}),{dir:H}=Rh(),[D,z]=N.useState(-1),[W,j]=N.useState(!1),[q,G]=Po({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=N.useRef(q),ce=N.useRef([]),de=N.useRef(void 0),he=[mO({value:q[0],min:l,max:c}),mO({value:q[1],min:l,max:c})],ye=p??Hbe(h),Ie=We=>{G(We),ne.current=We};N.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const ve=(We,me,dt)=>{const yt=[...ne.current];yt[me]=We,me===0&&(We>yt[1]-(f-1e-9)&&(yt[1]=Math.min(We+f,c)),We>(c-(f-1e-9)||l)&&(yt[me]=ne.current[me]),yt[1]-We>d&&(yt[1]=We+d)),me===1&&(We<yt[0]+f&&(yt[0]=Math.max(We-f,l)),We<yt[0]+f&&(yt[me]=ne.current[me]),We-yt[0]>d&&(yt[0]=We-d)),yt[0]=tc(yt[0],ye),yt[1]=tc(yt[1],ye),Ie(yt),dt&&(a==null||a(ne.current))},Ke=We=>{if(!C){const me=gU({value:We,min:l,max:c,step:h,precision:ye});ve(me,de.current,!1)}},{ref:Ue,active:gt}=F1e(({x:We})=>Ke(We),{onScrubEnd:()=>a==null?void 0:a(ne.current)},H);function rt(We){de.current=We}const be=We=>{Ue.current.focus();const me=Ue.current.getBoundingClientRect(),dt=dGe(We.nativeEvent),yt=gU({value:dt-me.left,max:c,min:l,step:h,containerWidth:me.width}),pe=Math.abs(q[0]-yt)>Math.abs(q[1]-yt)?1:0,Ce=H==="ltr"?pe:pe===1?0:1;de.current=Ce},ke=()=>D!==1&&D!==0?(z(0),0):D,ze=We=>{if(!C)switch(We.key){case"ArrowUp":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(tc(Math.min(Math.max(ne.current[me]+h,l),c),ye),me,!0);break}case"ArrowRight":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(tc(Math.min(Math.max(H==="rtl"?ne.current[me]-h:ne.current[me]+h,l),c),ye),me,!0);break}case"ArrowDown":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(tc(Math.min(Math.max(ne.current[me]-h,l),c),ye),me,!0);break}case"ArrowLeft":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(tc(Math.min(Math.max(H==="rtl"?ne.current[me]+h:ne.current[me]-h,l),c),ye),me,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>z(-1)},Dt=Array.isArray(A);return _.jsx(zbe,{value:{getStyles:U},children:_.jsxs(_G,{...B,size:u,ref:t,disabled:C,children:[_.jsxs(wG,{offset:he[0],marksOffset:q[0],filled:he[1]-he[0],marks:y,inverted:M,min:l,max:c,value:q[1],disabled:C,containerProps:{ref:Ue,onMouseEnter:T?()=>j(!0):void 0,onMouseLeave:T?()=>j(!1):void 0,onTouchStartCapture:be,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:be,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:ze},children:[_.jsx(pO,{...ct,value:R(q[0]),position:he[0],dragging:gt,label:typeof v=="function"?v(tc(R(q[0]),ye)):v,ref:We=>{ce.current[0]=We},thumbLabel:E,onMouseDown:()=>rt(0),onFocus:()=>z(0),showLabelOnHover:T,isHovered:W,disabled:C,children:Dt?A[0]:A}),_.jsx(pO,{...ct,thumbLabel:S,value:R(q[1]),position:he[1],dragging:gt,label:typeof v=="function"?v(tc(R(q[1]),ye)):v,ref:We=>{ce.current[1]=We},onMouseDown:()=>rt(1),onFocus:()=>z(1),showLabelOnHover:T,isHovered:W,disabled:C,children:Dt?A[1]:A})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...L}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...L})]})})});gO.classes=pL;gO.displayName="@mantine/core/RangeSlider";const mGe={},If=je((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Ae("Space",mGe,e);return _.jsx(Ee,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});If.displayName="@mantine/core/Space";var qbe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const gGe={maxHeight:100,initialState:!1},yGe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),EG=je((e,t)=>{const n=Ae("Spoiler",gGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=vt({name:"Spoiler",classes:qbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yGe}),b=Zu(g),w=`${b}-region`,[E,S]=N.useState(l),{ref:T,height:A}=fBe(),C=E?f:d,I=C!==null&&c<A;return _.jsxs(Ee,{...v("root"),id:b,ref:t,"data-has-spoiler":I||void 0,...y,children:[I&&_.jsx(Sx,{component:"button",type:"button",ref:p,onClick:()=>S(R=>!R),"aria-expanded":E,"aria-controls":w,...v("control"),children:C}),_.jsx("div",{...v("content",{style:{maxHeight:E?A?Te(A):void 0:Te(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:T,children:h})})]})});EG.classes=qbe;EG.displayName="@mantine/core/Spoiler";var Wbe={root:"m_6d731127"};const vGe={gap:"md",align:"stretch",justify:"flex-start"},bGe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Il(t),"--stack-align":n,"--stack-justify":r}}),$p=je((e,t)=>{const n=Ae("Stack",vGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=vt({name:"Stack",props:n,classes:Wbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bGe});return _.jsx(Ee,{ref:t,...p("root"),variant:d,...h})});$p.classes=Wbe;$p.displayName="@mantine/core/Stack";const[_Ge,wGe]=_a("Table component was not found in the tree");var DI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function EGe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function bb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=je((i,s)=>{const o=Ae(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=wGe();return _.jsx(Ee,{component:e,ref:s,...EGe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=DI,r}const yU=bb("th",{columnBorder:!0}),Gbe=bb("td",{columnBorder:!0}),RP=bb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),Ybe=bb("thead",{stickyHeader:!0}),Kbe=bb("tbody"),Xbe=bb("tfoot"),Qbe=bb("caption",{captionSide:!0});function xG({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(Qbe,{children:e.caption}),e.head&&_.jsx(Ybe,{children:_.jsx(RP,{children:e.head.map((t,n)=>_.jsx(yU,{children:t},n))})}),e.body&&_.jsx(Kbe,{children:e.body.map((t,n)=>_.jsx(RP,{children:t.map((r,i)=>_.jsx(Gbe,{children:r},i))},n))}),e.foot&&_.jsx(Xbe,{children:_.jsx(RP,{children:e.foot.map((t,n)=>_.jsx(yU,{children:t},n))})})]})}xG.displayName="@mantine/core/TableDataRenderer";const xGe={type:"scrollarea"},SGe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Te(t),"--table-overflow":n==="native"?"auto":void 0}}),SG=je((e,t)=>{const n=Ae("TableScrollContainer",xGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=vt({name:"TableScrollContainer",classes:DI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SGe,rootSelector:"scrollContainer"});return _.jsx(Ee,{component:f==="scrollarea"?yb:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});SG.classes=DI;SG.displayName="@mantine/core/TableScrollContainer";const TGe={withRowBorders:!0,verticalSpacing:7},AGe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Il(r),"--table-vertical-spacing":Il(i),"--table-border-color":s?ei(s,e):void 0,"--table-striped-color":u&&o?ei(o,e):void 0,"--table-highlight-on-hover-color":l&&a?ei(a,e):void 0,"--table-sticky-header-offset":f?Te(c):void 0}}),An=je((e,t)=>{const n=Ae("Table",TGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:S,children:T,stickyHeader:A,stickyHeaderOffset:C,mod:I,...R}=n,M=vt({name:"Table",props:n,className:i,style:s,classes:DI,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:AGe});return _.jsx(_Ge,{value:{getStyles:M,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(Ee,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},I],...M("table"),...R,children:T||!!S&&_.jsx(xG,{data:S})})})});An.classes=DI;An.displayName="@mantine/core/Table";An.Td=Gbe;An.Th=yU;An.Tr=RP;An.Thead=Ybe;An.Tbody=Kbe;An.Tfoot=Xbe;An.Caption=Qbe;An.ScrollContainer=SG;An.DataRenderer=xG;const[CGe,TG]=_a("Tabs component was not found in the tree");var OI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const IGe={},AG=je((e,t)=>{const n=Ae("TabsList",IGe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=TG();return _.jsx(Ee,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});AG.classes=OI;AG.displayName="@mantine/core/TabsList";const kGe={},CG=je((e,t)=>{const n=Ae("TabsPanel",kGe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=TG(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(Ee,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});CG.classes=OI;CG.displayName="@mantine/core/TabsPanel";const RGe={},IG=je((e,t)=>{const n=Ae("TabsTab",RGe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Ms(),{dir:b}=Rh(),w=TG(),E=a===w.value,S=A=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(A)},T={classNames:h,styles:p,props:n};return _.jsxs(Rs,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...T}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?ei(f,v):void 0},onKeyDown:R1e({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",T),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",T),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",T),"data-position":"right",children:s})]})});IG.classes=OI;IG.displayName="@mantine/core/TabsTab";const Zse="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",NGe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},PGe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":di(t),"--tabs-color":ei(n,e),"--tabs-text-color":bx(r,e)?by({color:n,theme:e,autoContrast:r}):void 0}}),es=je((e,t)=>{const n=Ae("Tabs",NGe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:S,vars:T,autoContrast:A,mod:C,...I}=n,R=Zu(l),[M,P]=Po({value:i,defaultValue:r,finalValue:null,onChange:s}),O=vt({name:"Tabs",props:n,classes:OI,className:E,style:S,classNames:v,styles:b,unstyled:w,vars:T,varsResolver:PGe});return _.jsx(CGe,{value:{placement:g,value:M,orientation:o,id:R,loop:u,activateTabWithKeyboard:c,getTabId:ese(`${R}-tab`,Zse),getPanelId:ese(`${R}-panel`,Zse),onChange:P,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:O},children:_.jsx(Ee,{ref:t,id:R,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},C],...O("root"),...I,children:a})})});es.classes=OI;es.displayName="@mantine/core/Tabs";es.Tab=IG;es.Panel=CG;es.List=AG;const DGe={},uv=je((e,t)=>{const n=Ae("TextInput",DGe,e);return _.jsx(Oc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});uv.classes=Oc.classes;uv.displayName="@mantine/core/TextInput";const OGe=["h1","h2","h3","h4","h5","h6"];function $Ge(e,t){const n=t!==void 0?t:`h${e}`;return OGe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Te(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Jbe={root:"m_8a5d1357"};const MGe={order:1},LGe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=$Ge(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},rs=je((e,t)=>{const n=Ae("Title",MGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=vt({name:"Title",props:n,classes:Jbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:LGe});return[1,2,3,4,5,6].includes(u)?_.jsx(Ee,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});rs.classes=Jbe;rs.displayName="@mantine/core/Title";const Zbe=N.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),wa=()=>N.useContext(Zbe);function FGe({children:e}){const[t,n]=qi.useState(void 0),r=qi.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(Zbe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function JC(){return JC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JC.apply(this,arguments)}var Vg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Vg||(Vg={}));const eoe="popstate";function jGe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return vU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:t_e(i)}return UGe(t,n,null,e)}function ss(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function e_e(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function BGe(){return Math.random().toString(36).substr(2,8)}function toe(e,t){return{usr:e.state,key:e.key,idx:t}}function vU(e,t,n,r){return n===void 0&&(n=null),JC({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Rx(t):t,{state:n,key:t&&t.key||r||BGe()})}function t_e(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Rx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function UGe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Vg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(JC({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Vg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Vg.Push;let v=vU(m.location,g,y);l=c()+1;let b=toe(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Vg.Replace;let v=vU(m.location,g,y);l=c();let b=toe(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:t_e(g);return v=v.replace(/ $/,"%20"),ss(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(eoe,f),u=g,()=>{i.removeEventListener(eoe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var noe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(noe||(noe={}));function zGe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Rx(t):t,i=i_e(r.pathname||"/",n);if(i==null)return null;let s=n_e(e);VGe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=tYe(i);o=JGe(s[a],u)}return o}function n_e(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(ss(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=c0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(ss(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),n_e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:XGe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of r_e(s.path))i(s,o,u)}),t}function r_e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=r_e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function VGe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:QGe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const HGe=/^:[\w-]+$/,qGe=3,WGe=2,GGe=1,YGe=10,KGe=-2,roe=e=>e==="*";function XGe(e,t){let n=e.split("/"),r=n.length;return n.some(roe)&&(r+=KGe),t&&(r+=WGe),n.filter(i=>!roe(i)).reduce((i,s)=>i+(HGe.test(s)?qGe:s===""?GGe:YGe),r)}function QGe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function JGe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=ZGe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:c0([i,c.pathname]),pathnameBase:sYe(c0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=c0([i,c.pathnameBase]))}return s}function ZGe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=eYe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function eYe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),e_e(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function tYe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return e_e(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function i_e(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function nYe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Rx(e):e;return{pathname:n?n.startsWith("/")?n:rYe(n,t):t,search:oYe(r),hash:aYe(i)}}function rYe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function i8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iYe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function kG(e,t){let n=iYe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function RG(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Rx(e):(i=JC({},e),ss(!i.pathname||!i.pathname.includes("?"),i8("?","pathname","search",i)),ss(!i.pathname||!i.pathname.includes("#"),i8("#","pathname","hash",i)),ss(!i.search||!i.search.includes("#"),i8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=nYe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const c0=e=>e.join("/").replace(/\/\/+/g,"/"),sYe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oYe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,aYe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function uYe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const s_e=["post","put","patch","delete"];new Set(s_e);const lYe=["get",...s_e];new Set(lYe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ZC(){return ZC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZC.apply(this,arguments)}const NG=N.createContext(null),cYe=N.createContext(null),_b=N.createContext(null),gL=N.createContext(null),Dh=N.createContext({outlet:null,matches:[],isDataRoute:!1}),o_e=N.createContext(null);function a_e(e,t){let{relative:n}={};Nx()||ss(!1);let{basename:r,navigator:i}=N.useContext(_b),{hash:s,pathname:o,search:a}=pYe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:c0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Nx(){return N.useContext(gL)!=null}function wb(){return Nx()||ss(!1),N.useContext(gL).location}function u_e(e){N.useContext(_b).static||N.useLayoutEffect(e)}function Vm(){let{isDataRoute:e}=N.useContext(Dh);return e?TYe():fYe()}function fYe(){Nx()||ss(!1);let e=N.useContext(NG),{basename:t,future:n,navigator:r}=N.useContext(_b),{matches:i}=N.useContext(Dh),{pathname:s}=wb(),o=JSON.stringify(kG(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return u_e(()=>{a.current=!0}),N.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=RG(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:c0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const dYe=N.createContext(null);function hYe(e){let t=N.useContext(Dh).outlet;return t&&N.createElement(dYe.Provider,{value:e},t)}function aE(){let{matches:e}=N.useContext(Dh),t=e[e.length-1];return t?t.params:{}}function pYe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(_b),{matches:i}=N.useContext(Dh),{pathname:s}=wb(),o=JSON.stringify(kG(i,r.v7_relativeSplatPath));return N.useMemo(()=>RG(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function l_e(e,t){return mYe(e,t)}function mYe(e,t,n,r){Nx()||ss(!1);let{navigator:i}=N.useContext(_b),{matches:s}=N.useContext(Dh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=wb(),c;if(t){var f;let g=typeof t=="string"?Rx(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||ss(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=zGe(e,{pathname:h}),m=_Ye(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:c0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:c0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?N.createElement(gL.Provider,{value:{location:ZC({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Vg.Pop}},m):m}function gYe(){let e=SYe(),t=uYe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:i},n):null,null)}const yYe=N.createElement(gYe,null);class vYe extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(Dh.Provider,{value:this.props.routeContext},N.createElement(o_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bYe(e){let{routeContext:t,match:n,children:r}=e,i=N.useContext(NG);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Dh.Provider,{value:t},r)}function _Ye(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||ss(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||yYe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=N.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,N.createElement(bYe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?N.createElement(vYe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var c_e=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(c_e||{}),yO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yO||{});function wYe(e){let t=N.useContext(NG);return t||ss(!1),t}function EYe(e){let t=N.useContext(cYe);return t||ss(!1),t}function xYe(e){let t=N.useContext(Dh);return t||ss(!1),t}function f_e(e){let t=xYe(),n=t.matches[t.matches.length-1];return n.route.id||ss(!1),n.route.id}function SYe(){var e;let t=N.useContext(o_e),n=EYe(yO.UseRouteError),r=f_e(yO.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function TYe(){let{router:e}=wYe(c_e.UseNavigateStable),t=f_e(yO.UseNavigateStable),n=N.useRef(!1);return u_e(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,ZC({fromRouteId:t},s)))},[e,t])}function PG(e){let{to:t,replace:n,state:r,relative:i}=e;Nx()||ss(!1);let{future:s,static:o}=N.useContext(_b),{matches:a}=N.useContext(Dh),{pathname:u}=wb(),l=Vm(),c=RG(t,kG(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return N.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function AYe(e){return hYe(e.context)}function dp(e){ss(!1)}function CYe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Vg.Pop,navigator:s,static:o=!1,future:a}=e;Nx()&&ss(!1);let u=t.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:u,navigator:s,static:o,future:ZC({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=Rx(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=N.useMemo(()=>{let g=i_e(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:N.createElement(_b.Provider,{value:l},N.createElement(gL.Provider,{children:n,value:m}))}function IYe(e){let{children:t,location:n}=e;return l_e(bU(t),n)}new Promise(()=>{});function bU(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,i)=>{if(!N.isValidElement(r))return;let s=[...t,i];if(r.type===N.Fragment){n.push.apply(n,bU(r.props.children,s));return}r.type!==dp&&ss(!1),!r.props.index||!r.props.children||ss(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=bU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _U(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function kYe(e,t){let n=_U(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const RYe="6";try{window.__reactRouterVersion=RYe}catch{}const NYe="startTransition",ioe=DD[NYe];function PYe(e){let{basename:t,children:n,future:r,window:i}=e,s=N.useRef();s.current==null&&(s.current=jGe({window:i,v5Compat:!0}));let o=s.current,[a,u]=N.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=N.useCallback(f=>{l&&ioe?ioe(()=>u(f)):u(f)},[u,l]);return N.useLayoutEffect(()=>o.listen(c),[o,c]),N.createElement(CYe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var soe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(soe||(soe={}));var ooe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ooe||(ooe={}));function DG(e){let t=N.useRef(_U(e)),n=N.useRef(!1),r=wb(),i=N.useMemo(()=>kYe(r.search,n.current?null:t.current),[r.search]),s=Vm(),o=N.useCallback((a,u)=>{const l=_U(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const OG=N.createContext(null);OG.displayName="@mantine/modals/ModalsContext";function DYe(){const e=N.useContext(OG);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function OYe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=DYe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(Ee,{mb:"md",children:l}),_.jsxs(Os,{justify:"flex-end",...o,children:[_.jsx(Rn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(Rn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[$Ye,yL]=_Be("mantine-modals");yL("openModal");yL("closeModal");yL("closeAllModals");const wU=yL("openConfirmModal");function aoe(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function MYe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;aoe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{aoe(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function LYe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function FYe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=N.useReducer(MYe,{modals:[],current:null}),o=N.useRef(i);o.current=i;const a=N.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=N.useCallback(({modalId:g,...y})=>{const v=g||BA();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=N.useCallback(({modalId:g,...y})=>{const v=g||BA();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=N.useCallback((g,{modalId:y,...v})=>{const b=y||BA();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=N.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);$Ye({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=LYe(g.props);return{modalProps:y,content:_.jsx(OYe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(OG.Provider,{value:d,children:[_.jsx(vs,{zIndex:Nc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jYe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=(e,t,n,r)=>{const i=N.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>N.createElement("svg",{ref:f,...jYe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>N.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BYe=Fr("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uoe=Fr("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UYe=Fr("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zYe=Fr("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VYe=Fr("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HYe=Fr("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qYe=Fr("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WYe=Fr("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GYe=Fr("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var loe=Fr("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YYe=Fr("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KYe=Fr("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XYe=Fr("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QYe=Fr("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JYe=Fr("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZYe=Fr("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eKe=Fr("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tKe=Fr("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nKe=Fr("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rKe=Fr("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iKe=Fr("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var d_e=Fr("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var h_e=Fr("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sKe=Fr("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var p_e=Fr("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $G=Fr("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var m_e=Fr("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oKe=Fr("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function g_e(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Oh="/Upset-alltx-study/";function coe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function y_e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const aKe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,uKe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,lKe={};function foe(e,t){return(lKe.jsx?uKe:aKe).test(e)}const cKe=/[ \t\n\f\r]/g;function fKe(e){return typeof e=="object"?e.type==="text"?doe(e.value):!1:doe(e)}function doe(e){return e.replace(cKe,"")===""}let $I=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};$I.prototype.property={};$I.prototype.normal={};$I.prototype.space=null;function v_e(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new $I(n,r,t)}function e2(e){return e.toLowerCase()}let Mc=class{constructor(t,n){this.property=t,this.attribute=n}};Mc.prototype.space=null;Mc.prototype.boolean=!1;Mc.prototype.booleanish=!1;Mc.prototype.overloadedBoolean=!1;Mc.prototype.number=!1;Mc.prototype.commaSeparated=!1;Mc.prototype.spaceSeparated=!1;Mc.prototype.commaOrSpaceSeparated=!1;Mc.prototype.mustUseProperty=!1;Mc.prototype.defined=!1;let dKe=0;const pn=Eb(),hs=Eb(),b_e=Eb(),tt=Eb(),Xr=Eb(),_w=Eb(),ol=Eb();function Eb(){return 2**++dKe}const EU=Object.freeze(Object.defineProperty({__proto__:null,boolean:pn,booleanish:hs,commaOrSpaceSeparated:ol,commaSeparated:_w,number:tt,overloadedBoolean:b_e,spaceSeparated:Xr},Symbol.toStringTag,{value:"Module"})),s8=Object.keys(EU);class MG extends Mc{constructor(t,n,r,i){let s=-1;if(super(t,n),hoe(this,"space",i),typeof r=="number")for(;++s<s8.length;){const o=s8[s];hoe(this,s8[s],(r&EU[o])===EU[o])}}}MG.prototype.defined=!0;function hoe(e,t,n){n&&(e[t]=n)}const hKe={}.hasOwnProperty;function Px(e){const t={},n={};let r;for(r in e.properties)if(hKe.call(e.properties,r)){const i=e.properties[r],s=new MG(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[e2(r)]=r,n[e2(s.attribute)]=r}return new $I(t,n,e.space)}const __e=Px({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),w_e=Px({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function E_e(e,t){return t in e?e[t]:t}function x_e(e,t){return E_e(e,t.toLowerCase())}const S_e=Px({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:x_e,properties:{xmlns:null,xmlnsXLink:null}}),T_e=Px({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:hs,ariaAutoComplete:null,ariaBusy:hs,ariaChecked:hs,ariaColCount:tt,ariaColIndex:tt,ariaColSpan:tt,ariaControls:Xr,ariaCurrent:null,ariaDescribedBy:Xr,ariaDetails:null,ariaDisabled:hs,ariaDropEffect:Xr,ariaErrorMessage:null,ariaExpanded:hs,ariaFlowTo:Xr,ariaGrabbed:hs,ariaHasPopup:null,ariaHidden:hs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Xr,ariaLevel:tt,ariaLive:null,ariaModal:hs,ariaMultiLine:hs,ariaMultiSelectable:hs,ariaOrientation:null,ariaOwns:Xr,ariaPlaceholder:null,ariaPosInSet:tt,ariaPressed:hs,ariaReadOnly:hs,ariaRelevant:null,ariaRequired:hs,ariaRoleDescription:Xr,ariaRowCount:tt,ariaRowIndex:tt,ariaRowSpan:tt,ariaSelected:hs,ariaSetSize:tt,ariaSort:null,ariaValueMax:tt,ariaValueMin:tt,ariaValueNow:tt,ariaValueText:null,role:null}}),pKe=Px({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:x_e,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:_w,acceptCharset:Xr,accessKey:Xr,action:null,allow:null,allowFullScreen:pn,allowPaymentRequest:pn,allowUserMedia:pn,alt:null,as:null,async:pn,autoCapitalize:null,autoComplete:Xr,autoFocus:pn,autoPlay:pn,blocking:Xr,capture:null,charSet:null,checked:pn,cite:null,className:Xr,cols:tt,colSpan:null,content:null,contentEditable:hs,controls:pn,controlsList:Xr,coords:tt|_w,crossOrigin:null,data:null,dateTime:null,decoding:null,default:pn,defer:pn,dir:null,dirName:null,disabled:pn,download:b_e,draggable:hs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:pn,formTarget:null,headers:Xr,height:tt,hidden:pn,high:tt,href:null,hrefLang:null,htmlFor:Xr,httpEquiv:Xr,id:null,imageSizes:null,imageSrcSet:null,inert:pn,inputMode:null,integrity:null,is:null,isMap:pn,itemId:null,itemProp:Xr,itemRef:Xr,itemScope:pn,itemType:Xr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:pn,low:tt,manifest:null,max:null,maxLength:tt,media:null,method:null,min:null,minLength:tt,multiple:pn,muted:pn,name:null,nonce:null,noModule:pn,noValidate:pn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:pn,optimum:tt,pattern:null,ping:Xr,placeholder:null,playsInline:pn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:pn,referrerPolicy:null,rel:Xr,required:pn,reversed:pn,rows:tt,rowSpan:tt,sandbox:Xr,scope:null,scoped:pn,seamless:pn,selected:pn,shadowRootClonable:pn,shadowRootDelegatesFocus:pn,shadowRootMode:null,shape:null,size:tt,sizes:null,slot:null,span:tt,spellCheck:hs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:tt,step:null,style:null,tabIndex:tt,target:null,title:null,translate:null,type:null,typeMustMatch:pn,useMap:null,value:hs,width:tt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Xr,axis:null,background:null,bgColor:null,border:tt,borderColor:null,bottomMargin:tt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:pn,declare:pn,event:null,face:null,frame:null,frameBorder:null,hSpace:tt,leftMargin:tt,link:null,longDesc:null,lowSrc:null,marginHeight:tt,marginWidth:tt,noResize:pn,noHref:pn,noShade:pn,noWrap:pn,object:null,profile:null,prompt:null,rev:null,rightMargin:tt,rules:null,scheme:null,scrolling:hs,standby:null,summary:null,text:null,topMargin:tt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:tt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:pn,disableRemotePlayback:pn,prefix:null,property:null,results:tt,security:null,unselectable:null}}),mKe=Px({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:E_e,properties:{about:ol,accentHeight:tt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:tt,amplitude:tt,arabicForm:null,ascent:tt,attributeName:null,attributeType:null,azimuth:tt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:tt,by:null,calcMode:null,capHeight:tt,className:Xr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:tt,diffuseConstant:tt,direction:null,display:null,dur:null,divisor:tt,dominantBaseline:null,download:pn,dx:null,dy:null,edgeMode:null,editable:null,elevation:tt,enableBackground:null,end:null,event:null,exponent:tt,externalResourcesRequired:null,fill:null,fillOpacity:tt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:_w,g2:_w,glyphName:_w,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:tt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:tt,horizOriginX:tt,horizOriginY:tt,id:null,ideographic:tt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:tt,k:tt,k1:tt,k2:tt,k3:tt,k4:tt,kernelMatrix:ol,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:tt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:tt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:tt,overlineThickness:tt,paintOrder:null,panose1:null,path:null,pathLength:tt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Xr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:tt,pointsAtY:tt,pointsAtZ:tt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ol,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ol,rev:ol,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ol,requiredFeatures:ol,requiredFonts:ol,requiredFormats:ol,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:tt,specularExponent:tt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:tt,strikethroughThickness:tt,string:null,stroke:null,strokeDashArray:ol,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:tt,strokeOpacity:tt,strokeWidth:null,style:null,surfaceScale:tt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ol,tabIndex:tt,tableValues:null,target:null,targetX:tt,targetY:tt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ol,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:tt,underlineThickness:tt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:tt,values:null,vAlphabetic:tt,vMathematical:tt,vectorEffect:null,vHanging:tt,vIdeographic:tt,version:null,vertAdvY:tt,vertOriginX:tt,vertOriginY:tt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:tt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),gKe=/^data[-\w.:]+$/i,poe=/-[a-z]/g,yKe=/[A-Z]/g;function vL(e,t){const n=e2(t);let r=t,i=Mc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&gKe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(poe,bKe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!poe.test(s)){let o=s.replace(yKe,vKe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=MG}return new i(r,t)}function vKe(e){return"-"+e.toLowerCase()}function bKe(e){return e.charAt(1).toUpperCase()}const _Ke={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},MI=v_e([w_e,__e,S_e,T_e,pKe],"html"),Sy=v_e([w_e,__e,S_e,T_e,mKe],"svg");function moe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function A_e(e){return e.join(" ").trim()}var C_e={},goe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,wKe=/\n/g,EKe=/^\s*/,xKe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,SKe=/^:\s*/,TKe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,AKe=/^[;\s]*/,CKe=/^\s+|\s+$/g,IKe=`
`,yoe="/",voe="*",C1="",kKe="comment",RKe="declaration",NKe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(wKe);m&&(n+=m.length);var g=p.lastIndexOf(IKe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(EKe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(yoe!=e.charAt(0)||voe!=e.charAt(1))){for(var m=2;C1!=e.charAt(m)&&(voe!=e.charAt(m)||yoe!=e.charAt(m+1));)++m;if(m+=2,C1===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:kKe,comment:g})}}function d(){var p=s(),m=u(xKe);if(m){if(f(),!u(SKe))return a("property missing ':'");var g=u(TKe),y=p({type:RKe,property:boe(m[0].replace(goe,C1)),value:g?boe(g[0].replace(goe,C1)):C1});return u(AKe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function boe(e){return e?e.replace(CKe,C1):C1}var PKe=Js&&Js.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(C_e,"__esModule",{value:!0});var DKe=PKe(NKe);function OKe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,DKe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var _oe=C_e.default=OKe;const $Ke=_oe.default||_oe,bL=I_e("end"),$h=I_e("start");function I_e(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function MKe(e){const t=$h(e),n=bL(e);if(t&&n)return{start:t,end:n}}function UA(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?woe(e.position):"start"in e||"end"in e?woe(e):"line"in e||"column"in e?xU(e):""}function xU(e){return Eoe(e&&e.line)+":"+Eoe(e&&e.column)}function woe(e){return xU(e&&e.start)+"-"+xU(e&&e.end)}function Eoe(e){return e&&typeof e=="number"?e:1}class Ea extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=UA(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ea.prototype.file="";Ea.prototype.name="";Ea.prototype.reason="";Ea.prototype.message="";Ea.prototype.stack="";Ea.prototype.column=void 0;Ea.prototype.line=void 0;Ea.prototype.ancestors=void 0;Ea.prototype.cause=void 0;Ea.prototype.fatal=void 0;Ea.prototype.place=void 0;Ea.prototype.ruleId=void 0;Ea.prototype.source=void 0;const LG={}.hasOwnProperty,LKe=new Map,FKe=/[A-Z]/g,jKe=/-([a-z])/g,BKe=new Set(["table","tbody","thead","tfoot","tr"]),UKe=new Set(["td","th"]),k_e="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function zKe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=XKe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=KKe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Sy:MI,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=R_e(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function R_e(e,t,n){if(t.type==="element")return VKe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return HKe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return WKe(e,t,n);if(t.type==="mdxjsEsm")return qKe(e,t);if(t.type==="root")return GKe(e,t,n);if(t.type==="text")return YKe(e,t)}function VKe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Sy,e.schema=i),e.ancestors.push(t);const s=P_e(e,t.tagName,!1),o=QKe(e,t);let a=jG(e,t);return BKe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!fKe(u):!0})),N_e(e,o,s,t),FG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function HKe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}t2(e,t.position)}function qKe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);t2(e,t.position)}function WKe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Sy,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:P_e(e,t.name,!0),o=JKe(e,t),a=jG(e,t);return N_e(e,o,s,t),FG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function GKe(e,t,n){const r={};return FG(r,jG(e,t)),e.create(t,e.Fragment,r,n)}function YKe(e,t){return t.value}function N_e(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function FG(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function KKe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function XKe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=$h(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function QKe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&LG.call(t.properties,i)){const s=ZKe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&UKe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function JKe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else t2(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else t2(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function jG(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:LKe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=R_e(e,s,o);a!==void 0&&n.push(a)}return n}function ZKe(e,t,n){const r=vL(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?y_e(n):A_e(n)),r.property==="style"){let i=typeof n=="object"?n:eXe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=tXe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?_Ke[r.property]||r.property:r.attribute,n]}}function eXe(e,t){const n={};try{$Ke(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Ea("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=k_e+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(jKe,rXe)),n[o]=s}}function P_e(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=foe(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=foe(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return LG.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);t2(e)}function t2(e,t){const n=new Ea("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=k_e+"#cannot-handle-mdx-estrees-without-createevaluater",n}function tXe(e){const t={};let n;for(n in e)LG.call(e,n)&&(t[nXe(n)]=e[n]);return t}function nXe(e){let t=e.replace(FKe,iXe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function rXe(e,t){return t.toUpperCase()}function iXe(e){return"-"+e.toLowerCase()}const o8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},sXe={};function oXe(e,t){const n=sXe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return D_e(e,r,i)}function D_e(e,t,n){if(aXe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return xoe(e.children,t,n)}return Array.isArray(e)?xoe(e,t,n):""}function xoe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=D_e(e[i],t,n);return r.join("")}function aXe(e){return!!(e&&typeof e=="object")}const Soe=document.createElement("i");function BG(e){const t="&"+e+";";Soe.innerHTML=t;const n=Soe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function hm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function sc(e,t){return e.length>0?(hm(e,e.length,0,t),e):t}const Toe={}.hasOwnProperty;function uXe(e){const t={};let n=-1;for(;++n<e.length;)lXe(t,e[n]);return t}function lXe(e,t){let n;for(n in t){const i=(Toe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Toe.call(i,o)||(i[o]=[]);const a=s[o];cXe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function cXe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);hm(e,0,0,r)}function O_e(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function ww(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const kd=Ty(/[A-Za-z]/),vl=Ty(/[\dA-Za-z]/),fXe=Ty(/[#-'*+\--9=?A-Z^-~]/);function SU(e){return e!==null&&(e<32||e===127)}const TU=Ty(/\d/),dXe=Ty(/[\dA-Fa-f]/),hXe=Ty(/[!-/:-@[-`{-~]/);function Zt(e){return e!==null&&e<-2}function Mu(e){return e!==null&&(e<0||e===32)}function vr(e){return e===-2||e===-1||e===32}const pXe=Ty(new RegExp("\\p{P}|\\p{S}","u")),mXe=Ty(/\s/);function Ty(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Dx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&vl(e.charCodeAt(n+1))&&vl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Zr(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return vr(u)?(e.enter(n),a(u)):t(u)}function a(u){return vr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const gXe={tokenize:yXe};function yXe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Zr(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Zt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const vXe={tokenize:bXe},Aoe={tokenize:_Xe};function bXe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let T=w;for(;T<t.events.length;)t.events[T][1].end=Object.assign({},S),T++;return hm(t.events,E+1,0,t.events.slice(w)),t.events.length=T,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Aoe,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(Aoe,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return Zt(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const T=t.events.length;let A=T,C,I;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(C){I=t.events[A][1].end;break}C=!0}for(y(r),S=T;S<t.events.length;)t.events[S][1].end=Object.assign({},I),S++;hm(t.events,A+1,0,t.events.slice(T)),t.events.length=S}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function _Xe(e,t,n){return Zr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Coe(e){if(e===null||Mu(e)||mXe(e))return 1;if(pXe(e))return 2}function UG(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const AU={name:"attention",tokenize:EXe,resolveAll:wXe};function wXe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Ioe(f,-u),Ioe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=sc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=sc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=sc(l,UG(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=sc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=sc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,hm(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function EXe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Coe(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Coe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Ioe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const xXe={name:"autolink",tokenize:SXe};function SXe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return kd(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||vl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||vl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||SU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):fXe(h)?(e.consume(h),l):n(h)}function c(h){return vl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||vl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const _L={tokenize:TXe,partial:!0};function TXe(e,t,n){return r;function r(s){return vr(s)?Zr(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Zt(s)?t(s):n(s)}}const $_e={name:"blockQuote",tokenize:AXe,continuation:{tokenize:CXe},exit:IXe};function AXe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return vr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function CXe(e,t,n){const r=this;return i;function i(o){return vr(o)?Zr(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt($_e,t,n)(o)}}function IXe(e){e.exit("blockQuote")}const M_e={name:"characterEscape",tokenize:kXe};function kXe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return hXe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const L_e={name:"characterReference",tokenize:RXe};function RXe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=vl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=dXe,c):(e.enter("characterReferenceValue"),s=7,o=TU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===vl&&!BG(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const koe={tokenize:PXe,partial:!0},Roe={name:"codeFenced",tokenize:NXe,concrete:!0};function NXe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),vr(S)?Zr(e,f,"whitespace")(S):f(S))}function f(S){return S===null||Zt(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(koe,m,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||Zt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):vr(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Zr(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||Zt(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||Zt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,w,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&vr(S)?Zr(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||Zt(S)?e.check(koe,m,w)(S):(e.enter("codeFlowValue"),b(S))}function b(S){return S===null||Zt(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),b)}function w(S){return e.exit("codeFenced"),t(S)}function E(S,T,A){let C=0;return I;function I(F){return S.enter("lineEnding"),S.consume(F),S.exit("lineEnding"),R}function R(F){return S.enter("codeFencedFence"),vr(F)?Zr(S,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):M(F)}function M(F){return F===a?(S.enter("codeFencedFenceSequence"),P(F)):A(F)}function P(F){return F===a?(C++,S.consume(F),P):C>=o?(S.exit("codeFencedFenceSequence"),vr(F)?Zr(S,O,"whitespace")(F):O(F)):A(F)}function O(F){return F===null||Zt(F)?(S.exit("codeFencedFence"),T(F)):A(F)}}}function PXe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const a8={name:"codeIndented",tokenize:OXe},DXe={tokenize:$Xe,partial:!0};function OXe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Zr(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Zt(l)?e.attempt(DXe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Zt(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function $Xe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Zr(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Zt(o)?i(o):n(o)}}const MXe={name:"codeText",tokenize:jXe,resolve:LXe,previous:FXe};function LXe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function FXe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function jXe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Zt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Zt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class BXe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&KS(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),KS(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),KS(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);KS(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);KS(this.left,n.reverse())}}}function KS(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function F_e(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new BXe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,UXe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return hm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function UXe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const zXe={tokenize:qXe,resolve:HXe},VXe={tokenize:WXe,partial:!0};function HXe(e){return F_e(e),e}function qXe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Zt(a)?e.check(VXe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function WXe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Zr(e,s,"linePrefix")}function s(o){if(o===null||Zt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function j_e(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||SU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Zt(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Mu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||SU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function B_e(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Zt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Zt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!vr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function U_e(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Zt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Zr(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Zt(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function zA(e,t){let n;return r;function r(i){return Zt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):vr(i)?Zr(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const GXe={name:"definition",tokenize:KXe},YXe={tokenize:XXe,partial:!0};function KXe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return B_e.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=ww(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Mu(h)?zA(e,l)(h):l(h)}function l(h){return j_e(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(YXe,f,f)(h)}function f(h){return vr(h)?Zr(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Zt(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function XXe(e,t,n){return r;function r(a){return Mu(a)?zA(e,i)(a):n(a)}function i(a){return U_e(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return vr(a)?Zr(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Zt(a)?t(a):n(a)}}const QXe={name:"hardBreakEscape",tokenize:JXe};function JXe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Zt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const ZXe={name:"headingAtx",tokenize:tQe,resolve:eQe};function eQe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},hm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function tQe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Mu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Zt(c)?(e.exit("atxHeading"),t(c)):vr(c)?Zr(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Mu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const nQe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Noe=["pre","script","style","textarea"],rQe={name:"htmlFlow",tokenize:aQe,resolveTo:oQe,concrete:!0},iQe={tokenize:lQe,partial:!0},sQe={tokenize:uQe,partial:!0};function oQe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function aQe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:D):kd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):kd(j)?(e.consume(j),i=4,r.interrupt?t:D):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:D):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:M:p):n(j)}function m(j){return kd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Mu(j)){const q=j===47,G=o.toLowerCase();return!q&&!s&&Noe.includes(G)?(i=1,r.interrupt?t(j):M(j)):nQe.includes(o.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):M(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||vl(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:M):n(j)}function v(j){return vr(j)?(e.consume(j),v):I(j)}function b(j){return j===47?(e.consume(j),I):j===58||j===95||kd(j)?(e.consume(j),w):vr(j)?(e.consume(j),b):I(j)}function w(j){return j===45||j===46||j===58||j===95||vl(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),S):vr(j)?(e.consume(j),E):b(j)}function S(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,T):vr(j)?(e.consume(j),S):A(j)}function T(j){return j===u?(e.consume(j),u=null,C):j===null||Zt(j)?n(j):(e.consume(j),T)}function A(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Mu(j)?E(j):(e.consume(j),A)}function C(j){return j===47||j===62||vr(j)?b(j):n(j)}function I(j){return j===62?(e.consume(j),R):n(j)}function R(j){return j===null||Zt(j)?M(j):vr(j)?(e.consume(j),R):n(j)}function M(j){return j===45&&i===2?(e.consume(j),L):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),D):j===93&&i===5?(e.consume(j),H):Zt(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(iQe,W,P)(j)):j===null||Zt(j)?(e.exit("htmlFlowData"),P(j)):(e.consume(j),M)}function P(j){return e.check(sQe,O,W)(j)}function O(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||Zt(j)?P(j):(e.enter("htmlFlowData"),M(j))}function L(j){return j===45?(e.consume(j),D):M(j)}function B(j){return j===47?(e.consume(j),o="",U):M(j)}function U(j){if(j===62){const q=o.toLowerCase();return Noe.includes(q)?(e.consume(j),z):M(j)}return kd(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):M(j)}function H(j){return j===93?(e.consume(j),D):M(j)}function D(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),D):M(j)}function z(j){return j===null||Zt(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function uQe(e,t,n){const r=this;return i;function i(o){return Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function lQe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(_L,t,n)}}const cQe={name:"htmlText",tokenize:fQe};function fQe(e,t,n){const r=this;let i,s,o;return a;function a(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),u}function u(D){return D===33?(e.consume(D),l):D===47?(e.consume(D),E):D===63?(e.consume(D),b):kd(D)?(e.consume(D),A):n(D)}function l(D){return D===45?(e.consume(D),c):D===91?(e.consume(D),s=0,p):kd(D)?(e.consume(D),v):n(D)}function c(D){return D===45?(e.consume(D),h):n(D)}function f(D){return D===null?n(D):D===45?(e.consume(D),d):Zt(D)?(o=f,B(D)):(e.consume(D),f)}function d(D){return D===45?(e.consume(D),h):f(D)}function h(D){return D===62?L(D):D===45?d(D):f(D)}function p(D){const z="CDATA[";return D===z.charCodeAt(s++)?(e.consume(D),s===z.length?m:p):n(D)}function m(D){return D===null?n(D):D===93?(e.consume(D),g):Zt(D)?(o=m,B(D)):(e.consume(D),m)}function g(D){return D===93?(e.consume(D),y):m(D)}function y(D){return D===62?L(D):D===93?(e.consume(D),y):m(D)}function v(D){return D===null||D===62?L(D):Zt(D)?(o=v,B(D)):(e.consume(D),v)}function b(D){return D===null?n(D):D===63?(e.consume(D),w):Zt(D)?(o=b,B(D)):(e.consume(D),b)}function w(D){return D===62?L(D):b(D)}function E(D){return kd(D)?(e.consume(D),S):n(D)}function S(D){return D===45||vl(D)?(e.consume(D),S):T(D)}function T(D){return Zt(D)?(o=T,B(D)):vr(D)?(e.consume(D),T):L(D)}function A(D){return D===45||vl(D)?(e.consume(D),A):D===47||D===62||Mu(D)?C(D):n(D)}function C(D){return D===47?(e.consume(D),L):D===58||D===95||kd(D)?(e.consume(D),I):Zt(D)?(o=C,B(D)):vr(D)?(e.consume(D),C):L(D)}function I(D){return D===45||D===46||D===58||D===95||vl(D)?(e.consume(D),I):R(D)}function R(D){return D===61?(e.consume(D),M):Zt(D)?(o=R,B(D)):vr(D)?(e.consume(D),R):C(D)}function M(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),i=D,P):Zt(D)?(o=M,B(D)):vr(D)?(e.consume(D),M):(e.consume(D),O)}function P(D){return D===i?(e.consume(D),i=void 0,F):D===null?n(D):Zt(D)?(o=P,B(D)):(e.consume(D),P)}function O(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||Mu(D)?C(D):(e.consume(D),O)}function F(D){return D===47||D===62||Mu(D)?C(D):n(D)}function L(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}function B(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),U}function U(D){return vr(D)?Zr(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):H(D)}function H(D){return e.enter("htmlTextData"),o(D)}}const zG={name:"labelEnd",tokenize:yQe,resolveTo:gQe,resolveAll:mQe},dQe={tokenize:vQe},hQe={tokenize:bQe},pQe={tokenize:_Qe};function mQe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function gQe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=sc(a,e.slice(s+1,s+r+3)),a=sc(a,[["enter",c,t]]),a=sc(a,UG(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=sc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=sc(a,e.slice(o+1)),a=sc(a,[["exit",u,t]]),hm(e,s,e.length,a),e}function yQe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(ww(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(dQe,c,o?c:f)(d):d===91?e.attempt(hQe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(pQe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function vQe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Mu(f)?zA(e,s)(f):s(f)}function s(f){return f===41?c(f):j_e(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Mu(f)?zA(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?U_e(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Mu(f)?zA(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function bQe(e,t,n){const r=this;return i;function i(a){return B_e.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(ww(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function _Qe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const wQe={name:"labelStartImage",tokenize:EQe,resolveAll:zG.resolveAll};function EQe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const xQe={name:"labelStartLink",tokenize:SQe,resolveAll:zG.resolveAll};function SQe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const u8={name:"lineEnding",tokenize:TQe};function TQe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Zr(e,t,"linePrefix")}}const NP={name:"thematicBreak",tokenize:AQe};function AQe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Zt(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),vr(l)?Zr(e,a,"whitespace")(l):a(l))}}const fu={name:"list",tokenize:kQe,continuation:{tokenize:RQe},exit:PQe},CQe={tokenize:DQe,partial:!0},IQe={tokenize:NQe,partial:!0};function kQe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:TU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(NP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return TU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(_L,r.interrupt?n:c,e.attempt(CQe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return vr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function RQe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(_L,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Zr(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!vr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(IQe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Zr(e,e.attempt(fu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function NQe(e,t,n){const r=this;return Zr(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function PQe(e){e.exit(this.containerState.type)}function DQe(e,t,n){const r=this;return Zr(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!vr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Poe={name:"setextUnderline",tokenize:$Qe,resolveTo:OQe};function OQe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function $Qe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),vr(l)?Zr(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Zt(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const MQe={tokenize:LQe};function LQe(e){const t=this,n=e.attempt(_L,r,e.attempt(this.parser.constructs.flowInitial,i,Zr(e,e.attempt(this.parser.constructs.flow,i,e.attempt(zXe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const FQe={resolveAll:V_e()},jQe=z_e("string"),BQe=z_e("text");function z_e(e){return{tokenize:t,resolveAll:V_e(e==="text"?UQe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function V_e(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function UQe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function zQe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:T(E),check:T(S),interrupt:T(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=sc(o,R),g(),o[o.length-1]!==null?[]:(A(t,0),l.events=UG(s,l.events,l),l.events)}function d(R,M){return HQe(h(R),M)}function h(R){return VQe(o,R)}function p(){const{line:R,column:M,offset:P,_index:O,_bufferIndex:F}=r;return{line:R,column:M,offset:P,_index:O,_bufferIndex:F}}function m(R){i[R.line]=R.column,I()}function g(){let R;for(;r._index<o.length;){const M=o[r._index];if(typeof M=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<M.length;)y(M.charCodeAt(r._bufferIndex));else y(M)}}function y(R){c=c(R)}function v(R){Zt(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,I()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function b(R,M){const P=M||{};return P.type=R,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function w(R){const M=a.pop();return M.end=p(),l.events.push(["exit",M,l]),M}function E(R,M){A(R,M.from)}function S(R,M){M.restore()}function T(R,M){return P;function P(O,F,L){let B,U,H,D;return Array.isArray(O)?W(O):"tokenize"in O?W([O]):z(O);function z(ne){return ce;function ce(de){const he=de!==null&&ne[de],ye=de!==null&&ne.null,Ie=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return W(Ie)(de)}}function W(ne){return B=ne,U=0,ne.length===0?L:j(ne[U])}function j(ne){return ce;function ce(de){return D=C(),H=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?G():ne.tokenize.call(M?Object.assign(Object.create(l),M):l,u,q,G)(de)}}function q(ne){return R(H,D),F}function G(ne){return D.restore(),++U<B.length?j(B[U]):L}}}function A(R,M){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&hm(l.events,M,l.events.length-M,R.resolve(l.events.slice(M),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function C(){const R=p(),M=l.previous,P=l.currentConstruct,O=l.events.length,F=Array.from(a);return{restore:L,from:O};function L(){r=R,l.previous=M,l.currentConstruct=P,l.events.length=O,a=F,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function VQe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function HQe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const qQe={42:fu,43:fu,45:fu,48:fu,49:fu,50:fu,51:fu,52:fu,53:fu,54:fu,55:fu,56:fu,57:fu,62:$_e},WQe={91:GXe},GQe={[-2]:a8,[-1]:a8,32:a8},YQe={35:ZXe,42:NP,45:[Poe,NP],60:rQe,61:Poe,95:NP,96:Roe,126:Roe},KQe={38:L_e,92:M_e},XQe={[-5]:u8,[-4]:u8,[-3]:u8,33:wQe,38:L_e,42:AU,60:[xXe,cQe],91:xQe,92:[QXe,M_e],93:zG,95:AU,96:MXe},QQe={null:[AU,FQe]},JQe={null:[42,95]},ZQe={null:[]},eJe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:JQe,contentInitial:WQe,disable:ZQe,document:qQe,flow:YQe,flowInitial:GQe,insideSpan:QQe,string:KQe,text:XQe},Symbol.toStringTag,{value:"Module"}));function tJe(e){const n=uXe([eJe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(gXe),document:i(vXe),flow:i(MQe),string:i(jQe),text:i(BQe)};return r;function i(s){return o;function o(a){return zQe(r,s,a)}}}function nJe(e){for(;!F_e(e););return e}const Doe=/[\0\t\n\r]/g;function rJe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Doe.lastIndex=f,l=Doe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const iJe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function sJe(e){return e.replace(iJe,oJe)}function oJe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return O_e(n.slice(s?2:1),s?16:10)}return BG(n)||e}const H_e={}.hasOwnProperty;function aJe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),uJe(n)(nJe(tJe(n).document().write(rJe()(e,t,!0))))}function uJe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ze),autolinkProtocol:C,autolinkEmail:C,atxHeading:s(gt),blockQuote:s(ye),characterEscape:C,characterReference:C,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(ve,o),codeTextData:C,data:C,codeFlowValue:C,definition:s(Ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ue),hardBreakEscape:s(rt),hardBreakTrailing:s(rt),htmlFlow:s(be,o),htmlFlowData:C,htmlText:s(be,o),htmlTextData:C,image:s(ke),label:o,link:s(ze),listItem:s(Dt),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(We),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(gt),strong:s(me),thematicBreak:s(yt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:he,autolinkProtocol:de,blockQuote:u(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:ne,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:I,codeIndented:u(y),codeText:u(F),codeTextData:I,data:I,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(M),hardBreakTrailing:u(M),htmlFlow:u(P),htmlFlowData:I,htmlText:u(O),htmlTextData:I,image:u(B),label:H,labelText:U,lineEnding:R,link:u(L),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:D,resourceTitleString:z,resource:W,setextHeading:u(A),setextHeadingLineSequence:T,setextHeadingText:S,strong:u(),thematicBreak:u()}};q_e(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(pe){let Ce={type:"root",children:[]};const He={stack:[Ce],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let _t=-1;for(;++_t<pe.length;)if(pe[_t][1].type==="listOrdered"||pe[_t][1].type==="listUnordered")if(pe[_t][0]==="enter")ut.push(_t);else{const Mn=ut.pop();_t=i(pe,Mn,_t)}for(_t=-1;++_t<pe.length;){const Mn=t[pe[_t][0]];H_e.call(Mn,pe[_t][1].type)&&Mn[pe[_t][1].type].call(Object.assign({sliceSerialize:pe[_t][2].sliceSerialize},He),pe[_t][1])}if(He.tokenStack.length>0){const Mn=He.tokenStack[He.tokenStack.length-1];(Mn[1]||Ooe).call(He,void 0,Mn[0])}for(Ce.position={start:cg(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:cg(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<t.transforms.length;)Ce=t.transforms[_t](Ce)||Ce;return Ce}function i(pe,Ce,He){let ut=Ce-1,_t=-1,Mn=!1,Sr,Ln,lr,hn;for(;++ut<=He;){const Sn=pe[ut];switch(Sn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Sn[0]==="enter"?_t++:_t--,hn=void 0;break}case"lineEndingBlank":{Sn[0]==="enter"&&(Sr&&!hn&&!_t&&!lr&&(lr=ut),hn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:hn=void 0}if(!_t&&Sn[0]==="enter"&&Sn[1].type==="listItemPrefix"||_t===-1&&Sn[0]==="exit"&&(Sn[1].type==="listUnordered"||Sn[1].type==="listOrdered")){if(Sr){let tr=ut;for(Ln=void 0;tr--;){const nr=pe[tr];if(nr[1].type==="lineEnding"||nr[1].type==="lineEndingBlank"){if(nr[0]==="exit")continue;Ln&&(pe[Ln][1].type="lineEndingBlank",Mn=!0),nr[1].type="lineEnding",Ln=tr}else if(!(nr[1].type==="linePrefix"||nr[1].type==="blockQuotePrefix"||nr[1].type==="blockQuotePrefixWhitespace"||nr[1].type==="blockQuoteMarker"||nr[1].type==="listItemIndent"))break}lr&&(!Ln||lr<Ln)&&(Sr._spread=!0),Sr.end=Object.assign({},Ln?pe[Ln][1].start:Sn[1].end),pe.splice(Ln||ut,0,["exit",Sr,Sn[2]]),ut++,He++}if(Sn[1].type==="listItemPrefix"){const tr={type:"listItem",_spread:!1,start:Object.assign({},Sn[1].start),end:void 0};Sr=tr,pe.splice(ut,0,["enter",tr,Sn[2]]),ut++,He++,lr=void 0,hn=!0}}}return pe[Ce][1]._spread=Mn,He}function s(pe,Ce){return He;function He(ut){a.call(this,pe(ut),ut),Ce&&Ce.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(pe,Ce,He){this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([Ce,He]),pe.position={start:cg(Ce.start),end:void 0}}function u(pe){return Ce;function Ce(He){pe&&pe.call(this,He),l.call(this,He)}}function l(pe,Ce){const He=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==pe.type&&(Ce?Ce.call(this,pe,ut[0]):(ut[1]||Ooe).call(this,pe,ut[0]));else throw new Error("Cannot close `"+pe.type+"` ("+UA({start:pe.start,end:pe.end})+"): it’s not open");He.position.end=cg(pe.end)}function c(){return oXe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(pe){if(this.data.expectingFirstListItemValue){const Ce=this.stack[this.stack.length-2];Ce.start=Number.parseInt(this.sliceSerialize(pe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.lang=pe}function p(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.meta=pe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/(\r?\n|\r)$/g,"")}function v(pe){const Ce=this.resume(),He=this.stack[this.stack.length-1];He.label=Ce,He.identifier=ww(this.sliceSerialize(pe)).toLowerCase()}function b(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function w(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function E(pe){const Ce=this.stack[this.stack.length-1];if(!Ce.depth){const He=this.sliceSerialize(pe).length;Ce.depth=He}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function T(pe){const Ce=this.stack[this.stack.length-1];Ce.depth=this.sliceSerialize(pe).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function C(pe){const He=this.stack[this.stack.length-1].children;let ut=He[He.length-1];(!ut||ut.type!=="text")&&(ut=dt(),ut.position={start:cg(pe.start),end:void 0},He.push(ut)),this.stack.push(ut)}function I(pe){const Ce=this.stack.pop();Ce.value+=this.sliceSerialize(pe),Ce.position.end=cg(pe.end)}function R(pe){const Ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const He=Ce.children[Ce.children.length-1];He.position.end=cg(pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ce.type)&&(C.call(this,pe),I.call(this,pe))}function M(){this.data.atHardBreak=!0}function P(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function O(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function F(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function L(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function B(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function U(pe){const Ce=this.sliceSerialize(pe),He=this.stack[this.stack.length-2];He.label=sJe(Ce),He.identifier=ww(Ce).toLowerCase()}function H(){const pe=this.stack[this.stack.length-1],Ce=this.resume(),He=this.stack[this.stack.length-1];if(this.data.inReference=!0,He.type==="link"){const ut=pe.children;He.children=ut}else He.alt=Ce}function D(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function z(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(pe){const Ce=this.resume(),He=this.stack[this.stack.length-1];He.label=Ce,He.identifier=ww(this.sliceSerialize(pe)).toLowerCase(),this.data.referenceType="full"}function G(pe){this.data.characterReferenceType=pe.type}function ne(pe){const Ce=this.sliceSerialize(pe),He=this.data.characterReferenceType;let ut;He?(ut=O_e(Ce,He==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=BG(Ce);const _t=this.stack[this.stack.length-1];_t.value+=ut}function ce(pe){const Ce=this.stack.pop();Ce.position.end=cg(pe.end)}function de(pe){I.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url=this.sliceSerialize(pe)}function he(pe){I.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url="mailto:"+this.sliceSerialize(pe)}function ye(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function ve(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function gt(){return{type:"heading",depth:0,children:[]}}function rt(){return{type:"break"}}function be(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function ct(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function Dt(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function me(){return{type:"strong",children:[]}}function dt(){return{type:"text",value:""}}function yt(){return{type:"thematicBreak"}}}function cg(e){return{line:e.line,column:e.column,offset:e.offset}}function q_e(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?q_e(e,r):lJe(e,r)}}function lJe(e,t){let n;for(n in t)if(H_e.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Ooe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+UA({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+UA({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+UA({start:t.start,end:t.end})+") is still open")}function cJe(e){const t=this;t.parser=n;function n(r){return aJe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function fJe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function dJe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function hJe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function pJe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function mJe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function gJe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Dx(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function yJe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vJe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function W_e(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function bJe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return W_e(e,t);const i={src:Dx(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function _Je(e,t){const n={src:Dx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function wJe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function EJe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return W_e(e,t);const i={href:Dx(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function xJe(e,t){const n={href:Dx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function SJe(e,t,n){const r=e.all(t),i=n?TJe(n):G_e(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function TJe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=G_e(n[r])}return t}function G_e(e){const t=e.spread;return t??e.children.length>1}function AJe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function CJe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function IJe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function kJe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function RJe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=$h(t.children[1]),u=bL(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function NJe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function PJe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const $oe=9,Moe=32;function DJe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Loe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Loe(t.slice(i),i>0,!1)),s.join("")}function Loe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===$oe||s===Moe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===$oe||s===Moe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function OJe(e,t){const n={type:"text",value:DJe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function $Je(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const MJe={blockquote:fJe,break:dJe,code:hJe,delete:pJe,emphasis:mJe,footnoteReference:gJe,heading:yJe,html:vJe,imageReference:bJe,image:_Je,inlineCode:wJe,linkReference:EJe,link:xJe,listItem:SJe,list:AJe,paragraph:CJe,root:IJe,strong:kJe,table:RJe,tableCell:PJe,tableRow:NJe,text:OJe,thematicBreak:$Je,toml:YR,yaml:YR,definition:YR,footnoteDefinition:YR};function YR(){}const Y_e=-1,wL=0,vO=1,bO=2,VG=3,HG=4,qG=5,WG=6,K_e=7,X_e=8,Foe=typeof self=="object"?self:globalThis,LJe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case wL:case Y_e:return n(o,i);case vO:{const a=n([],i);for(const u of o)a.push(r(u));return a}case bO:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case VG:return n(new Date(o),i);case HG:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case qG:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case WG:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case K_e:{const{name:a,message:u}=o;return n(new Foe[a](u),i)}case X_e:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Foe[s](o),i)};return r},joe=e=>LJe(new Map,e)(0),s_="",{toString:FJe}={},{keys:jJe}=Object,XS=e=>{const t=typeof e;if(t!=="object"||!e)return[wL,t];const n=FJe.call(e).slice(8,-1);switch(n){case"Array":return[vO,s_];case"Object":return[bO,s_];case"Date":return[VG,s_];case"RegExp":return[HG,s_];case"Map":return[qG,s_];case"Set":return[WG,s_]}return n.includes("Array")?[vO,n]:n.includes("Error")?[K_e,n]:[bO,n]},KR=([e,t])=>e===wL&&(t==="function"||t==="symbol"),BJe=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=XS(o);switch(a){case wL:{let c=o;switch(u){case"bigint":a=X_e,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([Y_e],o)}return i([a,c],o)}case vO:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case bO:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of jJe(o))(e||!KR(XS(o[d])))&&c.push([s(d),s(o[d])]);return f}case VG:return i([a,o.toISOString()],o);case HG:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case qG:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(KR(XS(d))||KR(XS(h))))&&c.push([s(d),s(h)]);return f}case WG:{const c=[],f=i([a,c],o);for(const d of o)(e||!KR(XS(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Boe=(e,{json:t,lossy:n}={})=>{const r=[];return BJe(!(t||n),!!t,new Map,r)(e),r},uE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?joe(Boe(e,t)):structuredClone(e):(e,t)=>joe(Boe(e,t));function UJe(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function zJe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function VJe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||UJe,r=e.options.footnoteBackLabel||zJe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=Dx(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...uE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const Q_e=function(e){if(e==null)return GJe;if(typeof e=="function")return EL(e);if(typeof e=="object")return Array.isArray(e)?HJe(e):qJe(e);if(typeof e=="string")return WJe(e);throw new Error("Expected function, string, or object as test")};function HJe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Q_e(e[n]);return EL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function qJe(e){const t=e;return EL(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function WJe(e){return EL(t);function t(n){return n&&n.type===e}}function EL(e){return t;function t(n,r,i){return!!(YJe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function GJe(){return!0}function YJe(e){return e!==null&&typeof e=="object"&&"type"in e}const J_e=[],KJe=!0,Uoe=!1,XJe="skip";function QJe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=Q_e(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=J_e,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=JJe(n(u,c)),h[0]===Uoe))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==XJe)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Uoe)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function JJe(e){return Array.isArray(e)?e:typeof e=="number"?[KJe,e]:e==null?J_e:[e]}function GG(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),QJe(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const CU={}.hasOwnProperty,ZJe={};function eZe(e,t){const n=t||ZJe,r=new Map,i=new Map,s=new Map,o={...MJe,...n.handlers},a={all:l,applyData:nZe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:tZe,wrap:iZe};return GG(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(CU.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=uE(g);return y.children=a.all(c),y}return uE(c)}return(a.options.unknownHandler||rZe)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=zoe(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=zoe(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function tZe(e,t){e.position&&(t.position=MKe(e))}function nZe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,uE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function rZe(e,t){const n=t.data||{},r="value"in t&&!(CU.call(n,"hProperties")||CU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function iZe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function zoe(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Voe(e,t){const n=eZe(e,t),r=n.one(e,void 0),i=VJe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function sZe(e,t){return e&&"run"in e?async function(n,r){const i=Voe(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Voe(n,{file:r,...t||e})}}function Hoe(e){if(e)throw e}var PP=Object.prototype.hasOwnProperty,Z_e=Object.prototype.toString,qoe=Object.defineProperty,Woe=Object.getOwnPropertyDescriptor,Goe=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Z_e.call(t)==="[object Array]"},Yoe=function(t){if(!t||Z_e.call(t)!=="[object Object]")return!1;var n=PP.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&PP.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||PP.call(t,i)},Koe=function(t,n){qoe&&n.name==="__proto__"?qoe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Xoe=function(t,n){if(n==="__proto__")if(PP.call(t,n)){if(Woe)return Woe(t,n).value}else return;return t[n]},oZe=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Xoe(a,n),i=Xoe(t,n),a!==i&&(c&&i&&(Yoe(i)||(s=Goe(i)))?(s?(s=!1,o=r&&Goe(r)?r:[]):o=r&&Yoe(r)?r:{},Koe(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Koe(a,{name:n,newValue:i}));return a};const l8=Ul(oZe);function IU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function aZe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?uZe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function uZe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const bd={basename:lZe,dirname:cZe,extname:fZe,join:dZe,sep:"/"};function lZe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');LI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function cZe(e){if(LI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function fZe(e){LI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function dZe(...e){let t=-1,n;for(;++t<e.length;)LI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":hZe(n)}function hZe(e){LI(e);const t=e.codePointAt(0)===47;let n=pZe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function pZe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function LI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const mZe={cwd:gZe};function gZe(){return"/"}function kU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function yZe(e){if(typeof e=="string")e=new URL(e);else if(!kU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return vZe(e)}function vZe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const c8=["history","path","basename","stem","extname","dirname"];class ewe{constructor(t){let n;t?kU(t)?n={path:t}:typeof t=="string"||bZe(t)?n={value:t}:n=t:n={},this.cwd=mZe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<c8.length;){const s=c8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)c8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?bd.basename(this.path):void 0}set basename(t){d8(t,"basename"),f8(t,"basename"),this.path=bd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?bd.dirname(this.path):void 0}set dirname(t){Qoe(this.basename,"dirname"),this.path=bd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?bd.extname(this.path):void 0}set extname(t){if(f8(t,"extname"),Qoe(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=bd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){kU(t)&&(t=yZe(t)),d8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?bd.basename(this.path,this.extname):void 0}set stem(t){d8(t,"stem"),f8(t,"stem"),this.path=bd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ea(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function f8(e,t){if(e&&e.includes(bd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+bd.sep+"`")}function d8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Qoe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function bZe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const _Ze=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},wZe={}.hasOwnProperty;class YG extends _Ze{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=aZe()}copy(){const t=new YG;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(l8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(m8("data",this.frozen),this.namespace[t]=n,this):wZe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(m8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=XR(t),r=this.parser||this.Parser;return h8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),h8("process",this.parser||this.Parser),p8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=XR(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);SZe(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),h8("processSync",this.parser||this.Parser),p8("processSync",this.compiler||this.Compiler),this.process(t,i),Zoe("processSync","process",n),r;function i(s,o){n=!0,Hoe(s),r=o}}run(t,n,r){Joe(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=XR(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Zoe("runSync","run",r),i;function s(o,a){Hoe(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=XR(n),i=this.compiler||this.Compiler;return p8("stringify",i),Joe(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(m8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=l8(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];IU(m)&&IU(h)&&(h=l8(!0,m,h)),r[d]=[l,h,...p]}}}}const EZe=new YG().freeze();function h8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function p8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function m8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Joe(e){if(!IU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Zoe(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function XR(e){return xZe(e)?e:new ewe(e)}function xZe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function SZe(e){return typeof e=="string"||TZe(e)}function TZe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const AZe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",eae=[],tae={allowDangerousHtml:!0},CZe=/^(https?|ircs?|mailto|xmpp)$/i,IZe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function kZe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||eae,u=e.remarkPlugins||eae,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...tae}:tae,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||RZe,h=EZe().use(cJe).use(u).use(sZe,l).use(a),p=new ewe;typeof r=="string"&&(p.value=r);for(const v of IZe)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+AZe+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),GG(g,y),zKe(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in o8)if(Object.hasOwn(o8,E)&&Object.hasOwn(v.properties,E)){const S=v.properties[E],T=o8[E];(T===null||T.includes(v.tagName))&&(v.properties[E]=d(String(S||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function RZe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||CZe.test(e.slice(0,t))?e:""}const nae=/[#.]/g;function NZe(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){nae.lastIndex=i;const a=nae.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const PZe=new Set(["button","menu","reset","submit"]),RU={}.hasOwnProperty;function twe(e,t,n){const r=n&&MZe(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=NZe(s,t),l.tagName=l.tagName.toLowerCase(),r&&RU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),DZe(o,l.tagName)){let c;for(c in o)RU.call(o,c)&&OZe(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)NU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function DZe(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?PZe.has(e.type.toLowerCase()):!("value"in e)}function OZe(e,t,n,r){const i=vL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=moe(r):i.commaSeparated?o=coe(r):i.commaOrSpaceSeparated?o=moe(coe(r).join(" ")):o=rae(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?$Ze(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=rae(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function NU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)NU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?NU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function rae(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||e2(n)===e2(t)))return!0}return n}function $Ze(e){const t=[];let n;for(n in e)RU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function MZe(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const LZe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],FZe=twe(MI,"div"),jZe=twe(Sy,"g",LZe),g8=/\r?\n|\r/g;function BZe(e){const t=String(e),n=[];for(g8.lastIndex=0;g8.test(t);)n.push(g8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const H1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nwe={}.hasOwnProperty,UZe=Object.prototype;function zZe(e,t){const n=t||{};return KG({file:n.file||void 0,location:!1,schema:n.space==="svg"?Sy:MI,verbose:n.verbose||!1},e)}function KG(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},DP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:rwe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=BZe(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},DP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},DP(e,r,n),n}default:return n=VZe(e,t),n}}function rwe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=KG(e,t[n]);r.push(i)}return r}function VZe(e,t){const n=e.schema;e.schema=t.namespaceURI===H1.svg?Sy:MI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;nwe.call(UZe,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?jZe:FZe)(t.tagName,i,rwe(e,t.childNodes));if(DP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&K_(u.startTag),c=u&&u.endTag&&K_(u.endTag),f=KG(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function DP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=HZe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function HZe(e,t,n){const r=K_(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)nwe.call(n.attrs,o)&&(s[vL(e.schema,o).property]=K_(n.attrs[o]));n.startTag;const a=K_(n.startTag),u=n.endTag?K_(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function K_(e){const t=iae({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=iae({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function iae(e){return e.line&&e.column?e:void 0}const sae={}.hasOwnProperty;function iwe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&sae.call(i,e)){const u=String(i[e]);o=sae.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const qZe={},WZe={}.hasOwnProperty,swe=iwe("type",{handlers:{root:YZe,element:ZZe,text:QZe,comment:JZe,doctype:XZe}});function GZe(e,t){const r=(t||qZe).space;return swe(e,r==="svg"?Sy:MI)}function YZe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=XG(e.children,n,t),Ox(e,n),n}function KZe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=XG(e.children,n,t),Ox(e,n),n}function XZe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Ox(e,t),t}function QZe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Ox(e,t),t}function JZe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Ox(e,t),t}function ZZe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Sy);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&WZe.call(e.properties,s)){const u=eet(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:H1[o],childNodes:[],parentNode:null};return a.childNodes=XG(e.children,a,r),Ox(e,a),e.tagName==="template"&&e.content&&(a.content=KZe(e.content,r)),a}function eet(e,t,n){const r=vL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?y_e(n):A_e(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=H1[r.space]}return i}function XG(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=swe(e[r],n);s.parentNode=t,i.push(s)}return i}function Ox(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const tet=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],net=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),pi="�";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const lu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function owe(e){return e>=55296&&e<=57343}function ret(e){return e>=56320&&e<=57343}function iet(e,t){return(e-55296)*1024+9216+t}function awe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function uwe(e){return e>=64976&&e<=65007||net.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const set=65536;class oet{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=set,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(ret(n))return this.pos++,this._addGap(),iet(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,owe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){awe(t)?this._err(Ne.controlCharacterInInputStream):uwe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Cn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Cn=Cn||(Cn={}));function lwe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const gg=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),aet=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)));var y8;const uet=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),cet=(y8=String.fromCodePoint)!==null&&y8!==void 0?y8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function fet(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=uet.get(e))!==null&&t!==void 0?t:e}var Xs;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Xs||(Xs={}));const det=32;var zd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(zd||(zd={}));function PU(e){return e>=Xs.ZERO&&e<=Xs.NINE}function het(e){return e>=Xs.UPPER_A&&e<=Xs.UPPER_F||e>=Xs.LOWER_A&&e<=Xs.LOWER_F}function pet(e){return e>=Xs.UPPER_A&&e<=Xs.UPPER_Z||e>=Xs.LOWER_A&&e<=Xs.LOWER_Z||PU(e)}function met(e){return e===Xs.EQUALS||pet(e)}var Vs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Vs||(Vs={}));var I1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(I1||(I1={}));class get{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Vs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=I1.Strict}startEntity(t){this.decodeMode=t,this.state=Vs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Vs.EntityStart:return t.charCodeAt(n)===Xs.NUM?(this.state=Vs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Vs.NamedEntity,this.stateNamedEntity(t,n));case Vs.NumericStart:return this.stateNumericStart(t,n);case Vs.NumericDecimal:return this.stateNumericDecimal(t,n);case Vs.NumericHex:return this.stateNumericHex(t,n);case Vs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|det)===Xs.LOWER_X?(this.state=Vs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Vs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(PU(i)||het(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(PU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Xs.SEMI)this.consumed+=1;else if(this.decodeMode===I1.Strict)return 0;return this.emitCodePoint(fet(this.result),this.consumed),this.errors&&(t!==Xs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&zd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=fwe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===I1.Attribute&&(s===0||met(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&zd.VALUE_LENGTH)>>14,s!==0){if(o===Xs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==I1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&zd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~zd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Vs.NamedEntity:return this.result!==0&&(this.decodeMode!==I1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Vs.NumericDecimal:return this.emitNumericEntity(0,2);case Vs.NumericHex:return this.emitNumericEntity(0,3);case Vs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Vs.EntityStart:return 0}}}function cwe(e){let t="";const n=new get(e,r=>t+=cet(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function fwe(e,t,n,r){const i=(t&zd.BRANCH_LENGTH)>>7,s=t&zd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}cwe(gg);cwe(aet);var Le;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Le=Le||(Le={}));var f0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(f0=f0||(f0={}));var fl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(fl=fl||(fl={}));var we;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(we=we||(we={}));var k;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(k=k||(k={}));const yet=new Map([[we.A,k.A],[we.ADDRESS,k.ADDRESS],[we.ANNOTATION_XML,k.ANNOTATION_XML],[we.APPLET,k.APPLET],[we.AREA,k.AREA],[we.ARTICLE,k.ARTICLE],[we.ASIDE,k.ASIDE],[we.B,k.B],[we.BASE,k.BASE],[we.BASEFONT,k.BASEFONT],[we.BGSOUND,k.BGSOUND],[we.BIG,k.BIG],[we.BLOCKQUOTE,k.BLOCKQUOTE],[we.BODY,k.BODY],[we.BR,k.BR],[we.BUTTON,k.BUTTON],[we.CAPTION,k.CAPTION],[we.CENTER,k.CENTER],[we.CODE,k.CODE],[we.COL,k.COL],[we.COLGROUP,k.COLGROUP],[we.DD,k.DD],[we.DESC,k.DESC],[we.DETAILS,k.DETAILS],[we.DIALOG,k.DIALOG],[we.DIR,k.DIR],[we.DIV,k.DIV],[we.DL,k.DL],[we.DT,k.DT],[we.EM,k.EM],[we.EMBED,k.EMBED],[we.FIELDSET,k.FIELDSET],[we.FIGCAPTION,k.FIGCAPTION],[we.FIGURE,k.FIGURE],[we.FONT,k.FONT],[we.FOOTER,k.FOOTER],[we.FOREIGN_OBJECT,k.FOREIGN_OBJECT],[we.FORM,k.FORM],[we.FRAME,k.FRAME],[we.FRAMESET,k.FRAMESET],[we.H1,k.H1],[we.H2,k.H2],[we.H3,k.H3],[we.H4,k.H4],[we.H5,k.H5],[we.H6,k.H6],[we.HEAD,k.HEAD],[we.HEADER,k.HEADER],[we.HGROUP,k.HGROUP],[we.HR,k.HR],[we.HTML,k.HTML],[we.I,k.I],[we.IMG,k.IMG],[we.IMAGE,k.IMAGE],[we.INPUT,k.INPUT],[we.IFRAME,k.IFRAME],[we.KEYGEN,k.KEYGEN],[we.LABEL,k.LABEL],[we.LI,k.LI],[we.LINK,k.LINK],[we.LISTING,k.LISTING],[we.MAIN,k.MAIN],[we.MALIGNMARK,k.MALIGNMARK],[we.MARQUEE,k.MARQUEE],[we.MATH,k.MATH],[we.MENU,k.MENU],[we.META,k.META],[we.MGLYPH,k.MGLYPH],[we.MI,k.MI],[we.MO,k.MO],[we.MN,k.MN],[we.MS,k.MS],[we.MTEXT,k.MTEXT],[we.NAV,k.NAV],[we.NOBR,k.NOBR],[we.NOFRAMES,k.NOFRAMES],[we.NOEMBED,k.NOEMBED],[we.NOSCRIPT,k.NOSCRIPT],[we.OBJECT,k.OBJECT],[we.OL,k.OL],[we.OPTGROUP,k.OPTGROUP],[we.OPTION,k.OPTION],[we.P,k.P],[we.PARAM,k.PARAM],[we.PLAINTEXT,k.PLAINTEXT],[we.PRE,k.PRE],[we.RB,k.RB],[we.RP,k.RP],[we.RT,k.RT],[we.RTC,k.RTC],[we.RUBY,k.RUBY],[we.S,k.S],[we.SCRIPT,k.SCRIPT],[we.SECTION,k.SECTION],[we.SELECT,k.SELECT],[we.SOURCE,k.SOURCE],[we.SMALL,k.SMALL],[we.SPAN,k.SPAN],[we.STRIKE,k.STRIKE],[we.STRONG,k.STRONG],[we.STYLE,k.STYLE],[we.SUB,k.SUB],[we.SUMMARY,k.SUMMARY],[we.SUP,k.SUP],[we.TABLE,k.TABLE],[we.TBODY,k.TBODY],[we.TEMPLATE,k.TEMPLATE],[we.TEXTAREA,k.TEXTAREA],[we.TFOOT,k.TFOOT],[we.TD,k.TD],[we.TH,k.TH],[we.THEAD,k.THEAD],[we.TITLE,k.TITLE],[we.TR,k.TR],[we.TRACK,k.TRACK],[we.TT,k.TT],[we.U,k.U],[we.UL,k.UL],[we.SVG,k.SVG],[we.VAR,k.VAR],[we.WBR,k.WBR],[we.XMP,k.XMP]]);function $x(e){var t;return(t=yet.get(e))!==null&&t!==void 0?t:k.UNKNOWN}const Qe=k,vet={[Le.HTML]:new Set([Qe.ADDRESS,Qe.APPLET,Qe.AREA,Qe.ARTICLE,Qe.ASIDE,Qe.BASE,Qe.BASEFONT,Qe.BGSOUND,Qe.BLOCKQUOTE,Qe.BODY,Qe.BR,Qe.BUTTON,Qe.CAPTION,Qe.CENTER,Qe.COL,Qe.COLGROUP,Qe.DD,Qe.DETAILS,Qe.DIR,Qe.DIV,Qe.DL,Qe.DT,Qe.EMBED,Qe.FIELDSET,Qe.FIGCAPTION,Qe.FIGURE,Qe.FOOTER,Qe.FORM,Qe.FRAME,Qe.FRAMESET,Qe.H1,Qe.H2,Qe.H3,Qe.H4,Qe.H5,Qe.H6,Qe.HEAD,Qe.HEADER,Qe.HGROUP,Qe.HR,Qe.HTML,Qe.IFRAME,Qe.IMG,Qe.INPUT,Qe.LI,Qe.LINK,Qe.LISTING,Qe.MAIN,Qe.MARQUEE,Qe.MENU,Qe.META,Qe.NAV,Qe.NOEMBED,Qe.NOFRAMES,Qe.NOSCRIPT,Qe.OBJECT,Qe.OL,Qe.P,Qe.PARAM,Qe.PLAINTEXT,Qe.PRE,Qe.SCRIPT,Qe.SECTION,Qe.SELECT,Qe.SOURCE,Qe.STYLE,Qe.SUMMARY,Qe.TABLE,Qe.TBODY,Qe.TD,Qe.TEMPLATE,Qe.TEXTAREA,Qe.TFOOT,Qe.TH,Qe.THEAD,Qe.TITLE,Qe.TR,Qe.TRACK,Qe.UL,Qe.WBR,Qe.XMP]),[Le.MATHML]:new Set([Qe.MI,Qe.MO,Qe.MN,Qe.MS,Qe.MTEXT,Qe.ANNOTATION_XML]),[Le.SVG]:new Set([Qe.TITLE,Qe.FOREIGN_OBJECT,Qe.DESC]),[Le.XLINK]:new Set,[Le.XML]:new Set,[Le.XMLNS]:new Set};function dwe(e){return e===Qe.H1||e===Qe.H2||e===Qe.H3||e===Qe.H4||e===Qe.H5||e===Qe.H6}we.STYLE,we.SCRIPT,we.XMP,we.IFRAME,we.NOEMBED,we.NOFRAMES,we.PLAINTEXT;const bet=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const is={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function VA(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function HT(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function _et(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function yg(e){return _et(e)||HT(e)}function DU(e){return yg(e)||VA(e)}function hwe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function pwe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function wet(e){return VA(e)||hwe(e)||pwe(e)}function QR(e){return e+32}function mwe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function Eet(e){return e===X.EQUALS_SIGN||DU(e)}function oae(e){return mwe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class xet{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new oet(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Cn.START_TAG,tagName:"",tagID:k.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Cn.END_TAG,tagName:"",tagID:k.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Cn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Cn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(lwe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=$x(t.tagName),t.type===Cn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Cn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Cn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Cn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Cn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=mwe(t)?Cn.WHITESPACE_CHARACTER:t===X.NULL?Cn.NULL_CHARACTER:Cn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Cn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=gg[0];s>=0&&(s=fwe(gg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=gg[s];const a=o&zd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Eet(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[gg[s]&~zd.VALUE_LENGTH]:u===1?[gg[++s]]:[gg[++s],gg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(pi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(pi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(pi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(pi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(yg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(yg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=pi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(HT(t)?QR(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){yg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){yg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){yg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(pi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(pi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(pi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:yg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){yg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(lu.SCRIPT,!1)&&oae(this.preprocessor.peek(lu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<lu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(pi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(pi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(pi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(lu.SCRIPT,!1)&&oae(this.preprocessor.peek(lu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<lu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=pi;break}default:this.currentAttr.name+=String.fromCodePoint(HT(t)?QR(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=pi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=pi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=pi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=pi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(lu.DASH_DASH,!0)?(this._createCommentToken(lu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(lu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(lu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(lu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(lu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=pi;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(HT(t))this._createDoctypeToken(String.fromCharCode(QR(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(pi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=pi;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(HT(t)?QR(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(lu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(lu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=pi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=pi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=pi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=pi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:DU(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){DU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:VA(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){wet(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){hwe(t)?this.charRefCode=this.charRefCode*16+t-55:pwe(t)?this.charRefCode=this.charRefCode*16+t-87:VA(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){VA(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(owe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(uwe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(awe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=bet.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const gwe=new Set([k.DD,k.DT,k.LI,k.OPTGROUP,k.OPTION,k.P,k.RB,k.RP,k.RT,k.RTC]),aae=new Set([...gwe,k.CAPTION,k.COLGROUP,k.TBODY,k.TD,k.TFOOT,k.TH,k.THEAD,k.TR]),JR=new Map([[k.APPLET,Le.HTML],[k.CAPTION,Le.HTML],[k.HTML,Le.HTML],[k.MARQUEE,Le.HTML],[k.OBJECT,Le.HTML],[k.TABLE,Le.HTML],[k.TD,Le.HTML],[k.TEMPLATE,Le.HTML],[k.TH,Le.HTML],[k.ANNOTATION_XML,Le.MATHML],[k.MI,Le.MATHML],[k.MN,Le.MATHML],[k.MO,Le.MATHML],[k.MS,Le.MATHML],[k.MTEXT,Le.MATHML],[k.DESC,Le.SVG],[k.FOREIGN_OBJECT,Le.SVG],[k.TITLE,Le.SVG]]),Tet=[k.H1,k.H2,k.H3,k.H4,k.H5,k.H6],Aet=[k.TR,k.TEMPLATE,k.HTML],Cet=[k.TBODY,k.TFOOT,k.THEAD,k.TEMPLATE,k.HTML],Iet=[k.TABLE,k.TEMPLATE,k.HTML],ket=[k.TD,k.TH];class Ret{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=k.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===k.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Le.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Le.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Tet,Le.HTML)}popUntilTableCellPopped(){this.popUntilPopped(ket,Le.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Iet,Le.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Cet,Le.HTML)}clearBackToTableRowContext(){this.clearBackTo(Aet,Le.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===k.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===k.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if(JR.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(dwe(n)&&r===Le.HTML)return!0;if(JR.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if((r===k.UL||r===k.OL)&&i===Le.HTML||JR.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if(r===k.BUTTON&&i===Le.HTML||JR.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.HTML){if(r===t)return!0;if(r===k.TABLE||r===k.TEMPLATE||r===k.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Le.HTML){if(n===k.TBODY||n===k.THEAD||n===k.TFOOT)return!0;if(n===k.TABLE||n===k.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.HTML){if(r===t)return!0;if(r!==k.OPTION&&r!==k.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;gwe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;aae.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&aae.has(this.currentTagId);)this.pop()}}const v8=3;var cf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(cf=cf||(cf={}));const uae={type:cf.Marker};class Net{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===cf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<v8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<v8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=v8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(uae)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:cf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:cf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(uae);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===cf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===cf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===cf.Element&&n.element===t)}}function lae(e){return{nodeName:"#text",value:e,parentNode:null}}const A_={createDocument(){return{nodeName:"#document",mode:fl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};A_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(A_.isTextNode(n)){n.value+=t;return}}A_.appendChild(e,lae(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&A_.isTextNode(r)?r.value+=t:A_.insertBefore(e,lae(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},ywe="html",Pet="about:legacy-compat",Det="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",vwe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Oet=[...vwe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],$et=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),bwe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Met=[...bwe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function cae(e,t){return t.some(n=>e.startsWith(n))}function Let(e){return e.name===ywe&&e.publicId===null&&(e.systemId===null||e.systemId===Pet)}function Fet(e){if(e.name!==ywe)return fl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Det)return fl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),$et.has(n))return fl.QUIRKS;let r=t===null?Oet:vwe;if(cae(n,r))return fl.QUIRKS;if(r=t===null?bwe:Met,cae(n,r))return fl.LIMITED_QUIRKS}return fl.NO_QUIRKS}const fae={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},jet="definitionurl",Bet="definitionURL",Uet=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),zet=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Le.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Le.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Le.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Le.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Le.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Le.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Le.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Le.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Le.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Le.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Le.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Le.XMLNS}]]),Vet=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Het=new Set([k.B,k.BIG,k.BLOCKQUOTE,k.BODY,k.BR,k.CENTER,k.CODE,k.DD,k.DIV,k.DL,k.DT,k.EM,k.EMBED,k.H1,k.H2,k.H3,k.H4,k.H5,k.H6,k.HEAD,k.HR,k.I,k.IMG,k.LI,k.LISTING,k.MENU,k.META,k.NOBR,k.OL,k.P,k.PRE,k.RUBY,k.S,k.SMALL,k.SPAN,k.STRONG,k.STRIKE,k.SUB,k.SUP,k.TABLE,k.TT,k.U,k.UL,k.VAR]);function qet(e){const t=e.tagID;return t===k.FONT&&e.attrs.some(({name:r})=>r===f0.COLOR||r===f0.SIZE||r===f0.FACE)||Het.has(t)}function _we(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===jet){e.attrs[t].name=Bet;break}}function wwe(e){for(let t=0;t<e.attrs.length;t++){const n=Uet.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function QG(e){for(let t=0;t<e.attrs.length;t++){const n=zet.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Wet(e){const t=Vet.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=$x(e.tagName))}function Get(e,t){return t===Le.MATHML&&(e===k.MI||e===k.MO||e===k.MN||e===k.MS||e===k.MTEXT)}function Yet(e,t,n){if(t===Le.MATHML&&e===k.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===f0.ENCODING){const i=n[r].value.toLowerCase();return i===fae.TEXT_HTML||i===fae.APPLICATION_XML}}return t===Le.SVG&&(e===k.FOREIGN_OBJECT||e===k.DESC||e===k.TITLE)}function Ket(e,t,n,r){return(!r||r===Le.HTML)&&Yet(e,t,n)||(!r||r===Le.MATHML)&&Get(e,t)}const Xet="hidden",Qet=8,Jet=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const Zet={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Ewe=new Set([k.TABLE,k.TBODY,k.TFOOT,k.THEAD,k.TR]),dae={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:A_,onParseError:null};let hae=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...dae,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new xet(this.options,this),this.activeFormattingElements=new Net(this.treeAdapter),this.fragmentContextID=r?$x(this.treeAdapter.getTagName(r)):k.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Ret(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...dae,...n};t??(t=r.treeAdapter.createElement(we.TEMPLATE,Le.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Le.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===k.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Zet,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Le.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Le.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=is.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===we.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Le.HTML))switch(this.fragmentContextID){case k.TITLE:case k.TEXTAREA:{this.tokenizer.state=is.RCDATA;break}case k.STYLE:case k.XMP:case k.IFRAME:case k.NOEMBED:case k.NOFRAMES:case k.NOSCRIPT:{this.tokenizer.state=is.RAWTEXT;break}case k.SCRIPT:{this.tokenizer.state=is.SCRIPT_DATA;break}case k.PLAINTEXT:{this.tokenizer.state=is.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Le.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Le.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(we.HTML,Le.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,k.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Cn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===k.SVG&&this.treeAdapter.getTagName(n)===we.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Le.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===k.MGLYPH||t.tagID===k.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Le.HTML)}_processToken(t){switch(t.type){case Cn.CHARACTER:{this.onCharacter(t);break}case Cn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Cn.COMMENT:{this.onComment(t);break}case Cn.DOCTYPE:{this.onDoctype(t);break}case Cn.START_TAG:{this._processStartTag(t);break}case Cn.END_TAG:{this.onEndTag(t);break}case Cn.EOF:{this.onEof(t);break}case Cn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Ket(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===cf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(k.P),this.openElements.popUntilTagNamePopped(k.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case k.TR:{this.insertionMode=ie.IN_ROW;return}case k.TBODY:case k.THEAD:case k.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case k.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case k.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case k.TABLE:{this.insertionMode=ie.IN_TABLE;return}case k.BODY:{this.insertionMode=ie.IN_BODY;return}case k.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case k.SELECT:{this._resetInsertionModeForSelect(t);return}case k.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case k.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case k.TD:case k.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case k.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===k.TEMPLATE)break;if(r===k.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return Ewe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case k.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Le.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case k.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return vet[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){knt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{QS(this,t);break}case ie.BEFORE_HTML:{HA(this,t);break}case ie.BEFORE_HEAD:{qA(this,t);break}case ie.IN_HEAD:{WA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{GA(this,t);break}case ie.AFTER_HEAD:{YA(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{Swe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{b8(this,t);break}case ie.IN_TABLE_TEXT:{Rwe(this,t);break}case ie.IN_COLUMN_GROUP:{_O(this,t);break}case ie.AFTER_BODY:{wO(this,t);break}case ie.AFTER_AFTER_BODY:{OP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Int(this,t);return}switch(this.insertionMode){case ie.INITIAL:{QS(this,t);break}case ie.BEFORE_HTML:{HA(this,t);break}case ie.BEFORE_HEAD:{qA(this,t);break}case ie.IN_HEAD:{WA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{GA(this,t);break}case ie.AFTER_HEAD:{YA(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{b8(this,t);break}case ie.IN_COLUMN_GROUP:{_O(this,t);break}case ie.AFTER_BODY:{wO(this,t);break}case ie.AFTER_AFTER_BODY:{OP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){OU(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{OU(this,t);break}case ie.IN_TABLE_TEXT:{JS(this,t);break}case ie.AFTER_BODY:{ott(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{att(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{utt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{JS(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Rnt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{QS(this,t);break}case ie.BEFORE_HTML:{ltt(this,t);break}case ie.BEFORE_HEAD:{ftt(this,t);break}case ie.IN_HEAD:{Gf(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{ptt(this,t);break}case ie.AFTER_HEAD:{gtt(this,t);break}case ie.IN_BODY:{xa(this,t);break}case ie.IN_TABLE:{lE(this,t);break}case ie.IN_TABLE_TEXT:{JS(this,t);break}case ie.IN_CAPTION:{dnt(this,t);break}case ie.IN_COLUMN_GROUP:{eY(this,t);break}case ie.IN_TABLE_BODY:{TL(this,t);break}case ie.IN_ROW:{AL(this,t);break}case ie.IN_CELL:{mnt(this,t);break}case ie.IN_SELECT:{Dwe(this,t);break}case ie.IN_SELECT_IN_TABLE:{ynt(this,t);break}case ie.IN_TEMPLATE:{bnt(this,t);break}case ie.AFTER_BODY:{wnt(this,t);break}case ie.IN_FRAMESET:{Ent(this,t);break}case ie.AFTER_FRAMESET:{Snt(this,t);break}case ie.AFTER_AFTER_BODY:{Ant(this,t);break}case ie.AFTER_AFTER_FRAMESET:{Cnt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Nnt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{QS(this,t);break}case ie.BEFORE_HTML:{ctt(this,t);break}case ie.BEFORE_HEAD:{dtt(this,t);break}case ie.IN_HEAD:{htt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{mtt(this,t);break}case ie.AFTER_HEAD:{ytt(this,t);break}case ie.IN_BODY:{SL(this,t);break}case ie.TEXT:{nnt(this,t);break}case ie.IN_TABLE:{n2(this,t);break}case ie.IN_TABLE_TEXT:{JS(this,t);break}case ie.IN_CAPTION:{hnt(this,t);break}case ie.IN_COLUMN_GROUP:{pnt(this,t);break}case ie.IN_TABLE_BODY:{$U(this,t);break}case ie.IN_ROW:{Pwe(this,t);break}case ie.IN_CELL:{gnt(this,t);break}case ie.IN_SELECT:{Owe(this,t);break}case ie.IN_SELECT_IN_TABLE:{vnt(this,t);break}case ie.IN_TEMPLATE:{_nt(this,t);break}case ie.AFTER_BODY:{Mwe(this,t);break}case ie.IN_FRAMESET:{xnt(this,t);break}case ie.AFTER_FRAMESET:{Tnt(this,t);break}case ie.AFTER_AFTER_BODY:{OP(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{QS(this,t);break}case ie.BEFORE_HTML:{HA(this,t);break}case ie.BEFORE_HEAD:{qA(this,t);break}case ie.IN_HEAD:{WA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{GA(this,t);break}case ie.AFTER_HEAD:{YA(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{Iwe(this,t);break}case ie.TEXT:{rnt(this,t);break}case ie.IN_TABLE_TEXT:{JS(this,t);break}case ie.IN_TEMPLATE:{$we(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{ZG(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{xwe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{b8(this,t);break}case ie.IN_TABLE_TEXT:{kwe(this,t);break}}}};function ett(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Cwe(e,t),n}function ttt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function ntt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Jet;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=rtt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function rtt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function itt(e,t,n){const r=e.treeAdapter.getTagName(t),i=$x(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===k.TEMPLATE&&s===Le.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function stt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function JG(e,t){for(let n=0;n<Qet;n++){const r=ett(e,t);if(!r)break;const i=ttt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=ntt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&itt(e,o,s),stt(e,i,r)}}function OU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function ott(e,t){e._appendCommentNode(t,e.openElements.items[0])}function att(e,t){e._appendCommentNode(t,e.document)}function ZG(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function utt(e,t){e._setDocumentType(t);const n=t.forceQuirks?fl.QUIRKS:Fet(t);Let(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function QS(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,fl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function ltt(e,t){t.tagID===k.HTML?(e._insertElement(t,Le.HTML),e.insertionMode=ie.BEFORE_HEAD):HA(e,t)}function ctt(e,t){const n=t.tagID;(n===k.HTML||n===k.HEAD||n===k.BODY||n===k.BR)&&HA(e,t)}function HA(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function ftt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.HEAD:{e._insertElement(t,Le.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:qA(e,t)}}function dtt(e,t){const n=t.tagID;n===k.HEAD||n===k.BODY||n===k.HTML||n===k.BR?qA(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function qA(e,t){e._insertFakeElement(we.HEAD,k.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function Gf(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case k.TITLE:{e._switchToTextParsing(t,is.RCDATA);break}case k.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,is.RAWTEXT):(e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case k.NOFRAMES:case k.STYLE:{e._switchToTextParsing(t,is.RAWTEXT);break}case k.SCRIPT:{e._switchToTextParsing(t,is.SCRIPT_DATA);break}case k.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case k.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:WA(e,t)}}function htt(e,t){switch(t.tagID){case k.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case k.BODY:case k.BR:case k.HTML:{WA(e,t);break}case k.TEMPLATE:{xb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function xb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==k.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(k.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function WA(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function ptt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.BASEFONT:case k.BGSOUND:case k.HEAD:case k.LINK:case k.META:case k.NOFRAMES:case k.STYLE:{Gf(e,t);break}case k.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:GA(e,t)}}function mtt(e,t){switch(t.tagID){case k.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case k.BR:{GA(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function GA(e,t){const n=t.type===Cn.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function gtt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.BODY:{e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case k.FRAMESET:{e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_FRAMESET;break}case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:case k.NOFRAMES:case k.SCRIPT:case k.STYLE:case k.TEMPLATE:case k.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,k.HEAD),Gf(e,t),e.openElements.remove(e.headElement);break}case k.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:YA(e,t)}}function ytt(e,t){switch(t.tagID){case k.BODY:case k.HTML:case k.BR:{YA(e,t);break}case k.TEMPLATE:{xb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function YA(e,t){e._insertFakeElement(we.BODY,k.BODY),e.insertionMode=ie.IN_BODY,xL(e,t)}function xL(e,t){switch(t.type){case Cn.CHARACTER:{Swe(e,t);break}case Cn.WHITESPACE_CHARACTER:{xwe(e,t);break}case Cn.COMMENT:{OU(e,t);break}case Cn.START_TAG:{xa(e,t);break}case Cn.END_TAG:{SL(e,t);break}case Cn.EOF:{Iwe(e,t);break}}}function xwe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Swe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function vtt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function btt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function _tt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_FRAMESET)}function wtt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML)}function Ett(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),dwe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Le.HTML)}function xtt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Stt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML),n||(e.formElement=e.openElements.current))}function Ttt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===k.LI&&i===k.LI||(n===k.DD||n===k.DT)&&(i===k.DD||i===k.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==k.ADDRESS&&i!==k.DIV&&i!==k.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML)}function Att(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.tokenizer.state=is.PLAINTEXT}function Ctt(e,t){e.openElements.hasInScope(k.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.framesetOk=!1}function Itt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(we.A);n&&(JG(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function ktt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Rtt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(k.NOBR)&&(JG(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Ntt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Ptt(e,t){e.treeAdapter.getDocumentMode(e.document)!==fl.QUIRKS&&e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function Twe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Le.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Awe(e){const t=lwe(e,f0.TYPE);return t!=null&&t.toLowerCase()===Xet}function Dtt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Le.HTML),Awe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Ott(e,t){e._appendElement(t,Le.HTML),t.ackSelfClosing=!0}function $tt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._appendElement(t,Le.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Mtt(e,t){t.tagName=we.IMG,t.tagID=k.IMG,Twe(e,t)}function Ltt(e,t){e._insertElement(t,Le.HTML),e.skipNextNewLine=!0,e.tokenizer.state=is.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function Ftt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,is.RAWTEXT)}function jtt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,is.RAWTEXT)}function pae(e,t){e._switchToTextParsing(t,is.RAWTEXT)}function Btt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Utt(e,t){e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML)}function ztt(e,t){e.openElements.hasInScope(k.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Le.HTML)}function Vtt(e,t){e.openElements.hasInScope(k.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(k.RTC),e._insertElement(t,Le.HTML)}function Htt(e,t){e._reconstructActiveFormattingElements(),_we(t),QG(t),t.selfClosing?e._appendElement(t,Le.MATHML):e._insertElement(t,Le.MATHML),t.ackSelfClosing=!0}function qtt(e,t){e._reconstructActiveFormattingElements(),wwe(t),QG(t),t.selfClosing?e._appendElement(t,Le.SVG):e._insertElement(t,Le.SVG),t.ackSelfClosing=!0}function mae(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML)}function xa(e,t){switch(t.tagID){case k.I:case k.S:case k.B:case k.U:case k.EM:case k.TT:case k.BIG:case k.CODE:case k.FONT:case k.SMALL:case k.STRIKE:case k.STRONG:{ktt(e,t);break}case k.A:{Itt(e,t);break}case k.H1:case k.H2:case k.H3:case k.H4:case k.H5:case k.H6:{Ett(e,t);break}case k.P:case k.DL:case k.OL:case k.UL:case k.DIV:case k.DIR:case k.NAV:case k.MAIN:case k.MENU:case k.ASIDE:case k.CENTER:case k.FIGURE:case k.FOOTER:case k.HEADER:case k.HGROUP:case k.DIALOG:case k.DETAILS:case k.ADDRESS:case k.ARTICLE:case k.SECTION:case k.SUMMARY:case k.FIELDSET:case k.BLOCKQUOTE:case k.FIGCAPTION:{wtt(e,t);break}case k.LI:case k.DD:case k.DT:{Ttt(e,t);break}case k.BR:case k.IMG:case k.WBR:case k.AREA:case k.EMBED:case k.KEYGEN:{Twe(e,t);break}case k.HR:{$tt(e,t);break}case k.RB:case k.RTC:{ztt(e,t);break}case k.RT:case k.RP:{Vtt(e,t);break}case k.PRE:case k.LISTING:{xtt(e,t);break}case k.XMP:{Ftt(e,t);break}case k.SVG:{qtt(e,t);break}case k.HTML:{vtt(e,t);break}case k.BASE:case k.LINK:case k.META:case k.STYLE:case k.TITLE:case k.SCRIPT:case k.BGSOUND:case k.BASEFONT:case k.TEMPLATE:{Gf(e,t);break}case k.BODY:{btt(e,t);break}case k.FORM:{Stt(e,t);break}case k.NOBR:{Rtt(e,t);break}case k.MATH:{Htt(e,t);break}case k.TABLE:{Ptt(e,t);break}case k.INPUT:{Dtt(e,t);break}case k.PARAM:case k.TRACK:case k.SOURCE:{Ott(e,t);break}case k.IMAGE:{Mtt(e,t);break}case k.BUTTON:{Ctt(e,t);break}case k.APPLET:case k.OBJECT:case k.MARQUEE:{Ntt(e,t);break}case k.IFRAME:{jtt(e,t);break}case k.SELECT:{Btt(e,t);break}case k.OPTION:case k.OPTGROUP:{Utt(e,t);break}case k.NOEMBED:{pae(e,t);break}case k.FRAMESET:{_tt(e,t);break}case k.TEXTAREA:{Ltt(e,t);break}case k.NOSCRIPT:{e.options.scriptingEnabled?pae(e,t):mae(e,t);break}case k.PLAINTEXT:{Att(e,t);break}case k.COL:case k.TH:case k.TD:case k.TR:case k.HEAD:case k.FRAME:case k.TBODY:case k.TFOOT:case k.THEAD:case k.CAPTION:case k.COLGROUP:break;default:mae(e,t)}}function Wtt(e,t){if(e.openElements.hasInScope(k.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Gtt(e,t){e.openElements.hasInScope(k.BODY)&&(e.insertionMode=ie.AFTER_BODY,Mwe(e,t))}function Ytt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Ktt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(k.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(k.FORM):n&&e.openElements.remove(n))}function Xtt(e){e.openElements.hasInButtonScope(k.P)||e._insertFakeElement(we.P,k.P),e._closePElement()}function Qtt(e){e.openElements.hasInListItemScope(k.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(k.LI),e.openElements.popUntilTagNamePopped(k.LI))}function Jtt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Ztt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function ent(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function tnt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(we.BR,k.BR),e.openElements.pop(),e.framesetOk=!1}function Cwe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==k.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function SL(e,t){switch(t.tagID){case k.A:case k.B:case k.I:case k.S:case k.U:case k.EM:case k.TT:case k.BIG:case k.CODE:case k.FONT:case k.NOBR:case k.SMALL:case k.STRIKE:case k.STRONG:{JG(e,t);break}case k.P:{Xtt(e);break}case k.DL:case k.UL:case k.OL:case k.DIR:case k.DIV:case k.NAV:case k.PRE:case k.MAIN:case k.MENU:case k.ASIDE:case k.BUTTON:case k.CENTER:case k.FIGURE:case k.FOOTER:case k.HEADER:case k.HGROUP:case k.DIALOG:case k.ADDRESS:case k.ARTICLE:case k.DETAILS:case k.SECTION:case k.SUMMARY:case k.LISTING:case k.FIELDSET:case k.BLOCKQUOTE:case k.FIGCAPTION:{Ytt(e,t);break}case k.LI:{Qtt(e);break}case k.DD:case k.DT:{Jtt(e,t);break}case k.H1:case k.H2:case k.H3:case k.H4:case k.H5:case k.H6:{Ztt(e);break}case k.BR:{tnt(e);break}case k.BODY:{Wtt(e,t);break}case k.HTML:{Gtt(e,t);break}case k.FORM:{Ktt(e);break}case k.APPLET:case k.OBJECT:case k.MARQUEE:{ent(e,t);break}case k.TEMPLATE:{xb(e,t);break}default:Cwe(e,t)}}function Iwe(e,t){e.tmplInsertionModeStack.length>0?$we(e,t):ZG(e,t)}function nnt(e,t){var n;t.tagID===k.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function rnt(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function b8(e,t){if(Ewe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case Cn.CHARACTER:{Rwe(e,t);break}case Cn.WHITESPACE_CHARACTER:{kwe(e,t);break}}else FI(e,t)}function int(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_CAPTION}function snt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function ont(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.COLGROUP,k.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,eY(e,t)}function ant(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_TABLE_BODY}function unt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.TBODY,k.TBODY),e.insertionMode=ie.IN_TABLE_BODY,TL(e,t)}function lnt(e,t){e.openElements.hasInTableScope(k.TABLE)&&(e.openElements.popUntilTagNamePopped(k.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function cnt(e,t){Awe(t)?e._appendElement(t,Le.HTML):FI(e,t),t.ackSelfClosing=!0}function fnt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Le.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function lE(e,t){switch(t.tagID){case k.TD:case k.TH:case k.TR:{unt(e,t);break}case k.STYLE:case k.SCRIPT:case k.TEMPLATE:{Gf(e,t);break}case k.COL:{ont(e,t);break}case k.FORM:{fnt(e,t);break}case k.TABLE:{lnt(e,t);break}case k.TBODY:case k.TFOOT:case k.THEAD:{ant(e,t);break}case k.INPUT:{cnt(e,t);break}case k.CAPTION:{int(e,t);break}case k.COLGROUP:{snt(e,t);break}default:FI(e,t)}}function n2(e,t){switch(t.tagID){case k.TABLE:{e.openElements.hasInTableScope(k.TABLE)&&(e.openElements.popUntilTagNamePopped(k.TABLE),e._resetInsertionMode());break}case k.TEMPLATE:{xb(e,t);break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TBODY:case k.TD:case k.TFOOT:case k.TH:case k.THEAD:case k.TR:break;default:FI(e,t)}}function FI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,xL(e,t),e.fosterParentingEnabled=n}function kwe(e,t){e.pendingCharacterTokens.push(t)}function Rwe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function JS(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)FI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Nwe=new Set([k.CAPTION,k.COL,k.COLGROUP,k.TBODY,k.TD,k.TFOOT,k.TH,k.THEAD,k.TR]);function dnt(e,t){const n=t.tagID;Nwe.has(n)?e.openElements.hasInTableScope(k.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,lE(e,t)):xa(e,t)}function hnt(e,t){const n=t.tagID;switch(n){case k.CAPTION:case k.TABLE:{e.openElements.hasInTableScope(k.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===k.TABLE&&n2(e,t));break}case k.BODY:case k.COL:case k.COLGROUP:case k.HTML:case k.TBODY:case k.TD:case k.TFOOT:case k.TH:case k.THEAD:case k.TR:break;default:SL(e,t)}}function eY(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.COL:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case k.TEMPLATE:{Gf(e,t);break}default:_O(e,t)}}function pnt(e,t){switch(t.tagID){case k.COLGROUP:{e.openElements.currentTagId===k.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case k.TEMPLATE:{xb(e,t);break}case k.COL:break;default:_O(e,t)}}function _O(e,t){e.openElements.currentTagId===k.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function TL(e,t){switch(t.tagID){case k.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_ROW;break}case k.TH:case k.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(we.TR,k.TR),e.insertionMode=ie.IN_ROW,AL(e,t);break}case k.CAPTION:case k.COL:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,lE(e,t));break}default:lE(e,t)}}function $U(e,t){const n=t.tagID;switch(t.tagID){case k.TBODY:case k.TFOOT:case k.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case k.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,n2(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TD:case k.TH:case k.TR:break;default:n2(e,t)}}function AL(e,t){switch(t.tagID){case k.TH:case k.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case k.CAPTION:case k.COL:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:case k.TR:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,TL(e,t));break}default:lE(e,t)}}function Pwe(e,t){switch(t.tagID){case k.TR:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case k.TABLE:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,$U(e,t));break}case k.TBODY:case k.TFOOT:case k.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(k.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,$U(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TD:case k.TH:break;default:n2(e,t)}}function mnt(e,t){const n=t.tagID;Nwe.has(n)?(e.openElements.hasInTableScope(k.TD)||e.openElements.hasInTableScope(k.TH))&&(e._closeTableCell(),AL(e,t)):xa(e,t)}function gnt(e,t){const n=t.tagID;switch(n){case k.TD:case k.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case k.TABLE:case k.TBODY:case k.TFOOT:case k.THEAD:case k.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Pwe(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:break;default:SL(e,t)}}function Dwe(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.OPTION:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e._insertElement(t,Le.HTML);break}case k.OPTGROUP:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e.openElements.currentTagId===k.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Le.HTML);break}case k.INPUT:case k.KEYGEN:case k.TEXTAREA:case k.SELECT:{e.openElements.hasInSelectScope(k.SELECT)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),t.tagID!==k.SELECT&&e._processStartTag(t));break}case k.SCRIPT:case k.TEMPLATE:{Gf(e,t);break}}}function Owe(e,t){switch(t.tagID){case k.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===k.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===k.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===k.OPTGROUP&&e.openElements.pop();break}case k.OPTION:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop();break}case k.SELECT:{e.openElements.hasInSelectScope(k.SELECT)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode());break}case k.TEMPLATE:{xb(e,t);break}}}function ynt(e,t){const n=t.tagID;n===k.CAPTION||n===k.TABLE||n===k.TBODY||n===k.TFOOT||n===k.THEAD||n===k.TR||n===k.TD||n===k.TH?(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Dwe(e,t)}function vnt(e,t){const n=t.tagID;n===k.CAPTION||n===k.TABLE||n===k.TBODY||n===k.TFOOT||n===k.THEAD||n===k.TR||n===k.TD||n===k.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Owe(e,t)}function bnt(e,t){switch(t.tagID){case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:case k.NOFRAMES:case k.SCRIPT:case k.STYLE:case k.TEMPLATE:case k.TITLE:{Gf(e,t);break}case k.CAPTION:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,lE(e,t);break}case k.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,eY(e,t);break}case k.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,TL(e,t);break}case k.TD:case k.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,AL(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,xa(e,t)}}function _nt(e,t){t.tagID===k.TEMPLATE&&xb(e,t)}function $we(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(k.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):ZG(e,t)}function wnt(e,t){t.tagID===k.HTML?xa(e,t):wO(e,t)}function Mwe(e,t){var n;if(t.tagID===k.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===k.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else wO(e,t)}function wO(e,t){e.insertionMode=ie.IN_BODY,xL(e,t)}function Ent(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.FRAMESET:{e._insertElement(t,Le.HTML);break}case k.FRAME:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case k.NOFRAMES:{Gf(e,t);break}}}function xnt(e,t){t.tagID===k.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==k.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function Snt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.NOFRAMES:{Gf(e,t);break}}}function Tnt(e,t){t.tagID===k.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function Ant(e,t){t.tagID===k.HTML?xa(e,t):OP(e,t)}function OP(e,t){e.insertionMode=ie.IN_BODY,xL(e,t)}function Cnt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.NOFRAMES:{Gf(e,t);break}}}function Int(e,t){t.chars=pi,e._insertCharacters(t)}function knt(e,t){e._insertCharacters(t),e.framesetOk=!1}function Lwe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Le.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Rnt(e,t){if(qet(t))Lwe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Le.MATHML?_we(t):r===Le.SVG&&(Wet(t),wwe(t)),QG(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Nnt(e,t){if(t.tagID===k.P||t.tagID===k.BR){Lwe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Le.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}we.AREA,we.BASE,we.BASEFONT,we.BGSOUND,we.BR,we.COL,we.EMBED,we.FRAME,we.HR,we.IMG,we.INPUT,we.KEYGEN,we.LINK,we.META,we.PARAM,we.SOURCE,we.TRACK,we.WBR;const Pnt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),gae={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Fwe(e,t){const n=znt(e),r=iwe("type",{handlers:{root:Dnt,element:Ont,text:$nt,comment:Bwe,doctype:Mnt,raw:Fnt},unknown:jnt}),i={parser:n?new hae(gae):hae.getFragmentParser(void 0,gae),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),Mx(i,$h());const s=n?i.parser.document:i.parser.getFragment(),o=zZe(s,{file:i.options.file});return i.stitches&&GG(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function jwe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Dnt(e,t){jwe(e.children,t)}function Ont(e,t){Bnt(e,t),jwe(e.children,t),Unt(e,t)}function $nt(e,t){const n={type:Cn.CHARACTER,chars:e.value,location:jI(e)};Mx(t,$h(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Mnt(e,t){const n={type:Cn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:jI(e)};Mx(t,$h(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Lnt(e,t){t.stitches=!0;const n=Vnt(e);if("children"in e&&"children"in n){const r=Fwe({type:"root",children:e.children},t.options);n.children=r.children}Bwe({type:"comment",value:{stitch:n}},t)}function Bwe(e,t){const n=e.value,r={type:Cn.COMMENT,data:n,location:jI(e)};Mx(t,$h(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Fnt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Uwe(t,$h(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function jnt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Lnt(n,t);else{let r="";throw Pnt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Mx(e,t){Uwe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=is.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Uwe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Bnt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===is.PLAINTEXT)return;Mx(t,$h(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:H1.html;i===H1.html&&n==="svg"&&(i=H1.svg);const s=GZe({...e,children:[]},{space:i===H1.svg?"svg":"html"}),o={type:Cn.START_TAG,tagName:n,tagID:$x(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:jI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Unt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&tet.includes(n)||t.parser.tokenizer.state===is.PLAINTEXT)return;Mx(t,bL(e));const r={type:Cn.END_TAG,tagName:n,tagID:$x(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:jI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===is.RCDATA||t.parser.tokenizer.state===is.RAWTEXT||t.parser.tokenizer.state===is.SCRIPT_DATA)&&(t.parser.tokenizer.state=is.DATA)}function znt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function jI(e){const t=$h(e)||{line:void 0,column:void 0,offset:void 0},n=bL(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Vnt(e){return"children"in e?uE({...e,children:[]}):uE(e)}function Hnt(e){return function(t,n){return Fwe(t,{...e,file:n})}}function Ga({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(xy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(ot,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(rs,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(rs,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(rs,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(rs,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(rs,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(rs,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Sx,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(Cf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(Cf,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(kZe,{components:n,rehypePlugins:[Hnt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function MU({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Ga,{text:n})}const qnt="https://github.com/revisit-studies/study/tree/main/public/";function Wnt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Vm();return _.jsx(ci.Main,{children:_.jsxs(Nh,{size:"xs",px:"xs",children:[_.jsx(xy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Oh}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(ot,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=g_e(i);return _.jsx(Rs,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(Ey,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ot,{fw:"bold",children:i}),_.jsxs(Jt,{align:"center",direction:"row",children:[_.jsx(uoe,{color:"red"}),_.jsx(ot,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(MU,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsx(ot,{fw:"bold",children:s.studyMetadata.title}),_.jsxs(ot,{c:"dimmed",children:[_.jsx(ot,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(ot,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(ot,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Sx,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${qnt}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Jt,{align:"center",direction:"row",children:[_.jsx(uoe,{color:"orange"}),_.jsx(ot,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(MU,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var zwe={exports:{}},Vwe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BI=N;function Gnt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ynt=typeof Object.is=="function"?Object.is:Gnt,Knt=BI.useSyncExternalStore,Xnt=BI.useRef,Qnt=BI.useEffect,Jnt=BI.useMemo,Znt=BI.useDebugValue;Vwe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Xnt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Jnt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Ynt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Knt(e,s[0],s[1]);return Qnt(function(){o.hasValue=!0,o.value=a},[a]),Znt(a),a};zwe.exports=Vwe;var ert=zwe.exports,bl="default"in DD?qi:DD,yae=Symbol.for("react-redux-context"),vae=typeof globalThis<"u"?globalThis:{};function trt(){if(!bl.createContext)return{};const e=vae[yae]??(vae[yae]=new Map);let t=e.get(bl.createContext);return t||(t=bl.createContext(null),e.set(bl.createContext,t)),t}var P0=trt(),nrt=()=>{throw new Error("uSES not initialized!")};function tY(e=P0){return function(){return bl.useContext(e)}}var Hwe=tY(),qwe=nrt,rrt=e=>{qwe=e},irt=(e,t)=>e===t;function srt(e=P0){const t=e===P0?Hwe:tY(e),n=(r,i={})=>{const{equalityFn:s=irt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();bl.useRef(!0);const d=bl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=qwe(u.addNestedSub,a.getState,l||a.getState,d,s);return bl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var ort=srt();function art(e){e()}function urt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){art(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var bae={notify(){},get:()=>[]};function lrt(e,t){let n,r=bae,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=urt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=bae)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var crt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",frt=typeof navigator<"u"&&navigator.product==="ReactNative",drt=crt||frt?bl.useLayoutEffect:bl.useEffect;function hrt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=bl.useMemo(()=>{const l=lrt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=bl.useMemo(()=>e.getState(),[e]);drt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||P0;return bl.createElement(u.Provider,{value:o},n)}var prt=hrt;function Wwe(e=P0){const t=e===P0?Hwe:tY(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var mrt=Wwe();function grt(e=P0){const t=e===P0?mrt:Wwe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Gwe=grt();rrt(ert.useSyncExternalStoreWithSelector);function yo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yrt=typeof Symbol=="function"&&Symbol.observable||"@@observable",_ae=yrt,_8=()=>Math.random().toString(36).substring(7).split("").join("."),vrt={INIT:`@@redux/INIT${_8()}`,REPLACE:`@@redux/REPLACE${_8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${_8()}`},EO=vrt;function nY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Ywe(e,t,n){if(typeof e!="function")throw new Error(yo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(yo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(yo(1));return n(Ywe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(yo(3));return i}function f(g){if(typeof g!="function")throw new Error(yo(4));if(u)throw new Error(yo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(yo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!nY(g))throw new Error(yo(7));if(typeof g.type>"u")throw new Error(yo(8));if(typeof g.type!="string")throw new Error(yo(17));if(u)throw new Error(yo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(yo(10));r=g,d({type:EO.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(yo(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[_ae](){return this}}}return d({type:EO.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[_ae]:p}}function brt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:EO.INIT})>"u")throw new Error(yo(12));if(typeof n(void 0,{type:EO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(yo(13))})}function _rt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{brt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(yo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function xO(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function wrt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(yo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=xO(...a)(i.dispatch),{...i,dispatch:s}}}function Ert(e){return nY(e)&&"type"in e&&typeof e.type=="string"}var Kwe=Symbol.for("immer-nothing"),wae=Symbol.for("immer-draftable"),Rl=Symbol.for("immer-state");function df(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var cE=Object.getPrototypeOf;function D0(e){return!!e&&!!e[Rl]}function pm(e){var t;return e?Xwe(e)||Array.isArray(e)||!!e[wae]||!!((t=e.constructor)!=null&&t[wae])||IL(e)||kL(e):!1}var xrt=Object.prototype.constructor.toString();function Xwe(e){if(!e||typeof e!="object")return!1;const t=cE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===xrt}function SO(e,t){CL(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function CL(e){const t=e[Rl];return t?t.type_:Array.isArray(e)?1:IL(e)?2:kL(e)?3:0}function LU(e,t){return CL(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Qwe(e,t,n){const r=CL(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Srt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function IL(e){return e instanceof Map}function kL(e){return e instanceof Set}function h1(e){return e.copy_||e.base_}function FU(e,t){if(IL(e))return new Map(e);if(kL(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Xwe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Rl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(cE(e),r)}else{const r=cE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function rY(e,t=!1){return RL(e)||D0(e)||!pm(e)||(CL(e)>1&&(e.set=e.add=e.clear=e.delete=Trt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>rY(r,!0))),e}function Trt(){df(2)}function RL(e){return Object.isFrozen(e)}var Art={};function kv(e){const t=Art[e];return t||df(0,e),t}var r2;function Jwe(){return r2}function Crt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Eae(e,t){t&&(kv("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function jU(e){BU(e),e.drafts_.forEach(Irt),e.drafts_=null}function BU(e){e===r2&&(r2=e.parent_)}function xae(e){return r2=Crt(r2,e)}function Irt(e){const t=e[Rl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Sae(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Rl].modified_&&(jU(t),df(4)),pm(e)&&(e=TO(t,e),t.parent_||AO(t,e)),t.patches_&&kv("Patches").generateReplacementPatches_(n[Rl].base_,e,t.patches_,t.inversePatches_)):e=TO(t,n,[]),jU(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Kwe?e:void 0}function TO(e,t,n){if(RL(t))return t;const r=t[Rl];if(!r)return SO(t,(i,s)=>Tae(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return AO(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),SO(s,(a,u)=>Tae(e,r,i,a,u,n,o)),AO(e,i,!1),n&&e.patches_&&kv("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Tae(e,t,n,r,i,s,o){if(D0(i)){const a=s&&t&&t.type_!==3&&!LU(t.assigned_,r)?s.concat(r):void 0,u=TO(e,i,a);if(Qwe(n,r,u),D0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(pm(i)&&!RL(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;TO(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&AO(e,i)}}function AO(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rY(t,n)}function krt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Jwe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=iY;n&&(i=[r],s=i2);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var iY={get(e,t){if(t===Rl)return e;const n=h1(e);if(!LU(n,t))return Rrt(e,n,t);const r=n[t];return e.finalized_||!pm(r)?r:r===w8(e.base_,t)?(E8(e),e.copy_[t]=zU(r,e)):r},has(e,t){return t in h1(e)},ownKeys(e){return Reflect.ownKeys(h1(e))},set(e,t,n){const r=Zwe(h1(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=w8(h1(e),t),s=i==null?void 0:i[Rl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Srt(n,i)&&(n!==void 0||LU(e.base_,t)))return!0;E8(e),UU(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return w8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,E8(e),UU(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=h1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){df(11)},getPrototypeOf(e){return cE(e.base_)},setPrototypeOf(){df(12)}},i2={};SO(iY,(e,t)=>{i2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});i2.deleteProperty=function(e,t){return i2.set.call(this,e,t,void 0)};i2.set=function(e,t,n){return iY.set.call(this,e[0],t,n,e[0])};function w8(e,t){const n=e[Rl];return(n?h1(n):e)[t]}function Rrt(e,t,n){var i;const r=Zwe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Zwe(e,t){if(!(t in e))return;let n=cE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=cE(n)}}function UU(e){e.modified_||(e.modified_=!0,e.parent_&&UU(e.parent_))}function E8(e){e.copy_||(e.copy_=FU(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Nrt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&df(6),r!==void 0&&typeof r!="function"&&df(7);let i;if(pm(t)){const s=xae(this),o=zU(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?jU(s):BU(s)}return Eae(s,r),Sae(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Kwe&&(i=void 0),this.autoFreeze_&&rY(i,!0),r){const s=[],o=[];kv("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else df(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){pm(e)||df(8),D0(e)&&(e=eEe(e));const t=xae(this),n=zU(e,void 0);return n[Rl].isManual_=!0,BU(t),n}finishDraft(e,t){const n=e&&e[Rl];(!n||!n.isManual_)&&df(9);const{scope_:r}=n;return Eae(r,t),Sae(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=kv("Patches").applyPatches_;return D0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function zU(e,t){const n=IL(e)?kv("MapSet").proxyMap_(e,t):kL(e)?kv("MapSet").proxySet_(e,t):krt(e,t);return(t?t.scope_:Jwe()).drafts_.push(n),n}function eEe(e){return D0(e)||df(10,e),tEe(e)}function tEe(e){if(!pm(e)||RL(e))return e;const t=e[Rl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=FU(e,t.scope_.immer_.useStrictShallowCopy_)}else n=FU(e,!0);return SO(n,(r,i)=>{Qwe(n,r,tEe(i))}),t&&(t.finalized_=!1),n}var Nl=new Nrt,nEe=Nl.produce;Nl.produceWithPatches.bind(Nl);Nl.setAutoFreeze.bind(Nl);Nl.setUseStrictShallowCopy.bind(Nl);Nl.applyPatches.bind(Nl);Nl.createDraft.bind(Nl);Nl.finishDraft.bind(Nl);function Prt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Drt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Ort(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Aae=e=>Array.isArray(e)?e:[e];function $rt(e){const t=Array.isArray(e[0])?e[0]:e;return Ort(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Mrt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Lrt=class{constructor(e){this.value=e}deref(){return this.value}},Frt=typeof WeakRef<"u"?WeakRef:Lrt,jrt=0,Cae=1;function ZR(){return{s:jrt,v:void 0,o:null,p:null}}function sY(e,t={}){let n=ZR();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=ZR(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=ZR(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Cae)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Frt(c):c}return l.s=Cae,l.v=c,c}return o.clearCache=()=>{n=ZR(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function rEe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Prt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=sY,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Aae(d),y=Aae(p),v=$rt(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const S=Mrt(v,arguments);return a=b.apply(null,S),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Brt=rEe(sY),Urt=Object.assign((e,t=Brt)=>{Drt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Urt});function iEe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var zrt=iEe(),Vrt=iEe,Hrt=(...e)=>{const t=rEe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(D0(o)?eEe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Hrt(sY);var qrt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?xO:xO.apply(null,arguments)};function fE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Lu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Ert(r)&&r.type===e,n}var sEe=class qT extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,qT.prototype)}static get[Symbol.species](){return qT}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new qT(...t[0].concat(this)):new qT(...t.concat(this))}};function Iae(e){return pm(e)?nEe(e,()=>{}):e}function kae(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Lu(10));const r=n.insert(t,e);return e.set(t,r),r}function Wrt(e){return typeof e=="boolean"}var Grt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new sEe;return n&&(Wrt(n)?o.push(zrt):o.push(Vrt(n.extraArgument))),o},Yrt="RTK_autoBatch",oEe=e=>t=>{setTimeout(t,e)},Krt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:oEe(10),Xrt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Krt:e.type==="callback"?e.queueNotification:oEe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Yrt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Qrt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new sEe(e);return r&&i.push(Xrt(typeof r=="object"?r:void 0)),i},Jrt=!0;function Zrt(e){const t=Grt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(nY(n))a=_rt(n);else throw new Error(Lu(1));let u;typeof r=="function"?u=r(t):u=t();let l=xO;i&&(l=qrt({trace:!Jrt,...typeof i=="object"&&i}));const c=wrt(...u),f=Qrt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return Ywe(a,s,h)}function aEe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Lu(28));if(a in t)throw new Error(Lu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function eit(e){return typeof e=="function"}function tit(e,t){let[n,r,i]=aEe(t),s;if(eit(e))s=()=>Iae(e());else{const a=Iae(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(D0(c)){const h=f(c,u);return h===void 0?c:h}else{if(pm(c))return nEe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Lu(9))}return d}}return c},a)}return o.getInitialState=s,o}var nit="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",rit=(e=21)=>{let t="",n=e;for(;n--;)t+=nit[Math.random()*64|0];return t},iit=Symbol.for("rtk-slice-createasyncthunk");function sit(e,t){return`${e}/${t}`}function oit({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[iit];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Lu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(lit()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Lu(12));if(E in l.sliceCaseReducersByType)throw new Error(Lu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:sit(s,b),createNotation:typeof i.reducers=="function"};fit(w)?hit(E,w,c,t):cit(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?aEe(i.extraReducers):[i.extraReducers],S={...b,...l.sliceCaseReducersByType};return tit(i.initialState,T=>{for(let A in S)T.addCase(A,S[A]);for(let A of l.sliceMatchers)T.addMatcher(A.matcher,A.reducer);for(let A of w)T.addMatcher(A.matcher,A.reducer);E&&T.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(T){let A=T[b];return typeof A>"u"&&w&&(A=g()),A}function S(T=d){const A=kae(h,w,{insert:()=>new WeakMap});return kae(A,T,{insert:()=>{const C={};for(const[I,R]of Object.entries(i.selectors??{}))C[I]=ait(R,T,g,w);return C}})}return{reducerPath:b,getSelectors:S,get selectors(){return S(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const S=w??o;return b.inject({reducerPath:S,reducer:m},E),{...v,...y(S,!0)}}};return v}}function ait(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var uit=oit();function lit(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function cit({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!dit(r))throw new Error(Lu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?fE(e,o):fE(e))}function fit(e){return e._reducerDefinitionType==="asyncThunk"}function dit(e){return e._reducerDefinitionType==="reducerWithPrepare"}function hit({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Lu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||eN,pending:a||eN,rejected:u||eN,settled:l||eN})}function eN(){}var pit=(e,t)=>{if(typeof e!="function")throw new Error(Lu(32))},oY="listenerMiddleware",mit=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=fE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Lu(21));return pit(s),{predicate:i,type:t,effect:s}},git=Object.assign(e=>{const{type:t,predicate:n,effect:r}=mit(e);return{id:rit(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Lu(22))}}},{withTypes:()=>git}),yit=Object.assign(fE(`${oY}/add`),{withTypes:()=>yit});fE(`${oY}/removeAll`);var vit=Object.assign(fE(`${oY}/remove`),{withTypes:()=>vit});function Lu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function mm(e){return e.components.flatMap(t=>typeof t=="string"?t:mm(t))}function uEe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:uEe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function lEe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+mm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+mm(e).length-1}];r+=1}else{const o=lEe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function cEe(e,t){const n=lEe(e,t,0);return typeof n=="number"?null:n}function fEe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=fEe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function bit(e,t){const n=fEe(e,t,0);return n.found?n.distance:-1}function dEe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...dEe(i,`${t}-${s}`))}),n}async function _it(e,t,n,r,i,s){const o=mm(n),a=Object.fromEntries(o.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{}}])),u=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,answers:Object.keys(i).length>0?i:a,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r},f=uit({name:"storeSlice",initialState:c,reducers:{setConfig(h,p){h.config=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:v,provenanceGraph:b,windowEvents:w}=p;h.answers[m]={answer:g,startTime:y,endTime:v,provenanceGraph:b,windowEvents:w}}}});return{store:Zrt({reducer:f.reducer,preloadedState:c}),actions:f.actions}}const hEe=N.createContext(null);function Mh(){return N.useContext(hEe).actions}const Lh=Gwe,Lc=ort;function wit(e){return Lc(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function aY(){return Lc(e=>mm(e.sequence))}function UI(){const{studyId:e}=aE();return`${e}`}function Hm(){const{index:e}=aE(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function qm(){const e=Hm(),t=aY();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var CO={exports:{}};CO.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",S="[object String]",T="[object Undefined]",A="[object WeakMap]",C="[object ArrayBuffer]",I="[object DataView]",R="[object Float32Array]",M="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",F="[object Int32Array]",L="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[R]=j[M]=j[P]=j[O]=j[F]=j[L]=j[B]=j[U]=j[H]=!0,j[a]=j[u]=j[C]=j[c]=j[I]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[S]=j[A]=!1;var q=typeof Js=="object"&&Js&&Js.Object===Object&&Js,G=typeof self=="object"&&self&&self.Object===Object&&self,ne=q||G||Function("return this")(),ce=t&&!t.nodeType&&t,de=ce&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===ce,ye=he&&q.process,Ie=function(){try{var te=de&&de.require&&de.require("util").types;return te||ye&&ye.binding&&ye.binding("util")}catch{}}(),ve=Ie&&Ie.isTypedArray;function Ke(te,ue,Re){switch(Re.length){case 0:return te.call(ue);case 1:return te.call(ue,Re[0]);case 2:return te.call(ue,Re[0],Re[1]);case 3:return te.call(ue,Re[0],Re[1],Re[2])}return te.apply(ue,Re)}function Ue(te,ue){for(var Re=-1,Ct=Array(te);++Re<te;)Ct[Re]=ue(Re);return Ct}function gt(te){return function(ue){return te(ue)}}function rt(te,ue){return te==null?void 0:te[ue]}function be(te,ue){return function(Re){return te(ue(Re))}}var ke=Array.prototype,ze=Function.prototype,ct=Object.prototype,Dt=ne["__core-js_shared__"],We=ze.toString,me=ct.hasOwnProperty,dt=function(){var te=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),yt=ct.toString,pe=We.call(Object),Ce=RegExp("^"+We.call(me).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=he?ne.Buffer:void 0,ut=ne.Symbol,_t=ne.Uint8Array;He&&He.allocUnsafe;var Mn=be(Object.getPrototypeOf,Object),Sr=Object.create,Ln=ct.propertyIsEnumerable,lr=ke.splice,hn=ut?ut.toStringTag:void 0,Sn=function(){try{var te=qe(Object,"defineProperty");return te({},"",{}),te}catch{}}(),tr=He?He.isBuffer:void 0,nr=Math.max,Lo=Date.now,Di=qe(ne,"Map"),Tn=qe(Object,"create"),Oi=function(){function te(){}return function(ue){if(!ip(ue))return{};if(Sr)return Sr(ue);te.prototype=ue;var Re=new te;return te.prototype=void 0,Re}}();function Tr(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function fs(){this.__data__=Tn?Tn(null):{},this.size=0}function ep(te){var ue=this.has(te)&&delete this.__data__[te];return this.size-=ue?1:0,ue}function rl(te){var ue=this.__data__;if(Tn){var Re=ue[te];return Re===r?void 0:Re}return me.call(ue,te)?ue[te]:void 0}function od(te){var ue=this.__data__;return Tn?ue[te]!==void 0:me.call(ue,te)}function wr(te,ue){var Re=this.__data__;return this.size+=this.has(te)?0:1,Re[te]=Tn&&ue===void 0?r:ue,this}Tr.prototype.clear=fs,Tr.prototype.delete=ep,Tr.prototype.get=rl,Tr.prototype.has=od,Tr.prototype.set=wr;function Si(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function Gr(){this.__data__=[],this.size=0}function ou(te){var ue=this.__data__,Re=Qn(ue,te);if(Re<0)return!1;var Ct=ue.length-1;return Re==Ct?ue.pop():lr.call(ue,Re,1),--this.size,!0}function Sa(te){var ue=this.__data__,Re=Qn(ue,te);return Re<0?void 0:ue[Re][1]}function Ta(te){return Qn(this.__data__,te)>-1}function oe(te,ue){var Re=this.__data__,Ct=Qn(Re,te);return Ct<0?(++this.size,Re.push([te,ue])):Re[Ct][1]=ue,this}Si.prototype.clear=Gr,Si.prototype.delete=ou,Si.prototype.get=Sa,Si.prototype.has=Ta,Si.prototype.set=oe;function ee(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function ae(){this.size=0,this.__data__={hash:new Tr,map:new(Di||Si),string:new Tr}}function Se(te){var ue=Ve(this,te).delete(te);return this.size-=ue?1:0,ue}function xe(te){return Ve(this,te).get(te)}function st(te){return Ve(this,te).has(te)}function St(te,ue){var Re=Ve(this,te),Ct=Re.size;return Re.set(te,ue),this.size+=Re.size==Ct?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Se,ee.prototype.get=xe,ee.prototype.has=st,ee.prototype.set=St;function Vt(te){var ue=this.__data__=new Si(te);this.size=ue.size}function Dn(){this.__data__=new Si,this.size=0}function Fn(te){var ue=this.__data__,Re=ue.delete(te);return this.size=ue.size,Re}function fn(te){return this.__data__.get(te)}function rr(te){return this.__data__.has(te)}function Ar(te,ue){var Re=this.__data__;if(Re instanceof Si){var Ct=Re.__data__;if(!Di||Ct.length<n-1)return Ct.push([te,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(Ct)}return Re.set(te,ue),this.size=Re.size,this}Vt.prototype.clear=Dn,Vt.prototype.delete=Fn,Vt.prototype.get=fn,Vt.prototype.has=rr,Vt.prototype.set=Ar;function zt(te,ue){var Re=np(te),Ct=!Re&&au(te),On=!Re&&!Ct&&rp(te),Er=!Re&&!Ct&&!On&&yR(te),zr=Re||Ct||On||Er,Bn=zr?Ue(te.length,String):[],Vr=Bn.length;for(var Qi in te)zr&&(Qi=="length"||On&&(Qi=="offset"||Qi=="parent")||Er&&(Qi=="buffer"||Qi=="byteLength"||Qi=="byteOffset")||Et(Qi,Vr))||Bn.push(Qi);return Bn}function ir(te,ue,Re){(Re!==void 0&&!Gl(te[ue],Re)||Re===void 0&&!(ue in te))&&Ti(te,ue,Re)}function Ur(te,ue,Re){var Ct=te[ue];(!(me.call(te,ue)&&Gl(Ct,Re))||Re===void 0&&!(ue in te))&&Ti(te,ue,Re)}function Qn(te,ue){for(var Re=te.length;Re--;)if(Gl(te[Re][0],ue))return Re;return-1}function Ti(te,ue,Re){ue=="__proto__"&&Sn?Sn(te,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):te[ue]=Re}var Bs=Oe();function Yr(te){return te==null?te===void 0?T:y:hn&&hn in Object(te)?Ge(te):jo(te)}function co(te){return uu(te)&&Yr(te)==a}function $i(te){if(!ip(te)||jn(te))return!1;var ue=MS(te)?Ce:z;return ue.test(pR(te))}function Mi(te){return uu(te)&&gR(te.length)&&!!j[Yr(te)]}function Fo(te){if(!ip(te))return Ir(te);var ue=Cr(te),Re=[];for(var Ct in te)Ct=="constructor"&&(ue||!me.call(te,Ct))||Re.push(Ct);return Re}function Aa(te,ue,Re,Ct,On){te!==ue&&Bs(ue,function(Er,zr){if(On||(On=new Vt),ip(Er))Us(te,ue,zr,Re,Aa,Ct,On);else{var Bn=Ct?Ct(tp(te,zr),Er,zr+"",te,ue,On):void 0;Bn===void 0&&(Bn=Er),ir(te,zr,Bn)}},Ky)}function Us(te,ue,Re,Ct,On,Er,zr){var Bn=tp(te,Re),Vr=tp(ue,Re),Qi=zr.get(Vr);if(Qi){ir(te,Re,Qi);return}var Bo=Er?Er(Bn,Vr,Re+"",te,ue,zr):void 0,Qy=Bo===void 0;if(Qy){var sp=np(Vr),Kb=!sp&&rp(Vr),Xb=!sp&&!Kb&&yR(Vr);Bo=Vr,sp||Kb||Xb?np(Bn)?Bo=Bn:mR(Bn)?Bo=fe(Bn):Kb?(Qy=!1,Bo=Y(Vr)):Xb?(Qy=!1,Bo=Z(Vr)):Bo=[]:u5(Vr)||au(Vr)?(Bo=Bn,au(Bn)?Bo=Yy(Bn):(!ip(Bn)||MS(Bn))&&(Bo=it(Vr))):Qy=!1}Qy&&(zr.set(Vr,Bo),On(Bo,Vr,Ct,Er,zr),zr.delete(Vr)),ir(te,Re,Bo)}function Wl(te,ue){return $S(ud(te,ue,ug),te+"")}var ad=Sn?function(te,ue){return Sn(te,"toString",{configurable:!0,enumerable:!1,value:Xy(ue),writable:!0})}:ug;function Y(te,ue){return te.slice()}function se(te){var ue=new te.constructor(te.byteLength);return new _t(ue).set(new _t(te)),ue}function Z(te,ue){var Re=se(te.buffer);return new te.constructor(Re,te.byteOffset,te.length)}function fe(te,ue){var Re=-1,Ct=te.length;for(ue||(ue=Array(Ct));++Re<Ct;)ue[Re]=te[Re];return ue}function ge(te,ue,Re,Ct){var On=!Re;Re||(Re={});for(var Er=-1,zr=ue.length;++Er<zr;){var Bn=ue[Er],Vr=void 0;Vr===void 0&&(Vr=te[Bn]),On?Ti(Re,Bn,Vr):Ur(Re,Bn,Vr)}return Re}function le(te){return Wl(function(ue,Re){var Ct=-1,On=Re.length,Er=On>1?Re[On-1]:void 0,zr=On>2?Re[2]:void 0;for(Er=te.length>3&&typeof Er=="function"?(On--,Er):void 0,zr&&dn(Re[0],Re[1],zr)&&(Er=On<3?void 0:Er,On=1),ue=Object(ue);++Ct<On;){var Bn=Re[Ct];Bn&&te(ue,Bn,Ct,Er)}return ue})}function Oe(te){return function(ue,Re,Ct){for(var On=-1,Er=Object(ue),zr=Ct(ue),Bn=zr.length;Bn--;){var Vr=zr[++On];if(Re(Er[Vr],Vr,Er)===!1)break}return ue}}function Ve(te,ue){var Re=te.__data__;return Nt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function qe(te,ue){var Re=rt(te,ue);return $i(Re)?Re:void 0}function Ge(te){var ue=me.call(te,hn),Re=te[hn];try{te[hn]=void 0;var Ct=!0}catch{}var On=yt.call(te);return Ct&&(ue?te[hn]=Re:delete te[hn]),On}function it(te){return typeof te.constructor=="function"&&!Cr(te)?Oi(Mn(te)):{}}function Et(te,ue){var Re=typeof te;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(te))&&te>-1&&te%1==0&&te<ue}function dn(te,ue,Re){if(!ip(Re))return!1;var Ct=typeof ue;return(Ct=="number"?Yb(Re)&&Et(ue,Re.length):Ct=="string"&&ue in Re)?Gl(Re[ue],te):!1}function Nt(te){var ue=typeof te;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?te!=="__proto__":te===null}function jn(te){return!!dt&&dt in te}function Cr(te){var ue=te&&te.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return te===Re}function Ir(te){var ue=[];if(te!=null)for(var Re in Object(te))ue.push(Re);return ue}function jo(te){return yt.call(te)}function ud(te,ue,Re){return ue=nr(ue===void 0?te.length-1:ue,0),function(){for(var Ct=arguments,On=-1,Er=nr(Ct.length-ue,0),zr=Array(Er);++On<Er;)zr[On]=Ct[ue+On];On=-1;for(var Bn=Array(ue+1);++On<ue;)Bn[On]=Ct[On];return Bn[ue]=Re(zr),Ke(te,this,Bn)}}function tp(te,ue){if(!(ue==="constructor"&&typeof te[ue]=="function")&&ue!="__proto__")return te[ue]}var $S=Gy(ad);function Gy(te){var ue=0,Re=0;return function(){var Ct=Lo(),On=s-(Ct-Re);if(Re=Ct,On>0){if(++ue>=i)return arguments[0]}else ue=0;return te.apply(void 0,arguments)}}function pR(te){if(te!=null){try{return We.call(te)}catch{}try{return te+""}catch{}}return""}function Gl(te,ue){return te===ue||te!==te&&ue!==ue}var au=co(function(){return arguments}())?co:function(te){return uu(te)&&me.call(te,"callee")&&!Ln.call(te,"callee")},np=Array.isArray;function Yb(te){return te!=null&&gR(te.length)&&!MS(te)}function mR(te){return uu(te)&&Yb(te)}var rp=tr||bR;function MS(te){if(!ip(te))return!1;var ue=Yr(te);return ue==h||ue==p||ue==l||ue==b}function gR(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=o}function ip(te){var ue=typeof te;return te!=null&&(ue=="object"||ue=="function")}function uu(te){return te!=null&&typeof te=="object"}function u5(te){if(!uu(te)||Yr(te)!=v)return!1;var ue=Mn(te);if(ue===null)return!0;var Re=me.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&We.call(Re)==pe}var yR=ve?gt(ve):Mi;function Yy(te){return ge(te,Ky(te))}function Ky(te){return Yb(te)?zt(te):Fo(te)}var vR=le(function(te,ue,Re){Aa(te,ue,Re)});function Xy(te){return function(){return te}}function ug(te){return te}function bR(){return!1}e.exports=vR})(CO,CO.exports);var Eit=CO.exports;const uY=Ul(Eit);function lv(e){return structuredClone(e)}function lY(){const{answers:e}=Lc(i=>i),t=Hm(),r=`${qm()}_${t}`;return e[r]}const pEe=N.createContext(null);function xit(){const e=N.useContext(pEe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function gm(){return Lc(e=>e.config)}function Rae(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function mEe(){const e=Hm(),t=aY(),r=`${qm()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Lc(w=>w),a=Lh(),{saveTrialAnswer:u,setIframeAnswers:l}=Mh(),{storageEngine:c}=wa(),f=wit(r),d=typeof e!="number"||!f,h=lY(),p=Vm(),m=gm(),g=UI(),y=N.useMemo(()=>Date.now(),[]),v=xit(),b=N.useCallback(()=>{if(typeof e!="number")return;const w=lv(i[r]),E=Object.values(w).reduce((P,O)=>Object.hasOwn(O,"values")?{...P,...O.values}:P,{}),{provenanceGraph:S}=w,T=Date.now(),A=v&&"current"in v&&v.current?v.current.splice(0,v.current.length):[];h.endTime||(a(u({identifier:r,answer:E,startTime:y,endTime:T,provenanceGraph:S,windowEvents:A})),c&&c.saveAnswers({...o,[r]:{answer:E,startTime:y,endTime:T,provenanceGraph:S,windowEvents:A}}),a(l({})));let C=e+1;const I=cEe(s,e),R=I!==null&&I.some(P=>Object.hasOwn(P.currentBlock,"skip")&&P.currentBlock.skip!==void 0),M={...o,[r]:{answer:E,startTime:y,endTime:T,provenanceGraph:S,windowEvents:A}};R&&[...I.flatMap(O=>O.currentBlock.skip?O.currentBlock.skip.map(F=>({...F,firstIndex:O.firstIndex,lastIndex:O.lastIndex})):[])].some(O=>{let F=!1;const L=Object.fromEntries(Object.entries(M).filter(([U])=>{const H=parseInt(U.slice(U.lastIndexOf("_")+1),10);return H>=O.firstIndex&&H<=e})),B=O.check!=="block"?Object.entries(L).filter(([U])=>U.slice(0,U.lastIndexOf("_"))===O.name):Object.entries(L);if(B.length===0)return!1;if(B.some(([U,H])=>!H))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(O,null,2)}`);if(O.check==="response"||O.check==="responses"){const[U,H]=B[0];O.check==="response"?F=O.value!==H.answer[O.responseId]:F=!Rae(H.answer,U,m.components[U.slice(0,U.lastIndexOf("_"))],m)}else if(O.check==="block"||O.check==="repeatedComponent"){if(B.length<O.value)return!1;const U=B.map(([z,W])=>Rae(W.answer,z,m.components[z.slice(0,z.lastIndexOf("_"))],m)),H=U.filter(z=>z).length,D=U.length-H;F=O.condition==="numCorrect"&&H===O.value||O.condition==="numIncorrect"&&D===O.value}if(F){const U=t.indexOf(O.to),H=U===-1?bit(s,O.to):-1;return C=U===-1?H:U,!0}return!1}),p(`/${g}/${C}${window.location.search}`)},[i,r,v,h,e,s,o,y,p,g,a,u,c,l,m,t]);return{isNextDisabled:d,goToNextStep:b}}function Sit({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=mEe(),o=N.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return _.jsx(Rn,{type:"submit",disabled:t||i,onClick:o,children:e})}function Tit(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Ait=typeof window<"u"?N.useLayoutEffect:N.useEffect;function ho(e,t){Ait(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Cit(e,t){e&&Tit(e),ho(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),ho(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),ho(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),ho(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),ho(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),ho(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),ho(`mantine-form:${e}:clear-errors`,t.clearErrors),ho(`mantine-form:${e}:reset`,t.reset),ho(`mantine-form:${e}:validate`,t.validate),ho(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),ho(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),ho(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),ho(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),ho(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),ho(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),ho(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),ho(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Iit(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function VU(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function kit(e){const[t,n]=N.useState(VU(e)),r=N.useRef(t),i=N.useCallback(u=>{n(l=>{const c=VU(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=N.useCallback(()=>i({}),[]),o=N.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=N.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function gEe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Nae(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Pae(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=gEe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Nae(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Nae(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Rit(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Dae(e,t,n){typeof n.value=="object"&&(n.value=X_(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function X_(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(X_(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(X_(a),X_(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(X_(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Dae(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Dae(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function yEe(e){return typeof e!="string"?[]:e.split(".")}function Cu(e,t){const n=yEe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function NL(e,t,n){const r=yEe(e);if(r.length===0)return n;const i=X_(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Nit(e,{from:t,to:n},r){const i=Cu(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),NL(e,s,r)}function Pit(e,t,n,r){const i=Cu(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),NL(e,s,r)}function Dit(e,t,n){const r=Cu(e,n);return Array.isArray(r)?NL(e,r.filter((i,s)=>s!==t),n):n}function Oit({$values:e,$errors:t,$status:n}){const r=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Rit(o,a,u)),e.setValues({values:Nit(o,a,e.refValues.current),updateState:!0})},[]),i=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Pae(o,a,u,-1)),e.setValues({values:Dit(o,a,e.refValues.current),updateState:!0})},[]),s=N.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Pae(o,u,l,1)),e.setValues({values:Pit(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var cY=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const $P=Ul(cY);function tN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function $it({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=N.useState(t),[o,a]=N.useState(e),u=N.useRef(t),l=N.useRef(e),c=N.useCallback(E=>{const S=typeof E=="function"?E(u.current):E;u.current=S,n==="controlled"&&s(S)},[]),f=N.useCallback(E=>{const S=typeof E=="function"?E(l.current):E;l.current=S,n==="controlled"&&a(S)},[]),d=N.useCallback(()=>c({}),[]),h=E=>{const S=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=N.useCallback((E,S)=>{c(T=>tN(T,E)===S?T:{...T,[E]:S})},[]),m=N.useCallback((E,S)=>{f(T=>tN(T,E)===S?T:{...T,[E]:S})},[]),g=N.useCallback(E=>tN(u.current,E),[]),y=N.useCallback(E=>f(S=>{if(typeof E!="string")return S;const T=gEe(E,S);return delete T[E],$P(T,S)?S:T}),[]),v=N.useCallback(E=>{if(E){const T=Cu(E,l.current);if(typeof T=="boolean")return T;const A=Cu(E,r.refValues.current),C=Cu(E,r.valuesSnapshot.current);return!$P(A,C)}return Object.keys(l.current).length>0?tN(l.current):!$P(r.refValues.current,r.valuesSnapshot.current)},[]),b=N.useCallback(()=>l.current,[]),w=N.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function Mit({initialValues:e,onValuesChange:t,mode:n}){const r=N.useRef(!1),[i,s]=N.useState(e||{}),o=N.useRef(i),a=N.useRef(i),u=N.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=N.useCallback(p=>{var y;const m=Cu(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=NL(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=N.useCallback(p=>{a.current=p},[]),f=N.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=N.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=N.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Lit({$status:e}){const t=N.useRef({}),n=N.useCallback((i,s)=>{N.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=N.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Cu(i,o.previousValues),value:Cu(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Oae(e,t){return e?`${e}-${t.toString()}`:t.toString()}function $ae(e){const t=VU(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function HU(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Cu(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>HU(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||HU(o,t,a,i)),i},r)}function qU(e,t){return $ae(typeof e=="function"?e(t):HU(e,t))}function nN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=qU(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Fit="__MANTINE_FORM_INDEX__";function Mae(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Fit}`)):!1:!1}function vEe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=kit(r),p=Mit({initialValues:n,onValuesChange:l,mode:t}),m=$it({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=Oit({$values:p,$errors:h,$status:m}),y=Lit({$status:m}),[v,b]=N.useState(0),[w,E]=N.useState({}),S=N.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(D=>D+1)},[]),T=N.useCallback(D=>{p.initialize(D,()=>t==="uncontrolled"&&b(z=>z+1))},[]),A=N.useCallback((D,z,W)=>{const j=Mae(D,a);m.clearFieldDirty(D),m.setFieldTouched(D,!0),!j&&o&&h.clearFieldError(D),p.setFieldValue({path:D,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(D),j?q=>{const G=nN(D,d,q.updatedValues);G.hasError?h.setFieldError(D,G.error):h.clearFieldError(D)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(q=>({...q,[D]:(q[D]||0)+1})):null]})},[l,d]),C=N.useCallback(D=>{const z=p.refValues.current;p.setValues({values:D,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=Cu(W,p.refValues.current),q=Cu(W,z);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),I=N.useCallback(()=>{const D=qU(d,p.refValues.current);return h.setErrors(D.errors),D},[d]),R=N.useCallback(D=>{const z=nN(D,d,p.refValues.current);return z.hasError?h.setFieldError(D,z.error):h.clearFieldError(D),z},[d]),M=(D,{type:z="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const ne={onChange:Iit(ce=>A(D,ce,{forceUpdate:!1})),"data-path":Oae(e,D)};return W&&(ne.error=h.errorsState[D]),z==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=Cu(D,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=Cu(D,p.refValues.current),j&&(ne.onFocus=()=>m.setFieldTouched(D,!0),ne.onBlur=()=>{if(Mae(D,u)){const ce=nN(D,d,p.refValues.current);ce.hasError?h.setFieldError(D,ce.error):h.clearFieldError(D)}}),Object.assign(ne,f==null?void 0:f({inputProps:ne,field:D,options:{type:z,withError:W,withFocus:j,...q},form:H}))},P=(D,z)=>W=>{W==null||W.preventDefault();const j=I();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):D==null||D(c(p.refValues.current),W)},O=D=>c(D||p.refValues.current),F=N.useCallback(D=>{D.preventDefault(),S()},[]),L=N.useCallback(D=>D?!nN(D,d,p.refValues.current).hasError:!qU(d,p.refValues.current).hasErrors,[d]),B=D=>`${v}-${D}-${w[D]||0}`,U=N.useCallback(D=>document.querySelector(`[data-path="${Oae(e,D)}"]`),[]),H={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:T,setValues:C,setFieldValue:A,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:I,validateField:R,getInputProps:M,onSubmit:P,onReset:F,isValid:L,getTransformedValues:O,key:B,getInputNode:U};return Cit(e,H),H}function jit(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Bit(e){return jit(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const Uit=new URLSearchParams(window.location.search),zit=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Uit.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Vit=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Hit(e,t,n){const[r,i]=N.useState(null),s=vEe({initialValues:zit(e,n),validate:Vit(e)});return N.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Sb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function qit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return _.jsx(fm.Group,{label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:s,required:o})})]}),description:u,...n,error:Sb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(Os,{mt:"xs",children:a.map(l=>_.jsx(fm,{disabled:t,value:l.value,label:l.label},l.value))})})}function Wit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return _.jsx(PI,{disabled:t,label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:Sb(e,n,u)})}function Git({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(Ri.Wrapper,{label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(Cf,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(Cf.Item,{children:a},a)):_.jsx(Cf.Item,{children:t.value})})})}function bEe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return _.jsx(Iv.Group,{name:`radioInput${e.id}`,label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:s,required:o})})]}),description:c,...n,error:Sb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(Os,{mt:"xs",children:[u?_.jsx(ot,{style:{textAlign:"center"},children:u}):null,a.map(f=>_.jsx(Iv,{disabled:t,value:f.value,label:f.label},f.label)),_.jsx(ot,{children:l})]})},e.id)}function Yit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(bEe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function Kit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(hG,{disabled:t,placeholder:l,label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Sb(e,n)})}function Xit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Sb(e,n);return _.jsx(Ri.Wrapper,{label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(mL,{disabled:t,marks:a,...n,h:40})})}function Qit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(uv,{disabled:t,placeholder:s,label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Sb(e,n)})}function Jit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(tG,{disabled:t,placeholder:s,label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Sb(e,n)})}function Zit({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=DG(),u=gm().uiConfig.enumerateQuestions??!1,l=N.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(Ee,{mb:"md",children:[e.type==="numerical"&&_.jsx(Kit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(Qit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(Jit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(Yit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(Wit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(Xit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(bEe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(qit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(Git,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function IO({config:e,location:t,status:n,style:r}){var w;const i=Hm(),s=qm(),o=n==null?void 0:n.answer,a=e,u=N.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(S=>S.location?S.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=Lh(),{updateResponseBlockValidation:c}=Mh(),f=Hit(u,i,o||{}),[d,h]=N.useState(void 0),[p,m]=N.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Lc(E=>E),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return N.useEffect(()=>{const E=u.find(S=>S.type==="iframe");if(g&&E){const S=E.id;f.setValues({...f.values,[S]:g[S]})}},[g]),N.useEffect(()=>{y&&h(y)},[y]),N.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:lv(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),_.jsxs("div",{style:r,children:[u.map((E,S)=>{var T,A;return _.jsx(qi.Fragment,{children:E.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(Zit,{storedAnswer:o?o[E.id]:void 0,answer:{...f.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E,index:S+1}),v&&p&&_.jsx(ot,{children:`The correct answer is: ${(A=(T=a.correctAnswer)==null?void 0:T.find(C=>C.id===E.id))==null?void 0:A.answer}`})]})},`${E.id}-${i}`)}),_.jsxs(Os,{justify:"right",gap:"xs",children:[v&&b&&_.jsx(Rn,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&_.jsx(Sit,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const ZS="@REVISIT_COMMS",est={minHeight:"500px",width:"100%",border:0};function tst({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Mh(),r=Lh(),i=Gwe(),s=N.useRef(null),o=N.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=qm(),u=Vm(),l=N.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${ZS}/${c}`,iframeId:o,message:f},"*")},[s,o]);return N.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${ZS}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${ZS}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${ZS}/ANSWERS`:r(t(d.message));break;case`${ZS}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${Oh}${e.path}?trialid=${a}&id=${o}`,style:est})}async function fY(e){const n=await(await fetch(`${Oh}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function Rv({email:e,path:t}){const n=wb();return _.jsxs(Nh,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(rs,{order:2,children:_.jsx(ot,{span:!0,c:"orange",children:"404"})}),_.jsxs(ot,{children:[_.jsx(ot,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(If,{h:"lg"}),_.jsxs(Cf,{children:[_.jsx(Cf.Item,{children:_.jsx(ot,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(Cf.Item,{children:_.jsxs(ot,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Sx,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const nst={maxWidth:"100%"};function rst({currentConfig:e}){const t={...nst,...e.style},[n,r]=N.useState(!0),[i,s]=N.useState(!1);return N.useEffect(()=>{async function o(){const a=await fY(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(xy,{mx:"auto",src:`${Oh}${e.path}`,style:t}):_.jsx(Rv,{path:e.path})}function Yp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ist(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Lx(e){let t,n,r;e.length!==2?(t=Yp,n=(a,u)=>Yp(e(a),u),r=(a,u)=>e(a)-u):(t=e===Yp||e===ist?e:sst,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function sst(){return 0}function _Ee(e){return e===null?NaN:+e}function*ost(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const wEe=Lx(Yp),O0=wEe.right,ast=wEe.left;Lx(_Ee).center;function ust(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function lst(e,t){const n=ust(e,t);return n&&Math.sqrt(n)}function Lae(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Ha{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Fae extends Map{constructor(t,n=SEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(WU(this,t))}has(t){return super.has(WU(this,t))}set(t,n){return super.set(EEe(this,t),n)}delete(t){return super.delete(xEe(this,t))}}class kO extends Set{constructor(t,n=SEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(WU(this,t))}add(t){return super.add(EEe(this,t))}delete(t){return super.delete(xEe(this,t))}}function WU({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function EEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function xEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function SEe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function cst(e,t){return Array.from(t,n=>e[n])}function fst(e=Yp){if(e===Yp)return TEe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function TEe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const dst=Math.sqrt(50),hst=Math.sqrt(10),pst=Math.sqrt(2);function RO(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=dst?10:s>=hst?5:s>=pst?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?RO(e,t,n*2):[a,u,l]}function GU(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?RO(t,e,n):RO(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function YU(e,t,n){return t=+t,e=+e,n=+n,RO(e,t,n)[2]}function $0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?YU(t,e,n):YU(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function d0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function KU(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function AEe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?TEe:fst(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));AEe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(eT(e,n,t),i(e[r],s)>0&&eT(e,n,r);o<a;){for(eT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?eT(e,n,a):(++a,eT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function eT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function XU(e,t,n){if(e=Float64Array.from(ost(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return KU(e);if(t>=1)return d0(e);var r,i=(r-1)*t,s=Math.floor(i),o=d0(AEe(e,s).subarray(0,s+1)),a=KU(e.subarray(s+1));return o+(a-o)*(i-s)}}function CEe(e,t,n=_Ee){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function mst(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function IEe(e,t){return XU(e,.5,t)}function*gst(e){for(const t of e)yield*t}function kEe(e){return Array.from(gst(e))}function Iu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function REe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function yst(e,...t){e=new kO(e),t=t.map(vst);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function vst(e){return e instanceof kO?e:new kO(e)}function bst(...e){const t=new kO;for(const n of e)for(const r of n)t.add(r);return t}var _st={value:()=>{}};function PL(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new MP(n)}function MP(e){this._=e}function wst(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}MP.prototype=PL.prototype={constructor:MP,on:function(e,t){var n=this._,r=wst(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Est(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=jae(n[i],e.name,t);else if(t==null)for(i in n)n[i]=jae(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new MP(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Est(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function jae(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=_st,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var QU="http://www.w3.org/1999/xhtml";const Bae={svg:"http://www.w3.org/2000/svg",xhtml:QU,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function DL(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Bae.hasOwnProperty(t)?{space:Bae[t],local:e}:e}function xst(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===QU&&t.documentElement.namespaceURI===QU?t.createElement(e):t.createElementNS(n,e)}}function Sst(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function NEe(e){var t=DL(e);return(t.local?Sst:xst)(t)}function Tst(){}function dY(e){return e==null?Tst:function(){return this.querySelector(e)}}function Ast(e){typeof e!="function"&&(e=dY(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ya(r,this._parents)}function PEe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Cst(){return[]}function DEe(e){return e==null?Cst:function(){return this.querySelectorAll(e)}}function Ist(e){return function(){return PEe(e.apply(this,arguments))}}function kst(e){typeof e=="function"?e=Ist(e):e=DEe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ya(r,i)}function OEe(e){return function(){return this.matches(e)}}function $Ee(e){return function(t){return t.matches(e)}}var Rst=Array.prototype.find;function Nst(e){return function(){return Rst.call(this.children,e)}}function Pst(){return this.firstElementChild}function Dst(e){return this.select(e==null?Pst:Nst(typeof e=="function"?e:$Ee(e)))}var Ost=Array.prototype.filter;function $st(){return Array.from(this.children)}function Mst(e){return function(){return Ost.call(this.children,e)}}function Lst(e){return this.selectAll(e==null?$st:Mst(typeof e=="function"?e:$Ee(e)))}function Fst(e){typeof e!="function"&&(e=OEe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ya(r,this._parents)}function MEe(e){return new Array(e.length)}function jst(){return new Ya(this._enter||this._groups.map(MEe),this._parents)}function NO(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}NO.prototype={constructor:NO,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Bst(e){return function(){return e}}function Ust(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new NO(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function zst(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new NO(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Vst(e){return e.__data__}function Hst(e,t){if(!arguments.length)return Array.from(this,Vst);var n=t?zst:Ust,r=this._parents,i=this._groups;typeof e!="function"&&(e=Bst(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=qst(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,E;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);w._next=E||null}}return o=new Ya(o,r),o._enter=a,o._exit=u,o}function qst(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Wst(){return new Ya(this._exit||this._groups.map(MEe),this._parents)}function Gst(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Yst(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Ya(a,this._parents)}function Kst(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Xst(e){e||(e=Qst);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Ya(i,this._parents).order()}function Qst(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Jst(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Zst(){return Array.from(this)}function eot(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function tot(){let e=0;for(const t of this)++e;return e}function not(){return!this.node()}function rot(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function iot(e){return function(){this.removeAttribute(e)}}function sot(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oot(e,t){return function(){this.setAttribute(e,t)}}function aot(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function uot(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function lot(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cot(e,t){var n=DL(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?sot:iot:typeof t=="function"?n.local?lot:uot:n.local?aot:oot)(n,t))}function LEe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function fot(e){return function(){this.style.removeProperty(e)}}function dot(e,t,n){return function(){this.style.setProperty(e,t,n)}}function hot(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function pot(e,t,n){return arguments.length>1?this.each((t==null?fot:typeof t=="function"?hot:dot)(e,t,n??"")):dE(this.node(),e)}function dE(e,t){return e.style.getPropertyValue(t)||LEe(e).getComputedStyle(e,null).getPropertyValue(t)}function mot(e){return function(){delete this[e]}}function got(e,t){return function(){this[e]=t}}function yot(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function vot(e,t){return arguments.length>1?this.each((t==null?mot:typeof t=="function"?yot:got)(e,t)):this.node()[e]}function FEe(e){return e.trim().split(/^|\s+/)}function hY(e){return e.classList||new jEe(e)}function jEe(e){this._node=e,this._names=FEe(e.getAttribute("class")||"")}jEe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function BEe(e,t){for(var n=hY(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function UEe(e,t){for(var n=hY(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function bot(e){return function(){BEe(this,e)}}function _ot(e){return function(){UEe(this,e)}}function wot(e,t){return function(){(t.apply(this,arguments)?BEe:UEe)(this,e)}}function Eot(e,t){var n=FEe(e+"");if(arguments.length<2){for(var r=hY(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?wot:t?bot:_ot)(n,t))}function xot(){this.textContent=""}function Sot(e){return function(){this.textContent=e}}function Tot(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Aot(e){return arguments.length?this.each(e==null?xot:(typeof e=="function"?Tot:Sot)(e)):this.node().textContent}function Cot(){this.innerHTML=""}function Iot(e){return function(){this.innerHTML=e}}function kot(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Rot(e){return arguments.length?this.each(e==null?Cot:(typeof e=="function"?kot:Iot)(e)):this.node().innerHTML}function Not(){this.nextSibling&&this.parentNode.appendChild(this)}function Pot(){return this.each(Not)}function Dot(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Oot(){return this.each(Dot)}function $ot(e){var t=typeof e=="function"?e:NEe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Mot(){return null}function Lot(e,t){var n=typeof e=="function"?e:NEe(e),r=t==null?Mot:typeof t=="function"?t:dY(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Fot(){var e=this.parentNode;e&&e.removeChild(this)}function jot(){return this.each(Fot)}function Bot(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Uot(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zot(e){return this.select(e?Uot:Bot)}function Vot(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Hot(e){return function(t){e.call(this,t,this.__data__)}}function qot(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Wot(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Got(e,t,n){return function(){var r=this.__on,i,s=Hot(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Yot(e,t,n){var r=qot(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Got:Wot,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function zEe(e,t,n){var r=LEe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Kot(e,t){return function(){return zEe(this,e,t)}}function Xot(e,t){return function(){return zEe(this,e,t.apply(this,arguments))}}function Qot(e,t){return this.each((typeof t=="function"?Xot:Kot)(e,t))}function*Jot(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var pY=[null];function Ya(e,t){this._groups=e,this._parents=t}function zI(){return new Ya([[document.documentElement]],pY)}function Zot(){return this}Ya.prototype=zI.prototype={constructor:Ya,select:Ast,selectAll:kst,selectChild:Dst,selectChildren:Lst,filter:Fst,data:Hst,enter:jst,exit:Wst,join:Gst,merge:Yst,selection:Zot,order:Kst,sort:Xst,call:Jst,nodes:Zst,node:eot,size:tot,empty:not,each:rot,attr:cot,style:pot,property:vot,classed:Eot,text:Aot,html:Rot,raise:Pot,lower:Oot,append:$ot,insert:Lot,remove:jot,clone:zot,datum:Vot,on:Yot,dispatch:Qot,[Symbol.iterator]:Jot};function ps(e){return typeof e=="string"?new Ya([[document.querySelector(e)]],[document.documentElement]):new Ya([[e]],pY)}function eat(e){let t;for(;t=e.sourceEvent;)e=t;return e}function JU(e,t){if(e=eat(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function tat(e){return typeof e=="string"?new Ya([document.querySelectorAll(e)],[document.documentElement]):new Ya([PEe(e)],pY)}const ZU={capture:!0,passive:!1};function e7(e){e.preventDefault(),e.stopImmediatePropagation()}function nat(e){var t=e.document.documentElement,n=ps(e).on("dragstart.drag",e7,ZU);"onselectstart"in t?n.on("selectstart.drag",e7,ZU):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function rat(e,t){var n=e.document.documentElement,r=ps(e).on("dragstart.drag",null);t&&(r.on("click.drag",e7,ZU),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Fx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function VI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ay(){}var Nv=.7,hE=1/Nv,Ew="\\s*([+-]?\\d+)\\s*",s2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iat=/^#([0-9a-f]{3,8})$/,sat=new RegExp(`^rgb\\(${Ew},${Ew},${Ew}\\)$`),oat=new RegExp(`^rgb\\(${Qd},${Qd},${Qd}\\)$`),aat=new RegExp(`^rgba\\(${Ew},${Ew},${Ew},${s2}\\)$`),uat=new RegExp(`^rgba\\(${Qd},${Qd},${Qd},${s2}\\)$`),lat=new RegExp(`^hsl\\(${s2},${Qd},${Qd}\\)$`),cat=new RegExp(`^hsla\\(${s2},${Qd},${Qd},${s2}\\)$`),Uae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fx(Ay,Pv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zae,formatHex:zae,formatHex8:fat,formatHsl:dat,formatRgb:Vae,toString:Vae});function zae(){return this.rgb().formatHex()}function fat(){return this.rgb().formatHex8()}function dat(){return VEe(this).formatHsl()}function Vae(){return this.rgb().formatRgb()}function Pv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iat.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Hae(t):n===3?new Zs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sat.exec(e))?new Zs(t[1],t[2],t[3],1):(t=oat.exec(e))?new Zs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=aat.exec(e))?rN(t[1],t[2],t[3],t[4]):(t=uat.exec(e))?rN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lat.exec(e))?Gae(t[1],t[2]/100,t[3]/100,1):(t=cat.exec(e))?Gae(t[1],t[2]/100,t[3]/100,t[4]):Uae.hasOwnProperty(e)?Hae(Uae[e]):e==="transparent"?new Zs(NaN,NaN,NaN,0):null}function Hae(e){return new Zs(e>>16&255,e>>8&255,e&255,1)}function rN(e,t,n,r){return r<=0&&(e=t=n=NaN),new Zs(e,t,n,r)}function mY(e){return e instanceof Ay||(e=Pv(e)),e?(e=e.rgb(),new Zs(e.r,e.g,e.b,e.opacity)):new Zs}function M0(e,t,n,r){return arguments.length===1?mY(e):new Zs(e,t,n,r??1)}function Zs(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Fx(Zs,M0,VI(Ay,{brighter(e){return e=e==null?hE:Math.pow(hE,e),new Zs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nv:Math.pow(Nv,e),new Zs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zs(cv(this.r),cv(this.g),cv(this.b),PO(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qae,formatHex:qae,formatHex8:hat,formatRgb:Wae,toString:Wae}));function qae(){return`#${q1(this.r)}${q1(this.g)}${q1(this.b)}`}function hat(){return`#${q1(this.r)}${q1(this.g)}${q1(this.b)}${q1((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wae(){const e=PO(this.opacity);return`${e===1?"rgb(":"rgba("}${cv(this.r)}, ${cv(this.g)}, ${cv(this.b)}${e===1?")":`, ${e})`}`}function PO(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function q1(e){return e=cv(e),(e<16?"0":"")+e.toString(16)}function Gae(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hf(e,t,n,r)}function VEe(e){if(e instanceof hf)return new hf(e.h,e.s,e.l,e.opacity);if(e instanceof Ay||(e=Pv(e)),!e)return new hf;if(e instanceof hf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new hf(o,a,u,e.opacity)}function DO(e,t,n,r){return arguments.length===1?VEe(e):new hf(e,t,n,r??1)}function hf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Fx(hf,DO,VI(Ay,{brighter(e){return e=e==null?hE:Math.pow(hE,e),new hf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nv:Math.pow(Nv,e),new hf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Zs(x8(e>=240?e-240:e+120,i,r),x8(e,i,r),x8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new hf(Yae(this.h),iN(this.s),iN(this.l),PO(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=PO(this.opacity);return`${e===1?"hsl(":"hsla("}${Yae(this.h)}, ${iN(this.s)*100}%, ${iN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Yae(e){return e=(e||0)%360,e<0?e+360:e}function iN(e){return Math.max(0,Math.min(1,e||0))}function x8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const HEe=Math.PI/180,qEe=180/Math.PI,OO=18,WEe=.96422,GEe=1,YEe=.82521,KEe=4/29,xw=6/29,XEe=3*xw*xw,pat=xw*xw*xw;function QEe(e){if(e instanceof Jd)return new Jd(e.l,e.a,e.b,e.opacity);if(e instanceof Mp)return JEe(e);e instanceof Zs||(e=mY(e));var t=C8(e.r),n=C8(e.g),r=C8(e.b),i=S8((.2225045*t+.7168786*n+.0606169*r)/GEe),s,o;return t===n&&n===r?s=o=i:(s=S8((.4360747*t+.3850649*n+.1430804*r)/WEe),o=S8((.0139322*t+.0971045*n+.7141733*r)/YEe)),new Jd(116*i-16,500*(s-i),200*(i-o),e.opacity)}function $O(e,t,n,r){return arguments.length===1?QEe(e):new Jd(e,t,n,r??1)}function Jd(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Fx(Jd,$O,VI(Ay,{brighter(e){return new Jd(this.l+OO*(e??1),this.a,this.b,this.opacity)},darker(e){return new Jd(this.l-OO*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=WEe*T8(t),e=GEe*T8(e),n=YEe*T8(n),new Zs(A8(3.1338561*t-1.6168667*e-.4906146*n),A8(-.9787684*t+1.9161415*e+.033454*n),A8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function S8(e){return e>pat?Math.pow(e,1/3):e/XEe+KEe}function T8(e){return e>xw?e*e*e:XEe*(e-KEe)}function A8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function C8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function mat(e){if(e instanceof Mp)return new Mp(e.h,e.c,e.l,e.opacity);if(e instanceof Jd||(e=QEe(e)),e.a===0&&e.b===0)return new Mp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*qEe;return new Mp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function MO(e,t,n,r){return arguments.length===1?mat(e):new Mp(e,t,n,r??1)}function Mp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function JEe(e){if(isNaN(e.h))return new Jd(e.l,0,0,e.opacity);var t=e.h*HEe;return new Jd(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Fx(Mp,MO,VI(Ay,{brighter(e){return new Mp(this.h,this.c,this.l+OO*(e??1),this.opacity)},darker(e){return new Mp(this.h,this.c,this.l-OO*(e??1),this.opacity)},rgb(){return JEe(this).rgb()}}));var ZEe=-.14861,gY=1.78277,yY=-.29227,OL=-.90649,o2=1.97294,Kae=o2*OL,Xae=o2*gY,Qae=gY*yY-OL*ZEe;function gat(e){if(e instanceof fv)return new fv(e.h,e.s,e.l,e.opacity);e instanceof Zs||(e=mY(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Qae*r+Kae*t-Xae*n)/(Qae+Kae-Xae),s=r-i,o=(o2*(n-i)-yY*s)/OL,a=Math.sqrt(o*o+s*s)/(o2*i*(1-i)),u=a?Math.atan2(o,s)*qEe-120:NaN;return new fv(u<0?u+360:u,a,i,e.opacity)}function t7(e,t,n,r){return arguments.length===1?gat(e):new fv(e,t,n,r??1)}function fv(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Fx(fv,t7,VI(Ay,{brighter(e){return e=e==null?hE:Math.pow(hE,e),new fv(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nv:Math.pow(Nv,e),new fv(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*HEe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Zs(255*(t+n*(ZEe*r+gY*i)),255*(t+n*(yY*r+OL*i)),255*(t+n*(o2*r)),this.opacity)}}));function exe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function txe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return exe((n-r/t)*t,o,i,s,a)}}function nxe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return exe((n-r/t)*t,i,s,o,a)}}const $L=e=>()=>e;function rxe(e,t){return function(n){return e+n*t}}function yat(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ML(e,t){var n=t-e;return n?rxe(e,n>180||n<-180?n-360*Math.round(n/360):n):$L(isNaN(e)?t:e)}function vat(e){return(e=+e)==1?eo:function(t,n){return n-t?yat(t,n,e):$L(isNaN(t)?n:t)}}function eo(e,t){var n=t-e;return n?rxe(e,n):$L(isNaN(e)?t:e)}const a2=function e(t){var n=vat(t);function r(i,s){var o=n((i=M0(i)).r,(s=M0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=eo(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function ixe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=M0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var bat=ixe(txe),_at=ixe(nxe);function vY(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function sxe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wat(e,t){return(sxe(t)?vY:oxe)(e,t)}function oxe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Wm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function axe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function oc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function uxe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Wm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var n7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,I8=new RegExp(n7.source,"g");function Eat(e){return function(){return e}}function xat(e){return function(t){return e(t)+""}}function bY(e,t){var n=n7.lastIndex=I8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=n7.exec(e))&&(i=I8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:oc(r,i)})),n=I8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?xat(u[0].x):Eat(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Wm(e,t){var n=typeof t,r;return t==null||n==="boolean"?$L(t):(n==="number"?oc:n==="string"?(r=Pv(t))?(t=r,a2):bY:t instanceof Pv?a2:t instanceof Date?axe:sxe(t)?vY:Array.isArray(t)?oxe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?uxe:oc)(e,t)}function Sat(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Tat(e,t){var n=ML(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function HI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Jae=180/Math.PI,r7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lxe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Jae,skewX:Math.atan(u)*Jae,scaleX:o,scaleY:a}}var sN;function Aat(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?r7:lxe(t.a,t.b,t.c,t.d,t.e,t.f)}function Cat(e){return e==null||(sN||(sN=document.createElementNS("http://www.w3.org/2000/svg","g")),sN.setAttribute("transform",e),!(e=sN.transform.baseVal.consolidate()))?r7:(e=e.matrix,lxe(e.a,e.b,e.c,e.d,e.e,e.f))}function cxe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:oc(l,f)},{i:m-2,x:oc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:oc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:oc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:oc(l,f)},{i:m-2,x:oc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var fxe=cxe(Aat,"px, ","px)","deg)"),dxe=cxe(Cat,", ",")",")"),Iat=1e-12;function Zae(e){return((e=Math.exp(e))+1/e)/2}function kat(e){return((e=Math.exp(e))-1/e)/2}function Rat(e){return((e=Math.exp(2*e))-1)/(e+1)}const Nat=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<Iat)y=Math.log(d/l)/t,g=function(T){return[a+T*h,u+T*p,l*Math.exp(t*T*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-E)/t,g=function(T){var A=T*y,C=Zae(E),I=l/(n*v)*(C*Rat(t*A+E)-kat(E));return[a+I*h,u+I*p,l*C/Zae(t*A+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function hxe(e){return function(t,n){var r=e((t=DO(t)).h,(n=DO(n)).h),i=eo(t.s,n.s),s=eo(t.l,n.l),o=eo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Pat=hxe(ML);var Dat=hxe(eo);function Oat(e,t){var n=eo((e=$O(e)).l,(t=$O(t)).l),r=eo(e.a,t.a),i=eo(e.b,t.b),s=eo(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function pxe(e){return function(t,n){var r=e((t=MO(t)).h,(n=MO(n)).h),i=eo(t.c,n.c),s=eo(t.l,n.l),o=eo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const $at=pxe(ML);var Mat=pxe(eo);function mxe(e){return function t(n){n=+n;function r(i,s){var o=e((i=t7(i)).h,(s=t7(s)).h),a=eo(i.s,s.s),u=eo(i.l,s.l),l=eo(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Lat=mxe(ML);var Fat=mxe(eo);function _Y(e,t){t===void 0&&(t=e,e=Wm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function jat(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Bat=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Wm,interpolateArray:wat,interpolateBasis:txe,interpolateBasisClosed:nxe,interpolateCubehelix:Lat,interpolateCubehelixLong:Fat,interpolateDate:axe,interpolateDiscrete:Sat,interpolateHcl:$at,interpolateHclLong:Mat,interpolateHsl:Pat,interpolateHslLong:Dat,interpolateHue:Tat,interpolateLab:Oat,interpolateNumber:oc,interpolateNumberArray:vY,interpolateObject:uxe,interpolateRgb:a2,interpolateRgbBasis:bat,interpolateRgbBasisClosed:_at,interpolateRound:HI,interpolateString:bY,interpolateTransformCss:fxe,interpolateTransformSvg:dxe,interpolateZoom:Nat,piecewise:_Y,quantize:jat},Symbol.toStringTag,{value:"Module"}));var pE=0,WT=0,tT=0,gxe=1e3,LO,GT,FO=0,Dv=0,LL=0,u2=typeof performance=="object"&&performance.now?performance:Date,yxe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function FL(){return Dv||(yxe(Uat),Dv=u2.now()+LL)}function Uat(){Dv=0}function l2(){this._call=this._time=this._next=null}l2.prototype=wY.prototype={constructor:l2,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?FL():+n)+(t==null?0:+t),!this._next&&GT!==this&&(GT?GT._next=this:LO=this,GT=this),this._call=e,this._time=n,i7()},stop:function(){this._call&&(this._call=null,this._time=1/0,i7())}};function wY(e,t,n){var r=new l2;return r.restart(e,t,n),r}function zat(){FL(),++pE;for(var e=LO,t;e;)(t=Dv-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pE}function eue(){Dv=(FO=u2.now())+LL,pE=WT=0;try{zat()}finally{pE=0,Hat(),Dv=0}}function Vat(){var e=u2.now(),t=e-FO;t>gxe&&(LL-=t,FO=e)}function Hat(){for(var e,t=LO,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:LO=n);GT=e,i7(r)}function i7(e){if(!pE){WT&&(WT=clearTimeout(WT));var t=e-Dv;t>24?(e<1/0&&(WT=setTimeout(eue,e-u2.now()-LL)),tT&&(tT=clearInterval(tT))):(tT||(FO=u2.now(),tT=setInterval(Vat,gxe)),pE=1,yxe(eue))}}function tue(e,t,n){var r=new l2;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function qat(e,t,n){var r=new l2,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?FL():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Wat=PL("start","end","cancel","interrupt"),Gat=[],vxe=0,nue=1,s7=2,LP=3,rue=4,o7=5,FP=6;function jL(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Yat(e,n,{name:t,index:r,group:i,on:Wat,tween:Gat,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:vxe})}function EY(e,t){var n=Yf(e,t);if(n.state>vxe)throw new Error("too late; already scheduled");return n}function Fh(e,t){var n=Yf(e,t);if(n.state>LP)throw new Error("too late; already running");return n}function Yf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Yat(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=wY(s,0,n.time);function s(l){n.state=nue,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==nue)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===LP)return tue(o);h.state===rue?(h.state=FP,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=FP,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(tue(function(){n.state===LP&&(n.state=rue,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=s7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===s7){for(n.state=LP,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=o7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===o7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=FP,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function a7(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>s7&&r.state<o7,r.state=FP,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Kat(e){return this.each(function(){a7(this,e)})}function Xat(e,t){var n,r;return function(){var i=Fh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Qat(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Fh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Jat(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Yf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Xat:Qat)(n,e,t))}function xY(e,t,n){var r=e._id;return e.each(function(){var i=Fh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Yf(i,r).value[t]}}function bxe(e,t){var n;return(typeof t=="number"?oc:t instanceof Pv?a2:(n=Pv(t))?(t=n,a2):bY)(e,t)}function Zat(e){return function(){this.removeAttribute(e)}}function eut(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tut(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function nut(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function rut(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function iut(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function sut(e,t){var n=DL(e),r=n==="transform"?dxe:bxe;return this.attrTween(e,typeof t=="function"?(n.local?iut:rut)(n,r,xY(this,"attr."+e,t)):t==null?(n.local?eut:Zat)(n):(n.local?nut:tut)(n,r,t))}function out(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function aut(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function uut(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&aut(e,s)),n}return i._value=t,i}function lut(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&out(e,s)),n}return i._value=t,i}function cut(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=DL(e);return this.tween(n,(r.local?uut:lut)(r,t))}function fut(e,t){return function(){EY(this,e).delay=+t.apply(this,arguments)}}function dut(e,t){return t=+t,function(){EY(this,e).delay=t}}function hut(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fut:dut)(t,e)):Yf(this.node(),t).delay}function put(e,t){return function(){Fh(this,e).duration=+t.apply(this,arguments)}}function mut(e,t){return t=+t,function(){Fh(this,e).duration=t}}function gut(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?put:mut)(t,e)):Yf(this.node(),t).duration}function yut(e,t){if(typeof t!="function")throw new Error;return function(){Fh(this,e).ease=t}}function vut(e){var t=this._id;return arguments.length?this.each(yut(t,e)):Yf(this.node(),t).ease}function but(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Fh(this,e).ease=n}}function _ut(e){if(typeof e!="function")throw new Error;return this.each(but(this._id,e))}function wut(e){typeof e!="function"&&(e=OEe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new ym(r,this._parents,this._name,this._id)}function Eut(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new ym(o,this._parents,this._name,this._id)}function xut(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Sut(e,t,n){var r,i,s=xut(t)?EY:Fh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Tut(e,t){var n=this._id;return arguments.length<2?Yf(this.node(),n).on.on(e):this.each(Sut(n,e,t))}function Aut(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Cut(){return this.on("end.remove",Aut(this._id))}function Iut(e){var t=this._name,n=this._id;typeof e!="function"&&(e=dY(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,jL(l[d],t,n,d,l,Yf(c,n)));return new ym(s,this._parents,t,n)}function kut(e){var t=this._name,n=this._id;typeof e!="function"&&(e=DEe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Yf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&jL(h,t,n,m,d,p);s.push(d),o.push(c)}return new ym(s,o,t,n)}var Rut=zI.prototype.constructor;function Nut(){return new Rut(this._groups,this._parents)}function Put(e,t){var n,r,i;return function(){var s=dE(this,e),o=(this.style.removeProperty(e),dE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function _xe(e){return function(){this.style.removeProperty(e)}}function Dut(e,t,n){var r,i=n+"",s;return function(){var o=dE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Out(e,t,n){var r,i,s;return function(){var o=dE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),dE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function $ut(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Fh(this,e),l=u.on,c=u.value[s]==null?a||(a=_xe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Mut(e,t,n){var r=(e+="")=="transform"?fxe:bxe;return t==null?this.styleTween(e,Put(e,r)).on("end.style."+e,_xe(e)):typeof t=="function"?this.styleTween(e,Out(e,r,xY(this,"style."+e,t))).each($ut(this._id,e)):this.styleTween(e,Dut(e,r,t),n).on("end.style."+e,null)}function Lut(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Fut(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Lut(e,o,n)),r}return s._value=t,s}function jut(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Fut(e,t,n??""))}function But(e){return function(){this.textContent=e}}function Uut(e){return function(){var t=e(this);this.textContent=t??""}}function zut(e){return this.tween("text",typeof e=="function"?Uut(xY(this,"text",e)):But(e==null?"":e+""))}function Vut(e){return function(t){this.textContent=e.call(this,t)}}function Hut(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Vut(i)),t}return r._value=e,r}function qut(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Hut(e))}function Wut(){for(var e=this._name,t=this._id,n=wxe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Yf(u,t);jL(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ym(r,this._parents,e,n)}function Gut(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Fh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Yut=0;function ym(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function wxe(){return++Yut}var op=zI.prototype;ym.prototype={constructor:ym,select:Iut,selectAll:kut,selectChild:op.selectChild,selectChildren:op.selectChildren,filter:wut,merge:Eut,selection:Nut,transition:Wut,call:op.call,nodes:op.nodes,node:op.node,size:op.size,empty:op.empty,each:op.each,on:Tut,attr:sut,attrTween:cut,style:Mut,styleTween:jut,text:zut,textTween:qut,remove:Cut,tween:Jat,delay:hut,duration:gut,ease:vut,easeVarying:_ut,end:Gut,[Symbol.iterator]:op[Symbol.iterator]};const Kut=e=>+e;function Xut(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Qut={time:null,delay:0,duration:250,ease:Xut};function Jut(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Zut(e){var t,n;e instanceof ym?(t=e._id,e=e._name):(t=wxe(),(n=Qut).time=FL(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&jL(u,e,t,l,o,n||Jut(u,t));return new ym(r,this._parents,e,t)}zI.prototype.interrupt=Kat;zI.prototype.transition=Zut;const k8=e=>()=>e;function elt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function tlt(e){e.stopImmediatePropagation()}function R8(e){e.preventDefault(),e.stopImmediatePropagation()}var iue={name:"drag"},N8={name:"space"},o_={name:"handle"},a_={name:"center"};const{abs:sue,max:qo,min:Wo}=Math;function oue(e){return[+e[0],+e[1]]}function u7(e){return[oue(e[0]),oue(e[1])]}var jP={name:"x",handles:["w","e"].map(c2),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},BP={name:"y",handles:["n","s"].map(c2),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},nlt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(c2),input:function(e){return e==null?null:u7(e)},output:function(e){return e}},ap={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},aue={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},uue={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},rlt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ilt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function c2(e){return{type:e}}function slt(e){return!e.ctrlKey&&!e.button}function olt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function alt(){return navigator.maxTouchPoints||"ontouchstart"in this}function P8(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function ult(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function llt(){return SY(jP)}function clt(){return SY(BP)}function flt(){return SY(nlt)}function SY(e){var t=olt,n=slt,r=alt,i=!0,s=PL("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([c2("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ap.overlay).merge(y).each(function(){var b=P8(this).extent;ps(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([c2("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ap.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return ap[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,E=c(b,arguments),S=w.selection,T=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),A=Wm(S,T);function C(I){w.selection=I===1&&T===null?null:A(I),l.call(b),E.brush()}return S!==null&&T!==null?C:C(1)}):g.each(function(){var b=this,w=arguments,E=b.__brush,S=e.input(typeof y=="function"?y.apply(b,w):y,E.extent),T=c(b,w).beforestart();a7(b),E.selection=S===null?null:S,l.call(b),T.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=ps(this),y=P8(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=ps(this.that).datum();s.call(g,this.that,new elt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?iue:i&&g.altKey?a_:o_,w=e===BP?null:rlt[v],E=e===jP?null:ilt[v],S=P8(y),T=S.extent,A=S.selection,C=T[0][0],I,R,M=T[0][1],P,O,F=T[1][0],L,B,U=T[1][1],H,D,z=0,W=0,j,q=w&&E&&i&&g.shiftKey,G,ne,ce=Array.from(g.touches||[g],be=>{const ke=be.identifier;return be=JU(be,y),be.point0=be.slice(),be.identifier=ke,be});a7(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){A&&(j=!0);const be=[ce[0],ce[1]||ce[0]];S.selection=A=[[I=e===BP?C:Wo(be[0][0],be[1][0]),P=e===jP?M:Wo(be[0][1],be[1][1])],[L=e===BP?F:qo(be[0][0],be[1][0]),H=e===jP?U:qo(be[0][1],be[1][1])]],ce.length>1&&Ke(g)}else I=A[0][0],P=A[0][1],L=A[1][0],H=A[1][1];R=I,O=P,B=L,D=H;var he=ps(y).attr("pointer-events","none"),ye=he.selectAll(".overlay").attr("cursor",ap[v]);if(g.touches)de.moved=ve,de.ended=Ue;else{var Ie=ps(g.view).on("mousemove.brush",ve,!0).on("mouseup.brush",Ue,!0);i&&Ie.on("keydown.brush",gt,!0).on("keyup.brush",rt,!0),nat(g.view)}l.call(y),de.start(g,b.name);function ve(be){for(const ke of be.changedTouches||[be])for(const ze of ce)ze.identifier===ke.identifier&&(ze.cur=JU(ke,y));if(q&&!G&&!ne&&ce.length===1){const ke=ce[0];sue(ke.cur[0]-ke[0])>sue(ke.cur[1]-ke[1])?ne=!0:G=!0}for(const ke of ce)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);j=!0,R8(be),Ke(be)}function Ke(be){const ke=ce[0],ze=ke.point0;var ct;switch(z=ke[0]-ze[0],W=ke[1]-ze[1],b){case N8:case iue:{w&&(z=qo(C-I,Wo(F-L,z)),R=I+z,B=L+z),E&&(W=qo(M-P,Wo(U-H,W)),O=P+W,D=H+W);break}case o_:{ce[1]?(w&&(R=qo(C,Wo(F,ce[0][0])),B=qo(C,Wo(F,ce[1][0])),w=1),E&&(O=qo(M,Wo(U,ce[0][1])),D=qo(M,Wo(U,ce[1][1])),E=1)):(w<0?(z=qo(C-I,Wo(F-I,z)),R=I+z,B=L):w>0&&(z=qo(C-L,Wo(F-L,z)),R=I,B=L+z),E<0?(W=qo(M-P,Wo(U-P,W)),O=P+W,D=H):E>0&&(W=qo(M-H,Wo(U-H,W)),O=P,D=H+W));break}case a_:{w&&(R=qo(C,Wo(F,I-z*w)),B=qo(C,Wo(F,L+z*w))),E&&(O=qo(M,Wo(U,P-W*E)),D=qo(M,Wo(U,H+W*E)));break}}B<R&&(w*=-1,ct=I,I=L,L=ct,ct=R,R=B,B=ct,v in aue&&ye.attr("cursor",ap[v=aue[v]])),D<O&&(E*=-1,ct=P,P=H,H=ct,ct=O,O=D,D=ct,v in uue&&ye.attr("cursor",ap[v=uue[v]])),S.selection&&(A=S.selection),G&&(R=A[0][0],B=A[1][0]),ne&&(O=A[0][1],D=A[1][1]),(A[0][0]!==R||A[0][1]!==O||A[1][0]!==B||A[1][1]!==D)&&(S.selection=[[R,O],[B,D]],l.call(y),de.brush(be,b.name))}function Ue(be){if(tlt(be),be.touches){if(be.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else rat(be.view,j),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ye.attr("cursor",ap.overlay),S.selection&&(A=S.selection),ult(A)&&(S.selection=null,l.call(y)),de.end(be,b.name)}function gt(be){switch(be.keyCode){case 16:{q=w&&E;break}case 18:{b===o_&&(w&&(L=B-z*w,I=R+z*w),E&&(H=D-W*E,P=O+W*E),b=a_,Ke(be));break}case 32:{(b===o_||b===a_)&&(w<0?L=B-z:w>0&&(I=R-z),E<0?H=D-W:E>0&&(P=O-W),b=N8,ye.attr("cursor",ap.selection),Ke(be));break}default:return}R8(be)}function rt(be){switch(be.keyCode){case 16:{q&&(G=ne=q=!1,Ke(be));break}case 18:{b===a_&&(w<0?L=B:w>0&&(I=R),E<0?H=D:E>0&&(P=O),b=o_,Ke(be));break}case 32:{b===N8&&(be.altKey?(w&&(L=B-z*w,I=R+z*w),E&&(H=D-W*E,P=O+W*E),b=a_):(w<0?L=B:w>0&&(I=R),E<0?H=D:E>0&&(P=O),b=o_),ye.attr("cursor",ap[v]),Ke(be));break}default:return}R8(be)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=u7(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:k8(u7(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:k8(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:k8(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const l7=Math.PI,c7=2*l7,p1=1e-6,dlt=c7-p1;function Exe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function hlt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Exe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let TY=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Exe:hlt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>p1)if(!(Math.abs(f*u-l*c)>p1)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((l7-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>p1&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>p1||Math.abs(this._y1-c)>p1)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%c7+c7),d>dlt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>p1&&this._append`A${r},${r},0,${+(d>=l7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function BL(){return new TY}BL.prototype=TY.prototype;const Kp=11102230246251565e-32,Go=134217729,plt=(3+8*Kp)*Kp;function D8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function mlt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function qI(e){return new Float64Array(e)}const glt=(3+16*Kp)*Kp,ylt=(2+12*Kp)*Kp,vlt=(9+64*Kp)*Kp*Kp,u_=qI(4),lue=qI(8),cue=qI(12),fue=qI(16),Ia=qI(4);function blt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,S,T,A;const C=e-i,I=n-i,R=t-s,M=r-s;w=C*M,d=Go*C,h=d-(d-C),p=C-h,d=Go*M,m=d-(d-M),g=M-m,E=p*g-(w-h*m-p*m-h*g),S=R*I,d=Go*R,h=d-(d-R),p=R-h,d=Go*I,m=d-(d-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,u_[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,u_[1]=b-(y+f)+(f-S),A=v+y,f=A-v,u_[2]=v-(A-f)+(y-f),u_[3]=A;let P=mlt(4,u_),O=ylt*o;if(P>=O||-P>=O||(f=e-C,a=e-(C+f)+(f-i),f=n-I,l=n-(I+f)+(f-i),f=t-R,u=t-(R+f)+(f-s),f=r-M,c=r-(M+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(O=vlt*o+plt*Math.abs(P),P+=C*c+M*a-(R*l+I*u),P>=O||-P>=O))return P;w=a*M,d=Go*a,h=d-(d-a),p=a-h,d=Go*M,m=d-(d-M),g=M-m,E=p*g-(w-h*m-p*m-h*g),S=u*I,d=Go*u,h=d-(d-u),p=u-h,d=Go*I,m=d-(d-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Ia[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Ia[1]=b-(y+f)+(f-S),A=v+y,f=A-v,Ia[2]=v-(A-f)+(y-f),Ia[3]=A;const F=D8(4,u_,4,Ia,lue);w=C*c,d=Go*C,h=d-(d-C),p=C-h,d=Go*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=R*l,d=Go*R,h=d-(d-R),p=R-h,d=Go*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Ia[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Ia[1]=b-(y+f)+(f-S),A=v+y,f=A-v,Ia[2]=v-(A-f)+(y-f),Ia[3]=A;const L=D8(F,lue,4,Ia,cue);w=a*c,d=Go*a,h=d-(d-a),p=a-h,d=Go*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=u*l,d=Go*u,h=d-(d-u),p=u-h,d=Go*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Ia[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Ia[1]=b-(y+f)+(f-S),A=v+y,f=A-v,Ia[2]=v-(A-f)+(y-f),Ia[3]=A;const B=D8(L,cue,4,Ia,fue);return fue[B-1]}function oN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=glt*l?u:-blt(e,t,n,r,i,s,l)}const due=Math.pow(2,-52),aN=new Uint32Array(512);class jO{static from(t,n=Slt,r=Tlt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new jO(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const I=t[2*C],R=t[2*C+1];I<a&&(a=I),R<u&&(u=R),I>l&&(l=I),R>c&&(c=R),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let C=0,I=1/0;C<o;C++){const R=O8(f,d,t[2*C],t[2*C+1]);R<I&&(h=C,I=R)}const g=t[2*h],y=t[2*h+1];for(let C=0,I=1/0;C<o;C++){if(C===h)continue;const R=O8(g,y,t[2*C],t[2*C+1]);R<I&&R>0&&(p=C,I=R)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let C=0;C<o;C++){if(C===h||C===p)continue;const I=Elt(g,y,v,b,t[2*C],t[2*C+1]);I<w&&(m=C,w=I)}let E=t[2*m],S=t[2*m+1];if(w===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];Q_(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let I=0;for(let R=0,M=-1/0;R<o;R++){const P=this._ids[R],O=this._dists[P];O>M&&(C[I++]=P,M=O)}this.hull=C.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(oN(g,y,v,b,E,S)<0){const C=p,I=v,R=b;p=m,v=E,b=S,m=C,E=I,S=R}const T=xlt(g,y,v,b,E,S);this._cx=T.x,this._cy=T.y;for(let C=0;C<o;C++)this._dists[C]=O8(t[2*C],t[2*C+1],T.x,T.y);Q_(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let C=0,I,R;C<this._ids.length;C++){const M=this._ids[C],P=t[2*M],O=t[2*M+1];if(C>0&&Math.abs(P-I)<=due&&Math.abs(O-R)<=due||(I=P,R=O,M===h||M===p||M===m))continue;let F=0;for(let D=0,z=this._hashKey(P,O);D<this._hashSize&&(F=s[(z+D)%this._hashSize],!(F!==-1&&F!==r[F]));D++);F=n[F];let L=F,B;for(;B=r[L],oN(P,O,t[2*L],t[2*L+1],t[2*B],t[2*B+1])>=0;)if(L=B,L===F){L=-1;break}if(L===-1)continue;let U=this._addTriangle(L,M,r[L],-1,-1,i[L]);i[M]=this._legalize(U+2),i[L]=U,A++;let H=r[L];for(;B=r[H],oN(P,O,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(H,M,B,i[M],-1,i[H]),i[M]=this._legalize(U+2),r[H]=H,A--,H=B;if(L===F)for(;B=n[L],oN(P,O,t[2*B],t[2*B+1],t[2*L],t[2*L+1])<0;)U=this._addTriangle(B,M,L,-1,i[L],i[B]),this._legalize(U+2),i[B]=U,r[L]=L,A--,L=B;this._hullStart=n[M]=L,r[L]=n[H]=M,r[M]=H,s[this._hashKey(P,O)]=M,s[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(A);for(let C=0,I=this._hullStart;C<A;C++)this.hull[C]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(_lt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=aN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(wlt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<aN.length&&(aN[s++]=v)}else{if(s===0)break;t=aN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function _lt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function O8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function wlt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function Elt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function xlt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Q_(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;nT(e,i,s),t[e[n]]>t[e[r]]&&nT(e,n,r),t[e[s]]>t[e[r]]&&nT(e,s,r),t[e[n]]>t[e[s]]&&nT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;nT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Q_(e,t,s,r),Q_(e,t,n,o-1)):(Q_(e,t,n,o-1),Q_(e,t,s,r))}}function nT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Slt(e){return e[0]}function Tlt(e){return e[1]}const hue=1e-6;class W1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>hue||Math.abs(this._y1-s)>hue)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class f7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Alt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,S=r[m+2]*2,T=t[w],A=t[w+1],C=t[E],I=t[E+1],R=t[S],M=t[S+1],P=C-T,O=I-A,F=R-T,L=M-A,B=(P*L-O*F)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-T)*L-(o-A)*F);v=(T+R)/2-U*L,b=(A+M)/2+U*F}else{const U=1/B,H=P*P+O*O,D=F*F+L*L;v=T+(L*H-O*D)*U,b=A+(P*D-F*H)*U}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new W1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new W1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new W1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new f7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Clt=2*Math.PI,l_=Math.pow;function Ilt(e){return e[0]}function klt(e){return e[1]}function Rlt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Nlt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class AY{static from(t,n=Ilt,r=klt,i){return new AY("length"in t?Plt(t,n,r,i):Float64Array.from(Dlt(t,n,r,i)))}constructor(t){this._delaunator=new jO(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Rlt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Nlt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new jO(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Alt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=l_(n-l[t*2],2)+l_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=l_(n-l[p*2],2)+l_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&l_(n-l[h*2],2)+l_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new W1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new W1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Clt)}return r&&r.value()}renderHull(t){const n=t==null?t=new W1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new f7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new W1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new f7;return this.renderTriangle(t,n),n.value()}}function Plt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Dlt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var pue={},$8={},M8=34,rT=10,L8=13;function xxe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Olt(e,t){var n=xxe(e);return function(r,i){return t(n(r),i,e)}}function mue(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function du(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function $lt(e){return e<0?"-"+du(-e,6):e>9999?"+"+du(e,6):du(e,4)}function Mlt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":$lt(e.getUTCFullYear())+"-"+du(e.getUTCMonth()+1,2)+"-"+du(e.getUTCDate(),2)+(i?"T"+du(t,2)+":"+du(n,2)+":"+du(r,2)+"."+du(i,3)+"Z":r?"T"+du(t,2)+":"+du(n,2)+":"+du(r,2)+"Z":n||t?"T"+du(t,2)+":"+du(n,2)+"Z":"")}function Sxe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?Olt(g,d):xxe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===rT&&--p,f.charCodeAt(p-1)===L8&&--p;function w(){if(v)return $8;if(b)return b=!1,pue;var S,T=m,A;if(f.charCodeAt(T)===M8){for(;m++<p&&f.charCodeAt(m)!==M8||f.charCodeAt(++m)===M8;);return(S=m)>=p?v=!0:(A=f.charCodeAt(m++))===rT?b=!0:A===L8&&(b=!0,f.charCodeAt(m)===rT&&++m),f.slice(T+1,S-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(S=m++))===rT)b=!0;else if(A===L8)b=!0,f.charCodeAt(m)===rT&&++m;else if(A!==n)continue;return f.slice(T,S)}return v=!0,f.slice(T,p)}for(;(y=w())!==$8;){for(var E=[];y!==pue&&y!==$8;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=mue(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=mue(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Mlt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Llt=Sxe(","),Flt=Llt.parse;function jlt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Blt(e,t){return fetch(e,t).then(jlt)}function Ult(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Blt(t,n).then(function(i){return e(i,r)})}}var zlt=Ult(Flt);function Vlt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Hlt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Txe(this.cover(t,n),t,n,e)}function Txe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function qlt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)Txe(this,o[n],a[n],e[n]);return this}function Wlt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Glt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Ylt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Fa(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Klt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Fa(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Fa(h[3],g,y,u,l),new Fa(h[2],o,y,g,l),new Fa(h[1],g,a,u,y),new Fa(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function Xlt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Qlt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Jlt(){return this._root}function Zlt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function ect(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Fa(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Fa(i,l,c,a,u)),(i=r[2])&&t.push(new Fa(i,s,c,l,u)),(i=r[1])&&t.push(new Fa(i,l,o,a,c)),(i=r[0])&&t.push(new Fa(i,s,o,l,c))}return this}function tct(e){var t=[],n=[],r;for(this._root&&t.push(new Fa(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Fa(s,o,a,c,f)),(s=i[1])&&t.push(new Fa(s,c,a,u,f)),(s=i[2])&&t.push(new Fa(s,o,f,c,l)),(s=i[3])&&t.push(new Fa(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function nct(e){return e[0]}function rct(e){return arguments.length?(this._x=e,this):this._x}function ict(e){return e[1]}function sct(e){return arguments.length?(this._y=e,this):this._y}function CY(e,t,n){var r=new IY(t??nct,n??ict,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function IY(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function gue(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var nu=CY.prototype=IY.prototype;nu.copy=function(){var e=new IY(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=gue(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=gue(r));return e};nu.add=Hlt;nu.addAll=qlt;nu.cover=Wlt;nu.data=Glt;nu.extent=Ylt;nu.find=Klt;nu.remove=Xlt;nu.removeAll=Qlt;nu.root=Jlt;nu.size=Zlt;nu.visit=ect;nu.visitAfter=tct;nu.x=rct;nu.y=sct;function Ua(e){return function(){return e}}function Hg(e){return(e()-.5)*1e-6}function oct(e){return e.x+e.vx}function act(e){return e.y+e.vy}function uct(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ua(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=CY(t,oct,act).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,S,T){var A=b.data,C=b.r,I=m+C;if(A){if(A.index>d.index){var R=h-A.x-A.vx,M=p-A.y-A.vy,P=R*R+M*M;P<I*I&&(R===0&&(R=Hg(r),P+=R*R),M===0&&(M=Hg(r),P+=M*M),P=(I-(P=Math.sqrt(P)))/P*i,d.vx+=(R*=P)*(I=(C*=C)/(g+C)),d.vy+=(M*=P)*I,A.vx-=R*(I=1-I),A.vy-=M*I)}return}return w>h+I||S<h-I||E>p+I||T<p-I}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ua(+l),u(),o):e},o}function lct(e){return e.index}function yue(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function cct(e){var t=lct,n=f,r,i=Ua(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,S,T,A,C,I;b<v;++b)w=e[b],E=w.source,S=w.target,T=S.x+S.vx-E.x-E.vx||Hg(l),A=S.y+S.vy-E.y-E.vy||Hg(l),C=Math.sqrt(T*T+A*A),C=(C-s[b])/C*g*r[b],T*=C,A*=C,S.vx-=T*(I=u[b]),S.vy-=A*I,E.vx+=T*(I=1-I),E.vy+=A*I}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,S)=>[t(E,S,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=yue(b,w.source)),typeof w.target!="object"&&(w.target=yue(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Ua(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Ua(+g),m(),d):i},d}const fct=1664525,dct=1013904223,vue=4294967296;function hct(){let e=1;return()=>(e=(fct*e+dct)%vue)/vue}function pct(e){return e.x}function mct(e){return e.y}var gct=10,yct=Math.PI*(3-Math.sqrt(5));function vct(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=wY(f),l=PL("tick","end"),c=hct();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=gct*Math.sqrt(.5+m),b=m*yct;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,S,T,A;for(y==null?y=1/0:y*=y,v=0;v<b;++v)T=e[v],w=m-T.x,E=g-T.y,S=w*w+E*E,S<y&&(A=T,y=S);return A},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function bct(){var e,t,n,r,i=Ua(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=CY(e,pct,mct).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=Hg(n),w+=y*y),v===0&&(v=Hg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Hg(n),w+=y*y),v===0&&(v=Hg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ua(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function _ct(e){var t=Ua(.1),n,r,i;typeof e!="function"&&(e=Ua(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ua(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ua(+a),o(),s):e},s}function wct(e){var t=Ua(.1),n,r,i;typeof e!="function"&&(e=Ua(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ua(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ua(+a),o(),s):e},s}function Ect(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function BO(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function mE(e){return e=BO(Math.abs(e)),e?e[1]:NaN}function xct(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Sct(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Tct=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ov(e){if(!(t=Tct.exec(e)))throw new Error("invalid format: "+e);var t;return new kY({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ov.prototype=kY.prototype;function kY(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}kY.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Act(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Axe;function Cct(e,t){var n=BO(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Axe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+BO(e,Math.max(0,t+s-1))[0]}function bue(e,t){var n=BO(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _ue={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ect,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>bue(e*100,t),r:bue,s:Cct,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function wue(e){return e}var Eue=Array.prototype.map,xue=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Cxe(e){var t=e.grouping===void 0||e.thousands===void 0?wue:xct(Eue.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?wue:Sct(Eue.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Ov(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):_ue[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=m==="$"?r:/[%p]/.test(E)?o:"",A=_ue[E],C=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(R){var M=S,P=T,O,F,L;if(E==="c")P=A(R)+P,R="";else{R=+R;var B=R<0||1/R<0;if(R=isNaN(R)?u:A(Math.abs(R),b),w&&(R=Act(R)),B&&+R==0&&p!=="+"&&(B=!1),M=(B?p==="("?p:a:p==="-"||p==="("?"":p)+M,P=(E==="s"?xue[8+Axe/3]:"")+P+(B&&p==="("?")":""),C){for(O=-1,F=R.length;++O<F;)if(L=R.charCodeAt(O),48>L||L>57){P=(L===46?i+R.slice(O+1):R.slice(O))+P,R=R.slice(0,O);break}}}v&&!g&&(R=t(R,1/0));var U=M.length+R.length+P.length,H=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(R=t(H+R,H.length?y-P.length:1/0),H=""),h){case"<":R=M+R+P+H;break;case"=":R=M+H+R+P;break;case"^":R=H.slice(0,U=H.length>>1)+M+R+P+H.slice(U);break;default:R=H+M+R+P;break}return s(R)}return I.toString=function(){return f+""},I}function c(f,d){var h=l((f=Ov(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(mE(d)/3)))*3,m=Math.pow(10,-p),g=xue[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var uN,jx,RY;Ict({thousands:",",grouping:[3],currency:["$",""]});function Ict(e){return uN=Cxe(e),jx=uN.format,RY=uN.formatPrefix,uN}function Ixe(e){return Math.max(0,-mE(Math.abs(e)))}function kxe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mE(t)/3)))*3-mE(Math.abs(e)))}function Rxe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mE(t)-mE(e))+1}var jt=1e-6,UO=1e-12,Nn=Math.PI,Wi=Nn/2,zO=Nn/4,Ka=Nn*2,ts=180/Nn,In=Nn/180,Kn=Math.abs,Bx=Math.atan,xc=Math.atan2,Ut=Math.cos,lN=Math.ceil,Nxe=Math.exp,d7=Math.hypot,VO=Math.log,F8=Math.pow,Lt=Math.sin,dc=Math.sign||function(e){return e>0?1:e<0?-1:0},Xa=Math.sqrt,NY=Math.tan;function Pxe(e){return e>1?0:e<-1?Nn:Math.acos(e)}function Vu(e){return e>1?Wi:e<-1?-Wi:Math.asin(e)}function So(){}function HO(e,t){e&&Tue.hasOwnProperty(e.type)&&Tue[e.type](e,t)}var Sue={Feature:function(e,t){HO(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)HO(n[r].geometry,t)}},Tue={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){h7(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)h7(n[r],t,0)},Polygon:function(e,t){Aue(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Aue(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)HO(n[r],t)}};function h7(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Aue(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)h7(e[n],t,1);t.polygonEnd()}function Ap(e,t){e&&Sue.hasOwnProperty(e.type)?Sue[e.type](e,t):HO(e,t)}var qO=new Ha,WO=new Ha,Dxe,Oxe,p7,m7,g7,fh={point:So,lineStart:So,lineEnd:So,polygonStart:function(){qO=new Ha,fh.lineStart=kct,fh.lineEnd=Rct},polygonEnd:function(){var e=+qO;WO.add(e<0?Ka+e:e),this.lineStart=this.lineEnd=this.point=So},sphere:function(){WO.add(Ka)}};function kct(){fh.point=Nct}function Rct(){$xe(Dxe,Oxe)}function Nct(e,t){fh.point=$xe,Dxe=e,Oxe=t,e*=In,t*=In,p7=e,m7=Ut(t=t/2+zO),g7=Lt(t)}function $xe(e,t){e*=In,t*=In,t=t/2+zO;var n=e-p7,r=n>=0?1:-1,i=r*n,s=Ut(t),o=Lt(t),a=g7*o,u=m7*s+a*Ut(i),l=a*r*Lt(i);qO.add(xc(l,u)),p7=e,m7=s,g7=o}function Pct(e){return WO=new Ha,Ap(e,fh),WO*2}function GO(e){return[xc(e[1],e[0]),Vu(e[2])]}function $v(e){var t=e[0],n=e[1],r=Ut(n);return[r*Ut(t),r*Lt(t),Lt(n)]}function cN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function gE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function j8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function fN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function YO(e){var t=Xa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ai,_u,Li,dl,m1,Mxe,Lxe,Sw,KA,Sg,vm,_p={point:y7,lineStart:Cue,lineEnd:Iue,polygonStart:function(){_p.point=jxe,_p.lineStart=Dct,_p.lineEnd=Oct,KA=new Ha,fh.polygonStart()},polygonEnd:function(){fh.polygonEnd(),_p.point=y7,_p.lineStart=Cue,_p.lineEnd=Iue,qO<0?(Ai=-(Li=180),_u=-(dl=90)):KA>jt?dl=90:KA<-jt&&(_u=-90),vm[0]=Ai,vm[1]=Li},sphere:function(){Ai=-(Li=180),_u=-(dl=90)}};function y7(e,t){Sg.push(vm=[Ai=e,Li=e]),t<_u&&(_u=t),t>dl&&(dl=t)}function Fxe(e,t){var n=$v([e*In,t*In]);if(Sw){var r=gE(Sw,n),i=[r[1],-r[0],0],s=gE(i,r);YO(s),s=GO(s);var o=e-m1,a=o>0?1:-1,u=s[0]*ts*a,l,c=Kn(o)>180;c^(a*m1<u&&u<a*e)?(l=s[1]*ts,l>dl&&(dl=l)):(u=(u+360)%360-180,c^(a*m1<u&&u<a*e)?(l=-s[1]*ts,l<_u&&(_u=l)):(t<_u&&(_u=t),t>dl&&(dl=t))),c?e<m1?cl(Ai,e)>cl(Ai,Li)&&(Li=e):cl(e,Li)>cl(Ai,Li)&&(Ai=e):Li>=Ai?(e<Ai&&(Ai=e),e>Li&&(Li=e)):e>m1?cl(Ai,e)>cl(Ai,Li)&&(Li=e):cl(e,Li)>cl(Ai,Li)&&(Ai=e)}else Sg.push(vm=[Ai=e,Li=e]);t<_u&&(_u=t),t>dl&&(dl=t),Sw=n,m1=e}function Cue(){_p.point=Fxe}function Iue(){vm[0]=Ai,vm[1]=Li,_p.point=y7,Sw=null}function jxe(e,t){if(Sw){var n=e-m1;KA.add(Kn(n)>180?n+(n>0?360:-360):n)}else Mxe=e,Lxe=t;fh.point(e,t),Fxe(e,t)}function Dct(){fh.lineStart()}function Oct(){jxe(Mxe,Lxe),fh.lineEnd(),Kn(KA)>jt&&(Ai=-(Li=180)),vm[0]=Ai,vm[1]=Li,Sw=null}function cl(e,t){return(t-=e)<0?t+360:t}function $ct(e,t){return e[0]-t[0]}function kue(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Mct(e){var t,n,r,i,s,o,a;if(dl=Li=-(Ai=_u=1/0),Sg=[],Ap(e,_p),n=Sg.length){for(Sg.sort($ct),t=1,r=Sg[0],s=[r];t<n;++t)i=Sg[t],kue(r,i[0])||kue(r,i[1])?(cl(r[0],i[1])>cl(r[0],r[1])&&(r[1]=i[1]),cl(i[0],r[1])>cl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=cl(r[1],i[0]))>o&&(o=a,Ai=i[0],Li=r[1])}return Sg=vm=null,Ai===1/0||_u===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ai,_u],[Li,dl]]}var YT,KO,XO,QO,JO,ZO,e3,t3,v7,b7,_7,Bxe,Uxe,$a,Ma,La,bf={sphere:So,point:PY,lineStart:Rue,lineEnd:Nue,polygonStart:function(){bf.lineStart=jct,bf.lineEnd=Bct},polygonEnd:function(){bf.lineStart=Rue,bf.lineEnd=Nue}};function PY(e,t){e*=In,t*=In;var n=Ut(t);WI(n*Ut(e),n*Lt(e),Lt(t))}function WI(e,t,n){++YT,XO+=(e-XO)/YT,QO+=(t-QO)/YT,JO+=(n-JO)/YT}function Rue(){bf.point=Lct}function Lct(e,t){e*=In,t*=In;var n=Ut(t);$a=n*Ut(e),Ma=n*Lt(e),La=Lt(t),bf.point=Fct,WI($a,Ma,La)}function Fct(e,t){e*=In,t*=In;var n=Ut(t),r=n*Ut(e),i=n*Lt(e),s=Lt(t),o=xc(Xa((o=Ma*s-La*i)*o+(o=La*r-$a*s)*o+(o=$a*i-Ma*r)*o),$a*r+Ma*i+La*s);KO+=o,ZO+=o*($a+($a=r)),e3+=o*(Ma+(Ma=i)),t3+=o*(La+(La=s)),WI($a,Ma,La)}function Nue(){bf.point=PY}function jct(){bf.point=Uct}function Bct(){zxe(Bxe,Uxe),bf.point=PY}function Uct(e,t){Bxe=e,Uxe=t,e*=In,t*=In,bf.point=zxe;var n=Ut(t);$a=n*Ut(e),Ma=n*Lt(e),La=Lt(t),WI($a,Ma,La)}function zxe(e,t){e*=In,t*=In;var n=Ut(t),r=n*Ut(e),i=n*Lt(e),s=Lt(t),o=Ma*s-La*i,a=La*r-$a*s,u=$a*i-Ma*r,l=d7(o,a,u),c=Vu(l),f=l&&-c/l;v7.add(f*o),b7.add(f*a),_7.add(f*u),KO+=c,ZO+=c*($a+($a=r)),e3+=c*(Ma+(Ma=i)),t3+=c*(La+(La=s)),WI($a,Ma,La)}function zct(e){YT=KO=XO=QO=JO=ZO=e3=t3=0,v7=new Ha,b7=new Ha,_7=new Ha,Ap(e,bf);var t=+v7,n=+b7,r=+_7,i=d7(t,n,r);return i<UO&&(t=ZO,n=e3,r=t3,KO<jt&&(t=XO,n=QO,r=JO),i=d7(t,n,r),i<UO)?[NaN,NaN]:[xc(n,t)*ts,Vu(r/i)*ts]}function w7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function E7(e,t){return Kn(e)>Nn&&(e-=Math.round(e/Ka)*Ka),[e,t]}E7.invert=E7;function Vxe(e,t,n){return(e%=Ka)?t||n?w7(Due(e),Oue(t,n)):Due(e):t||n?Oue(t,n):E7}function Pue(e){return function(t,n){return t+=e,Kn(t)>Nn&&(t-=Math.round(t/Ka)*Ka),[t,n]}}function Due(e){var t=Pue(e);return t.invert=Pue(-e),t}function Oue(e,t){var n=Ut(e),r=Lt(e),i=Ut(t),s=Lt(t);function o(a,u){var l=Ut(u),c=Ut(a)*l,f=Lt(a)*l,d=Lt(u),h=d*n+c*r;return[xc(f*i-h*s,c*n-d*r),Vu(h*i+f*s)]}return o.invert=function(a,u){var l=Ut(u),c=Ut(a)*l,f=Lt(a)*l,d=Lt(u),h=d*i-f*s;return[xc(f*i+d*s,c*n+h*r),Vu(h*n-c*r)]},o}function Vct(e){e=Vxe(e[0]*In,e[1]*In,e.length>2?e[2]*In:0);function t(n){return n=e(n[0]*In,n[1]*In),n[0]*=ts,n[1]*=ts,n}return t.invert=function(n){return n=e.invert(n[0]*In,n[1]*In),n[0]*=ts,n[1]*=ts,n},t}function Hct(e,t,n,r,i,s){if(n){var o=Ut(t),a=Lt(t),u=r*n;i==null?(i=t+r*Ka,s=t-u/2):(i=$ue(o,i),s=$ue(o,s),(r>0?i<s:i>s)&&(i+=r*Ka));for(var l,c=i;r>0?c>s:c<s;c-=u)l=GO([o,-a*Ut(c),-a*Lt(c)]),e.point(l[0],l[1])}}function $ue(e,t){t=$v(t),t[0]-=e,YO(t);var n=Pxe(-t[1]);return((-t[2]<0?-n:n)+Ka-jt)%Ka}function Hxe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:So,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function UP(e,t){return Kn(e[0]-t[0])<jt&&Kn(e[1]-t[1])<jt}function dN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function qxe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(UP(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*jt}s.push(v=new dN(g,p,null,!0)),o.push(v.o=new dN(g,null,v,!1)),s.push(v=new dN(y,p,null,!1)),o.push(v.o=new dN(y,null,v,!0))}}),!!s.length){for(o.sort(t),Mue(s),Mue(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Mue(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function B8(e){return Kn(e[0])<=Nn?e[0]:dc(e[0])*((Kn(e[0])+Nn)%Ka-Nn)}function qct(e,t){var n=B8(t),r=t[1],i=Lt(r),s=[Lt(n),-Ut(n),0],o=0,a=0,u=new Ha;i===1?r=Wi+jt:i===-1&&(r=-Wi-jt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=B8(h),m=h[1]/2+zO,g=Lt(m),y=Ut(m),v=0;v<d;++v,p=w,g=S,y=T,h=b){var b=f[v],w=B8(b),E=b[1]/2+zO,S=Lt(E),T=Ut(E),A=w-p,C=A>=0?1:-1,I=C*A,R=I>Nn,M=g*S;if(u.add(xc(M*C*Lt(I),y*T+M*Ut(I))),o+=R?A+C*Ka:A,R^p>=n^w>=n){var P=gE($v(h),$v(b));YO(P);var O=gE(s,P);YO(O);var F=(R^A>=0?-1:1)*Vu(O[2]);(r>F||r===F&&(P[0]||P[1]))&&(a+=R^A>=0?1:-1)}}return(o<-jt||o<jt&&u<-UO)^a&1}function Wxe(e,t,n,r){return function(i){var s=t(i),o=Hxe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=kEe(c);var w=qct(l,r);c.length?(u||(i.polygonStart(),u=!0),qxe(c,Gct,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),S,T=E.length,A,C,I;if(f.pop(),l.push(f),f=null,!!T){if(w&1){if(C=E[0],(A=C.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<A;++S)i.point((I=C[S])[0],I[1]);i.lineEnd()}return}T>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Wct))}}return d}}function Wct(e){return e.length>1}function Gct(e,t){return((e=e.x)[0]<0?e[1]-Wi-jt:Wi-e[1])-((t=t.x)[0]<0?t[1]-Wi-jt:Wi-t[1])}const Lue=Wxe(function(){return!0},Yct,Xct,[-Nn,-Wi]);function Yct(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Nn:-Nn,u=Kn(s-t);Kn(u-Nn)<jt?(e.point(t,n=(n+o)/2>0?Wi:-Wi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Nn&&(Kn(t-r)<jt&&(t-=r*jt),Kn(s-a)<jt&&(s-=a*jt),n=Kct(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Kct(e,t,n,r){var i,s,o=Lt(e-n);return Kn(o)>jt?Bx((Lt(t)*(s=Ut(r))*Lt(n)-Lt(r)*(i=Ut(t))*Lt(e))/(i*s*o)):(t+r)/2}function Xct(e,t,n,r){var i;if(e==null)i=n*Wi,r.point(-Nn,i),r.point(0,i),r.point(Nn,i),r.point(Nn,0),r.point(Nn,-i),r.point(0,-i),r.point(-Nn,-i),r.point(-Nn,0),r.point(-Nn,i);else if(Kn(e[0]-t[0])>jt){var s=e[0]<t[0]?Nn:-Nn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Qct(e){var t=Ut(e),n=2*In,r=t>0,i=Kn(t)>jt;function s(c,f,d,h){Hct(h,e,n,d,c,f)}function o(c,f){return Ut(c)*Ut(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Nn:-Nn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||UP(f,b)||UP(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var S;!(E&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}w&&(!f||!UP(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=$v(c),p=$v(f),m=[1,0,0],g=gE(h,p),y=cN(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,S=gE(m,g),T=fN(m,w),A=fN(g,E);j8(T,A);var C=S,I=cN(T,C),R=cN(C,C),M=I*I-R*(cN(T,T)-1);if(!(M<0)){var P=Xa(M),O=fN(C,(-I-P)/R);if(j8(O,T),O=GO(O),!d)return O;var F=c[0],L=f[0],B=c[1],U=f[1],H;L<F&&(H=F,F=L,L=H);var D=L-F,z=Kn(D-Nn)<jt,W=z||D<jt;if(!z&&U<B&&(H=B,B=U,U=H),W?z?B+U>0^O[1]<(Kn(O[0]-F)<jt?B:U):B<=O[1]&&O[1]<=U:D>Nn^(F<=O[0]&&O[0]<=L)){var j=fN(C,(-I+P)/R);return j8(j,T),[O,GO(j)]}}}function l(c,f){var d=r?e:Nn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return Wxe(o,a,s,r?[0,-e]:[-Nn,e-Nn])}function Jct(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var KT=1e9,hN=-KT;function Gxe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Kn(l[0]-e)<jt?c>0?0:3:Kn(l[0]-n)<jt?c>0?2:1:Kn(l[1]-t)<jt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=Hxe(),d,h,p,m,g,y,v,b,w,E,S,T={point:A,lineStart:M,lineEnd:P,polygonStart:I,polygonEnd:R};function A(F,L){i(F,L)&&c.point(F,L)}function C(){for(var F=0,L=0,B=h.length;L<B;++L)for(var U=h[L],H=1,D=U.length,z=U[0],W,j,q=z[0],G=z[1];H<D;++H)W=q,j=G,z=U[H],q=z[0],G=z[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function I(){c=f,d=[],h=[],S=!0}function R(){var F=C(),L=S&&F,B=(d=kEe(d)).length;(L||B)&&(l.polygonStart(),L&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&qxe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function M(){T.point=O,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function P(){d&&(O(m,g),y&&w&&f.rejoin(),d.push(f.result())),T.point=A,w&&c.lineEnd()}function O(F,L){var B=i(F,L);if(h&&p.push([F,L]),E)m=F,g=L,y=B,E=!1,B&&(c.lineStart(),c.point(F,L));else if(B&&w)c.point(F,L);else{var U=[v=Math.max(hN,Math.min(KT,v)),b=Math.max(hN,Math.min(KT,b))],H=[F=Math.max(hN,Math.min(KT,F)),L=Math.max(hN,Math.min(KT,L))];Jct(U,H,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(H[0],H[1]),B||c.lineEnd(),S=!1):B&&(c.lineStart(),c.point(F,L),S=!1)}v=F,b=L,w=B}return T}}function Fue(e,t,n){var r=Iu(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function jue(e,t,n){var r=Iu(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Zct(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Iu(lN(r/c)*c,n,c).map(p).concat(Iu(lN(a/f)*f,o,f).map(m)).concat(Iu(lN(t/u)*u,e,u).filter(function(b){return Kn(b%c)>jt}).map(d)).concat(Iu(lN(s/l)*l,i,l).filter(function(b){return Kn(b%f)>jt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Fue(s,i,90),h=jue(t,e,g),p=Fue(a,o,90),m=jue(r,n,g),y):g},y.extentMajor([[-180,-90+jt],[180,90-jt]]).extentMinor([[-180,-80-jt],[180,80+jt]])}const f2=e=>e;var U8=new Ha,x7=new Ha,Yxe,Kxe,S7,T7,Cp={point:So,lineStart:So,lineEnd:So,polygonStart:function(){Cp.lineStart=eft,Cp.lineEnd=nft},polygonEnd:function(){Cp.lineStart=Cp.lineEnd=Cp.point=So,U8.add(Kn(x7)),x7=new Ha},result:function(){var e=U8/2;return U8=new Ha,e}};function eft(){Cp.point=tft}function tft(e,t){Cp.point=Xxe,Yxe=S7=e,Kxe=T7=t}function Xxe(e,t){x7.add(T7*e-S7*t),S7=e,T7=t}function nft(){Xxe(Yxe,Kxe)}var yE=1/0,n3=yE,d2=-yE,r3=d2,i3={point:rft,lineStart:So,lineEnd:So,polygonStart:So,polygonEnd:So,result:function(){var e=[[yE,n3],[d2,r3]];return d2=r3=-(n3=yE=1/0),e}};function rft(e,t){e<yE&&(yE=e),e>d2&&(d2=e),t<n3&&(n3=t),t>r3&&(r3=t)}var A7=0,C7=0,XT=0,s3=0,o3=0,J_=0,I7=0,k7=0,QT=0,Qxe,Jxe,Rd,Nd,lc={point:Mv,lineStart:Bue,lineEnd:Uue,polygonStart:function(){lc.lineStart=oft,lc.lineEnd=aft},polygonEnd:function(){lc.point=Mv,lc.lineStart=Bue,lc.lineEnd=Uue},result:function(){var e=QT?[I7/QT,k7/QT]:J_?[s3/J_,o3/J_]:XT?[A7/XT,C7/XT]:[NaN,NaN];return A7=C7=XT=s3=o3=J_=I7=k7=QT=0,e}};function Mv(e,t){A7+=e,C7+=t,++XT}function Bue(){lc.point=ift}function ift(e,t){lc.point=sft,Mv(Rd=e,Nd=t)}function sft(e,t){var n=e-Rd,r=t-Nd,i=Xa(n*n+r*r);s3+=i*(Rd+e)/2,o3+=i*(Nd+t)/2,J_+=i,Mv(Rd=e,Nd=t)}function Uue(){lc.point=Mv}function oft(){lc.point=uft}function aft(){Zxe(Qxe,Jxe)}function uft(e,t){lc.point=Zxe,Mv(Qxe=Rd=e,Jxe=Nd=t)}function Zxe(e,t){var n=e-Rd,r=t-Nd,i=Xa(n*n+r*r);s3+=i*(Rd+e)/2,o3+=i*(Nd+t)/2,J_+=i,i=Nd*e-Rd*t,I7+=i*(Rd+e),k7+=i*(Nd+t),QT+=i*3,Mv(Rd=e,Nd=t)}function eSe(e){this._context=e}eSe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ka);break}}},result:So};var R7=new Ha,z8,tSe,nSe,JT,ZT,h2={point:So,lineStart:function(){h2.point=lft},lineEnd:function(){z8&&rSe(tSe,nSe),h2.point=So},polygonStart:function(){z8=!0},polygonEnd:function(){z8=null},result:function(){var e=+R7;return R7=new Ha,e}};function lft(e,t){h2.point=rSe,tSe=JT=e,nSe=ZT=t}function rSe(e,t){JT-=e,ZT-=t,R7.add(Xa(JT*JT+ZT*ZT)),JT=e,ZT=t}let zue,a3,Vue,Hue;class que{constructor(t){this._append=t==null?iSe:cft(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Vue||this._append!==a3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Vue=r,a3=this._append,Hue=this._,this._=i}this._+=Hue;break}}}result(){const t=this._;return this._="",t.length?t:null}}function iSe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function cft(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return iSe;if(t!==zue){const n=10**t;zue=t,a3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return a3}function sSe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Ap(a,i(s))),s.result()}return o.area=function(a){return Ap(a,i(Cp)),Cp.result()},o.measure=function(a){return Ap(a,i(h2)),h2.result()},o.bounds=function(a){return Ap(a,i(i3)),i3.result()},o.centroid=function(a){return Ap(a,i(lc)),lc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,f2):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new que(n)):new eSe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new que(n)),o},o.projection(e).digits(n).context(t)}function UL(e){return function(t){var n=new N7;for(var r in e)n[r]=e[r];return n.stream=t,n}}function N7(){}N7.prototype={constructor:N7,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function DY(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Ap(n,e.stream(i3)),t(i3.result()),r!=null&&e.clipExtent(r),e}function zL(e,t,n){return DY(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function OY(e,t,n){return zL(e,[[0,0],t],n)}function $Y(e,t,n){return DY(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function MY(e,t,n){return DY(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Wue=16,fft=Ut(30*In);function Gue(e,t){return+t?hft(e,t):dft(e)}function dft(e){return UL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function hft(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,S=u+p,T=Xa(w*w+E*E+S*S),A=Vu(S/=T),C=Kn(Kn(S)-1)<jt||Kn(s-f)<jt?(s+f)/2:xc(E,w),I=e(C,A),R=I[0],M=I[1],P=R-r,O=M-i,F=v*P-y*O;(F*F/b>t||Kn((y*P+v*O)/b-.5)>.3||o*d+a*h+u*p<fft)&&(n(r,i,s,o,a,u,R,M,C,w/=T,E/=T,S,m,g),g.point(R,M),n(R,M,C,w,E,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(A,C){A=e(A,C),r.point(A[0],A[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(A,C){var I=$v([A,C]),R=e(A,C);n(f,d,c,h,p,m,f=R[0],d=R[1],c=A,h=I[0],p=I[1],m=I[2],Wue,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=S,g.lineEnd=T}function S(A,C){b(i=A,C),s=f,o=d,a=h,u=p,l=m,g.point=b}function T(){n(f,d,c,h,p,m,s,o,i,a,u,l,Wue,r),g.lineEnd=w,w()}return g}}var pft=UL({point:function(e,t){this.stream.point(e*In,t*In)}});function mft(e){return UL({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function gft(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Yue(e,t,n,r,i,s){if(!s)return gft(e,t,n,r,i);var o=Ut(s),a=Lt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function jh(e){return oSe(function(){return e})()}function oSe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Lue,g=null,y,v,b,w=f2,E=.5,S,T,A,C,I;function R(F){return A(F[0]*In,F[1]*In)}function M(F){return F=A.invert(F[0],F[1]),F&&[F[0]*ts,F[1]*ts]}R.stream=function(F){return C&&I===F?C:C=pft(mft(c)(m(S(w(I=F)))))},R.preclip=function(F){return arguments.length?(m=F,p=void 0,O()):m},R.postclip=function(F){return arguments.length?(w=F,g=y=v=b=null,O()):w},R.clipAngle=function(F){return arguments.length?(m=+F?Qct(p=F*In):(p=null,Lue),O()):p*ts},R.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=b=null,f2):Gxe(g=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),O()):g==null?null:[[g,y],[v,b]]},R.scale=function(F){return arguments.length?(n=+F,P()):n},R.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],P()):[r,i]},R.center=function(F){return arguments.length?(s=F[0]%360*In,o=F[1]%360*In,P()):[s*ts,o*ts]},R.rotate=function(F){return arguments.length?(a=F[0]%360*In,u=F[1]%360*In,l=F.length>2?F[2]%360*In:0,P()):[a*ts,u*ts,l*ts]},R.angle=function(F){return arguments.length?(f=F%360*In,P()):f*ts},R.reflectX=function(F){return arguments.length?(d=F?-1:1,P()):d<0},R.reflectY=function(F){return arguments.length?(h=F?-1:1,P()):h<0},R.precision=function(F){return arguments.length?(S=Gue(T,E=F*F),O()):Xa(E)},R.fitExtent=function(F,L){return zL(R,F,L)},R.fitSize=function(F,L){return OY(R,F,L)},R.fitWidth=function(F,L){return $Y(R,F,L)},R.fitHeight=function(F,L){return MY(R,F,L)};function P(){var F=Yue(n,0,0,d,h,f).apply(null,t(s,o)),L=Yue(n,r-F[0],i-F[1],d,h,f);return c=Vxe(a,u,l),T=w7(t,L),A=w7(c,T),S=Gue(T,E),O()}function O(){return C=I=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&M,P()}}function LY(e){var t=0,n=Nn/3,r=oSe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*In,n=s[1]*In):[t*ts,n*ts]},i}function yft(e){var t=Ut(e);function n(r,i){return[r*t,Lt(i)/t]}return n.invert=function(r,i){return[r/t,Vu(i*t)]},n}function vft(e,t){var n=Lt(e),r=(n+Lt(t))/2;if(Kn(r)<jt)return yft(e);var i=1+n*(2*r-n),s=Xa(i)/r;function o(a,u){var l=Xa(i-2*r*Lt(u))/r;return[l*Lt(a*=r),s-l*Ut(a)]}return o.invert=function(a,u){var l=s-u,c=xc(a,Kn(l))*dc(l);return l*r<0&&(c-=Nn*dc(a)*dc(l)),[c/r,Vu((i-(a*a+l*l)*r*r)/(2*r))]},o}function u3(){return LY(vft).scale(155.424).center([0,33.6442])}function aSe(){return u3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function bft(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function _ft(){var e,t,n=aSe(),r,i=u3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=u3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=bft([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+jt,m+.12*h+jt],[p-.214*h-jt,m+.234*h-jt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+jt,m+.166*h+jt],[p-.115*h-jt,m+.234*h-jt]]).stream(l),f()},c.fitExtent=function(d,h){return zL(c,d,h)},c.fitSize=function(d,h){return OY(c,d,h)},c.fitWidth=function(d,h){return $Y(c,d,h)},c.fitHeight=function(d,h){return MY(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function uSe(e){return function(t,n){var r=Ut(t),i=Ut(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Lt(t),s*Lt(n)]}}function GI(e){return function(t,n){var r=Xa(t*t+n*n),i=e(r),s=Lt(i),o=Ut(i);return[xc(t*s,r*o),Vu(r&&n*s/r)]}}var lSe=uSe(function(e){return Xa(2/(1+e))});lSe.invert=GI(function(e){return 2*Vu(e/2)});function wft(){return jh(lSe).scale(124.75).clipAngle(180-.001)}var cSe=uSe(function(e){return(e=Pxe(e))&&e/Lt(e)});cSe.invert=GI(function(e){return e});function Eft(){return jh(cSe).scale(79.4188).clipAngle(180-.001)}function VL(e,t){return[e,VO(NY((Wi+t)/2))]}VL.invert=function(e,t){return[e,2*Bx(Nxe(t))-Wi]};function xft(){return fSe(VL).scale(961/Ka)}function fSe(e){var t=jh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Nn*r(),d=t(Vct(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===VL?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function pN(e){return NY((Wi+e)/2)}function Sft(e,t){var n=Ut(e),r=e===t?Lt(e):VO(n/Ut(t))/VO(pN(t)/pN(e)),i=n*F8(pN(e),r)/r;if(!r)return VL;function s(o,a){i>0?a<-Wi+jt&&(a=-Wi+jt):a>Wi-jt&&(a=Wi-jt);var u=i/F8(pN(a),r);return[u*Lt(r*o),i-u*Ut(r*o)]}return s.invert=function(o,a){var u=i-a,l=dc(r)*Xa(o*o+u*u),c=xc(o,Kn(u))*dc(u);return u*r<0&&(c-=Nn*dc(o)*dc(u)),[c/r,2*Bx(F8(i/l,1/r))-Wi]},s}function Tft(){return LY(Sft).scale(109.5).parallels([30,30])}function l3(e,t){return[e,t]}l3.invert=l3;function Aft(){return jh(l3).scale(152.63)}function Cft(e,t){var n=Ut(e),r=e===t?Lt(e):(n-Ut(t))/(t-e),i=n/r+e;if(Kn(r)<jt)return l3;function s(o,a){var u=i-a,l=r*o;return[u*Lt(l),i-u*Ut(l)]}return s.invert=function(o,a){var u=i-a,l=xc(o,Kn(u))*dc(u);return u*r<0&&(l-=Nn*dc(o)*dc(u)),[l/r,i-dc(r)*Xa(o*o+u*u)]},s}function Ift(){return LY(Cft).scale(131.154).center([0,13.9389])}var XA=1.340264,QA=-.081106,JA=893e-6,ZA=.003796,c3=Xa(3)/2,kft=12;function dSe(e,t){var n=Vu(c3*Lt(t)),r=n*n,i=r*r*r;return[e*Ut(n)/(c3*(XA+3*QA*r+i*(7*JA+9*ZA*r))),n*(XA+QA*r+i*(JA+ZA*r))]}dSe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<kft&&(a=n*(XA+QA*r+i*(JA+ZA*r))-t,u=XA+3*QA*r+i*(7*JA+9*ZA*r),n-=o=a/u,r=n*n,i=r*r*r,!(Kn(o)<UO));++s);return[c3*e*(XA+3*QA*r+i*(7*JA+9*ZA*r))/Ut(n),Vu(Lt(n)/c3)]};function Rft(){return jh(dSe).scale(177.158)}function hSe(e,t){var n=Ut(t),r=Ut(e)*n;return[n*Lt(e)/r,Lt(t)/r]}hSe.invert=GI(Bx);function Nft(){return jh(hSe).scale(144.049).clipAngle(60)}function Pft(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=UL({point:function(w,E){var S=b([w,E]);this.stream.point(S[0],S[1])}}),m=f2,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,S=w[1]*h;if(s){var T=S*o-E*a;E=E*o+S*a,S=T}return[E+t,S+n]}return b.invert=function(w){var E=w[0]-t,S=w[1]-n;if(s){var T=S*o+E*a;E=E*o-S*a,S=T}return[E/d,S/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,f2):Gxe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*In,a=Lt(s),o=Ut(s),v()):s*ts},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return zL(b,w,E)},b.fitSize=function(w,E){return OY(b,w,E)},b.fitWidth=function(w,E){return $Y(b,w,E)},b.fitHeight=function(w,E){return MY(b,w,E)},b}function pSe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}pSe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Kn(i)>jt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Dft(){return jh(pSe).scale(175.295)}function mSe(e,t){return[Ut(t)*Lt(e),Lt(t)]}mSe.invert=GI(Vu);function Oft(){return jh(mSe).scale(249.5).clipAngle(90+jt)}function gSe(e,t){var n=Ut(t),r=1+Ut(e)*n;return[n*Lt(e)/r,Lt(t)/r]}gSe.invert=GI(function(e){return 2*Bx(e)});function $ft(){return jh(gSe).scale(250).clipAngle(142)}function ySe(e,t){return[VO(NY((Wi+t)/2)),-e]}ySe.invert=function(e,t){return[-t,2*Bx(Nxe(e))-Wi]};function Mft(){var e=fSe(ySe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Lft(e,t){return e.parent===t.parent?1:2}function Fft(e){return e.reduce(jft,0)/e.length}function jft(e,t){return e+t.x}function Bft(e){return 1+e.reduce(Uft,0)}function Uft(e,t){return Math.max(e,t.y)}function zft(e){for(var t;t=e.children;)e=t[0];return e}function Vft(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Hft(){var e=Lft,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Fft(h),d.y=Bft(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=zft(s),l=Vft(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function qft(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Wft(){return this.eachAfter(qft)}function Gft(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Yft(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Kft(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Xft(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Qft(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Jft(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Zft(e){for(var t=this,n=edt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function edt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function tdt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function ndt(){return Array.from(this)}function rdt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function idt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*sdt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function HL(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=udt)):t===void 0&&(t=adt);for(var n=new vE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new vE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(vSe)}function odt(){return HL(this).eachBefore(ldt)}function adt(e){return e.children}function udt(e){return Array.isArray(e)?e[1]:null}function ldt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function vSe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function vE(e){this.data=e,this.depth=this.height=0,this.parent=null}vE.prototype=HL.prototype={constructor:vE,count:Wft,each:Gft,eachAfter:Kft,eachBefore:Yft,find:Xft,sum:Qft,sort:Jft,path:Zft,ancestors:tdt,descendants:ndt,leaves:rdt,links:idt,copy:odt,[Symbol.iterator]:sdt};function zP(e){return e==null?null:bSe(e)}function bSe(e){if(typeof e!="function")throw new Error;return e}function k1(){return 0}function C_(e){return function(){return e}}const cdt=1664525,fdt=1013904223,Kue=4294967296;function ddt(){let e=1;return()=>(e=(cdt*e+fdt)%Kue)/Kue}function hdt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pdt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function mdt(e,t){for(var n=0,r=(e=pdt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&_Se(o,s)?++n:(o=ydt(i=gdt(i,s)),n=0);return o}function gdt(e,t){var n,r;if(V8(t,e))return[t];for(n=0;n<e.length;++n)if(mN(t,e[n])&&V8(eA(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(mN(eA(e[n],e[r]),t)&&mN(eA(e[n],t),e[r])&&mN(eA(e[r],t),e[n])&&V8(wSe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function mN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function _Se(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function V8(e,t){for(var n=0;n<t.length;++n)if(!_Se(e,t[n]))return!1;return!0}function ydt(e){switch(e.length){case 1:return vdt(e[0]);case 2:return eA(e[0],e[1]);case 3:return wSe(e[0],e[1],e[2])}}function vdt(e){return{x:e.x,y:e.y,r:e.r}}function eA(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function wSe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,S=(p*w-m*b)/(E*2)-r,T=(m*g-p*y)/E,A=(h*b-d*w)/(E*2)-i,C=(d*y-h*g)/E,I=T*T+C*C-1,R=2*(s+S*T+A*C),M=S*S+A*A-s*s,P=-(Math.abs(I)>1e-6?(R+Math.sqrt(R*R-4*I*M))/(2*I):M/R);return{x:r+S+T*P,y:i+A+C*P,r:P}}function Xue(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Que(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Jue(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function gN(e){this._=e,this.next=null,this.previous=null}function bdt(e,t){if(!(s=(e=hdt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Xue(r,n,i=e[2]),n=new gN(n),r=new gN(r),i=new gN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Xue(n._,r._,i=e[u]),i=new gN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Que(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Que(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Jue(n);(i=i.next)!==r;)(a=Jue(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=mdt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function _dt(e){return Math.sqrt(e.value)}function ESe(){var e=null,t=1,n=1,r=k1;function i(s){const o=ddt();return s.x=t/2,s.y=n/2,e?s.eachBefore(Zue(e)).eachAfter(H8(r,.5,o)).eachBefore(ele(1)):s.eachBefore(Zue(_dt)).eachAfter(H8(k1,1,o)).eachAfter(H8(r,s.r/Math.min(t,n),o)).eachBefore(ele(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=zP(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:C_(+s),i):r},i}function Zue(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function H8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=bdt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function ele(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function xSe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function YI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function wdt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(xSe),o}function s(o,a){return function(u){u.children&&YI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Edt={depth:-1},tle={},q8={};function xdt(e){return e.id}function Sdt(e){return e.parentId}function nle(){var e=xdt,t=Sdt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>Tdt(n(w,E,i))),v=y.map(rle),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(rle(w)),s.push(q8));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new vE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?tle:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===tle)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===q8&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===q8);--y)h.data=null}if(f.parent=Edt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(vSe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=zP(i),r):e},r.parentId=function(i){return arguments.length?(t=zP(i),r):t},r.path=function(i){return arguments.length?(n=zP(i),r):n},r}function Tdt(e){e=`${e}`;let t=e.length;return P7(e,t-1)&&!P7(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function rle(e){let t=e.length;if(t<2)return"";for(;--t>1&&!P7(e,t););return e.slice(0,t)}function P7(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Adt(e,t){return e.parent===t.parent?1:2}function W8(e){var t=e.children;return t?t[0]:e.t}function G8(e){var t=e.children;return t?t[t.length-1]:e.t}function Cdt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Idt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function kdt(e,t,n){return e.a.parent===t.parent?e.a:n}function VP(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}VP.prototype=Object.create(vE.prototype);function Rdt(e){for(var t=new VP(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new VP(s[o],o)),i.parent=n;return(t.parent=new VP(null,0)).children=[t],t}function Ndt(){var e=Adt,t=1,n=1,r=null;function i(l){var c=Rdt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Idt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=G8(p),d=W8(d),p&&d;)m=W8(m),h=G8(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(Cdt(kdt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!G8(h)&&(h.t=p,h.m+=v-y),d&&!W8(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function qL(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var SSe=(1+Math.sqrt(5))/2;function TSe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),S=g*g*E,w=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*E,b=Math.max(v/S,S/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?YI(u,n,r,i,m?r+=p*g/m:s):qL(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const ASe=function e(t){function n(r,i,s,o,a){TSe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(SSe);function Pdt(){var e=ASe,t=!1,n=1,r=1,i=[0],s=k1,o=k1,a=k1,u=k1,l=k1;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(xSe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=bSe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:C_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:C_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:C_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:C_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:C_(+d),c):l},c}function Ddt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,S=d-1;E<S;){var T=E+S>>>1;l[T]<w?E=T+1:S=T}w-l[E-1]<l[E]-w&&f+1<E&&--E;var A=l[E]-b,C=h-A;if(g-p>y-m){var I=h?(p*C+g*A)/h:g;c(f,E,A,p,m,I,y),c(E,d,C,I,m,g,y)}else{var R=h?(m*C+y*A)/h:y;c(f,E,A,p,m,g,R),c(E,d,C,p,R,g,y)}}}function Odt(e,t,n,r,i){(e.depth&1?qL:YI)(e,t,n,r,i)}const $dt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?YI(l,i,s,o,m?s+=(a-s)*l.value/m:a):qL(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=TSe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(SSe);function Kf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Cy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const D7=Symbol("implicit");function Ux(){var e=new Fae,t=[],n=[],r=D7;function i(s){let o=e.get(s);if(o===void 0){if(r!==D7)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Fae;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Ux(t,n).unknown(r)},Kf.apply(i,arguments),i}function KI(){var e=Ux().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Iu(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return KI(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Kf.apply(f(),arguments)}function Mdt(e){return function(){return e}}function O7(e){return+e}var ile=[0,1];function ku(e){return e}function $7(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Mdt(isNaN(t)?NaN:.5)}function Ldt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Fdt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=$7(i,r),s=n(o,s)):(r=$7(r,i),s=n(s,o)),function(a){return s(r(a))}}function jdt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=$7(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=O0(e,a,1,r)-1;return s[u](i[u](a))}}function XI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function WL(){var e=ile,t=ile,n=Wm,r,i,s,o=ku,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==ku&&(o=Ldt(e[0],e[d-1])),a=d>2?jdt:Fdt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),oc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,O7),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=HI,c()},f.clamp=function(d){return arguments.length?(o=d?!0:ku,c()):o!==ku},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function CSe(){return WL()(ku,ku)}function ISe(e,t,n,r){var i=$0(e,t,n),s;switch(r=Ov(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=kxe(i,o))&&(r.precision=s),RY(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Rxe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Ixe(i))&&(r.precision=s-(r.type==="%")*2);break}}return jx(r)}function Tb(e){var t=e.domain;return e.ticks=function(n){var r=t();return GU(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return ISe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=YU(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function bm(){var e=CSe();return e.copy=function(){return XI(e,bm())},Kf.apply(e,arguments),Tb(e)}function kSe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,O7),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return kSe(e).unknown(t)},e=arguments.length?Array.from(e,O7):[0,1],Tb(n)}function RSe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function sle(e){return Math.log(e)}function ole(e){return Math.exp(e)}function Bdt(e){return-Math.log(-e)}function Udt(e){return-Math.exp(-e)}function zdt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Vdt(e){return e===10?zdt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Hdt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ale(e){return(t,n)=>-e(-t,n)}function FY(e){const t=e(sle,ole),n=t.domain;let r=10,i,s;function o(){return i=Hdt(r),s=Vdt(r),n()[0]<0?(i=ale(i),s=ale(s),e(Bdt,Udt)):e(sle,ole),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=GU(l,c,g))}else y=GU(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Ov(u)).precision==null&&(u.trim=!0),u=jx(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(RSe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function NSe(){const e=FY(WL()).domain([1,10]);return e.copy=()=>XI(e,NSe()).base(e.base()),Kf.apply(e,arguments),e}function ule(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function lle(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function jY(e){var t=1,n=e(ule(t),lle(t));return n.constant=function(r){return arguments.length?e(ule(t=+r),lle(t)):t},Tb(n)}function PSe(){var e=jY(WL());return e.copy=function(){return XI(e,PSe()).constant(e.constant())},Kf.apply(e,arguments)}function cle(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function qdt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Wdt(e){return e<0?-e*e:e*e}function BY(e){var t=e(ku,ku),n=1;function r(){return n===1?e(ku,ku):n===.5?e(qdt,Wdt):e(cle(n),cle(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Tb(t)}function UY(){var e=BY(WL());return e.copy=function(){return XI(e,UY()).exponent(e.exponent())},Kf.apply(e,arguments),e}function Gdt(){return UY.apply(null,arguments).exponent(.5)}function DSe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=CEe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[O0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Yp),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return DSe().domain(e).range(t).unknown(r)},Kf.apply(s,arguments)}function OSe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[O0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return OSe().domain([e,t]).range(i).unknown(s)},Kf.apply(Tb(o),arguments)}function $Se(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[O0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return $Se().domain(e).range(t).unknown(n)},Kf.apply(i,arguments)}const Y8=new Date,K8=new Date;function Fs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Fs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(Y8.setTime(+s),K8.setTime(+o),e(Y8),e(K8),Math.floor(n(Y8,K8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const bE=Fs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);bE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Fs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):bE);bE.range;const Lp=1e3,hc=Lp*60,Fp=hc*60,_m=Fp*24,zY=_m*7,fle=_m*30,X8=_m*365,jp=Fs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Lp)},(e,t)=>(t-e)/Lp,e=>e.getUTCSeconds());jp.range;const GL=Fs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lp)},(e,t)=>{e.setTime(+e+t*hc)},(e,t)=>(t-e)/hc,e=>e.getMinutes());GL.range;const YL=Fs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*hc)},(e,t)=>(t-e)/hc,e=>e.getUTCMinutes());YL.range;const KL=Fs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lp-e.getMinutes()*hc)},(e,t)=>{e.setTime(+e+t*Fp)},(e,t)=>(t-e)/Fp,e=>e.getHours());KL.range;const XL=Fs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Fp)},(e,t)=>(t-e)/Fp,e=>e.getUTCHours());XL.range;const Xp=Fs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hc)/_m,e=>e.getDate()-1);Xp.range;const h0=Fs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_m,e=>e.getUTCDate()-1);h0.range;const MSe=Fs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_m,e=>Math.floor(e/_m));MSe.range;function Ab(e){return Fs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*hc)/zY)}const zx=Ab(0),f3=Ab(1),Ydt=Ab(2),Kdt=Ab(3),_E=Ab(4),Xdt=Ab(5),Qdt=Ab(6);zx.range;f3.range;Ydt.range;Kdt.range;_E.range;Xdt.range;Qdt.range;function Cb(e){return Fs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/zY)}const Vx=Cb(0),d3=Cb(1),Jdt=Cb(2),Zdt=Cb(3),wE=Cb(4),eht=Cb(5),tht=Cb(6);Vx.range;d3.range;Jdt.range;Zdt.range;wE.range;eht.range;tht.range;const p2=Fs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());p2.range;const m2=Fs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());m2.range;const dh=Fs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());dh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});dh.range;const hh=Fs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());hh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});hh.range;function LSe(e,t,n,r,i,s){const o=[[jp,1,Lp],[jp,5,5*Lp],[jp,15,15*Lp],[jp,30,30*Lp],[s,1,hc],[s,5,5*hc],[s,15,15*hc],[s,30,30*hc],[i,1,Fp],[i,3,3*Fp],[i,6,6*Fp],[i,12,12*Fp],[r,1,_m],[r,2,2*_m],[n,1,zY],[t,1,fle],[t,3,3*fle],[e,1,X8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Lx(([,,g])=>g).right(o,d);if(h===o.length)return e.every($0(l/X8,c/X8,f));if(h===0)return bE.every(Math.max($0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[nht,rht]=LSe(hh,m2,Vx,MSe,XL,YL),[iht,sht]=LSe(dh,p2,zx,Xp,KL,GL);function Q8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function J8(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function iT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function FSe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=sT(i),c=oT(i),f=sT(s),d=oT(s),h=sT(o),p=oT(o),m=sT(a),g=oT(a),y=sT(u),v=oT(u),b={a:B,A:U,b:H,B:D,c:null,d:yle,e:yle,f:Iht,g:Fht,G:Bht,H:Tht,I:Aht,j:Cht,L:jSe,m:kht,M:Rht,p:z,q:W,Q:_le,s:wle,S:Nht,u:Pht,U:Dht,V:Oht,w:$ht,W:Mht,x:null,X:null,y:Lht,Y:jht,Z:Uht,"%":ble},w={a:j,A:q,b:G,B:ne,c:null,d:vle,e:vle,f:qht,g:tpt,G:rpt,H:zht,I:Vht,j:Hht,L:USe,m:Wht,M:Ght,p:ce,q:de,Q:_le,s:wle,S:Yht,u:Kht,U:Xht,V:Qht,w:Jht,W:Zht,x:null,X:null,y:ept,Y:npt,Z:ipt,"%":ble},E={a:I,A:R,b:M,B:P,c:O,d:mle,e:mle,f:wht,g:ple,G:hle,H:gle,I:gle,j:yht,L:_ht,m:ght,M:vht,p:C,q:mht,Q:xht,s:Sht,S:bht,u:cht,U:fht,V:dht,w:lht,W:hht,x:F,X:L,y:ple,Y:hle,Z:pht,"%":Eht};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(he,ye){return function(Ie){var ve=[],Ke=-1,Ue=0,gt=he.length,rt,be,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ke<gt;)he.charCodeAt(Ke)===37&&(ve.push(he.slice(Ue,Ke)),(be=dle[rt=he.charAt(++Ke)])!=null?rt=he.charAt(++Ke):be=rt==="e"?" ":"0",(ke=ye[rt])&&(rt=ke(Ie,be)),ve.push(rt),Ue=Ke+1);return ve.push(he.slice(Ue,Ke)),ve.join("")}}function T(he,ye){return function(Ie){var ve=iT(1900,void 0,1),Ke=A(ve,he,Ie+="",0),Ue,gt;if(Ke!=Ie.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(ye&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(Ue=J8(iT(ve.y,0,1)),gt=Ue.getUTCDay(),Ue=gt>4||gt===0?d3.ceil(Ue):d3(Ue),Ue=h0.offset(Ue,(ve.V-1)*7),ve.y=Ue.getUTCFullYear(),ve.m=Ue.getUTCMonth(),ve.d=Ue.getUTCDate()+(ve.w+6)%7):(Ue=Q8(iT(ve.y,0,1)),gt=Ue.getDay(),Ue=gt>4||gt===0?f3.ceil(Ue):f3(Ue),Ue=Xp.offset(Ue,(ve.V-1)*7),ve.y=Ue.getFullYear(),ve.m=Ue.getMonth(),ve.d=Ue.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),gt="Z"in ve?J8(iT(ve.y,0,1)).getUTCDay():Q8(iT(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(gt+5)%7:ve.w+ve.U*7-(gt+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,J8(ve)):Q8(ve)}}function A(he,ye,Ie,ve){for(var Ke=0,Ue=ye.length,gt=Ie.length,rt,be;Ke<Ue;){if(ve>=gt)return-1;if(rt=ye.charCodeAt(Ke++),rt===37){if(rt=ye.charAt(Ke++),be=E[rt in dle?ye.charAt(Ke++):rt],!be||(ve=be(he,Ie,ve))<0)return-1}else if(rt!=Ie.charCodeAt(ve++))return-1}return ve}function C(he,ye,Ie){var ve=l.exec(ye.slice(Ie));return ve?(he.p=c.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function I(he,ye,Ie){var ve=h.exec(ye.slice(Ie));return ve?(he.w=p.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function R(he,ye,Ie){var ve=f.exec(ye.slice(Ie));return ve?(he.w=d.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function M(he,ye,Ie){var ve=y.exec(ye.slice(Ie));return ve?(he.m=v.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function P(he,ye,Ie){var ve=m.exec(ye.slice(Ie));return ve?(he.m=g.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function O(he,ye,Ie){return A(he,t,ye,Ie)}function F(he,ye,Ie){return A(he,n,ye,Ie)}function L(he,ye,Ie){return A(he,r,ye,Ie)}function B(he){return o[he.getDay()]}function U(he){return s[he.getDay()]}function H(he){return u[he.getMonth()]}function D(he){return a[he.getMonth()]}function z(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function j(he){return o[he.getUTCDay()]}function q(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ne(he){return a[he.getUTCMonth()]}function ce(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ye=S(he+="",b);return ye.toString=function(){return he},ye},parse:function(he){var ye=T(he+="",!1);return ye.toString=function(){return he},ye},utcFormat:function(he){var ye=S(he+="",w);return ye.toString=function(){return he},ye},utcParse:function(he){var ye=T(he+="",!0);return ye.toString=function(){return he},ye}}}var dle={"-":"",_:" ",0:"0"},uo=/^\s*\d+/,oht=/^%/,aht=/[\\^$*+?|[\]().{}]/g;function pr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function uht(e){return e.replace(aht,"\\$&")}function sT(e){return new RegExp("^(?:"+e.map(uht).join("|")+")","i")}function oT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function lht(e,t,n){var r=uo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function cht(e,t,n){var r=uo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function fht(e,t,n){var r=uo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function dht(e,t,n){var r=uo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function hht(e,t,n){var r=uo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function hle(e,t,n){var r=uo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function ple(e,t,n){var r=uo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function pht(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function mht(e,t,n){var r=uo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function ght(e,t,n){var r=uo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function mle(e,t,n){var r=uo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function yht(e,t,n){var r=uo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function gle(e,t,n){var r=uo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function vht(e,t,n){var r=uo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function bht(e,t,n){var r=uo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function _ht(e,t,n){var r=uo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function wht(e,t,n){var r=uo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Eht(e,t,n){var r=oht.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function xht(e,t,n){var r=uo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Sht(e,t,n){var r=uo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function yle(e,t){return pr(e.getDate(),t,2)}function Tht(e,t){return pr(e.getHours(),t,2)}function Aht(e,t){return pr(e.getHours()%12||12,t,2)}function Cht(e,t){return pr(1+Xp.count(dh(e),e),t,3)}function jSe(e,t){return pr(e.getMilliseconds(),t,3)}function Iht(e,t){return jSe(e,t)+"000"}function kht(e,t){return pr(e.getMonth()+1,t,2)}function Rht(e,t){return pr(e.getMinutes(),t,2)}function Nht(e,t){return pr(e.getSeconds(),t,2)}function Pht(e){var t=e.getDay();return t===0?7:t}function Dht(e,t){return pr(zx.count(dh(e)-1,e),t,2)}function BSe(e){var t=e.getDay();return t>=4||t===0?_E(e):_E.ceil(e)}function Oht(e,t){return e=BSe(e),pr(_E.count(dh(e),e)+(dh(e).getDay()===4),t,2)}function $ht(e){return e.getDay()}function Mht(e,t){return pr(f3.count(dh(e)-1,e),t,2)}function Lht(e,t){return pr(e.getFullYear()%100,t,2)}function Fht(e,t){return e=BSe(e),pr(e.getFullYear()%100,t,2)}function jht(e,t){return pr(e.getFullYear()%1e4,t,4)}function Bht(e,t){var n=e.getDay();return e=n>=4||n===0?_E(e):_E.ceil(e),pr(e.getFullYear()%1e4,t,4)}function Uht(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pr(t/60|0,"0",2)+pr(t%60,"0",2)}function vle(e,t){return pr(e.getUTCDate(),t,2)}function zht(e,t){return pr(e.getUTCHours(),t,2)}function Vht(e,t){return pr(e.getUTCHours()%12||12,t,2)}function Hht(e,t){return pr(1+h0.count(hh(e),e),t,3)}function USe(e,t){return pr(e.getUTCMilliseconds(),t,3)}function qht(e,t){return USe(e,t)+"000"}function Wht(e,t){return pr(e.getUTCMonth()+1,t,2)}function Ght(e,t){return pr(e.getUTCMinutes(),t,2)}function Yht(e,t){return pr(e.getUTCSeconds(),t,2)}function Kht(e){var t=e.getUTCDay();return t===0?7:t}function Xht(e,t){return pr(Vx.count(hh(e)-1,e),t,2)}function zSe(e){var t=e.getUTCDay();return t>=4||t===0?wE(e):wE.ceil(e)}function Qht(e,t){return e=zSe(e),pr(wE.count(hh(e),e)+(hh(e).getUTCDay()===4),t,2)}function Jht(e){return e.getUTCDay()}function Zht(e,t){return pr(d3.count(hh(e)-1,e),t,2)}function ept(e,t){return pr(e.getUTCFullYear()%100,t,2)}function tpt(e,t){return e=zSe(e),pr(e.getUTCFullYear()%100,t,2)}function npt(e,t){return pr(e.getUTCFullYear()%1e4,t,4)}function rpt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?wE(e):wE.ceil(e),pr(e.getUTCFullYear()%1e4,t,4)}function ipt(){return"+0000"}function ble(){return"%"}function _le(e){return+e}function wle(e){return Math.floor(+e/1e3)}var c_,VY,VSe,QL,HSe;spt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function spt(e){return c_=FSe(e),VY=c_.format,VSe=c_.parse,QL=c_.utcFormat,HSe=c_.utcParse,c_}function opt(e){return new Date(e)}function apt(e){return e instanceof Date?+e:+new Date(+e)}function HY(e,t,n,r,i,s,o,a,u,l){var c=CSe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?b:w)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,apt)):d().map(opt)},c.ticks=function(S){var T=d();return e(T[0],T[T.length-1],S??10)},c.tickFormat=function(S,T){return T==null?E:l(T)},c.nice=function(S){var T=d();return(!S||typeof S.range!="function")&&(S=t(T[0],T[T.length-1],S??10)),S?d(RSe(T,S)):c},c.copy=function(){return XI(c,HY(e,t,n,r,i,s,o,a,u,l))},c}function qSe(){return Kf.apply(HY(iht,sht,dh,p2,zx,Xp,KL,GL,jp,VY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function upt(){return Kf.apply(HY(nht,rht,hh,m2,Vx,h0,XL,YL,jp,QL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function JL(){var e=0,t=1,n,r,i,s,o=ku,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Wm),l.rangeRound=c(HI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Iy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function qY(){var e=Tb(JL()(ku));return e.copy=function(){return Iy(e,qY())},Cy.apply(e,arguments)}function WSe(){var e=FY(JL()).domain([1,10]);return e.copy=function(){return Iy(e,WSe()).base(e.base())},Cy.apply(e,arguments)}function GSe(){var e=jY(JL());return e.copy=function(){return Iy(e,GSe()).constant(e.constant())},Cy.apply(e,arguments)}function WY(){var e=BY(JL());return e.copy=function(){return Iy(e,WY()).exponent(e.exponent())},Cy.apply(e,arguments)}function lpt(){return WY.apply(null,arguments).exponent(.5)}function ZL(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=ku,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=_Y(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Wm),h.rangeRound=p(HI),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function YSe(){var e=Tb(ZL()(ku));return e.copy=function(){return Iy(e,YSe())},Cy.apply(e,arguments)}function KSe(){var e=FY(ZL()).domain([.1,1,10]);return e.copy=function(){return Iy(e,KSe()).base(e.base())},Cy.apply(e,arguments)}function XSe(){var e=jY(ZL());return e.copy=function(){return Iy(e,XSe()).constant(e.constant())},Cy.apply(e,arguments)}function GY(){var e=BY(ZL());return e.copy=function(){return Iy(e,GY()).exponent(e.exponent())},Cy.apply(e,arguments)}function cpt(){return GY.apply(null,arguments).exponent(.5)}function Xf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const fpt=Xf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),dpt=Xf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),hpt=Xf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ppt=Xf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),mpt=Xf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),gpt=Xf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ypt=Xf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),vpt=Xf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),bpt=Xf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),_pt=Xf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),QSe=Xf("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function _n(e){return function(){return e}}const Ele=Math.abs,Yo=Math.atan2,Zy=Math.cos,wpt=Math.max,Z8=Math.min,cd=Math.sin,G1=Math.sqrt,Qo=1e-12,EE=Math.PI,h3=EE/2,eC=2*EE;function Ept(e){return e>1?0:e<-1?EE:Math.acos(e)}function xle(e){return e>=1?h3:e<=-1?-h3:Math.asin(e)}function e6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new TY(t)}function xpt(e){return e.innerRadius}function Spt(e){return e.outerRadius}function Tpt(e){return e.startAngle}function Apt(e){return e.endAngle}function Cpt(e){return e&&e.padAngle}function Ipt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Qo))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function yN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/G1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,S=d*m-p*h,T=(b<0?-1:1)*G1(wpt(0,E*E*w-S*S)),A=(S*b-v*T)/w,C=(-S*v-b*T)/w,I=(S*b+v*T)/w,R=(-S*v+b*T)/w,M=A-g,P=C-y,O=I-g,F=R-y;return M*M+P*P>O*O+F*F&&(A=I,C=R),{cx:A,cy:C,x01:-c,y01:-f,x11:A*(i/E-1),y11:C*(i/E-1)}}function M7(){var e=xpt,t=Spt,n=_n(0),r=null,i=Tpt,s=Apt,o=Cpt,a=null,u=e6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-h3,m=s.apply(this,arguments)-h3,g=Ele(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Qo))a.moveTo(0,0);else if(g>eC-Qo)a.moveTo(h*Zy(p),h*cd(p)),a.arc(0,0,h,p,m,!y),d>Qo&&(a.moveTo(d*Zy(m),d*cd(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,S=g,T=g,A=o.apply(this,arguments)/2,C=A>Qo&&(r?+r.apply(this,arguments):G1(d*d+h*h)),I=Z8(Ele(h-d)/2,+n.apply(this,arguments)),R=I,M=I,P,O;if(C>Qo){var F=xle(C/d*cd(A)),L=xle(C/h*cd(A));(S-=F*2)>Qo?(F*=y?1:-1,w+=F,E-=F):(S=0,w=E=(p+m)/2),(T-=L*2)>Qo?(L*=y?1:-1,v+=L,b-=L):(T=0,v=b=(p+m)/2)}var B=h*Zy(v),U=h*cd(v),H=d*Zy(E),D=d*cd(E);if(I>Qo){var z=h*Zy(b),W=h*cd(b),j=d*Zy(w),q=d*cd(w),G;if(g<EE)if(G=Ipt(B,U,j,q,z,W,H,D)){var ne=B-G[0],ce=U-G[1],de=z-G[0],he=W-G[1],ye=1/cd(Ept((ne*de+ce*he)/(G1(ne*ne+ce*ce)*G1(de*de+he*he)))/2),Ie=G1(G[0]*G[0]+G[1]*G[1]);R=Z8(I,(d-Ie)/(ye-1)),M=Z8(I,(h-Ie)/(ye+1))}else R=M=0}T>Qo?M>Qo?(P=yN(j,q,B,U,h,M,y),O=yN(z,W,H,D,h,M,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),M<I?a.arc(P.cx,P.cy,M,Yo(P.y01,P.x01),Yo(O.y01,O.x01),!y):(a.arc(P.cx,P.cy,M,Yo(P.y01,P.x01),Yo(P.y11,P.x11),!y),a.arc(0,0,h,Yo(P.cy+P.y11,P.cx+P.x11),Yo(O.cy+O.y11,O.cx+O.x11),!y),a.arc(O.cx,O.cy,M,Yo(O.y11,O.x11),Yo(O.y01,O.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,b,!y)):a.moveTo(B,U),!(d>Qo)||!(S>Qo)?a.lineTo(H,D):R>Qo?(P=yN(H,D,z,W,d,-R,y),O=yN(B,U,j,q,d,-R,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),R<I?a.arc(P.cx,P.cy,R,Yo(P.y01,P.x01),Yo(O.y01,O.x01),!y):(a.arc(P.cx,P.cy,R,Yo(P.y01,P.x01),Yo(P.y11,P.x11),!y),a.arc(0,0,d,Yo(P.cy+P.y11,P.cx+P.x11),Yo(O.cy+O.y11,O.cx+O.x11),y),a.arc(O.cx,O.cy,R,Yo(O.y11,O.x11),Yo(O.y01,O.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-EE/2;return[Zy(f)*c,cd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:_n(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:_n(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:_n(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:_n(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:_n(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:_n(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:_n(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function t6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JSe(e){this._context=e}JSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function YY(e){return new JSe(e)}function ZSe(e){return e[0]}function eTe(e){return e[1]}function tTe(e,t){var n=_n(!0),r=null,i=YY,s=null,o=e6(a);e=typeof e=="function"?e:e===void 0?ZSe:_n(e),t=typeof t=="function"?t:t===void 0?eTe:_n(t);function a(u){var l,c=(u=t6(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:_n(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:_n(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:_n(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function nTe(e,t,n){var r=null,i=_n(!0),s=null,o=YY,a=null,u=e6(l);e=typeof e=="function"?e:e===void 0?ZSe:_n(+e),t=typeof t=="function"?t:_n(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?eTe:_n(+n);function l(f){var d,h,p,m=(f=t6(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return tTe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:_n(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:_n(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:_n(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:_n(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:_n(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:_n(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:_n(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function kpt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Rpt(e){return e}function Npt(){var e=Rpt,t=kpt,n=null,r=_n(0),i=_n(eC),s=_n(0);function o(a){var u,l=(a=t6(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(eC,Math.max(-eC,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,S){return t(p[E],p[S])}):n!=null&&h.sort(function(E,S){return n(a[E],a[S])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+b,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:_n(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:_n(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:_n(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:_n(+a),o):s},o}const Ppt={draw(e,t){const n=G1(t/EE);e.moveTo(n,0),e.arc(0,0,n,0,eC)}};function Dpt(e,t){let n=null,r=e6(i);e=typeof e=="function"?e:_n(e||Ppt),t=typeof t=="function"?t:_n(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:_n(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:_n(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function L0(){}function p3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function n6(e){this._context=e}n6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:p3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:p3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Opt(e){return new n6(e)}function rTe(e){this._context=e}rTe.prototype={areaStart:L0,areaEnd:L0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:p3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $pt(e){return new rTe(e)}function iTe(e){this._context=e}iTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:p3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Mpt(e){return new iTe(e)}function sTe(e,t){this._basis=new n6(e),this._beta=t}sTe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Lpt=function e(t){function n(r){return t===1?new n6(r):new sTe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function m3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function KY(e,t){this._context=e,this._k=(1-t)/6}KY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:m3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:m3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Fpt=function e(t){function n(r){return new KY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function XY(e,t){this._context=e,this._k=(1-t)/6}XY.prototype={areaStart:L0,areaEnd:L0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:m3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jpt=function e(t){function n(r){return new XY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function QY(e,t){this._context=e,this._k=(1-t)/6}QY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:m3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Bpt=function e(t){function n(r){return new QY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function JY(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Qo){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Qo){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function oTe(e,t){this._context=e,this._alpha=t}oTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:JY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Upt=function e(t){function n(r){return t?new oTe(r,t):new KY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function aTe(e,t){this._context=e,this._alpha=t}aTe.prototype={areaStart:L0,areaEnd:L0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:JY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zpt=function e(t){function n(r){return t?new aTe(r,t):new XY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function uTe(e,t){this._context=e,this._alpha=t}uTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:JY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vpt=function e(t){function n(r){return t?new uTe(r,t):new QY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function lTe(e){this._context=e}lTe.prototype={areaStart:L0,areaEnd:L0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Hpt(e){return new lTe(e)}function Sle(e){return e<0?-1:1}function Tle(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Sle(s)+Sle(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Ale(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ej(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function g3(e){this._context=e}g3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ej(this,this._t0,Ale(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ej(this,Ale(this,n=Tle(this,e,t)),n);break;default:ej(this,this._t0,n=Tle(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function cTe(e){this._context=new fTe(e)}(cTe.prototype=Object.create(g3.prototype)).point=function(e,t){g3.prototype.point.call(this,t,e)};function fTe(e){this._context=e}fTe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function qpt(e){return new g3(e)}function Wpt(e){return new cTe(e)}function dTe(e){this._context=e}dTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Cle(e),i=Cle(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Cle(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Gpt(e){return new dTe(e)}function r6(e,t){this._context=e,this._t=t}r6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Ypt(e){return new r6(e,.5)}function Kpt(e){return new r6(e,0)}function Xpt(e){return new r6(e,1)}function Ile(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function kle(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Qpt(e,t){return e[t]}function Jpt(e){const t=[];return t.key=e,t}function Zpt(){var e=_n([]),t=kle,n=Ile,r=Qpt;function i(s){var o=Array.from(e.apply(this,arguments),Jpt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=t6(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:_n(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:_n(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?kle:typeof s=="function"?s:_n(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Ile,i):n},i}function tA(e,t,n){this.k=e,this.x=t,this.y=n}tA.prototype={constructor:tA,scale:function(e){return e===1?this:new tA(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new tA(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};tA.prototype;function ZY({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?QL("%B"):jx(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(dm,{children:_.jsx(Os,{gap:3,children:_.jsx(ot,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(dm,{children:_.jsx(sa,{withinPortal:!0,label:c,children:_.jsx(ot,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const emt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:ZY},Symbol.toStringTag,{value:"Module"}));function hTe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(dm,{children:_.jsx(Os,{gap:3,children:_.jsx(ot,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(Os,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(ot,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const tmt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:hTe},Symbol.toStringTag,{value:"Module"})),Yl={top:15,left:100,right:50,bottom:50};function L7({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=gw(),o=N.useMemo(()=>s-Yl.left-Yl.right,[s]),a=N.useMemo(()=>i-Yl.top-Yl.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Ux(QSe).domain(d)},[n,t.category]),l=N.useMemo(()=>e?bm([Yl.left,o+Yl.left]).domain([0,d0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?KI([Yl.top,a+Yl.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:Yl.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Yl.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(ZY,{xScale:l,yRange:c.range(),vertPosition:a+Yl.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(hTe,{yScale:c,horizontalPosition:Yl.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(jm,{})}const nmt=Object.freeze(Object.defineProperty({__proto__:null,Bar:L7,default:L7},Symbol.toStringTag,{value:"Module"})),fr=Array.isArray;function Hu(e){return e!=null?fr(e)?e:[e]:[]}function rmt(e=0,t=1/0){return`${Rle(e)} < row_number() && row_number() <= ${Rle(t)}`}function Rle(e){return e<0?`count() + ${e}`:e}class pTe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(rmt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Hu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function wn(e){throw Error(e)}function Qa(e){return typeof e=="number"}function fi(e){return typeof e=="function"}function i6(e,t){const n=Array(e);if(fi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let imt=class extends pTe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){wn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){wn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){wn("Not implemented")}getter(t){wn("Not implemented")}objects(t){wn("Not implemented")}object(t){wn("Not implemented")}[Symbol.iterator](){wn("Not implemented")}print(t={}){Qa(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=i6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},smt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},omt=function(e){return e&&fi(e.get)?e:new smt(e)};function wm(e){return e instanceof Date}function ga(e){return e===Object(e)}function y3(e){return e instanceof RegExp}function $o(e){return typeof e=="string"}function amt(e,t){const n=r=>wn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Nle(e.entries(),t):wm(e)?n("Date"):y3(e)?n("RegExp"):$o(e)?n():fr(e)?umt(e,t):fi(e[Symbol.iterator])?lmt(e,t):ga(e)?Nle(Object.entries(e),t):n()}function Nle(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function umt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function lmt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:cmt}=Object.prototype;function Lf(e,t){return cmt.call(e,t)}function Hl(e){return e?new Ple({...e.data()},e.columnNames()):new Ple}class Ple{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Lf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const or=void 0,fmt=Object.getPrototypeOf(Int8Array);function QI(e){return e instanceof fmt}function Y1(e){return fr(e)||QI(e)}function _f(e){return e!=null&&e===e}const aT=e=>Y1(e)||$o(e),dmt={compact:e=>Y1(e)?e.filter(t=>_f(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>aT(e)?e.includes(t,n):!1,indexof:(e,t)=>aT(e)?e.indexOf(t):-1,join:(e,t)=>Y1(e)?e.join(t):or,lastindexof:(e,t)=>aT(e)?e.lastIndexOf(t):-1,length:e=>aT(e)?e.length:0,pluck:(e,t)=>Y1(e)?e.map(n=>_f(n)?n[t]:or):or,reverse:e=>Y1(e)?e.slice().reverse():$o(e)?e.split("").reverse().join(""):or,slice:(e,t,n)=>aT(e)?e.slice(t,n):or};function hmt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function HP(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const fd=e=>(e<10?"0":"")+e,pmt=e=>e<0?"-"+HP(-e,6):e>9999?"+"+HP(e,6):HP(e,4);function mTe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return pmt(e)+"-"+fd(t+1)+"-"+fd(n)+(!u||o?"T"+fd(r)+":"+fd(i)+":"+fd(s)+"."+HP(o,3)+l:s?"T"+fd(r)+":"+fd(i)+":"+fd(s)+l:i||r||!a?"T"+fd(r)+":"+fd(i)+l:"")}function gTe(e,t){return isNaN(e)?"Invalid Date":mTe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function s6(e,t){return isNaN(e)?"Invalid Date":mTe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const mmt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function gmt(e){return e.match(mmt)&&!isNaN(Date.parse(e))}function ymt(e,t=Date.parse){return gmt(e)?t(e):e}const yTe=6e4,vTe=864e5,bTe=6048e5,Ui=new Date,zi=new Date,Ji=e=>(Ui.setTime(typeof e=="string"?ymt(e):e),Ui);function vmt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function bmt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function _mt(e){zi.setTime(+e),zi.setHours(0,0,0,0),Ui.setTime(+zi),Ui.setMonth(0),Ui.setDate(1);const t=(zi.getTimezoneOffset()-Ui.getTimezoneOffset())*yTe;return Math.floor(1+(zi-Ui-t)/vTe)}function wmt(e){zi.setTime(+e),zi.setUTCHours(0,0,0,0);const t=Date.UTC(zi.getUTCFullYear(),0,1);return Math.floor(1+(zi-t)/vTe)}function Emt(e,t){const n=t||0;zi.setTime(+e),zi.setDate(zi.getDate()-(zi.getDay()+7-n)%7),zi.setHours(0,0,0,0),Ui.setTime(+e),Ui.setMonth(0),Ui.setDate(1),Ui.setDate(1-(Ui.getDay()+7-n)%7),Ui.setHours(0,0,0,0);const r=(zi.getTimezoneOffset()-Ui.getTimezoneOffset())*yTe;return Math.floor((1+(zi-Ui)-r)/bTe)}function xmt(e,t){const n=t||0;return zi.setTime(+e),zi.setUTCDate(zi.getUTCDate()-(zi.getUTCDay()+7-n)%7),zi.setUTCHours(0,0,0,0),Ui.setTime(+e),Ui.setUTCMonth(0),Ui.setUTCDate(1),Ui.setUTCDate(1-(Ui.getUTCDay()+7-n)%7),Ui.setUTCHours(0,0,0,0),Math.floor((1+(zi-Ui))/bTe)}const Smt={format_date:(e,t)=>gTe(Ji(e),!t),format_utcdate:(e,t)=>s6(Ji(e),!t),timestamp:e=>+Ji(e),year:e=>Ji(e).getFullYear(),quarter:e=>Math.floor(Ji(e).getMonth()/3),month:e=>Ji(e).getMonth(),date:e=>Ji(e).getDate(),dayofweek:e=>Ji(e).getDay(),hours:e=>Ji(e).getHours(),minutes:e=>Ji(e).getMinutes(),seconds:e=>Ji(e).getSeconds(),milliseconds:e=>Ji(e).getMilliseconds(),utcyear:e=>Ji(e).getUTCFullYear(),utcquarter:e=>Math.floor(Ji(e).getUTCMonth()/3),utcmonth:e=>Ji(e).getUTCMonth(),utcdate:e=>Ji(e).getUTCDate(),utcdayofweek:e=>Ji(e).getUTCDay(),utchours:e=>Ji(e).getUTCHours(),utcminutes:e=>Ji(e).getUTCMinutes(),utcseconds:e=>Ji(e).getUTCSeconds(),utcmilliseconds:e=>Ji(e).getUTCMilliseconds(),datetime:vmt,dayofyear:_mt,week:Emt,utcdatetime:bmt,utcdayofyear:wmt,utcweek:xmt,now:Date.now};function eK(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:wm(e)||wm(t)?+e==+t:y3(e)&&y3(t)?e+""==t+"":ga(e)&&ga(t)?Tmt(e,t):!1}function Tmt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Dle(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Dle(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!eK(e[o],t[o]))return!1}return!0}function Dle(e,t,n=eK){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const Amt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let Cmt=Math.random;function Hx(){return Cmt()}const Imt={random:Hx,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function tK(e){return e instanceof Map}function kmt(e){return e instanceof Set}function qP(e){return tK(e)||kmt(e)}function tj(e){return Array.from(e)}const Rmt={has:(e,t)=>qP(e)?e.has(t):e!=null?Lf(e,t):!1,keys:e=>tK(e)?tj(e.keys()):e!=null?Object.keys(e):[],values:e=>qP(e)?tj(e.values()):e!=null?Object.values(e):[],entries:e=>qP(e)?tj(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):or};function Nmt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Lf(t,e))return t[e];return n!==void 0?n:e}function Pmt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const Dmt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Z_={bin:hmt,equal:eK,recode:Nmt,sequence:Pmt,...dmt,...Smt,...Amt,...Imt,...Rmt,...Dmt};function g2(e){return typeof e=="bigint"}function ph(e){return e===void 0?e+"":g2(e)?e+"n":JSON.stringify(e)}function mn(e,t=[],n=[]){return new Omt(e,Hu(t),Hu(n))}let Omt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${ph(n)}]`),...this.params.map(ph)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const _Te=e=>mn("any",e),wTe=()=>mn("count"),ETe=e=>mn("array_agg",e),xTe=e=>mn("array_agg_distinct",e),STe=(e,t)=>mn("map_agg",[e,t]),TTe=(e,t)=>mn("object_agg",[e,t]),ATe=(e,t)=>mn("entries_agg",[e,t]);({...Z_});function $mt(e,t){e=qP(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function Mmt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function Lmt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function Fmt(e,t,n,r){const i=r==="map"||r===!0?STe:r==="entries"?ATe:r==="object"?TTe:wn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=$mt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:ETe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const jmt="ArrayPattern",Bmt="ArrowFunctionExpression",Umt="FunctionExpression",p0="Identifier",qx="Literal",CTe="MemberExpression",zmt="ObjectExpression",ITe="ObjectPattern",kTe="Property",JI="Column",Vmt="Constant",Hmt="Dictionary",qmt="Function",Wmt="Parameter",RTe="Op",Kr=(e,t)=>{const n=Gmt[e.type];return n?n(e,t):wn(`Unsupported expression construct: ${e.type}`)},nj=(e,t)=>"("+Kr(e.left,t)+" "+e.operator+" "+Kr(e.right,t)+")",rj=(e,t)=>"("+_d(e.params,t)+")=>"+Kr(e.body,t),Ole=(e,t)=>Kr(e.callee,t)+"("+_d(e.arguments,t)+")",_d=(e,t,n=",")=>e.map(r=>Kr(r,t)).join(n),NTe=e=>e.computed?`[${ph(e.name)}]`:`.${e.name}`,$le=(e,t,n)=>{const r=e.table||"";return`data${r}${NTe(e)}.${n}(${t.index}${r})`},Gmt={Constant:e=>e.raw,Column:(e,t)=>$le(e,t,"get"),Dictionary:(e,t)=>$le(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${NTe(e)}`,Op:(e,t)=>`op(${ph(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Kr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Kr(e.object,t),i=Kr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Ole,NewExpression:(e,t)=>"new "+Ole(e,t),ArrayExpression:(e,t)=>"["+_d(e.elements,t)+"]",AssignmentExpression:nj,BinaryExpression:nj,LogicalExpression:nj,UnaryExpression:(e,t)=>"("+e.operator+Kr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Kr(e.test,t)+"?"+Kr(e.consequent,t)+":"+Kr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+_d(e.properties,t)+"})",Property:(e,t)=>{const n=Kr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Kr(e.value,t)},ArrowFunctionExpression:rj,FunctionExpression:rj,FunctionDeclaration:rj,ArrayPattern:(e,t)=>"["+_d(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+_d(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+_d(e.declarations,t,","),VariableDeclarator:(e,t)=>Kr(e.id,t)+"="+Kr(e.init,t),SpreadElement:(e,t)=>"..."+Kr(e.argument,t),BlockStatement:(e,t)=>"{"+_d(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Kr(e.expression,t),IfStatement:(e,t)=>"if ("+Kr(e.test,t)+")"+Kr(e.consequent,t)+(e.alternate?" else "+Kr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Kr(e.discriminant,t)+") {"+_d(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Kr(e.test,t):"default")+": "+_d(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Kr(e.argument,t),Program:(e,t)=>Kr(e.body[0],t)};function v3(e,t={index:"row"}){return Kr(e,t)}function Ymt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function xE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:wm(e)?+e:fr(e)||QI(e)?`[${e.map(xE)}]`:y3(e)?e+"":Kmt(e)}function Kmt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${xE(e[r])}`;return t+="}",t}function b3(e,t){const n=e.length;return n===1?(r,i)=>xE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=xE(a)}return s}}function Xmt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=xE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=xE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function wp(){}function Qmt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function _s(e){return e.init=e.init||wp,e.add=e.add||wp,e.rem=e.rem||wp,e}function Mle(e,t){return e.product_v=!1,e.product=t}const PTe={count:{create:()=>_s({value:e=>e.count}),param:[]},array_agg:{create:()=>_s({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>_s({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>_s({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>_s({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>_s({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:or}),param:[1]},valid:{create:()=>_s({value:e=>e.valid}),param:[1]},invalid:{create:()=>_s({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=Xmt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>_s({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>_s({value:e=>{let t=or,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:or,add:(e,t)=>g2(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Mle(e,1),value:e=>e.valid?e.product_v?Mle(e,Qmt(e.list.values())):e.product:void 0,add:(e,t)=>g2(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:or,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>_s({value:e=>e.valid?e.mean:or}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):or,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>_s({value:e=>e.valid>1?e.dev/e.valid:or}),param:[1],req:["variance"]},stdev:{create:()=>_s({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):or}),param:[1],req:["variance"]},stdevp:{create:()=>_s({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):or}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=or,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===or)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=or,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===or)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>_s({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>_s({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):or,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>_s({value:e=>e.valid>1?e.cov/e.valid:or}),param:[2],req:["covariance"]},corr:{create:()=>_s({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):or}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>_s({value:i=>Ymt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Lle={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Fle={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},DTe={row_number:{create(){return{init:wp,value:e=>e.index+1}},param:[]},rank:Lle,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Lle.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Fle,ntile:{create(e){e=+e,e>0||wn("ntile num must be greater than zero.");const{init:t,value:n}=Fle.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=or){return e=+e||1,{init:wp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=or){return e=+e||1,{init:wp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:wp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:wp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||wn("nth_value nth must be greater than zero."),{init:wp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):or}}},param:[1,1]},fill_down:{create(e=or){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return _f(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=or){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Jmt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Jmt(e,t,n){for(const r=e.size;n<r;++n)if(_f(e.value(n,t)))return n;return-1}function nK(e){return Lf(PTe,e)}function rK(e){return Lf(DTe,e)}function OTe(e){return Lf(Z_,e)||e==="row_object"}function $Te(e){return nK(e)&&PTe[e]}function MTe(e){return rK(e)&&DTe[e]}function uT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const iK={escape:(e,t,n)=>uT(e,t,n),expr:(e,t)=>uT(`(row,data,op)=>${e}`,Z_,t),expr2:(e,t)=>uT(`(row0,data0,row,data)=>${e}`,Z_,t),join:(e,t)=>uT(`(row1,data1,row2,data2)=>${e}`,Z_,t),param:(e,t)=>uT(e,Z_,t)},Zmt={"==":1,"!=":1,"===":1,"!==":1};function LTe(e,t,n=0,r,i){if(e.type=JI,e.name=t,e.table=n,i&&r&&fi(r.keyFor)){const s=Zmt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===qx&&egt(i,e,s,r.keyFor(s.value))}return e}function egt(e,t,n,r){return r<0?(e.type=qx,e.value=!1,e.raw="false"):(t.type=Hmt,n.value=r,n.raw=r+""),!0}function o6(e){return fr(e)?e:tK(e)?e.entries():e?Object.entries(e):[]}const FTe="row_object";function jTe(e,t){e.type=zmt;const n=e.properties=[];for(const r of o6(t)){const[i,s]=fr(r)?r:[r,r];n.push({type:kTe,key:{type:qx,raw:ph(s)},value:LTe({computed:!0},i)})}return e}function BTe(e){return v3(jTe({},e))}function UTe(e){return iK.expr(BTe(e))}const tgt=new TextDecoder("utf-8"),F7=e=>tgt.decode(e),ngt=new TextEncoder,sK=e=>ngt.encode(e),rgt=e=>typeof e=="boolean",mu=e=>typeof e=="function",ky=e=>e!=null&&Object(e)===e,a6=e=>ky(e)&&mu(e.then),oK=e=>ky(e)&&mu(e[Symbol.iterator]),u6=e=>ky(e)&&mu(e[Symbol.asyncIterator]),igt=e=>ky(e)&&"done"in e&&"value"in e,zTe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,sgt=e=>ky(e)&&mu(e.abort)&&mu(e.getWriter)&&!zTe(e),ogt=e=>ky(e)&&mu(e.end)&&mu(e.write)&&rgt(e.writable)&&!zTe(e),agt=e=>ky(e)&&mu(e.clear)&&mu(e.bytes)&&mu(e.position)&&mu(e.setPosition)&&mu(e.capacity)&&mu(e.getBufferIdentifier)&&mu(e.createLong),aK=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function ugt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function _3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function mh(e,t){const n=ugt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?_3(o,s,a):o=s;break}_3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function qs(e,t){let n=igt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=sK(n)),n instanceof ArrayBuffer?new e(n):n instanceof aK?new e(n):agt(n)?qs(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const lT=e=>qs(Int32Array,e),Rr=e=>qs(Uint8Array,e),j7=e=>(e.next(),e);function*lgt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof aK?n(t):oK(t)?t:n(t);return yield*j7(function*(i){let s=null;do s=i.next(yield qs(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const cgt=e=>lgt(Uint8Array,e);function VTe(e,t){return z1(this,arguments,function*(){if(a6(t))return yield Gn(yield Gn(yield*F5(jA(VTe(e,yield Gn(t))))));const r=function(o){return z1(this,arguments,function*(){yield yield Gn(yield Gn(o))})},i=function(o){return z1(this,arguments,function*(){yield Gn(yield*F5(jA(j7(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof aK?r(t):oK(t)?i(t):u6(t)?t:r(t);return yield Gn(yield*F5(jA(j7(function(o){return z1(this,arguments,function*(){let a=null;do a=yield Gn(o.next(yield yield Gn(qs(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Gn(new e)})}const fgt=e=>VTe(Uint8Array,e);function HTe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function dgt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const jle={fromIterable(e){return vN(hgt(e))},fromAsyncIterable(e){return vN(pgt(e))},fromDOMStream(e){return vN(mgt(e))},fromNodeStream(e){return vN(ygt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},vN=e=>(e.next(),e);function*hgt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?mh(r,o)[0]:([i,r,a]=mh(r,o),i)}({cmd:s,size:o}=yield null);const l=cgt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function pgt(e){return z1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?mh(i,a)[0]:([s,i,u]=mh(i,a),s)}({cmd:o,size:a}=yield yield Gn(null));const c=fgt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Gn(c.next()):yield Gn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Gn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Gn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Gn(c.return(new Uint8Array(0))))}return yield Gn(null)})}function mgt(e){return z1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?mh(i,a)[0]:([s,i,u]=mh(i,a),s)}({cmd:o,size:a}=yield yield Gn(null));const c=new ggt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Gn(c.read()):yield Gn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Rr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Gn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Gn(c.cancel(f)))}finally{r===!1?yield Gn(c.cancel()):e.locked&&c.releaseLock()}return yield Gn(null)})}class ggt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Tp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Tp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Rr(n)),n})}}const ij=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function ygt(e){return z1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?mh(l,a)[0]:([c,l,u]=mh(l,a),c)}if({cmd:o,size:a}=yield yield Gn(null),e.isTTY)return yield yield Gn(new Uint8Array(0)),yield Gn(null);try{n[0]=ij(e,"end"),n[1]=ij(e,"error");do{if(n[2]=ij(e,"readable"),[r,s]=yield Gn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Rr(e.read(a-u)),c.byteLength<a-u&&(c=Rr(e.read()))):c=Rr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Gn(f()));while(a<u)}while(!i)}finally{yield Gn(d(n,r==="error"?s:null))}return yield Gn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var ja;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ja||(ja={}));var qu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(qu||(qu={}));var Co;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Co||(Co={}));var gh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(gh||(gh={}));var Ht;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Ht||(Ht={}));var yh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(yh||(yh={}));var Ys;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Ys||(Ys={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var mp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(mp||(mp={}));const vgt=void 0;function Lv(e){if(e===null)return"null";if(e===vgt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Lv(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const bgt=Symbol.for("isArrowBigNum");function Qf(e,...t){return t.length===0?Object.setPrototypeOf(qs(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Qf.prototype[bgt]=!0;Qf.prototype.toJSON=function(){return`"${v2(this)}"`};Qf.prototype.valueOf=function(){return qTe(this)};Qf.prototype.toString=function(){return v2(this)};Qf.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return qTe(this);case"string":return v2(this);case"default":return _gt(this)}return v2(this)};function Tw(...e){return Qf.apply(this,e)}function Aw(...e){return Qf.apply(this,e)}function y2(...e){return Qf.apply(this,e)}Object.setPrototypeOf(Tw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Aw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(y2.prototype,Object.create(Uint32Array.prototype));Object.assign(Tw.prototype,Qf.prototype,{constructor:Tw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Aw.prototype,Qf.prototype,{constructor:Aw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(y2.prototype,Qf.prototype,{constructor:y2,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function qTe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const v2=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return sj(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return sj(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${sj(t)}`},_gt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:v2(e);function sj(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class uK{static new(t,n){switch(n){case!0:return new Tw(t);case!1:return new Aw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Tw(t)}return t.byteLength===16?new y2(t):new Aw(t)}static signed(t){return new Tw(t)}static unsigned(t){return new Aw(t)}static decimal(t){return new y2(t)}constructor(t,n){return uK.new(t,n)}}function Ff(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var WTe,GTe,YTe,KTe,XTe,QTe,JTe,ZTe,eAe,tAe,nAe,rAe,iAe,sAe,oAe,aAe,uAe,lAe,cAe,fAe;let En=class B7{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return B7.isUnion(t)&&t.mode===qu.Dense}static isSparseUnion(t){return B7.isUnion(t)&&t.mode===qu.Sparse}get typeId(){return re.NONE}};WTe=Symbol.toStringTag;En[WTe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(En.prototype);let Em=class extends En{toString(){return"Null"}get typeId(){return re.Null}};GTe=Symbol.toStringTag;Em[GTe]=(e=>e[Symbol.toStringTag]="Null")(Em.prototype);class Ja extends En{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}YTe=Symbol.toStringTag;Ja[YTe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Ja.prototype);class lK extends Ja{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class cK extends Ja{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class F0 extends Ja{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class fK extends Ja{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class dK extends Ja{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class hK extends Ja{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class pK extends Ja{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class mK extends Ja{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(lK.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(cK.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(F0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(fK.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(dK.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(hK.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(pK.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(mK.prototype,"ArrayType",{value:BigUint64Array});class j0 extends En{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Co.HALF:return Uint16Array;case Co.SINGLE:return Float32Array;case Co.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}KTe=Symbol.toStringTag;j0[KTe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(j0.prototype);class dAe extends j0{constructor(){super(Co.HALF)}}class gK extends j0{constructor(){super(Co.SINGLE)}}class yK extends j0{constructor(){super(Co.DOUBLE)}}Object.defineProperty(dAe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(gK.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(yK.prototype,"ArrayType",{value:Float64Array});let b2=class extends En{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};XTe=Symbol.toStringTag;b2[XTe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(b2.prototype);let SE=class extends En{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};QTe=Symbol.toStringTag;SE[QTe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(SE.prototype);let _2=class extends En{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};JTe=Symbol.toStringTag;_2[JTe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(_2.prototype);let w3=class extends En{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};ZTe=Symbol.toStringTag;w3[ZTe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(w3.prototype);class TE extends En{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${gh[this.unit]}>`}}eAe=Symbol.toStringTag;TE[eAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(TE.prototype);class wgt extends TE{constructor(){super(gh.DAY)}}class Egt extends TE{constructor(){super(gh.MILLISECOND)}}class xm extends En{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Ht[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}tAe=Symbol.toStringTag;xm[tAe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(xm.prototype);class xgt extends xm{constructor(){super(Ht.SECOND,32)}}class Sgt extends xm{constructor(){super(Ht.MILLISECOND,32)}}class Tgt extends xm{constructor(){super(Ht.MICROSECOND,64)}}class Agt extends xm{constructor(){super(Ht.NANOSECOND,64)}}class E3 extends En{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Ht[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}nAe=Symbol.toStringTag;E3[nAe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(E3.prototype);class AE extends En{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${yh[this.unit]}>`}}rAe=Symbol.toStringTag;AE[rAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(AE.prototype);class Cgt extends AE{constructor(){super(yh.DAY_TIME)}}class Igt extends AE{constructor(){super(yh.YEAR_MONTH)}}let x3=class extends En{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Ht[this.unit]}>`}};iAe=Symbol.toStringTag;x3[iAe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(x3.prototype);let CE=class extends En{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};sAe=Symbol.toStringTag;CE[sAe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(CE.prototype);class oa extends En{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}oAe=Symbol.toStringTag;oa[oAe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(oa.prototype);class w2 extends En{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}aAe=Symbol.toStringTag;w2[aAe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(w2.prototype);let S3=class extends En{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};uAe=Symbol.toStringTag;S3[uAe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(S3.prototype);let IE=class extends En{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};lAe=Symbol.toStringTag;IE[lAe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(IE.prototype);class E2 extends En{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}cAe=Symbol.toStringTag;E2[cAe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(E2.prototype);const kgt=(e=>()=>++e)(-1);class B0 extends En{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?kgt():Ff(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}fAe=Symbol.toStringTag;B0[fAe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(B0.prototype);function xd(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class xn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return Rgt(this,t,n)}getVisitFnByTypeId(t,n=!0){return I_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function Rgt(e,t,n=!0){return typeof t=="number"?I_(e,t,n):typeof t=="string"&&t in re?I_(e,re[t],n):t&&t instanceof En?I_(e,Ble(t),n):t!=null&&t.type&&t.type instanceof En?I_(e,Ble(t.type),n):I_(e,re.NONE,n)}function I_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Ble(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Co.HALF:return re.Float16;case Co.SINGLE:return re.Float32;case Co.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Ht.SECOND:return re.TimeSecond;case Ht.MILLISECOND:return re.TimeMillisecond;case Ht.MICROSECOND:return re.TimeMicrosecond;case Ht.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Ht.SECOND:return re.TimestampSecond;case Ht.MILLISECOND:return re.TimestampMillisecond;case Ht.MICROSECOND:return re.TimestampMicrosecond;case Ht.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case gh.DAY:return re.DateDay;case gh.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case yh.DAY_TIME:return re.IntervalDayTime;case yh.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Ht.SECOND:return re.DurationSecond;case Ht.MILLISECOND:return re.DurationMillisecond;case Ht.MICROSECOND:return re.DurationMicrosecond;case Ht.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case qu.Dense:return re.DenseUnion;case qu.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}xn.prototype.visitInt8=null;xn.prototype.visitInt16=null;xn.prototype.visitInt32=null;xn.prototype.visitInt64=null;xn.prototype.visitUint8=null;xn.prototype.visitUint16=null;xn.prototype.visitUint32=null;xn.prototype.visitUint64=null;xn.prototype.visitFloat16=null;xn.prototype.visitFloat32=null;xn.prototype.visitFloat64=null;xn.prototype.visitDateDay=null;xn.prototype.visitDateMillisecond=null;xn.prototype.visitTimestampSecond=null;xn.prototype.visitTimestampMillisecond=null;xn.prototype.visitTimestampMicrosecond=null;xn.prototype.visitTimestampNanosecond=null;xn.prototype.visitTimeSecond=null;xn.prototype.visitTimeMillisecond=null;xn.prototype.visitTimeMicrosecond=null;xn.prototype.visitTimeNanosecond=null;xn.prototype.visitDenseUnion=null;xn.prototype.visitSparseUnion=null;xn.prototype.visitIntervalDayTime=null;xn.prototype.visitIntervalYearMonth=null;xn.prototype.visitDuration=null;xn.prototype.visitDurationSecond=null;xn.prototype.visitDurationMillisecond=null;xn.prototype.visitDurationMicrosecond=null;xn.prototype.visitDurationNanosecond=null;const hAe=new Float64Array(1),f_=new Uint32Array(hAe.buffer);function pAe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function mAe(e){if(e!==e)return 32256;hAe[0]=e;const t=(f_[1]&2147483648)>>16&65535;let n=f_[1]&2146435072,r=0;return n>=1089470464?f_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(f_[1]&1048575)>>10):n<=1056964608?(r=1048576+(f_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(f_[1]&1048575)+512>>10),t|n|r&65535}class Kt extends xn{}function tn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const Ngt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},vK=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},Pgt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},Dgt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},gAe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},Ogt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Gm=({values:e},t,n)=>{e[t]=n},bK=({values:e},t,n)=>{e[t]=n},yAe=({values:e},t,n)=>{e[t]=mAe(n)},$gt=(e,t,n)=>{switch(e.type.precision){case Co.HALF:return yAe(e,t,n);case Co.SINGLE:case Co.DOUBLE:return bK(e,t,n)}},_K=({values:e},t,n)=>{Ngt(e,t,n.valueOf())},wK=({values:e},t,n)=>{vK(e,t*2,n.valueOf())},vAe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},Mgt=({values:e,valueOffsets:t},n,r)=>gAe(e,t,n,r),Lgt=({values:e,valueOffsets:t},n,r)=>{gAe(e,t,n,sK(r))},bAe=(e,t,n)=>{e.type.unit===gh.DAY?_K(e,t,n):wK(e,t,n)},EK=({values:e},t,n)=>vK(e,t*2,n/1e3),xK=({values:e},t,n)=>vK(e,t*2,n),SK=({values:e},t,n)=>Pgt(e,t*2,n),TK=({values:e},t,n)=>Dgt(e,t*2,n),_Ae=(e,t,n)=>{switch(e.type.unit){case Ht.SECOND:return EK(e,t,n);case Ht.MILLISECOND:return xK(e,t,n);case Ht.MICROSECOND:return SK(e,t,n);case Ht.NANOSECOND:return TK(e,t,n)}},AK=({values:e},t,n)=>{e[t]=n},CK=({values:e},t,n)=>{e[t]=n},IK=({values:e},t,n)=>{e[t]=n},kK=({values:e},t,n)=>{e[t]=n},wAe=(e,t,n)=>{switch(e.type.unit){case Ht.SECOND:return AK(e,t,n);case Ht.MILLISECOND:return CK(e,t,n);case Ht.MICROSECOND:return IK(e,t,n);case Ht.NANOSECOND:return kK(e,t,n)}},EAe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},Fgt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Sc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},jgt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Sc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},Bgt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),Ugt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),zgt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),Vgt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),Hgt=(e,t,n)=>{const r=e.type.children.map(s=>Sc.getVisitFn(s.type)),i=n instanceof Map?zgt(t,n):n instanceof dr?Ugt(t,n):Array.isArray(n)?Bgt(t,n):Vgt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},qgt=(e,t,n)=>{e.type.mode===qu.Dense?xAe(e,t,n):SAe(e,t,n)},xAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Sc.visit(i,e.valueOffsets[t],n)},SAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Sc.visit(i,t,n)},Wgt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},TAe=(e,t,n)=>{e.type.unit===yh.DAY_TIME?RK(e,t,n):NK(e,t,n)},RK=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},NK=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},PK=({values:e},t,n)=>{e[t]=n},DK=({values:e},t,n)=>{e[t]=n},OK=({values:e},t,n)=>{e[t]=n},$K=({values:e},t,n)=>{e[t]=n},AAe=(e,t,n)=>{switch(e.type.unit){case Ht.SECOND:return PK(e,t,n);case Ht.MILLISECOND:return DK(e,t,n);case Ht.MICROSECOND:return OK(e,t,n);case Ht.NANOSECOND:return $K(e,t,n)}},Ggt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Sc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Kt.prototype.visitBool=tn(Ogt);Kt.prototype.visitInt=tn(Gm);Kt.prototype.visitInt8=tn(Gm);Kt.prototype.visitInt16=tn(Gm);Kt.prototype.visitInt32=tn(Gm);Kt.prototype.visitInt64=tn(Gm);Kt.prototype.visitUint8=tn(Gm);Kt.prototype.visitUint16=tn(Gm);Kt.prototype.visitUint32=tn(Gm);Kt.prototype.visitUint64=tn(Gm);Kt.prototype.visitFloat=tn($gt);Kt.prototype.visitFloat16=tn(yAe);Kt.prototype.visitFloat32=tn(bK);Kt.prototype.visitFloat64=tn(bK);Kt.prototype.visitUtf8=tn(Lgt);Kt.prototype.visitBinary=tn(Mgt);Kt.prototype.visitFixedSizeBinary=tn(vAe);Kt.prototype.visitDate=tn(bAe);Kt.prototype.visitDateDay=tn(_K);Kt.prototype.visitDateMillisecond=tn(wK);Kt.prototype.visitTimestamp=tn(_Ae);Kt.prototype.visitTimestampSecond=tn(EK);Kt.prototype.visitTimestampMillisecond=tn(xK);Kt.prototype.visitTimestampMicrosecond=tn(SK);Kt.prototype.visitTimestampNanosecond=tn(TK);Kt.prototype.visitTime=tn(wAe);Kt.prototype.visitTimeSecond=tn(AK);Kt.prototype.visitTimeMillisecond=tn(CK);Kt.prototype.visitTimeMicrosecond=tn(IK);Kt.prototype.visitTimeNanosecond=tn(kK);Kt.prototype.visitDecimal=tn(EAe);Kt.prototype.visitList=tn(Fgt);Kt.prototype.visitStruct=tn(Hgt);Kt.prototype.visitUnion=tn(qgt);Kt.prototype.visitDenseUnion=tn(xAe);Kt.prototype.visitSparseUnion=tn(SAe);Kt.prototype.visitDictionary=tn(Wgt);Kt.prototype.visitInterval=tn(TAe);Kt.prototype.visitIntervalDayTime=tn(RK);Kt.prototype.visitIntervalYearMonth=tn(NK);Kt.prototype.visitDuration=tn(AAe);Kt.prototype.visitDurationSecond=tn(PK);Kt.prototype.visitDurationMillisecond=tn(DK);Kt.prototype.visitDurationMicrosecond=tn(OK);Kt.prototype.visitDurationNanosecond=tn($K);Kt.prototype.visitFixedSizeList=tn(Ggt);Kt.prototype.visitMap=tn(jgt);const Sc=new Kt,of=Symbol.for("parent"),Cw=Symbol.for("rowIndex");class MK{constructor(t,n){return this[of]=t,this[Cw]=n,new Proxy(this,new Kgt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Cw],n=this[of],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Wu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Lv(t)}: ${Lv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Ygt(this[of],this[Cw])}}class Ygt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Wu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(MK.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[of]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Cw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Kgt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[of].type.children.map(n=>n.name)}has(t,n){return t[of].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[of].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[of].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Wu.visit(t[of].children[r],t[Cw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[of].type.children.findIndex(s=>s.name===n);return i!==-1?(Sc.visit(t[of].children[i],t[Cw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class qt extends xn{}function Xt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const Xgt=(e,t)=>864e5*e[t],LK=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),Qgt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,Jgt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,CAe=e=>new Date(e),Zgt=(e,t)=>CAe(Xgt(e,t)),e0t=(e,t)=>CAe(LK(e,t)),t0t=(e,t)=>null,IAe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},n0t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},kAe=({values:e},t)=>Zgt(e,t),RAe=({values:e},t)=>e0t(e,t*2),Ry=({stride:e,values:t},n)=>t[e*n],r0t=({stride:e,values:t},n)=>pAe(t[e*n]),NAe=({values:e},t)=>e[t],i0t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),s0t=({values:e,valueOffsets:t},n)=>IAe(e,t,n),o0t=({values:e,valueOffsets:t},n)=>{const r=IAe(e,t,n);return r!==null?F7(r):null},a0t=({values:e},t)=>e[t],u0t=({type:e,values:t},n)=>e.precision!==Co.HALF?t[n]:pAe(t[n]),l0t=(e,t)=>e.type.unit===gh.DAY?kAe(e,t):RAe(e,t),PAe=({values:e},t)=>1e3*LK(e,t*2),DAe=({values:e},t)=>LK(e,t*2),OAe=({values:e},t)=>Qgt(e,t*2),$Ae=({values:e},t)=>Jgt(e,t*2),c0t=(e,t)=>{switch(e.type.unit){case Ht.SECOND:return PAe(e,t);case Ht.MILLISECOND:return DAe(e,t);case Ht.MICROSECOND:return OAe(e,t);case Ht.NANOSECOND:return $Ae(e,t)}},MAe=({values:e},t)=>e[t],LAe=({values:e},t)=>e[t],FAe=({values:e},t)=>e[t],jAe=({values:e},t)=>e[t],f0t=(e,t)=>{switch(e.type.unit){case Ht.SECOND:return MAe(e,t);case Ht.MILLISECOND:return LAe(e,t);case Ht.MICROSECOND:return FAe(e,t);case Ht.NANOSECOND:return jAe(e,t)}},d0t=({values:e,stride:t},n)=>uK.decimal(e.subarray(t*n,t*(n+1))),h0t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new dr([u])},p0t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new l6(o.slice(i,s-i))},m0t=(e,t)=>new MK(e,t),g0t=(e,t)=>e.type.mode===qu.Dense?BAe(e,t):UAe(e,t),BAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Wu.visit(r,e.valueOffsets[t])},UAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Wu.visit(r,t)},y0t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},v0t=(e,t)=>e.type.unit===yh.DAY_TIME?zAe(e,t):VAe(e,t),zAe=({values:e},t)=>e.subarray(2*t,2*(t+1)),VAe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},HAe=({values:e},t)=>e[t],qAe=({values:e},t)=>e[t],WAe=({values:e},t)=>e[t],GAe=({values:e},t)=>e[t],b0t=(e,t)=>{switch(e.type.unit){case Ht.SECOND:return HAe(e,t);case Ht.MILLISECOND:return qAe(e,t);case Ht.MICROSECOND:return WAe(e,t);case Ht.NANOSECOND:return GAe(e,t)}},_0t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new dr([s])};qt.prototype.visitNull=Xt(t0t);qt.prototype.visitBool=Xt(n0t);qt.prototype.visitInt=Xt(a0t);qt.prototype.visitInt8=Xt(Ry);qt.prototype.visitInt16=Xt(Ry);qt.prototype.visitInt32=Xt(Ry);qt.prototype.visitInt64=Xt(NAe);qt.prototype.visitUint8=Xt(Ry);qt.prototype.visitUint16=Xt(Ry);qt.prototype.visitUint32=Xt(Ry);qt.prototype.visitUint64=Xt(NAe);qt.prototype.visitFloat=Xt(u0t);qt.prototype.visitFloat16=Xt(r0t);qt.prototype.visitFloat32=Xt(Ry);qt.prototype.visitFloat64=Xt(Ry);qt.prototype.visitUtf8=Xt(o0t);qt.prototype.visitBinary=Xt(s0t);qt.prototype.visitFixedSizeBinary=Xt(i0t);qt.prototype.visitDate=Xt(l0t);qt.prototype.visitDateDay=Xt(kAe);qt.prototype.visitDateMillisecond=Xt(RAe);qt.prototype.visitTimestamp=Xt(c0t);qt.prototype.visitTimestampSecond=Xt(PAe);qt.prototype.visitTimestampMillisecond=Xt(DAe);qt.prototype.visitTimestampMicrosecond=Xt(OAe);qt.prototype.visitTimestampNanosecond=Xt($Ae);qt.prototype.visitTime=Xt(f0t);qt.prototype.visitTimeSecond=Xt(MAe);qt.prototype.visitTimeMillisecond=Xt(LAe);qt.prototype.visitTimeMicrosecond=Xt(FAe);qt.prototype.visitTimeNanosecond=Xt(jAe);qt.prototype.visitDecimal=Xt(d0t);qt.prototype.visitList=Xt(h0t);qt.prototype.visitStruct=Xt(m0t);qt.prototype.visitUnion=Xt(g0t);qt.prototype.visitDenseUnion=Xt(BAe);qt.prototype.visitSparseUnion=Xt(UAe);qt.prototype.visitDictionary=Xt(y0t);qt.prototype.visitInterval=Xt(v0t);qt.prototype.visitIntervalDayTime=Xt(zAe);qt.prototype.visitIntervalYearMonth=Xt(VAe);qt.prototype.visitDuration=Xt(b0t);qt.prototype.visitDurationSecond=Xt(HAe);qt.prototype.visitDurationMillisecond=Xt(qAe);qt.prototype.visitDurationMicrosecond=Xt(WAe);qt.prototype.visitDurationNanosecond=Xt(GAe);qt.prototype.visitFixedSizeList=Xt(_0t);qt.prototype.visitMap=Xt(p0t);const Wu=new qt,pf=Symbol.for("keys"),Iw=Symbol.for("vals");class l6{constructor(t){return this[pf]=new dr([t.children[0]]).memoize(),this[Iw]=t.children[1],new Proxy(this,new E0t)}[Symbol.iterator](){return new w0t(this[pf],this[Iw])}get size(){return this[pf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[pf],n=this[Iw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Wu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Lv(t)}: ${Lv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class w0t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Wu.visit(this.vals,t)]})}}class E0t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[pf].toArray().map(String)}has(t,n){return t[pf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[pf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[pf].indexOf(n);if(r!==-1){const i=Wu.visit(Reflect.get(t,Iw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[pf].indexOf(n);return i!==-1?(Sc.visit(Reflect.get(t,Iw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(l6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[pf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Iw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Ule;function YAe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Ule=s,s=o,o=Ule),o>i&&(o=i),r?r(e,s,o):[s,o]}const zle=e=>e!==e;function Wx(e){if(typeof e!=="object"||e===null)return zle(e)?zle:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?dgt(e,n):!1:e instanceof Map?S0t(e):Array.isArray(e)?x0t(e):e instanceof dr?T0t(e):A0t(e,!0)}function x0t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Wx(e[n]);return c6(t)}function S0t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Wx(r);return c6(n)}function T0t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Wx(e.get(n));return c6(t)}function A0t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Wx(e[n[i]]);return c6(r,n)}function c6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return C0t(e,n);case Map:return Vle(e,n,n.keys());case l6:case MK:case Object:case void 0:return Vle(e,n,t||Object.keys(n))}return n instanceof dr?I0t(e,n):!1}}function C0t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function I0t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Vle(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function KAe(e,t,n,r){return(n&1<<r)!==0}function k0t(e,t,n,r){return(n&1<<r)>>r}function T3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):XAe(new FK(n,e,t,null,KAe)).subarray(0,r)),i}return n}function XAe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class FK{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function U7(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new FK(e,t,n-t,e,k0t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return U7(e,t,i)+U7(e,r,n)+R0t(e,i>>3,r-i>>3)}function R0t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=oj(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=oj(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=oj(s.getUint8(i)),i+=1;return r}function oj(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const N0t=-1;class kr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return En.isSparseUnion(t)?this.children.some(n=>n.nullable):En.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(En.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=N0t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-U7(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof kr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=xd(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(En.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===qu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(En.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===qu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(T3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new kr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(T3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[mp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[mp.TYPE])&&(o[mp.TYPE]=s.subarray(t,t+n)),(s=o[mp.OFFSET])&&(o[mp.OFFSET]=s.subarray(t,t+n+1))||(s=o[mp.DATA])&&(o[mp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}kr.prototype.children=Object.freeze([]);class tC extends xn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new kr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.data),s=Rr(t.nullBitmap),o=lT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.data),s=Rr(t.nullBitmap),o=lT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Rr(t.nullBitmap),o=lT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Rr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=qs(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(En.isSparseUnion(n))return new kr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=lT(t.valueOffsets);return new kr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=qs(n.indices.ArrayType,t.data),{["dictionary"]:o=new dr([new tC().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new tC().visit({type:n.valueType})}=t,s=Rr(t.nullBitmap),{["length"]:o=i.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new tC().visit({type:n.childType})}=t,s=Rr(t.nullBitmap),o=lT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,void 0,s],[i])}}const P0t=new tC;function ta(e){return P0t.visit(e)}class Hle{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function QAe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function JAe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function ZAe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function jK(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function BK(e,t){return e.getValid(t)}function kw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return jK(r,this._offsets,n,t)}}function eCe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=jK(s,this._offsets,r,n);return t=void 0,o}}function tCe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):jK(s,this._offsets,i,n);return t=void 0,o}}class Wt extends xn{}function D0t(e,t){return t===null&&e.length>0?0:-1}function O0t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new FK(n,e.offset+(t||0),e.length,n,KAe)){if(!i)return r;++r}return-1}function un(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return O0t(e,n)}const r=Wu.getVisitFn(e),i=Wx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function nCe(e,t,n){const r=Wu.getVisitFn(e),i=Wx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Wt.prototype.visitNull=D0t;Wt.prototype.visitBool=un;Wt.prototype.visitInt=un;Wt.prototype.visitInt8=un;Wt.prototype.visitInt16=un;Wt.prototype.visitInt32=un;Wt.prototype.visitInt64=un;Wt.prototype.visitUint8=un;Wt.prototype.visitUint16=un;Wt.prototype.visitUint32=un;Wt.prototype.visitUint64=un;Wt.prototype.visitFloat=un;Wt.prototype.visitFloat16=un;Wt.prototype.visitFloat32=un;Wt.prototype.visitFloat64=un;Wt.prototype.visitUtf8=un;Wt.prototype.visitBinary=un;Wt.prototype.visitFixedSizeBinary=un;Wt.prototype.visitDate=un;Wt.prototype.visitDateDay=un;Wt.prototype.visitDateMillisecond=un;Wt.prototype.visitTimestamp=un;Wt.prototype.visitTimestampSecond=un;Wt.prototype.visitTimestampMillisecond=un;Wt.prototype.visitTimestampMicrosecond=un;Wt.prototype.visitTimestampNanosecond=un;Wt.prototype.visitTime=un;Wt.prototype.visitTimeSecond=un;Wt.prototype.visitTimeMillisecond=un;Wt.prototype.visitTimeMicrosecond=un;Wt.prototype.visitTimeNanosecond=un;Wt.prototype.visitDecimal=un;Wt.prototype.visitList=un;Wt.prototype.visitStruct=un;Wt.prototype.visitUnion=un;Wt.prototype.visitDenseUnion=nCe;Wt.prototype.visitSparseUnion=nCe;Wt.prototype.visitDictionary=un;Wt.prototype.visitInterval=un;Wt.prototype.visitIntervalDayTime=un;Wt.prototype.visitIntervalYearMonth=un;Wt.prototype.visitDuration=un;Wt.prototype.visitDurationSecond=un;Wt.prototype.visitDurationMillisecond=un;Wt.prototype.visitDurationMicrosecond=un;Wt.prototype.visitDurationNanosecond=un;Wt.prototype.visitFixedSizeList=un;Wt.prototype.visitMap=un;const A3=new Wt;class Gt extends xn{}function Qt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof Ja&&t.bitWidth!==64||t instanceof xm&&t.bitWidth!==64||t instanceof j0&&t.precision!==Co.HALF))return new Hle(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Hle(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new $0t(o)})}class $0t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Gt.prototype.visitNull=Qt;Gt.prototype.visitBool=Qt;Gt.prototype.visitInt=Qt;Gt.prototype.visitInt8=Qt;Gt.prototype.visitInt16=Qt;Gt.prototype.visitInt32=Qt;Gt.prototype.visitInt64=Qt;Gt.prototype.visitUint8=Qt;Gt.prototype.visitUint16=Qt;Gt.prototype.visitUint32=Qt;Gt.prototype.visitUint64=Qt;Gt.prototype.visitFloat=Qt;Gt.prototype.visitFloat16=Qt;Gt.prototype.visitFloat32=Qt;Gt.prototype.visitFloat64=Qt;Gt.prototype.visitUtf8=Qt;Gt.prototype.visitBinary=Qt;Gt.prototype.visitFixedSizeBinary=Qt;Gt.prototype.visitDate=Qt;Gt.prototype.visitDateDay=Qt;Gt.prototype.visitDateMillisecond=Qt;Gt.prototype.visitTimestamp=Qt;Gt.prototype.visitTimestampSecond=Qt;Gt.prototype.visitTimestampMillisecond=Qt;Gt.prototype.visitTimestampMicrosecond=Qt;Gt.prototype.visitTimestampNanosecond=Qt;Gt.prototype.visitTime=Qt;Gt.prototype.visitTimeSecond=Qt;Gt.prototype.visitTimeMillisecond=Qt;Gt.prototype.visitTimeMicrosecond=Qt;Gt.prototype.visitTimeNanosecond=Qt;Gt.prototype.visitDecimal=Qt;Gt.prototype.visitList=Qt;Gt.prototype.visitStruct=Qt;Gt.prototype.visitUnion=Qt;Gt.prototype.visitDenseUnion=Qt;Gt.prototype.visitSparseUnion=Qt;Gt.prototype.visitDictionary=Qt;Gt.prototype.visitInterval=Qt;Gt.prototype.visitIntervalDayTime=Qt;Gt.prototype.visitIntervalYearMonth=Qt;Gt.prototype.visitDuration=Qt;Gt.prototype.visitDurationSecond=Qt;Gt.prototype.visitDurationMillisecond=Qt;Gt.prototype.visitDurationMicrosecond=Qt;Gt.prototype.visitDurationNanosecond=Qt;Gt.prototype.visitFixedSizeList=Qt;Gt.prototype.visitMap=Qt;const UK=new Gt,M0t=(e,t)=>e+t;class Ny extends xn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Ht.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+vh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+vh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const L0t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),F0t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),j0t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=vh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},B0t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=vh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},U0t=(e,t)=>e.type.mode===qu.Dense?rCe(e,t):iCe(e,t),rCe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+vh.visit(t[s],r[i])},iCe=({children:e},t)=>4+vh.visitMany(e,e.map(()=>t)).reduce(M0t,0);Ny.prototype.visitUtf8=L0t;Ny.prototype.visitBinary=F0t;Ny.prototype.visitList=j0t;Ny.prototype.visitFixedSizeList=B0t;Ny.prototype.visitUnion=U0t;Ny.prototype.visitDenseUnion=rCe;Ny.prototype.visitSparseUnion=iCe;const vh=new Ny;var sCe;const oCe={},aCe={};class dr{constructor(t){var n,r,i;const s=t[0]instanceof dr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof kr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=oCe[o.typeId],f=s[0];this.isValid=d=>BK(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,aCe[o.typeId]),this._offsets=JAe(s);break}this.data=s,this.type=o,this.stride=xd(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return QAe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return UK.visit(this)}concat(...t){return new dr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new dr(YAe(this,t,n,({data:r,_offsets:i},s,o)=>ZAe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new dr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return En.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(En.isDictionary(this.type)){const t=new C3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new dr(n)}return new C3(this)}unmemoize(){if(En.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new dr(n)}return this}}sCe=Symbol.toStringTag;dr[sCe]=(e=>{e.type=En.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=Wu.getVisitFnByTypeId(n),i=Sc.getVisitFnByTypeId(n),s=A3.getVisitFnByTypeId(n),o=vh.getVisitFnByTypeId(n);oCe[n]={get:r,set:i,indexOf:s,byteLength:o},aCe[n]=Object.create(e,{isValid:{value:kw(BK)},get:{value:kw(Wu.getVisitFnByTypeId(n))},set:{value:eCe(Sc.getVisitFnByTypeId(n))},indexOf:{value:tCe(A3.getVisitFnByTypeId(n))},getByteLength:{value:kw(vh.getVisitFnByTypeId(n))}})}return"Vector"})(dr.prototype);class C3 extends dr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new C3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new dr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function z0t(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${V0t(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function V0t(e){return typeof e!="bigint"?Lv(e):`${Lv(e)}n`}const aj=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,H0t=(e,t=0)=>e.length>=t?e.subarray(0,t):_3(new e.constructor(t),e,0);class f6{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?aj(r*1,this.BYTES_PER_ELEMENT):aj(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=aj(t*this.stride,this.BYTES_PER_ELEMENT);const n=H0t(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=_3(new this.ArrayType(t),this.buffer)}}f6.prototype.offset=0;class ZI extends f6{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class uCe extends ZI{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class lCe extends ZI{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let el=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=xd(t),this._nulls=new uCe,n&&n.length>0&&(this._isValid=z0t(n))}toVector(){return new dr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),ta({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};el.prototype.length=1;el.prototype.stride=1;el.prototype.children=null;el.prototype.finished=!1;el.prototype.nullValues=null;el.prototype._isValid=()=>!0;class Ym extends el{constructor(t){super(t),this._values=new ZI(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class d6 extends el{constructor(t){super(t),this._pendingLength=0,this._offsets=new lCe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof l6?n[pf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class z7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const uj=2,Pd=4,Ip=4,jr=4,Tg=new Int32Array(2),qle=new Float32Array(Tg.buffer),Wle=new Float64Array(Tg.buffer),bN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var V7;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(V7||(V7={}));let I3=class cCe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new cCe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Tg[0]=this.readInt32(t),qle[0]}readFloat64(t){return Tg[bN?0:1]=this.readInt32(t),Tg[bN?1:0]=this.readInt32(t+4),Wle[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){qle[0]=n,this.writeInt32(t,Tg[0])}writeFloat64(t,n){Wle[0]=n,this.writeInt32(t,Tg[bN?0:1]),this.writeInt32(t+4,Tg[bN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Pd+Ip)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Ip;n++)t+=String.fromCharCode(this.readInt8(this.position_+Pd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Pd;const i=this.bytes_.subarray(t,t+r);return n===V7.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Pd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Ip)throw new Error("FlatBuffers: file identifier must be length "+Ip);for(let n=0;n<Ip;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Pd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},fCe=class dCe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=I3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=dCe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=I3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Pd,0),this.writeInt32(this.offset()-t+Pd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*uj;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=uj;l<s;l+=uj)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?jr:0;if(n){const s=n;if(this.prep(this.minalign,Pd+Ip+i),s.length!=Ip)throw new TypeError("FlatBuffers: file identifier must be length "+Ip);for(let o=Ip-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Pd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Pd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class xs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new xs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+jr),(n||new xs).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return xs.startKeyValue(t),xs.addKey(t,n),xs.addValue(t,r),xs.endKeyValue(t)}}var kE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(kE||(kE={}));var RE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(RE||(RE={}));var k3;(function(e){e[e.DenseArray=0]="DenseArray"})(k3||(k3={}));class hl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new hl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+jr),(n||new hl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return hl.startInt(t),hl.addBitWidth(t,n),hl.addIsSigned(t,r),hl.endInt(t)}}class kp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new kp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+jr),(n||new kp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new hl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):k3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,k3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class K1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new K1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+jr),(n||new K1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return K1.startBinary(t),K1.endBinary(t)}}class X1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new X1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+jr),(n||new X1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return X1.startBool(t),X1.endBool(t)}}var R3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(R3||(R3={}));let WP=class k_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new k_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+jr),(n||new k_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):R3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,R3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return k_.startDate(t),k_.addUnit(t,n),k_.endDate(t)}};class gu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new gu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+jr),(n||new gu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return gu.startDecimal(t),gu.addPrecision(t,n),gu.addScale(t,r),gu.addBitWidth(t,i),gu.endDecimal(t)}}var U0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(U0||(U0={}));class Dd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Dd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+jr),(n||new Dd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):U0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,U0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Dd.startDuration(t),Dd.addUnit(t,n),Dd.endDuration(t)}}class Od{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Od).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+jr),(n||new Od).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Od.startFixedSizeBinary(t),Od.addByteWidth(t,n),Od.endFixedSizeBinary(t)}}class $d{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new $d).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+jr),(n||new $d).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return $d.startFixedSizeList(t),$d.addListSize(t,n),$d.endFixedSizeList(t)}}var N3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(N3||(N3={}));class Md{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+jr),(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):N3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,N3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Md.startFloatingPoint(t),Md.addPrecision(t,n),Md.endFloatingPoint(t)}}var P3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(P3||(P3={}));class Ld{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+jr),(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):P3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,P3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Ld.startInterval(t),Ld.addUnit(t,n),Ld.endInterval(t)}}class Q1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Q1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+jr),(n||new Q1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Q1.startList(t),Q1.endList(t)}}let GP=class R_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new R_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+jr),(n||new R_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return R_.startMap(t),R_.addKeysSorted(t,n),R_.endMap(t)}};class J1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new J1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+jr),(n||new J1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return J1.startNull(t),J1.endNull(t)}}class Z1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Z1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+jr),(n||new Z1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Z1.startStruct_(t),Z1.endStruct_(t)}}let nA=class g1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new g1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+jr),(n||new g1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):U0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,U0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return g1.startTime(t),g1.addUnit(t,n),g1.addBitWidth(t,r),g1.endTime(t)}},rA=class y1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new y1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+jr),(n||new y1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):U0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,U0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return y1.startTimestamp(t),y1.addUnit(t,n),y1.addTimezone(t,r),y1.endTimestamp(t)}};var D3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(D3||(D3={}));let v1=class b1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new b1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+jr),(n||new b1).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):D3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,D3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return b1.startUnion(t),b1.addMode(t,n),b1.addTypeIds(t,r),b1.endUnion(t)}};class ev{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new ev).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+jr),(n||new ev).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return ev.startUtf8(t),ev.endUtf8(t)}}var mi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(mi||(mi={}));let Zl=class YP{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new YP).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+jr),(n||new YP).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):mi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new kp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new YP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new xs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,mi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},wd=class hp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new hp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+jr),(n||new hp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):RE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Zl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new xs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,RE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return hp.startSchema(t),hp.addEndianness(t,n),hp.addFields(t,r),hp.addCustomMetadata(t,i),hp.addFeatures(t,s),hp.endSchema(t)}};class ul{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new ul).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+jr),(n||new ul).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):kE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new wd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new z7).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new z7).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new xs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,kE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class xr{constructor(t=[],n,r,i=ja.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=q7(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new xr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new xr(n,this.metadata)}assign(...t){const n=t[0]instanceof xr?t[0]:Array.isArray(t[0])?new xr(t[0]):new xr(t),r=[...this.fields],i=_N(_N(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:_N(_N(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=q7(s,new Map);return new xr([...r,...s],i,new Map([...this.dictionaries,...o]))}}xr.prototype.fields=null;xr.prototype.metadata=null;xr.prototype.dictionaries=null;let $r=class H7{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new H7(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],H7.new(n,r,i,s)}};$r.prototype.type=null;$r.prototype.name=null;$r.prototype.nullable=null;$r.prototype.metadata=null;function _N(e,t){return new Map([...e||new Map,...t||new Map])}function q7(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(En.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&q7(s.children,t)}return t}var q0t=fCe,W0t=I3;class W7{static decode(t){t=new W0t(Rr(t));const n=ul.getRootAsFooter(t),r=xr.decode(n.schema(),new Map,n.version());return new G0t(r,n)}static encode(t){const n=new q0t,r=xr.encode(n,t.schema);ul.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())z0.encode(n,o);const i=n.endVector();ul.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())z0.encode(n,o);const s=n.endVector();return ul.startFooter(n),ul.addSchema(n,r),ul.addVersion(n,ja.V5),ul.addRecordBatches(n,i),ul.addDictionaries(n,s),ul.finishFooterBuffer(n,ul.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=ja.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class G0t extends W7{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return z0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return z0.decode(n)}return null}}class z0{static decode(t){return new z0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return z7.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Ff(r),this.bodyLength=Ff(n)}}const wN=Object.freeze({done:!0,value:void 0});class hCe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Y0t extends hCe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Tp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(wN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return jle.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return jle.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Tp(this,void 0,void 0,function*(){return yield this.abort(t),wN})}return(t){return Tp(this,void 0,void 0,function*(){return yield this.close(),wN})}read(t){return Tp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Tp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(wN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class lj extends Y0t{write(t){if((t=Rr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?F7(this.toUint8Array(!0)):this.toUint8Array(!1).then(F7)}toUint8Array(t=!1){return t?mh(this._values)[0]:Tp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=jA(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return mh(o,a)[0]})}}class pCe extends d6{constructor(t){super(t),this._values=new f6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Rr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class K0t extends el{constructor(t){super(t),this._values=new uCe}setValue(t,n){this._values.set(t,+n)}}class h6 extends Ym{}h6.prototype._setValue=bAe;class mCe extends h6{}mCe.prototype._setValue=_K;class gCe extends h6{}gCe.prototype._setValue=wK;class yCe extends Ym{}yCe.prototype._setValue=EAe;class X0t extends el{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new B0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=O3({type:this.type.indices,nullValues:n}),this.dictionary=O3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class vCe extends Ym{}vCe.prototype._setValue=vAe;class Q0t extends el{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new IE(this.type.listSize,new $r(n,t.type,!0)),r}}class p6 extends Ym{setValue(t,n){this._values.set(t,n)}}class J0t extends p6{setValue(t,n){super.setValue(t,mAe(n))}}class Z0t extends p6{}class eyt extends p6{}class m6 extends Ym{}m6.prototype._setValue=TAe;class bCe extends m6{}bCe.prototype._setValue=RK;class _Ce extends m6{}_Ce.prototype._setValue=NK;class Gx extends Ym{}Gx.prototype._setValue=AAe;class wCe extends Gx{}wCe.prototype._setValue=PK;class ECe extends Gx{}ECe.prototype._setValue=DK;class xCe extends Gx{}xCe.prototype._setValue=OK;class SCe extends Gx{}SCe.prototype._setValue=$K;class Km extends Ym{setValue(t,n){this._values.set(t,n)}}class tyt extends Km{}class nyt extends Km{}class ryt extends Km{}class iyt extends Km{}class syt extends Km{}class oyt extends Km{}class ayt extends Km{}class uyt extends Km{}class lyt extends d6{constructor(t){super(t),this._offsets=new lCe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new CE(new $r(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class cyt extends d6{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new E2(new $r(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class fyt extends el{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class dyt extends el{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new oa([...this.type.children,new $r(n,t.type,!0)]),r}}class Yx extends Ym{}Yx.prototype._setValue=_Ae;class TCe extends Yx{}TCe.prototype._setValue=EK;class ACe extends Yx{}ACe.prototype._setValue=xK;class CCe extends Yx{}CCe.prototype._setValue=SK;class ICe extends Yx{}ICe.prototype._setValue=TK;class Kx extends Ym{}Kx.prototype._setValue=wAe;class kCe extends Kx{}kCe.prototype._setValue=AK;class RCe extends Kx{}RCe.prototype._setValue=CK;class NCe extends Kx{}NCe.prototype._setValue=IK;class PCe extends Kx{}PCe.prototype._setValue=kK;class zK extends el{constructor(t){super(t),this._typeIds=new ZI(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new $r(n,t.type)];return this.type=new w2(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class hyt extends zK{}class pyt extends zK{constructor(t){super(t),this._offsets=new ZI(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class DCe extends d6{constructor(t){super(t),this._values=new f6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,sK(n))}_flushPending(t,n){}}DCe.prototype._flushPending=pCe.prototype._flushPending;class myt extends xn{visitNull(){return fyt}visitBool(){return K0t}visitInt(){return Km}visitInt8(){return tyt}visitInt16(){return nyt}visitInt32(){return ryt}visitInt64(){return iyt}visitUint8(){return syt}visitUint16(){return oyt}visitUint32(){return ayt}visitUint64(){return uyt}visitFloat(){return p6}visitFloat16(){return J0t}visitFloat32(){return Z0t}visitFloat64(){return eyt}visitUtf8(){return DCe}visitBinary(){return pCe}visitFixedSizeBinary(){return vCe}visitDate(){return h6}visitDateDay(){return mCe}visitDateMillisecond(){return gCe}visitTimestamp(){return Yx}visitTimestampSecond(){return TCe}visitTimestampMillisecond(){return ACe}visitTimestampMicrosecond(){return CCe}visitTimestampNanosecond(){return ICe}visitTime(){return Kx}visitTimeSecond(){return kCe}visitTimeMillisecond(){return RCe}visitTimeMicrosecond(){return NCe}visitTimeNanosecond(){return PCe}visitDecimal(){return yCe}visitList(){return lyt}visitStruct(){return dyt}visitUnion(){return zK}visitDenseUnion(){return pyt}visitSparseUnion(){return hyt}visitDictionary(){return X0t}visitInterval(){return m6}visitIntervalDayTime(){return bCe}visitIntervalYearMonth(){return _Ce}visitDuration(){return Gx}visitDurationSecond(){return wCe}visitDurationMillisecond(){return ECe}visitDurationMicrosecond(){return xCe}visistDurationNanosecond(){return SCe}visitFixedSizeList(){return Q0t}visitMap(){return cyt}}const gyt=new myt;class Yt extends xn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function ru(e,t){return t instanceof e.constructor}function ek(e,t){return e===t||ru(e,t)}function Xm(e,t){return e===t||ru(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function g6(e,t){return e===t||ru(e,t)&&e.precision===t.precision}function yyt(e,t){return e===t||ru(e,t)&&e.byteWidth===t.byteWidth}function VK(e,t){return e===t||ru(e,t)&&e.unit===t.unit}function tk(e,t){return e===t||ru(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function nk(e,t){return e===t||ru(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function vyt(e,t){return e===t||ru(e,t)&&e.children.length===t.children.length&&V0.compareManyFields(e.children,t.children)}function byt(e,t){return e===t||ru(e,t)&&e.children.length===t.children.length&&V0.compareManyFields(e.children,t.children)}function HK(e,t){return e===t||ru(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&V0.compareManyFields(e.children,t.children)}function _yt(e,t){return e===t||ru(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&V0.visit(e.indices,t.indices)&&V0.visit(e.dictionary,t.dictionary)}function qK(e,t){return e===t||ru(e,t)&&e.unit===t.unit}function rk(e,t){return e===t||ru(e,t)&&e.unit===t.unit}function wyt(e,t){return e===t||ru(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&V0.compareManyFields(e.children,t.children)}function Eyt(e,t){return e===t||ru(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&V0.compareManyFields(e.children,t.children)}Yt.prototype.visitNull=ek;Yt.prototype.visitBool=ek;Yt.prototype.visitInt=Xm;Yt.prototype.visitInt8=Xm;Yt.prototype.visitInt16=Xm;Yt.prototype.visitInt32=Xm;Yt.prototype.visitInt64=Xm;Yt.prototype.visitUint8=Xm;Yt.prototype.visitUint16=Xm;Yt.prototype.visitUint32=Xm;Yt.prototype.visitUint64=Xm;Yt.prototype.visitFloat=g6;Yt.prototype.visitFloat16=g6;Yt.prototype.visitFloat32=g6;Yt.prototype.visitFloat64=g6;Yt.prototype.visitUtf8=ek;Yt.prototype.visitBinary=ek;Yt.prototype.visitFixedSizeBinary=yyt;Yt.prototype.visitDate=VK;Yt.prototype.visitDateDay=VK;Yt.prototype.visitDateMillisecond=VK;Yt.prototype.visitTimestamp=tk;Yt.prototype.visitTimestampSecond=tk;Yt.prototype.visitTimestampMillisecond=tk;Yt.prototype.visitTimestampMicrosecond=tk;Yt.prototype.visitTimestampNanosecond=tk;Yt.prototype.visitTime=nk;Yt.prototype.visitTimeSecond=nk;Yt.prototype.visitTimeMillisecond=nk;Yt.prototype.visitTimeMicrosecond=nk;Yt.prototype.visitTimeNanosecond=nk;Yt.prototype.visitDecimal=ek;Yt.prototype.visitList=vyt;Yt.prototype.visitStruct=byt;Yt.prototype.visitUnion=HK;Yt.prototype.visitDenseUnion=HK;Yt.prototype.visitSparseUnion=HK;Yt.prototype.visitDictionary=_yt;Yt.prototype.visitInterval=qK;Yt.prototype.visitIntervalDayTime=qK;Yt.prototype.visitIntervalYearMonth=qK;Yt.prototype.visitDuration=rk;Yt.prototype.visitDurationSecond=rk;Yt.prototype.visitDurationMillisecond=rk;Yt.prototype.visitDurationMicrosecond=rk;Yt.prototype.visitDurationNanosecond=rk;Yt.prototype.visitFixedSizeList=wyt;Yt.prototype.visitMap=Eyt;const V0=new Yt;function G7(e,t){return V0.compareSchemas(e,t)}function O3(e){const t=e.type,n=new(gyt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(O3(Object.assign(Object.assign({},l),{type:u})))}}return n}function cj(e,t){return xyt(e,t.map(n=>n.data.concat()))}function xyt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=Syt(n,o,c,t,i),o>0&&(r[s++]=ta({type:new oa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new pl(e,f))]}function Syt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ta({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var OCe;class wu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new xr([]),this._offsets=[0],this;let i,s;t[0]instanceof xr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof pl)return[u];if(u instanceof wu)return u.batches;if(u instanceof kr){if(u.type instanceof oa)return[new pl(new xr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new dr([u[h]])),f=new xr(l.map((h,p)=>new $r(String(h),c[p].type))),[,d]=cj(f,c);return d.length===0?[new pl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new xr([]),!(i instanceof xr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof pl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!G7(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??JAe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=QAe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?UK.visit(new dr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new wu(n,r.map(i=>new pl(n,i)))}slice(t,n){const r=this.schema;[t,n]=YAe({length:this.numRows},t,n);const i=ZAe(this.data,this._offsets,t,n);return new wu(r,i.map(s=>new pl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=ta({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new dr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new dr([ta({type:new Em,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=cj(r,a)}return new wu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new wu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new wu(...cj(s,o))}}OCe=Symbol.toStringTag;wu[OCe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=kw(BK),e.get=kw(Wu.getVisitFn(re.Struct)),e.set=eCe(Sc.getVisitFn(re.Struct)),e.indexOf=tCe(A3.getVisitFn(re.Struct)),e.getByteLength=kw(vh.getVisitFn(re.Struct)),"Table"))(wu.prototype);var $Ce;let pl=class iA{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof xr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ta({nullCount:0,type:new oa(this.schema.fields),children:this.schema.fields.map(n=>ta({type:n.type,nullCount:0}))})]=t,!(this.data instanceof kr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Gle(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=$r.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new xr(r),a=ta({type:new oa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Gle(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=MCe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Wu.visit(this.data,t)}set(t,n){return Sc.visit(this.data,t,n)}indexOf(t,n){return A3.visit(this.data,t,n)}getByteLength(t){return vh.visit(this.data,t)}[Symbol.iterator](){return UK.visit(new dr([this.data]))}toArray(){return[...this]}concat(...t){return new wu(this.schema,[this,...t])}slice(t,n){const[r]=new dr([this.data]).slice(t,n).data;return new iA(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new dr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new dr([ta({type:new Em,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new xr(s,new Map(this.schema.metadata)),i=ta({type:new oa(s),children:o})}return new iA(r,i)}select(t){const n=this.schema.select(t),r=new oa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new iA(n,ta({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=ta({type:new oa(n.fields),length:this.numRows,children:r});return new iA(n,i)}};$Ce=Symbol.toStringTag;pl[$Ce]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(pl.prototype);function Gle(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:ta({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),ta({type:new oa(i),length:n,children:s})]}function MCe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])MCe(a.children,l==null?void 0:l.children,n);if(En.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class Tyt extends pl{constructor(t){const n=t.fields.map(i=>ta({type:i.type})),r=ta({type:new oa(t.fields),nullCount:0,children:n});super(t,r)}}var $3;(function(e){e[e.BUFFER=0]="BUFFER"})($3||($3={}));var M3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(M3||(M3={}));class Ag{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Ag).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+jr),(n||new Ag).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):M3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):$3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,M3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,$3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Ag.startBodyCompression(t),Ag.addCodec(t,n),Ag.addMethod(t,r),Ag.endBodyCompression(t)}}let LCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},FCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},gp=class Y7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Y7).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+jr),(n||new Y7).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new FCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new LCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Ag).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},N_=class K7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new K7).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+jr),(n||new K7).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new gp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var L3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(L3||(L3={}));let fg=class hd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new hd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+jr),(n||new hd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):kE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):L3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new xs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,kE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,L3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return hd.startMessage(t),hd.addVersion(t,n),hd.addHeaderType(t,r),hd.addHeader(t,i),hd.addBodyLength(t,s),hd.addCustomMetadata(t,o),hd.endMessage(t)}};class Ayt extends xn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return J1.startNull(n),J1.endNull(n)}visitInt(t,n){return hl.startInt(n),hl.addBitWidth(n,t.bitWidth),hl.addIsSigned(n,t.isSigned),hl.endInt(n)}visitFloat(t,n){return Md.startFloatingPoint(n),Md.addPrecision(n,t.precision),Md.endFloatingPoint(n)}visitBinary(t,n){return K1.startBinary(n),K1.endBinary(n)}visitBool(t,n){return X1.startBool(n),X1.endBool(n)}visitUtf8(t,n){return ev.startUtf8(n),ev.endUtf8(n)}visitDecimal(t,n){return gu.startDecimal(n),gu.addScale(n,t.scale),gu.addPrecision(n,t.precision),gu.addBitWidth(n,t.bitWidth),gu.endDecimal(n)}visitDate(t,n){return WP.startDate(n),WP.addUnit(n,t.unit),WP.endDate(n)}visitTime(t,n){return nA.startTime(n),nA.addUnit(n,t.unit),nA.addBitWidth(n,t.bitWidth),nA.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return rA.startTimestamp(n),rA.addUnit(n,t.unit),r!==void 0&&rA.addTimezone(n,r),rA.endTimestamp(n)}visitInterval(t,n){return Ld.startInterval(n),Ld.addUnit(n,t.unit),Ld.endInterval(n)}visitDuration(t,n){return Dd.startDuration(n),Dd.addUnit(n,t.unit),Dd.endDuration(n)}visitList(t,n){return Q1.startList(n),Q1.endList(n)}visitStruct(t,n){return Z1.startStruct_(n),Z1.endStruct_(n)}visitUnion(t,n){v1.startTypeIdsVector(n,t.typeIds.length);const r=v1.createTypeIdsVector(n,t.typeIds);return v1.startUnion(n),v1.addMode(n,t.mode),v1.addTypeIds(n,r),v1.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return kp.startDictionaryEncoding(n),kp.addId(n,BigInt(t.id)),kp.addIsOrdered(n,t.isOrdered),r!==void 0&&kp.addIndexType(n,r),kp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Od.startFixedSizeBinary(n),Od.addByteWidth(n,t.byteWidth),Od.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return $d.startFixedSizeList(n),$d.addListSize(n,t.listSize),$d.endFixedSizeList(n)}visitMap(t,n){return GP.startMap(n),GP.addKeysSorted(n,t.keysSorted),GP.endMap(n)}}const fj=new Ayt;function Cyt(e,t=new Map){return new xr(kyt(e,t),KP(e.metadata),t)}function jCe(e){return new Pl(e.count,BCe(e.columns),UCe(e.columns))}function Iyt(e){return new bh(jCe(e.data),e.id,e.isDelta)}function kyt(e,t){return(e.fields||[]).filter(Boolean).map(n=>$r.fromJSON(n,t))}function Yle(e,t){return(e.children||[]).filter(Boolean).map(n=>$r.fromJSON(n,t))}function BCe(e){return(e||[]).reduce((t,n)=>[...t,new H0(n.count,Ryt(n.VALIDITY)),...BCe(n.children)],[])}function UCe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Vd(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Vd(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Vd(t.length,i.OFFSET.length)),i.DATA&&t.push(new Vd(t.length,i.DATA.length)),t=UCe(i.children,t)}return t}function Ryt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function Nyt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Xle(e,Yle(e,t)),i=new $r(e.name,o,e.nullable,KP(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Kle(r):new F0,a=new B0(t.get(n),r,n,s.isOrdered),i=new $r(e.name,a,e.nullable,KP(e.metadata))):(r=(r=s.indexType)?Kle(r):new F0,t.set(n,o=Xle(e,Yle(e,t))),a=new B0(o,r,n,s.isOrdered),i=new $r(e.name,a,e.nullable,KP(e.metadata))),i||null}function KP(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Kle(e){return new Ja(e.isSigned,e.bitWidth)}function Xle(e,t){const n=e.type.name;switch(n){case"NONE":return new Em;case"null":return new Em;case"binary":return new b2;case"utf8":return new SE;case"bool":return new _2;case"list":return new CE((t||[])[0]);case"struct":return new oa(t||[]);case"struct_":return new oa(t||[])}switch(n){case"int":{const r=e.type;return new Ja(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new j0(Co[r.precision])}case"decimal":{const r=e.type;return new w3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new TE(gh[r.unit])}case"time":{const r=e.type;return new xm(Ht[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new E3(Ht[r.unit],r.timezone)}case"interval":{const r=e.type;return new AE(yh[r.unit])}case"duration":{const r=e.type;return new x3(Ht[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new w2(qu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new S3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new IE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new E2((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Pyt=fCe,Dyt=I3;class Fd{static fromJSON(t,n){const r=new Fd(0,ja.V5,n);return r._createHeader=Oyt(t,n),r}static decode(t){t=new Dyt(Rr(t));const n=fg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Fd(r,i,s);return o._createHeader=$yt(n,s),o}static encode(t){const n=new Pyt;let r=-1;return t.isSchema()?r=xr.encode(n,t.header()):t.isRecordBatch()?r=Pl.encode(n,t.header()):t.isDictionaryBatch()&&(r=bh.encode(n,t.header())),fg.startMessage(n),fg.addVersion(n,ja.V5),fg.addHeader(n,r),fg.addHeaderType(n,t.headerType),fg.addBodyLength(n,BigInt(t.bodyLength)),fg.finishMessageBuffer(n,fg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof xr)return new Fd(0,ja.V5,Ys.Schema,t);if(t instanceof Pl)return new Fd(n,ja.V5,Ys.RecordBatch,t);if(t instanceof bh)return new Fd(n,ja.V5,Ys.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ys.Schema}isRecordBatch(){return this.headerType===Ys.RecordBatch}isDictionaryBatch(){return this.headerType===Ys.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Ff(t)}}class Pl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Ff(t)}}class bh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Ff(n)}}class Vd{constructor(t,n){this.offset=Ff(t),this.length=Ff(n)}}class H0{constructor(t,n){this.length=Ff(t),this.nullCount=Ff(n)}}function Oyt(e,t){return()=>{switch(t){case Ys.Schema:return xr.fromJSON(e);case Ys.RecordBatch:return Pl.fromJSON(e);case Ys.DictionaryBatch:return bh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Ys[t]}, type: ${t} }`)}}function $yt(e,t){return()=>{switch(t){case Ys.Schema:return xr.decode(e.header(new wd),new Map,e.version());case Ys.RecordBatch:return Pl.decode(e.header(new gp),e.version());case Ys.DictionaryBatch:return bh.decode(e.header(new N_),e.version())}throw new Error(`Unrecognized Message type: { name: ${Ys[t]}, type: ${t} }`)}}$r.encode=Wyt;$r.decode=Hyt;$r.fromJSON=Nyt;xr.encode=qyt;xr.decode=Myt;xr.fromJSON=Cyt;Pl.encode=Gyt;Pl.decode=Lyt;Pl.fromJSON=jCe;bh.encode=Yyt;bh.decode=Fyt;bh.fromJSON=Iyt;H0.encode=Kyt;H0.decode=Byt;Vd.encode=Xyt;Vd.decode=jyt;function Myt(e,t=new Map,n=ja.V5){const r=Vyt(e,t);return new xr(r,XP(e),t,n)}function Lyt(e,t=ja.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Pl(e.length(),Uyt(e),zyt(e,t))}function Fyt(e,t=ja.V5){return new bh(Pl.decode(e.data(),t),e.id(),e.isDelta())}function jyt(e){return new Vd(e.offset(),e.length())}function Byt(e){return new H0(e.length(),e.nullCount())}function Uyt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=H0.decode(n));return t}function zyt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<ja.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Vd.decode(r));return n}function Vyt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=$r.decode(r,t));return n}function Qle(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=$r.decode(r,t));return n}function Hyt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Zle(e,Qle(e,t)),r=new $r(e.name(),i,e.nullable(),XP(e))):t.has(n=Ff(a.id()))?(s=(s=a.indexType())?Jle(s):new F0,o=new B0(t.get(n),s,n,a.isOrdered()),r=new $r(e.name(),o,e.nullable(),XP(e))):(s=(s=a.indexType())?Jle(s):new F0,t.set(n,i=Zle(e,Qle(e,t))),o=new B0(i,s,n,a.isOrdered()),r=new $r(e.name(),o,e.nullable(),XP(e))),r||null}function XP(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Jle(e){return new Ja(e.isSigned(),e.bitWidth())}function Zle(e,t){const n=e.typeType();switch(n){case mi.NONE:return new Em;case mi.Null:return new Em;case mi.Binary:return new b2;case mi.Utf8:return new SE;case mi.Bool:return new _2;case mi.List:return new CE((t||[])[0]);case mi.Struct_:return new oa(t||[])}switch(n){case mi.Int:{const r=e.type(new hl);return new Ja(r.isSigned(),r.bitWidth())}case mi.FloatingPoint:{const r=e.type(new Md);return new j0(r.precision())}case mi.Decimal:{const r=e.type(new gu);return new w3(r.scale(),r.precision(),r.bitWidth())}case mi.Date:{const r=e.type(new WP);return new TE(r.unit())}case mi.Time:{const r=e.type(new nA);return new xm(r.unit(),r.bitWidth())}case mi.Timestamp:{const r=e.type(new rA);return new E3(r.unit(),r.timezone())}case mi.Interval:{const r=e.type(new Ld);return new AE(r.unit())}case mi.Duration:{const r=e.type(new Dd);return new x3(r.unit())}case mi.Union:{const r=e.type(new v1);return new w2(r.mode(),r.typeIdsArray()||[],t||[])}case mi.FixedSizeBinary:{const r=e.type(new Od);return new S3(r.byteWidth())}case mi.FixedSizeList:{const r=e.type(new $d);return new IE(r.listSize(),(t||[])[0])}case mi.Map:{const r=e.type(new GP);return new E2((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${mi[n]}" (${n})`)}function qyt(e,t){const n=t.fields.map(s=>$r.encode(e,s));wd.startFieldsVector(e,n.length);const r=wd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?wd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return xs.startKeyValue(e),xs.addKey(e,a),xs.addValue(e,u),xs.endKeyValue(e)})):-1;return wd.startSchema(e),wd.addFields(e,r),wd.addEndianness(e,Qyt?RE.Little:RE.Big),i!==-1&&wd.addCustomMetadata(e,i),wd.endSchema(e)}function Wyt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;En.isDictionary(s)?(o=s.dictionary.typeId,i=fj.visit(s,e),r=fj.visit(s.dictionary,e)):r=fj.visit(s,e);const a=(s.children||[]).map(c=>$r.encode(e,c)),u=Zl.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Zl.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return xs.startKeyValue(e),xs.addKey(e,d),xs.addValue(e,h),xs.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Zl.startField(e),Zl.addType(e,r),Zl.addTypeType(e,o),Zl.addChildren(e,u),Zl.addNullable(e,!!t.nullable),n!==-1&&Zl.addName(e,n),i!==-1&&Zl.addDictionary(e,i),l!==-1&&Zl.addCustomMetadata(e,l),Zl.endField(e)}function Gyt(e,t){const n=t.nodes||[],r=t.buffers||[];gp.startNodesVector(e,n.length);for(const o of n.slice().reverse())H0.encode(e,o);const i=e.endVector();gp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Vd.encode(e,o);const s=e.endVector();return gp.startRecordBatch(e),gp.addLength(e,BigInt(t.length)),gp.addNodes(e,i),gp.addBuffers(e,s),gp.endRecordBatch(e)}function Yyt(e,t){const n=Pl.encode(e,t.data);return N_.startDictionaryBatch(e),N_.addId(e,BigInt(t.id)),N_.addIsDelta(e,t.isDelta),N_.addData(e,n),N_.endDictionaryBatch(e)}function Kyt(e,t){return FCe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function Xyt(e,t){return LCe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Qyt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),X7="ARROW1",WK=new Uint8Array(X7.length);for(let e=0;e<X7.length;e+=1)WK[e]=X7.codePointAt(e);WK.length;class os extends xn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof pl?s.data.children:s.data),r=new os;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof dr)return this.visitMany(t.data),this;const{type:n}=t;if(!En.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(En.isUnion(n))this.nodes.push(new H0(r,0));else{const{nullCount:i}=t;En.isNull(n)||kf.call(this,i<=0?new Uint8Array(0):T3(t.offset,r,t.nullBitmap)),this.nodes.push(new H0(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function kf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Vd(this._byteLength,t)),this._byteLength+=t,this}function Jyt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(kf.call(this,i),n.mode===qu.Sparse)return Q7.call(this,e);if(n.mode===qu.Dense){if(e.offset<=0)return kf.call(this,s),Q7.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);kf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function Zyt(e){let t;return e.nullCount>=e.length?kf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?kf.call(this,T3(e.offset,e.length,t)):kf.call(this,XAe(e.values))}function Qm(e){return kf.call(this,e.values.subarray(0,e.length*e.stride))}function zCe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return kf.call(this,HTe(-i,t+1,r)),kf.call(this,n.subarray(i,i+o)),this}function GK(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return kf.call(this,HTe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function Q7(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}os.prototype.visitBool=Zyt;os.prototype.visitInt=Qm;os.prototype.visitFloat=Qm;os.prototype.visitUtf8=zCe;os.prototype.visitBinary=zCe;os.prototype.visitFixedSizeBinary=Qm;os.prototype.visitDate=Qm;os.prototype.visitTimestamp=Qm;os.prototype.visitTime=Qm;os.prototype.visitDecimal=Qm;os.prototype.visitList=GK;os.prototype.visitStruct=Q7;os.prototype.visitUnion=Jyt;os.prototype.visitInterval=Qm;os.prototype.visitDuration=Qm;os.prototype.visitFixedSizeList=GK;os.prototype.visitMap=GK;class VCe extends hCe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new lj,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,ky(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return a6(t)?t.then(n=>this.writeAll(n)):u6(t)?QK(this,t):XK(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof lj?this._sink=t:(this._sink=new lj,t&&sgt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&ogt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!G7(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof wu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof pl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!G7(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof pl?t instanceof Tyt||this._writeRecordBatch(t):t instanceof wu?this.writeAll(t.batches):oK(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Fd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Ys.RecordBatch?this._recordBatchBlocks.push(new z0(a,t.bodyLength,this._position)):t.headerType===Ys.DictionaryBatch&&this._dictionaryBlocks.push(new z0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Rr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Fd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(WK)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=os.assemble(t),o=new Pl(t.numRows,r,i),a=Fd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=os.assemble(new dr([t])),u=new Pl(t.length,s,o),l=new bh(u,n,r),c=Fd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class YK extends VCe{static writeAll(t,n){const r=new YK(n);return a6(t)?t.then(i=>r.writeAll(i)):u6(t)?QK(r,t):XK(r,t)}}class KK extends VCe{static writeAll(t){const n=new KK;return a6(t)?t.then(r=>n.writeAll(r)):u6(t)?QK(n,t):XK(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=W7.encode(new W7(t,ja.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function XK(e,t){let n=t;t instanceof wu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function QK(e,t){var n,r,i,s,o,a,u;return Tp(this,void 0,void 0,function*(){try{for(n=!0,r=jA(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function e1t(e,t="stream"){return(t==="stream"?YK:KK).writeAll(e).toUint8Array(!0)}function JK(e,t=1){return(e*t+63&-64||64)/t}function q0(e,t,n=e.BYTES_PER_ELEMENT){return new e(JK(t,n))}function ZK(e){return e instanceof kr?e:new kr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function t1t(e){return new dr([ZK(e)])}const eX=new TextEncoder;function n1t(e,t,n){const r=eX.encode(n);return e.set(r,t),r.length}function r1t(e,t,n){return eX.encodeInto(n,e.subarray(t)).written}const i1t=eX.encodeInto?r1t:n1t;function ece(e,t){const n=q0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function s1t(e,t){const n=q0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function o1t(e,t){const n=q0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function a1t(e,t){const n=q0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function u1t(e){const t=O3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function l1t(e,t,n){const r=q0(Int32Array,t+1),i=q0(Uint8Array,3*n);let s=0;return{set(o,a){s+=i1t(i,s,o),r[a+1]=s},data:()=>{const o=JK(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function c1t(e,t){const n=[],r=q0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:f1t(e.dictionary,n,o)})}}function f1t(e,t,n){const r=l1t(e,t.length,n);return t.forEach(r.set),t1t(r.data())}function d1t(e,t){const n=q0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function h1t(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?ece:null;break;case re.Float:r=e.precision>0?ece:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?c1t:null;break;case re.Bool:r=s1t;break;case re.Date:r=e.unit?a1t:o1t;break}return r==null?u1t(e):n?d1t(r(e,t),t):r(e,t)}function p1t(e,t){const n=e.length,r=JK(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),ZK({type:t,length:n,buffers:[null,i]})}function HCe(e,t,n,r,i=!0){const s=h1t(r,e,i);return t(n,s.set),ZK(s.data())}function tX(e){if(e instanceof En||e==null)return e;switch(e){case re.Binary:return new b2;case re.Bool:return new _2;case re.DateDay:return new wgt;case re.DateMillisecond:case re.Date:return new Egt;case re.Dictionary:return new B0(new SE,new F0);case re.Float16:return new dAe;case re.Float32:return new gK;case re.Float64:case re.Float:return new yK;case re.Int8:return new lK;case re.Int16:return new cK;case re.Int32:case re.Int:return new F0;case re.Int64:return new fK;case re.IntervalDayTime:return new Cgt;case re.Interval:case re.IntervalYearMonth:return new Igt;case re.Null:return new Em;case re.TimeMicrosecond:return new Tgt;case re.TimeMillisecond:case re.Time:return new Sgt;case re.TimeNanosecond:return new Agt;case re.TimeSecond:return new xgt;case re.Uint8:return new dK;case re.Uint16:return new hK;case re.Uint32:return new pK;case re.Uint64:return new mK;case re.Utf8:return new SE;default:wn(`Unsupported type code: ${ph(e)}. Use a data type constructor instead?`)}}function m1t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function qCe(e,t){const n=J7();return e(t,n.add),n}function J7(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(wm(t))++e.dates,m1t(t)&&++e.utcdays;else if(Y1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=J7());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=J7())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return tX(g1t(e))}};return e}function g1t(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:wn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:wn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=$r.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new IE(e.minlen,n):new CE(n)}else if(e.structs===t){const n=e.struct_prof;return new oa(Object.keys(n).map(r=>$r.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;wn("Type inference failure")}}}}function y1t(e,t,n,r,i,s=!0){if(i=tX(i),!i){const o=qCe(r,t);s=o.nulls>0,i=o.type()}return HCe(n,r,t,i,s)}function v1t(e,t,n,r,i,s=!0){i=tX(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=b1t(o);if(u&&a&&tce(u.type,i))return u;const l=o.data;if(QI(l)){const c=_1t(l);if(a&&c&&tce(c,i))return p1t(l,c);i=i||c,s=!1}if(!i){const c=qCe(r,o);s=c.nulls>0,i=c.type()}return HCe(n,r,o,i,s)}function b1t(e){return e instanceof dr?e:e.vector instanceof dr?e.vector:null}function _1t(e){const n={Float32Array:gK,Float64Array:yK,Int8Array:lK,Int16Array:cK,Int32Array:F0,Uint8Array:dK,Uint16Array:hK,Uint32Array:pK,BigInt64Array:fK,BigUint64Array:mK}[e.constructor.name];return n?new n:null}function tce(e,t){return!e||!t?!0:e.compareTo(t)}function w1t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function E1t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&Y1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const x1t=()=>wn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function S1t(){try{return wu}catch{x1t()}}function WCe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=T1t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&wn("Column length mismatch"),a[l]=c});const u=S1t();return new u(a)}function T1t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=fi(n)?n(e):fr(n)?n:null;if(fr(e))return{dataFrom:y1t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:w1t(e,r,i)};if(A1t(e))return{dataFrom:v1t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:E1t(e,r,i)};wn("Unsupported input data type")}function A1t(e){return e&&fi(e.reify)}function C1t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return e1t(WCe(e,r),n)}function I1t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function k1t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&wm(u))++i,I1t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function y6(e,t){return fi(t)?t(e):t||e.columnNames()}function GCe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=k1t(R1t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function R1t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function nX(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function N1t(e,t={}){const n=y6(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":wm(l)?s6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return nX(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function YCe(e,t={}){if(fi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(wm(e))return t.utc?s6(e):gTe(e);{const r=JSON.stringify(e,(s,o)=>QI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+"…"+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function v6(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function P1t(e,t={}){const n=y6(e,t.columns),{align:r,format:i}=GCe(e,n,t),s=D1t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(YCe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return nX(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function D1t(e){return v6(e.style,t=>fi(t)?t:()=>t)}function O1t(e,t=!0,n=!1){return e===void 0||e?t:n}const $1t=e=>wm(e)?s6(e,!0):e;function M1t(e,t={}){const n=O1t(t.schema),r=t.format||{},i=y6(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||$1t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function L1t(e,t={}){const n=y6(e,t.columns),{align:r,format:i}=GCe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return nX(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(YCe(u,i[l]))+"|"}}),a+`
`}function KCe(e,t){for(const[n,r]of o6(t))e.set(n,r);return e}function F1t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Sm(e,t,n=new Map){return t=Qa(t)?e.columnName(t):t,$o(t)?n.set(t,t):fr(t)?t.forEach(r=>Sm(e,r,n)):fi(t)?Sm(e,t(e),n):ga(t)?KCe(n,t):wn(`Invalid column selection: ${ph(t)}`),n}function b6(e,t){return e.toObject=t,e}function XCe(e){return fr(e)?e.map(XCe):e&&e.toObject?e.toObject():e}function NE(){return b6(e=>e.columnNames(),()=>({all:[]}))}function QCe(...e){return e=e.flat(),b6(t=>{const n=Sm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:XCe(e)}))}function j1t(e,t){return b6(n=>{let r=Qa(e)?e:n.columnIndex(e),i=Qa(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function B1t(e){return $o(e)&&(e=RegExp(F1t(e))),b6(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function U1t(e){return QI(e.data)?e.data.constructor:Array}class Rp extends imt{static from(t,n){return new Rp(amt(t,n),n)}static new(t,n){if(t instanceof Rp)return t;const r={},i=[];for(const[s,o]of o6(t))r[s]=o,i.push(s);return new Rp(r,n||i)}constructor(t,n,r,i,s,o){v6(t,omt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Rp(t||this._data,n||(t?null:this._names),o,i!==void 0?i:Mmt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Hl(r).groupby(r.groups());return t.forEach(s=>{s=Rp.new(s),s.numRows()!==n&&wn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):wn(`Unrecognized column: ${t}`)}object(t=0){return nce(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Sm(this,t.columns||NE()),o=UTe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),Fmt(this,u,a,n)}return a}*[Symbol.iterator](){const t=nce(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(U1t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=Lmt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return WCe(this,t)}toArrowBuffer(t){return C1t(this,t)}toCSV(t){return N1t(this,t)}toHTML(t){return P1t(this,t)}toJSON(t){return M1t(this,t)}toMarkdown(t){return L1t(this,t)}}function nce(e){let t=e._builder;if(!t){const n=UTe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class z1t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Zn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=V1t[e.type];s&&s(e,t,n)}const EN=(e,t,n)=>{Zn(e.argument,t,n,e)},dj=(e,t,n)=>{Zn(e.left,t,n,e),Zn(e.right,t,n,e)},rce=(e,t,n)=>{Zn(e.test,t,n,e),Zn(e.consequent,t,n,e),e.alternate&&Zn(e.alternate,t,n,e)},hj=(e,t,n)=>{Ed(e.params,t,n,e),Zn(e.body,t,n,e)},ice=(e,t,n)=>{Zn(e.callee,t,n,e),Ed(e.arguments,t,n,e)},Ed=(e,t,n,r)=>{e.forEach(i=>Zn(i,t,n,r))},V1t={TemplateLiteral:(e,t,n)=>{Ed(e.expressions,t,n,e),Ed(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Zn(e.object,t,n,e),Zn(e.property,t,n,e)},CallExpression:ice,NewExpression:ice,ArrayExpression:(e,t,n)=>{Ed(e.elements,t,n,e)},AssignmentExpression:dj,AwaitExpression:EN,BinaryExpression:dj,LogicalExpression:dj,UnaryExpression:EN,UpdateExpression:EN,ConditionalExpression:rce,ObjectExpression:(e,t,n)=>{Ed(e.properties,t,n,e)},Property:(e,t,n)=>{Zn(e.key,t,n,e),Zn(e.value,t,n,e)},ArrowFunctionExpression:hj,FunctionExpression:hj,FunctionDeclaration:hj,VariableDeclaration:(e,t,n)=>{Ed(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Zn(e.id,t,n,e),Zn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Zn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Ed(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Zn(e.expression,t,n,e)},IfStatement:rce,ForStatement:(e,t,n)=>{Zn(e.init,t,n,e),Zn(e.test,t,n,e),Zn(e.update,t,n,e),Zn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Zn(e.test,t,n,e),Zn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Zn(e.body,t,n,e),Zn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Zn(e.discriminant,t,n,e),Ed(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Zn(e.test,t,n,e),Ed(e.consequent,t,n,e)},ReturnStatement:EN,Program:(e,t,n)=>{Zn(e.body[0],t,n,e)}};function JCe(e){delete e.start,delete e.end,delete e.optional}function sce(e){JCe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function H1t(e){return Zn(e,null,{Column:sce,Constant:sce,Default:JCe}),e}function Ts(e,t){return t&&t.type===e}function q1t(e){return Ts(Umt,e)||Ts(Bmt,e)}function W1t(e){return fi(e)?e:()=>e}const G1t="Escaped functions are not valid as rollup or pivot values.";function Y1t(e,t,n){e.aggronly&&wn(G1t);const r="(row,data)=>fn("+BTe(e.table.columnNames())+",$)";return{escape:iK.escape(r,W1t(t.expr),n)}}var K1t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],ZCe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],X1t="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",e2e="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",pj={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},mj="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Q1t={5:mj,"5module":mj+" export import",6:mj+" const class extends export import super"},J1t=/^in(stanceof)?$/,Z1t=new RegExp("["+e2e+"]"),evt=new RegExp("["+e2e+X1t+"]");function Z7(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Tm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Z1t.test(String.fromCharCode(e)):t===!1?!1:Z7(e,ZCe)}function PE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&evt.test(String.fromCharCode(e)):t===!1?!1:Z7(e,ZCe)||Z7(e,K1t)}var sr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Kl(e,t){return new sr(e,{beforeExpr:!0,binop:t})}var Xl={beforeExpr:!0},cu={startsExpr:!0},rX={};function qn(e,t){return t===void 0&&(t={}),t.keyword=e,rX[e]=new sr(e,t)}var K={num:new sr("num",cu),regexp:new sr("regexp",cu),string:new sr("string",cu),name:new sr("name",cu),privateId:new sr("privateId",cu),eof:new sr("eof"),bracketL:new sr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new sr("]"),braceL:new sr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new sr("}"),parenL:new sr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new sr(")"),comma:new sr(",",Xl),semi:new sr(";",Xl),colon:new sr(":",Xl),dot:new sr("."),question:new sr("?",Xl),questionDot:new sr("?."),arrow:new sr("=>",Xl),template:new sr("template"),invalidTemplate:new sr("invalidTemplate"),ellipsis:new sr("...",Xl),backQuote:new sr("`",cu),dollarBraceL:new sr("${",{beforeExpr:!0,startsExpr:!0}),eq:new sr("=",{beforeExpr:!0,isAssign:!0}),assign:new sr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new sr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new sr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Kl("||",1),logicalAND:Kl("&&",2),bitwiseOR:Kl("|",3),bitwiseXOR:Kl("^",4),bitwiseAND:Kl("&",5),equality:Kl("==/!=/===/!==",6),relational:Kl("</>/<=/>=",7),bitShift:Kl("<</>>/>>>",8),plusMin:new sr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Kl("%",10),star:Kl("*",10),slash:Kl("/",10),starstar:new sr("**",{beforeExpr:!0}),coalesce:Kl("??",1),_break:qn("break"),_case:qn("case",Xl),_catch:qn("catch"),_continue:qn("continue"),_debugger:qn("debugger"),_default:qn("default",Xl),_do:qn("do",{isLoop:!0,beforeExpr:!0}),_else:qn("else",Xl),_finally:qn("finally"),_for:qn("for",{isLoop:!0}),_function:qn("function",cu),_if:qn("if"),_return:qn("return",Xl),_switch:qn("switch"),_throw:qn("throw",Xl),_try:qn("try"),_var:qn("var"),_const:qn("const"),_while:qn("while",{isLoop:!0}),_with:qn("with"),_new:qn("new",{beforeExpr:!0,startsExpr:!0}),_this:qn("this",cu),_super:qn("super",cu),_class:qn("class",cu),_extends:qn("extends",Xl),_export:qn("export"),_import:qn("import",cu),_null:qn("null",cu),_true:qn("true",cu),_false:qn("false",cu),_in:qn("in",{beforeExpr:!0,binop:7}),_instanceof:qn("instanceof",{beforeExpr:!0,binop:7}),_typeof:qn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:qn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:qn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Fc=/\r\n?|\n|\u2028|\u2029/,tvt=new RegExp(Fc.source,"g");function Xx(e){return e===10||e===13||e===8232||e===8233}function t2e(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(Xx(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var n2e=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ac=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,r2e=Object.prototype,nvt=r2e.hasOwnProperty,rvt=r2e.toString,ik=Object.hasOwn||function(e,t){return nvt.call(e,t)},oce=Array.isArray||function(e){return rvt.call(e)==="[object Array]"},ace=Object.create(null);function qg(e){return ace[e]||(ace[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function W0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var ivt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,x2=function(t,n){this.line=t,this.column=n};x2.prototype.offset=function(t){return new x2(this.line,this.column+t)};var _6=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function i2e(e,t){for(var n=1,r=0;;){var i=t2e(e,r,t);if(i<0)return new x2(n,t-r);++n,r=i}}var ez={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},uce=!1;function svt(e){var t={};for(var n in ez)t[n]=e&&ik(e,n)?e[n]:ez[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!uce&&typeof console=="object"&&console.warn&&(uce=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),oce(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return oce(t.onComment)&&(t.onComment=ovt(t,t.onComment)),t}function ovt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new _6(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var S2=1,Qx=2,iX=4,s2e=8,o2e=16,a2e=32,sX=64,u2e=128,sk=256,oX=S2|Qx|sk;function aX(e,t){return Qx|(e?iX:0)|(t?s2e:0)}var F3=0,uX=1,Jm=2,l2e=3,c2e=4,f2e=5,$s=function(t,n,r){this.options=t=svt(t),this.sourceFile=t.sourceFile,this.keywords=qg(Q1t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=pj[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=qg(i);var s=(i?i+" ":"")+pj.strict;this.reservedWordsStrict=qg(s),this.reservedWordsStrictBind=qg(s+" "+pj.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Fc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(S2),this.regexpState=null,this.privateNameStack=[]},Bh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};$s.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Bh.inFunction.get=function(){return(this.currentVarScope().flags&Qx)>0};Bh.inGenerator.get=function(){return(this.currentVarScope().flags&s2e)>0&&!this.currentVarScope().inClassFieldInit};Bh.inAsync.get=function(){return(this.currentVarScope().flags&iX)>0&&!this.currentVarScope().inClassFieldInit};Bh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&sk)return!1;if(t.flags&Qx)return(t.flags&iX)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Bh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&sX)>0||n||this.options.allowSuperOutsideMethod};Bh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&u2e)>0};Bh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Bh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(Qx|sk))>0||n};Bh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&sk)>0};$s.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};$s.parse=function(t,n){return new this(n,t).parse()};$s.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};$s.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties($s.prototype,Bh);var iu=$s.prototype,avt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;iu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){ac.lastIndex=e,e+=ac.exec(this.input)[0].length;var t=avt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){ac.lastIndex=e+t[0].length;var n=ac.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Fc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,ac.lastIndex=e,e+=ac.exec(this.input)[0].length,this.input[e]===";"&&e++}};iu.eat=function(e){return this.type===e?(this.next(),!0):!1};iu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};iu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};iu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};iu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||Fc.test(this.input.slice(this.lastTokEnd,this.start))};iu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};iu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};iu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};iu.expect=function(e){this.eat(e)||this.unexpected()};iu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var w6=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};iu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};iu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};iu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};iu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Ot=$s.prototype;Ot.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var lX={kind:"loop"},uvt={kind:"switch"};Ot.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ac.lastIndex=this.pos;var t=ac.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Tm(r,!0)){for(var i=n+1;PE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!J1t.test(s))return!0}return!1};Ot.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ac.lastIndex=this.pos;var e=ac.exec(this.input),t=this.pos+e[0].length,n;return!Fc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(PE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Ot.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){ac.lastIndex=this.pos;var o=ac.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Ot.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Ot.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Ot.parseDoStatement=function(e){return this.next(),this.labels.push(lX),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Ot.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(lX),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new w6,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Ot.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,nC|(n?0:tz),!1,t)};Ot.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Ot.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Ot.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(uvt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Ot.parseThrowStatement=function(e){return this.next(),Fc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var lvt=[];Ot.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?a2e:0),this.checkLValPattern(e,t?c2e:Jm),this.expect(K.parenR),e};Ot.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Ot.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Ot.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(lX),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Ot.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Ot.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Ot.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Ot.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Ot.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Ot.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Ot.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Ot.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};Ot.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?uX:Jm,!1)};var nC=1,tz=2,d2e=4;Ot.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&tz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&nC&&(e.id=t&d2e&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&tz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?uX:Jm:l2e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(aX(e.async,e.generator)),t&nC||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&nC?"FunctionDeclaration":"FunctionExpression")};Ot.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Ot.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&cvt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Ot.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&j3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Ot.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};Ot.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Ot.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&j3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Ot.parseClassField=function(e){if(j3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&j3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Ot.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(sk|sX);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Ot.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Jm,!1)):(t===!0&&this.unexpected(),e.id=null)};Ot.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};Ot.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Ot.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];ik(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function cvt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function j3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Ot.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Ot.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Ot.parseExportDeclaration=function(e){return this.parseStatement(null)};Ot.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,nC|d2e,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Ot.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),ik(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Ot.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Ot.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Ot.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Ot.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Ot.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Ot.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=lvt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Ot.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Jm),this.finishNode(e,"ImportSpecifier")};Ot.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Jm),this.finishNode(e,"ImportDefaultSpecifier")};Ot.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Jm),this.finishNode(e,"ImportNamespaceSpecifier")};Ot.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};Ot.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return ivt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Ot.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Ot.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var jc=$s.prototype;jc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};jc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};jc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};jc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};jc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};jc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};jc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};jc.parseBindingListItem=function(e){return e};jc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};jc.checkLValSimple=function(e,t,n){t===void 0&&(t=F3);var r=t!==F3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Jm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(ik(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==f2e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};jc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=F3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};jc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=F3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Xc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},wi={b_stat:new Xc("{",!1),b_expr:new Xc("{",!0),b_tmpl:new Xc("${",!1),p_stat:new Xc("(",!1),p_expr:new Xc("(",!0),q_tmpl:new Xc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Xc("function",!1),f_expr:new Xc("function",!0),f_expr_gen:new Xc("function",!0,!1,null,!0),f_gen:new Xc("function",!1,!1,null,!0)},Jx=$s.prototype;Jx.initialContext=function(){return[wi.b_stat]};Jx.curContext=function(){return this.context[this.context.length-1]};Jx.braceIsBlock=function(e){var t=this.curContext();return t===wi.f_expr||t===wi.f_stat?!0:e===K.colon&&(t===wi.b_stat||t===wi.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?Fc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===wi.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};Jx.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};Jx.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};Jx.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===wi.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?wi.b_stat:wi.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(wi.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?wi.p_stat:wi.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==wi.p_stat)&&!(e===K._return&&Fc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===wi.b_stat)?this.context.push(wi.f_expr):this.context.push(wi.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===wi.q_tmpl?this.context.pop():this.context.push(wi.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===wi.f_expr?this.context[t]=wi.f_expr_gen:this.context[t]=wi.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var on=$s.prototype;on.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};on.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};on.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new w6,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};on.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};on.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};on.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};on.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};on.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&h2e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function h2e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&h2e(e.expression)}on.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};on.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};on.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};on.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};on.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new w6,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};on.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(wi.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(wi.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};on.parseExprAtomDefault=function(){this.unexpected()};on.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};on.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};on.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};on.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};on.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};on.shouldParseArrow=function(e){return!this.canInsertSemicolon()};on.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new w6,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};on.parseParenItem=function(e){return e};on.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var fvt=[];on.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=fvt,this.finishNode(e,"NewExpression")};on.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};on.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};on.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!Fc.test(this.input.slice(this.lastTokEnd,this.start))};on.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};on.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};on.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};on.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};on.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};on.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};on.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(aX(t,r.generator)|sX|(n?u2e:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};on.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(aX(n,!1)|o2e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};on.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,f2e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};on.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};on.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,uX,t?null:n)}};on.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};on.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};on.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};on.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};on.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};on.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};on.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var B3=$s.prototype;B3.raise=function(e,t){var n=i2e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};B3.raiseRecoverable=B3.raise;B3.curPosition=function(){if(this.options.locations)return new x2(this.curLine,this.pos-this.lineStart)};var Py=$s.prototype,dvt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Py.enterScope=function(e){this.scopeStack.push(new dvt(e))};Py.exitScope=function(){this.scopeStack.pop()};Py.treatFunctionsAsVarInScope=function(e){return e.flags&Qx||!this.inModule&&e.flags&S2};Py.declareName=function(e,t,n){var r=!1;if(t===Jm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&S2&&delete this.undefinedExports[e]}else if(t===c2e){var s=this.currentScope();s.lexical.push(e)}else if(t===l2e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&a2e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&S2&&delete this.undefinedExports[e],u.flags&oX)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Py.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Py.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Py.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&oX)return t}};Py.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&oX&&!(t.flags&o2e))return t}};var E6=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new _6(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},ok=$s.prototype;ok.startNode=function(){return new E6(this,this.start,this.startLoc)};ok.startNodeAt=function(e,t){return new E6(this,e,t)};function p2e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}ok.finishNode=function(e,t){return p2e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};ok.finishNodeAt=function(e,t,n,r){return p2e.call(this,e,t,n,r)};ok.copyNode=function(e){var t=new E6(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var m2e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",g2e=m2e+" Extended_Pictographic",y2e=g2e,v2e=y2e+" EBase EComp EMod EPres ExtPict",b2e=v2e,hvt=b2e,pvt={9:m2e,10:g2e,11:y2e,12:v2e,13:b2e,14:hvt},mvt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",gvt={9:"",10:"",11:"",12:"",13:"",14:mvt},lce="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",_2e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",w2e=_2e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",E2e=w2e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",x2e=E2e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",S2e=x2e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",yvt=S2e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",vvt={9:_2e,10:w2e,11:E2e,12:x2e,13:S2e,14:yvt},T2e={};function bvt(e){var t=T2e[e]={binary:qg(pvt[e]+" "+lce),binaryOfStrings:qg(gvt[e]),nonBinary:{General_Category:qg(lce),Script:qg(vvt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var gj=0,cce=[9,10,11,12,13,14];gj<cce.length;gj+=1){var _vt=cce[gj];bvt(_vt)}var At=$s.prototype,Uh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=T2e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Uh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Uh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Uh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Uh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Uh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Uh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Uh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Uh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Uh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};At.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};At.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};At.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};At.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};At.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};At.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};At.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};At.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};At.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};At.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};At.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};At.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};At.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};At.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};At.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};At.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};At.regexp_eatSyntaxCharacter=function(e){var t=e.current();return A2e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function A2e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}At.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!A2e(n);)e.advance();return e.pos!==t};At.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};At.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};At.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};At.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=W0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=W0(e.lastIntValue);return!0}return!1};At.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),wvt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function wvt(e){return Tm(e,!0)||e===36||e===95}At.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Evt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Evt(e){return PE(e,!0)||e===36||e===95||e===8204||e===8205}At.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};At.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};At.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};At.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};At.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};At.regexp_eatZero=function(e){return e.current()===48&&!x6(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};At.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};At.regexp_eatControlLetter=function(e){var t=e.current();return C2e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function C2e(e){return e>=65&&e<=90||e>=97&&e<=122}At.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&xvt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function xvt(e){return e>=0&&e<=1114111}At.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};At.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var I2e=0,Am=1,cc=2;At.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(Svt(t))return e.lastIntValue=-1,e.advance(),Am;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===cc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return I2e};function Svt(e){return e===100||e===68||e===115||e===83||e===119||e===87}At.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Am}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return I2e};At.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){ik(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};At.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Am;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return cc;e.raise("Invalid property name")};At.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";k2e(t=e.current());)e.lastStringValue+=W0(t),e.advance();return e.lastStringValue!==""};function k2e(e){return C2e(e)||e===95}At.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Tvt(t=e.current());)e.lastStringValue+=W0(t),e.advance();return e.lastStringValue!==""};function Tvt(e){return k2e(e)||x6(e)}At.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};At.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===cc&&e.raise("Negated character class may contain strings"),!0}return!1};At.regexp_classContents=function(e){return e.current()===93?Am:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Am)};At.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};At.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||P2e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};At.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};At.regexp_classSetExpression=function(e){var t=Am,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===cc&&(t=cc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==cc&&(t=Am);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===cc&&(t=cc)}};At.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};At.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Am:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};At.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===cc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};At.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};At.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===cc&&(t=cc);return t};At.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Am:cc};At.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&Avt(n)||Cvt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function Avt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function Cvt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}At.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return Ivt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Ivt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}At.regexp_eatClassControlLetter=function(e){var t=e.current();return x6(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};At.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};At.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;x6(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function x6(e){return e>=48&&e<=57}At.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;R2e(n=e.current());)e.lastIntValue=16*e.lastIntValue+N2e(n),e.advance();return e.pos!==t};function R2e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function N2e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}At.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};At.regexp_eatOctalDigit=function(e){var t=e.current();return P2e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function P2e(e){return e>=48&&e<=55}At.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!R2e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+N2e(i),e.advance()}return!0};var cX=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new _6(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Hn=$s.prototype;Hn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new cX(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Hn.getToken=function(){return this.next(),new cX(this)};typeof Symbol<"u"&&(Hn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});Hn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Hn.readToken=function(e){return Tm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Hn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Hn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=t2e(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Hn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Xx(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Hn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&n2e.test(String.fromCharCode(e)))++this.pos;else break e}}};Hn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Hn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};Hn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};Hn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};Hn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};Hn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};Hn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Fc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};Hn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};Hn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};Hn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};Hn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Tm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+W0(t)+"'")};Hn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+W0(e)+"'")};Hn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Hn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Fc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Uh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};Hn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function kvt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function D2e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Hn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=D2e(this.input.slice(t,this.pos)),++this.pos):Tm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};Hn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=D2e(this.input.slice(t,this.pos));return++this.pos,Tm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Tm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=kvt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};Hn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Hn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Xx(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var O2e={};Hn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===O2e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Hn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw O2e;this.raise(e,t)};Hn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Xx(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Hn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Hn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return W0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return Xx(t)?"":String.fromCharCode(t)}};Hn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Hn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(PE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Tm:PE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=W0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Hn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=rX[e]),this.finishToken(t,e)};var Rvt="8.11.3";$s.acorn={Parser:$s,version:Rvt,defaultOptions:ez,Position:x2,SourceLocation:_6,getLineInfo:i2e,Node:E6,TokenType:sr,tokTypes:K,keywordTypes:rX,TokContext:Xc,tokContexts:wi,isIdentifierChar:PE,isIdentifierStart:Tm,Token:cX,isNewLine:Xx,lineBreak:Fc,lineBreakG:tvt,nonASCIIwhitespace:n2e};function Nvt(e,t){return $s.parse(e,t)}const fX={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},Pvt={ecmaVersion:11},fce="$",Dvt="d",Ovt="d1",$vt="d2",bo=e=>(t,n)=>n.error(t,e+" not allowed"),Mvt=bo("Aggregate function"),Lvt=bo("Window function"),Fvt="Invalid argument",dX="Invalid column reference",jvt=dX+" (must be input to an aggregate function)",$2e="Invalid function call",Bvt="Invalid member expression",Uvt="Invalid operator parameter",zvt="Invalid param reference",Vvt="Invalid variable reference",Hvt="Variable not accessible in operator call",qvt="Unsupported variable declaration",Wvt="Unsupported destructuring pattern",M2e="Table expressions do not support closures",L2e="Use aq.escape(fn) to use a function as-is (including closures)",Gvt="use table.params({ name: value }) to define dynamic parameters",Yvt="use aq.addFunction(name, fn) to add new op functions",Kvt=`
Note: ${M2e}. ${L2e}, or ${Gvt}.`,F2e=`
Note: ${M2e}. ${L2e}, or ${Yvt}.`,Xvt=`The ${FTe} method is not valid in multi-table expressions.`;function Qvt(e,t){const n=Jvt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,q1t(r)?(ebt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=Ovt),e.scope.add(e.tuple2=$vt),e.scope.add(e.$param=fce)):(e.scope.add(e.tuple=Dvt),e.scope.add(e.$param=fce)),Zn(r,e,hX),e.root}function Jvt(e){try{const t=e.field?Zvt(e):fr(e)?ph(e):e;return Nvt(`expr=(${t})`,Pvt).body[0].expression.right}catch{wn(`Expression parse error: ${e+""}`)}}function Zvt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const hX={FunctionDeclaration:bo("Function definitions"),ForStatement:bo("For loops"),ForOfStatement:bo("For-of loops"),ForInStatement:bo("For-in loops"),WhileStatement:bo("While loops"),DoWhileStatement:bo("Do-while loops"),AwaitExpression:bo("Await expressions"),ArrowFunctionExpression:bo("Function definitions"),AssignmentExpression:bo("Assignments"),FunctionExpression:bo("Function definitions"),NewExpression:bo('Use of "new"'),UpdateExpression:bo("Update expressions"),VariableDeclarator(e,t){iz(e.id,t)},Identifier(e,t,n){U2e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,Vvt,Kvt)},CallExpression(e,t){const n=j2e(e.callee),r=$Te(n)||MTe(n);if(r){if((t.join||t.aggregate===!1)&&nK(n)&&Mvt(e,t),(t.join||t.window===!1)&&rK(n)&&Lvt(e,t),t.$op=1,t.ast)rz(e,n,t),e.arguments.forEach(i=>Zn(i,t,nz));else{const i=t.op(tbt(t,r,n,e.arguments));Object.assign(e,{type:RTe,name:i.id})}return t.$op=0,!1}else OTe(n)?rz(e,n,t):t.error(e,$2e,F2e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ts(p0,r))return;const{name:s}=r;if(B2e(e)&&Ts(p0,i)&&Lf(fX,i.name)){H2e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return dce(e,o,t,z2e,n);if(s===t.$param)return dce(e,o,t,rbt);t.paramsRef.has(s)?T2(e,t.paramsRef.get(s)):t.columnRef.has(s)?V2e(r,s,t,e):Lf(t.params,s)&&T2(r,s)}};function dce(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ts(qx,s))a=s.value;else try{Zn(s,n,hX,e),a=n.param(s)}catch{n.error(e,Bvt)}return r(e,a,t,n,i),!1}const nz={...hX,VariableDeclarator:bo("Variable declaration in operator call"),Identifier(e,t,n){U2e(e,t,n)&&t.error(e,Hvt)},CallExpression(e,t){const n=j2e(e.callee);OTe(n)?rz(e,n,t):t.error(e,$2e,F2e)}};function ebt(e,t){e.generator&&bo("Generator functions")(e,t),e.async&&bo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(cT(t,n[0],"tuple1",i(1)),r>1&&cT(t,n[1],"tuple2",i(2)),r>2&&cT(t,n[2],"$param",s)):(cT(t,n[0],"tuple",i(0)),r>1&&cT(t,n[1],"$param",s))),t.root=e.body}function cT(e,t,n,r){Ts(p0,t)?(e.scope.add(t.name),e[n]=t.name):Ts(ITe,t)&&t.properties.forEach(i=>{const s=Ts(p0,i.key)?i.key.name:Ts(qx,i.key)?i.key.value:e.error(i,Fvt);Ts(p0,i.value)||e.error(i.value,Wvt),r(i.value.name,s)})}function tbt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Zn(u,e,nz),i.push(e.field(u))):l<a?(Zn(u,e,nz),s.push(e.param(u))):e.error(u,Uvt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function j2e(e){return Ts(p0,e)?e.name:Ts(CTe,e)?B2e(e)?nbt(e.property.name):e.property.name:null}function B2e(e){return Ts(p0,e.object)&&e.object.name==="Math"}function nbt(e){return e==="max"?"greatest":e==="min"?"least":e}function U2e(e,t,n){const{name:r}=e;if(!(Ts(CTe,n)&&n.property===e)){if(!(Ts(kTe,n)&&n.key===e))if(t.paramsRef.has(r))T2(e,t.paramsRef.get(r));else if(t.columnRef.has(r))V2e(e,r,t,n);else if(Lf(t.params,r))T2(e,r);else if(Lf(fX,r))H2e(e,r);else return!0}}function z2e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,dX),r.aggronly&&!r.$op&&r.error(e,jvt),LTe(e,t,n,o,i)}function V2e(e,t,n,r){const[i,s]=n.columnRef.get(t);z2e(e,i,s,n,r)}function rbt(e,t,n,r){r.params&&!Lf(r.params,t)&&r.error(e,zvt),T2(e,t)}function T2(e,t){e.type=Wmt,e.name=t}function H2e(e,t){e.type=Vmt,e.name=t,e.raw=fX[t]}function rz(e,t,n){if(t===FTe){const r=n.table;r||n.error(e,Xvt),jTe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Qa(s)?r.columnName(s):s;return r.column(o)||n.error(i,dX),o}):r.columnNames())}else e.callee={type:qmt,name:t}}function iz(e,t){Ts(p0,e)?t.scope.add(e.name):Ts(jmt,e)?e.elements.forEach(n=>iz(n,t)):Ts(ITe,e)?e.properties.forEach(n=>iz(n.value,t)):t.error(e.id,qvt)}const ibt={[JI]:1,[RTe]:1};function Gu(e,t={}){const n=t.generate||v3,r=t.compiler||iK,i=obt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=sbt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Ts(qx,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?H1t(g):f(n(g),i));u.push(y),ibt[g.type]&&y!==g&&ga(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);wn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of o6(e))d.value(m+"",g.escape?Y1t(d,g,i):Qvt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function sbt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function obt(e){return(e.table?yj(e.table):e.join?{...yj(e.join[1]),...yj(e.join[0])}:{})||{}}function yj(e){return e&&fi(e.params)?e.params():{}}const q2e="Expr",Qc="ExprList",W2e="ExprNumber",sA="ExprObject",ew="JoinKeys",U3="JoinValues",ec="Options",pX="OrderKeys",vg="SelectionList",R1="TableRef",tw="TableRefList",abt="Descending",ubt="Query",lbt="Selection",cbt="Verb",fbt="Window";function S6(e,t){return e&&e.expr?new hce({...e,...t}):new hce(t,e)}class hce{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...fi(this.expr)?{func:!0}:{}}}}function dbt(e){return S6(e,{desc:!0})}function Fv(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return S6(e,t?{expr:t,...r}:r)}function hbt(e,t,n){return S6(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function pbt(e){const t=n=>n;return t.toString=()=>e,t}function pce(e,t){return t=t&&fi(t.query)?t.query():t,t&&fi(t.evaluate)?t.evaluate(null,e):e(t)}function G2e(e){return ga(e)&&(fr(e.all)||fr(e.matches)||fr(e.not)||fr(e.range))}function A2(e){return e&&fi(e.toObject)?e.toObject():fi(e)?{expr:String(e),func:!0}:fr(e)?e.map(A2):ga(e)?v6(e,t=>A2(t)):e}function mX(e){return fr(e)?e.map(mX):ga(e)?fr(e.verbs)?yX.from(e):fr(e.all)?NE():fr(e.range)?j1t(...e.range):fr(e.match)?B1t(RegExp(...e.match)):fr(e.not)?QCe(e.not.map(A2)):mbt(e):e}function mbt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=Fv(n):e.func===!0&&(t=n=pbt(n)),ga(e.window)){const{frame:r,peers:i}=e.window;t=n=hbt(n,r,i)}e.desc===!0&&(t=dbt(n))}return e===t?v6(e,r=>mX(r)):t}function gbt(e){return fr(e)?e.map(ybt):e}function ybt(e){const t=[];return Hu(e).forEach(n=>{Qa(n)?t.push(n):$o(n)?t.push(Fv(n,null)):ga(n)&&n.expr||fi(n)?t.push(n):wn(`Invalid key value: ${n+""}`)}),t}function vbt(e){return fr(e)?e.map(bbt):e}function bbt(e,t){return t<2?Hu(e):e}function _bt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(ga(r)&&!fi(r))for(const i in r)t.push(r[i]);else n=Qa(r)?r:$o(r)?Fv(n):fi(r)?n:wn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const wbt={[q2e]:Q2e,[Qc]:DE,[W2e]:Cbt,[sA]:G0,[ew]:Ibt,[U3]:kbt,[pX]:DE,[vg]:Tbt};function Ebt(e,t,n){return t===R1?mce(e):t===tw?e.map(mce):Y2e(A2(e),t,n)}function Y2e(e,t,n){return t===ec?e&&xbt(e,n):wbt[t](e)}function xbt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?Y2e(i,t[r]):i}return n}function Sbt(e,t){return Gu({expr:e},{...t,ast:!0}).exprs[0]}function gX(e){return{type:JI,name:e}}function K2e(e){return{type:JI,index:e}}function G0(e,t){if($o(e))return Sbt(e,t);if(e.expr){let n;if(e.field===!0?n=gX(e.expr):e.func===!0&&(n=G0(e.expr,t)),n)return e.desc&&(n={type:abt,expr:n}),e.window&&(n={type:fbt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...G0(e[n],t),as:n}))}function X2e(e){const t=lbt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:DE(e.not)}:e.range?{type:t,operator:"range",arguments:DE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:wn("Invalid input")}function Tbt(e){return Hu(e).map(Abt).flat()}function Abt(e){return G2e(e)?X2e(e):Qa(e)?K2e(e):$o(e)?gX(e):ga(e)?Object.keys(e).map(t=>({type:JI,name:t,as:e[t]})):wn("Invalid input")}function Q2e(e){return G2e(e)?X2e(e):Qa(e)?K2e(e):$o(e)?gX(e):ga(e)?G0(e):wn("Invalid input")}function DE(e){return Hu(e).map(Q2e).flat()}function Cbt(e){return Qa(e)?e:G0(e)}function Ibt(e){return fr(e)?e.map(DE):G0(e,{join:!0})}function kbt(e){return fr(e)?e.map((t,n)=>n<2?DE(t):G0(t,{join:!0})):G0(e,{join:!0})}function mce(e){return e&&fi(e.toAST)?e.toAST():e}class J2e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===ew?gbt(a):o===U3?vbt(a):o===pX?_bt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=sz[t.verb],r=(n.schema||[]).map(({name:i})=>mX(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===R1?pce(n,o):s===tw?o.map(a=>pce(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=A2(this[n])}),t}toAST(){const t={type:cbt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=Ebt(this[n],r,i)}),t}}function Or(e,t){return Object.assign((...n)=>new J2e(e,t,n),{schema:t})}const sz={count:Or("count",[{name:"options",type:ec}]),derive:Or("derive",[{name:"values",type:sA},{name:"options",type:ec,props:{before:vg,after:vg}}]),filter:Or("filter",[{name:"criteria",type:sA}]),groupby:Or("groupby",[{name:"keys",type:Qc}]),orderby:Or("orderby",[{name:"keys",type:pX}]),relocate:Or("relocate",[{name:"columns",type:vg},{name:"options",type:ec,props:{before:vg,after:vg}}]),rename:Or("rename",[{name:"columns",type:vg}]),rollup:Or("rollup",[{name:"values",type:sA}]),sample:Or("sample",[{name:"size",type:W2e},{name:"options",type:ec,props:{weight:q2e}}]),select:Or("select",[{name:"columns",type:vg}]),ungroup:Or("ungroup"),unorder:Or("unorder"),reify:Or("reify"),dedupe:Or("dedupe",[{name:"keys",type:Qc,default:[]}]),impute:Or("impute",[{name:"values",type:sA},{name:"options",type:ec,props:{expand:Qc}}]),fold:Or("fold",[{name:"values",type:Qc},{name:"options",type:ec}]),pivot:Or("pivot",[{name:"keys",type:Qc},{name:"values",type:Qc},{name:"options",type:ec}]),spread:Or("spread",[{name:"values",type:Qc},{name:"options",type:ec}]),unroll:Or("unroll",[{name:"values",type:Qc},{name:"options",type:ec,props:{drop:Qc}}]),lookup:Or("lookup",[{name:"table",type:R1},{name:"on",type:ew},{name:"values",type:Qc}]),join:Or("join",[{name:"table",type:R1},{name:"on",type:ew},{name:"values",type:U3},{name:"options",type:ec}]),cross:Or("cross",[{name:"table",type:R1},{name:"values",type:U3},{name:"options",type:ec}]),semijoin:Or("semijoin",[{name:"table",type:R1},{name:"on",type:ew}]),antijoin:Or("antijoin",[{name:"table",type:R1},{name:"on",type:ew}]),concat:Or("concat",[{name:"tables",type:tw}]),union:Or("union",[{name:"tables",type:tw}]),intersect:Or("intersect",[{name:"tables",type:tw}]),except:Or("except",[{name:"tables",type:tw}])};let yX=class Z2e extends pTe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new Z2e(t.map(J2e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return gce(this,"toObject")}toJSON(){return this.toObject()}toAST(){return gce(this,"toAST",{type:ubt})}};function gce(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function Rbt(e,t){return new yX(e._verbs.concat(t),e._params,e._table)}for(const e in sz){const t=sz[e];yX.prototype["__"+e]=function(n,...r){return Rbt(n,t(...r))}}function Zx(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function Nbt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function vX(e,t){const n=Hl();return t.forEach((r,i)=>{const s=$o(r)?r:i;if(s){const o=e.column(i)||wn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function eIe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||wn("relocate requires a before or after option."),i&&s&&wn("relocate accepts only one of the before or after options."),t=Sm(e,t);const o=[...Sm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),vX(e,u)}function ak(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function bX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Pbt(e,t=0,n=e.length){let r=n?e[t++]:or;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function Dbt(e,t=0,n=e.length){let r=n?e[t++]:or;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function xN(e){return g2(e)?e:+e}function Obt(e,t){const n=e.length;if(!n)return or;if((t=+t)<=0||n<2)return xN(e[0]);if(t>=1)return xN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=xN(e[i]);return g2(s)?s:s+(xN(e[i+1])-s)*(r-i)}class $bt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:Pbt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:Dbt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(bX)),Obt(this._sorted,t)}}const z3=(e,t,n)=>Zx(t,"{"+ak(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function Mbt(e,t){const{ops:n,output:r}=Lbt(e,t),i=e[0].fields,s=i.length,o=s===0?_X:s===1?Fbt:s===2?jbt:wn("Unsupported field count: "+s);return new o(i,n,r,t)}function Lbt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=$Te(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class _X extends z1t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new $bt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Fbt extends _X{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=z3(n,s,"add"),this._rem=z3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,_f(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,_f(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class jbt extends _X{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=z3(n,s,"add"),this._rem=z3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,_f(i)&&_f(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,_f(i)&&_f(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Ib(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=eS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function eS(e,t,n){if(!t.length)return n;const r=tIe(t),i=e.groups(),s=i?i.size:1;return n=n||i6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=rIe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=nIe(e,o);o.write(a,n,0)}),n}function tIe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(Mbt(r[i],t));return n}function nIe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function rIe(e,t,n){const{keys:r,size:i}=n,s=i6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function iIe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function sIe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const yce=sIe(bX);function Bbt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?Zx(["w","r","k"],"{"+ak(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=yce.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=yce.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const S=i[E],T=a[E];for(let A=b;A<p.i0;++A)S.rem(T,s[A],e);for(let A=w;A<p.i1;++A)S.add(T,s[A],e);S.write(T,u,l)}return h(p,u,l),u}};return p}const Ubt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),zbt=e=>!!e.peers;function Vbt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=MTe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function Hbt(e,t,n,r={},i){const s=e.data(),o=qbt(i,s),a=o.length,u=Zx(["r","d","op"],"{"+ak(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=Wbt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function qbt(e,t){const n={};return e.forEach(r=>{const i=Ubt(r),s=zbt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});nK(r.name)?a.push(r):u.push(Vbt(r))}),Object.values(n).map(r=>Bbt(t,r.frame,r.peers,r.winOps,tIe(r.aggOps,r.frame[0]!=null?-1:1)))}function Wbt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function Gbt(e){return rK(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function wX(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Hl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=Ybt(r),c=e.isGrouped()?e.groups().size:1,f=eS(e,u,i6(r.length,()=>Array(c)));return l.length?Hbt(e,a,n,f,l):Kbt(e,a,n,f),e.create(o)}function Ybt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(Gbt(s)?n:t).push(s)}return[t,n]}function Kbt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function Xbt(e,t,n={}){const r=wX(e,Gu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:eIe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function Qbt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const SN=2147483648,Jbt=4294967295;class oIe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&SN>>>t}set(t){this._bits[t>>5]|=SN>>>t}clear(t){this._bits[t>>5]&=~(SN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&Jbt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=SN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function Zbt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new oIe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function e_t(e,t){const n=Gu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=wX(e,n,{drop:!0}).column("p");r=s=>i[s]}return Zbt(e,r)}function aIe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Ib(e,r,n),l=Hl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let S=0;S<g;++S)d[S].length=m+E,d[S].fill(f[S].get(w),m,m+E)},b=p?(w,E)=>{for(let S=0;S<E;++S)p[w+S]=S}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((S,T)=>{const A=Hu(w(S,T)),C=Math.min(A.length,s);v(S,C);for(let I=0;I<C;++I)E[m+I]=A[I];b(m,C),m+=C})}else e.scan((w,E)=>{let S=0;const T=u.map(A=>{const C=Hu(A(w,E));return S=Math.min(Math.max(S,C.length),s),C});v(w,S);for(let A=0;A<y;++A){const C=h[A],I=T[A];for(let R=0;R<S;++R)C[m+R]=I[R]}b(m,S),m+=S});return e.create(l.new())}function t_t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Ib(e,r,n);return aIe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function jf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Qa(o)?t.columnName(o):o,$o(o)?i.set(o,Fv(o)):fi(o)?Sm(t,o).forEach(s):ga(o)?KCe(i,o):wn(`Invalid ${e} value: ${o+""}`)};return Hu(n).forEach(s),r.preparse&&r.preparse(i),Gu(i,{table:t,...r})}function n_t(e,t,n){return t_t(e,jf("fold",e,t),n)}function vce(e,t,n,r){const i=n&&n.length;return r_t(i?i_t(e,n,r):e,t,i)}function r_t(e,{names:t,exprs:n,ops:r},i){const s=Ib(e,r,n),o=i?null:Hl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=_f(p)?p:d(h)})}),i?e:e.create(o)}function i_t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=b3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Hl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=b3(o.map((p,m)=>g=>g[m])),h=Zx("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),bce(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else bce(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function bce(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function EX(e,{names:t,exprs:n,ops:r}){const i=Hl(),s=e.groups();return s&&iIe(i,s),s_t(t,n,s,eS(e,r),i),e.create(i.new())}function s_t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function o_t(e,t,n={}){if(t=Gu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:wn(`Invalid impute column ${ph(r)}`)),n.expand){const r={preparse:a_t,aggronly:!0},i=jf("impute",e,n.expand,r),s=EX(e.ungroup(),i);return vce(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return vce(e,t)}function a_t(e){e.forEach((t,n)=>t.field?e.set(n,xTe(t+"")):0)}function u_t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function uIe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function l_t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function c_t(e,t){const n=["i","a","j","b"];return Zx(n,"{"+ak(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function f_t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Hl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=c_t(g,y);if((fr(n)?h_t:d_t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function d_t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function h_t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(S,T,A,C)=>e(A,C,S,T));const w=l_t(v,m,g),E=p.length;for(let S=0;S<E;++S){const T=p[S],A=w.get(d(T,f));if(A){const C=A.length;for(let I=0;I<C;++I){const R=A[I];b(T,f,v[R],m),y[R]=1}h[S]=1}}}function V3(e,t,n){const r=new Map;Hu(n).forEach((s,o)=>{s=Qa(s)?t.columnName(s):s,$o(s)?r.set(o,Fv(s)):fi(s)||ga(s)&&s.expr?r.set(o,s):wn(`Invalid ${e} key value: ${s+""}`)});const i=Gu(r,{table:t,aggregate:!1,window:!1});return b3(i.exprs,!0)}function p_t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function xX(e,t,n){if(n)$o(n)?n=[n,n]:fr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=p_t(e.columnNames(),t.columnNames());r.length||wn("Natural join requires shared column names."),n=[r,r]}return n}function lIe(e,t,n,r){return n.length!==r.length&&wn("Mismatched number of join keys"),[V3("join",e,n),V3("join",t,r)]}const m_t={aggregate:!1,window:!1},g_t={...m_t,index:1};function _ce(e,t,n,r,i={}){n=xX(e,t,n);const s={join:[e,t]};let o;if(fr(n)){const[a,u]=n.map(Hu);o=lIe(e,t,a,u),r||(r=y_t(e,a,u,i))}else o=Gu({on:n},s).exprs[0],r||(r=[NE(),NE()]);return f_t(e,t,o,v_t(e,t,r,s,i&&i.suffix),i)}function y_t(e,t,n,r){const i=[];t.forEach((o,a)=>$o(o)&&o===n[a]?i.push(o):0);const s=QCe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${ph(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,NE()]:[NE(),s]}function v_t(e,t,n,r,i=[]){if(fr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=jf("join",e,n[0],r)),u--&&(o=jf("join",t,n[1],g_t)),u--&&(a=Gu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&wce(s.names,l,i[0]||"_1"),i[1]!==""&&wce(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Gu(n,r)}function wce(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function b_t(e,t,n,r={}){const i=new oIe(e.totalRows());return(fr(n)?__t:w_t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function __t(e,t,n,[r,i]){const s=uIe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function w_t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Ece(e,t,n,r){n=xX(e,t,n);const i=fr(n)?lIe(e,t,...n.map(Hu)):Gu({on:n},{join:[e,t]}).exprs[0];return b_t(e,t,i,r)}function E_t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Hl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(or)));const l=uIe(t,r),c=Zx(["lr","rr","data"],"{"+ak(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Ib(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function x_t(e,t,n,r){return n=xX(e,t,n),E_t(e,t,[V3("lookup",e,n[0]),V3("lookup",t,n[1])],jf("lookup",t,r))}const oz=(e,t)=>e??t;function S_t(e,t,n,r={}){const{keys:i,keyColumn:s}=T_t(e,t,r),o=oz(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>eS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(A_t(n,a,e.groups(),u))}function T_t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=oz(n.sort,!0),s=oz(n.keySeparator,"_"),o=Ib(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=eS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function A_t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Hl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&iIe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function C_t(e,t,n,r){return S_t(e,jf("fold",e,t),jf("fold",e,n,{preparse:I_t,aggronly:!0}),r)}function I_t(e){e.forEach((t,n)=>t.field?e.set(n,_Te(t+"")):0)}function k_t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),vX(e,Sm(e,t,n))}function xce(e,t){return EX(e,Gu(t,{table:e,aggronly:!0,window:!1}))}function R_t(e,t,n,r){return(t?r?P_t:N_t:r?O_t:D_t)(e.length,e,n,r)}function N_t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*Hx()|0];return t}function P_t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=sIe(bX).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*Hx())];return t}function D_t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*Hx();s<e&&(t[s|0]=n[i])}return t}function O_t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(Hx())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function $_t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=Hx()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function M_t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):R_t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&$_t(u),e.reify(u)}function L_t(e,t,n={}){return M_t(e,F_t(e,t),j_t(e,n.weight),n)}const cIe=e=>t=>e.get(t)||0;function F_t(e,t){return Qa(t)?()=>t:cIe(EX(e,Gu({size:t},{table:e,window:!1})).column("size"))}function j_t(e,t){return t==null?null:(t=Qa(t)?e.columnName(t):t,cIe($o(t)?e.column(t):wX(e,Gu({w:t},{table:e}),{drop:!0}).column("w")))}function B_t(e,t){return vX(e,Sm(e,t))}function U_t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Ib(e,r,n),l=Hl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=z_t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function z_t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Hu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(or));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function V_t(e,t,n){return U_t(e,jf("spread",e,t),n)}function H_t(e,t){return e.concat(t).dedupe()}function q_t(e,t,n){return aIe(e,jf("unroll",e,t),n&&n.drop?{...n,drop:jf("unroll",e,n.drop).names}:n)}function W_t(e,t){return e.create({groups:G_t(e,t)})}function G_t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Ib(e,r,n);const o=b3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function Y_t(e,t){return W_t(e,jf("groupby",e,t))}function K_t(e,t){return e.create({order:t})}const X_t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function Q_t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Gu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([v3(p,{index:"a",op:o}),v3(p,{index:"b",op:a})])},window:!1}),l=eS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=X_t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function J_t(e,t){return K_t(e,Z_t(e,t))}function Z_t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(ga(o)&&!fi(o))for(const a in o)i(o[a]);else i(Qa(o)?Fv(s,e.columnName(o)):$o(o)?Fv(s):fi(o)?s:wn(`Invalid orderby field: ${s+""}`))}),Q_t(e,r)}function ewt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Hl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>or};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function twt(e,t){const n=Hl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?rIe(e,t,r):[nIe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function nwt(e){return e.isGrouped()?e.create({groups:null}):e}function rwt(e){return e.isOrdered()?e.create({order:null}):e}const iwt={__antijoin:(e,t,n)=>Ece(e,t,n,{anti:!0}),__count:(e,t={})=>xce(e,{[t.as||"count"]:wTe()}),__cross:(e,t,n,r)=>_ce(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:ewt,__dedupe:Nbt,__derive:Xbt,__except:Qbt,__filter:e_t,__fold:n_t,__impute:o_t,__intersect:u_t,__join:_ce,__lookup:x_t,__pivot:C_t,__relocate:eIe,__rename:k_t,__rollup:xce,__sample:L_t,__select:B_t,__semijoin:Ece,__spread:V_t,__union:H_t,__unroll:q_t,__groupby:Y_t,__orderby:J_t,__ungroup:nwt,__unorder:rwt,__reduce:twt};Object.assign(Rp.prototype,iwt);function swt(e,t){return Rp.from(e,t)}function vj(e){return S6(e,{escape:!0,toString(){wn("Escaped values can not be serialized.")}})}Rp.prototype;function mf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Y0(e){return!!e&&!!e[yi]}function Cm(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===pwt}(e)||Array.isArray(e)||!!e[Rce]||!!(!((t=e.constructor)===null||t===void 0)&&t[Rce])||SX(e)||TX(e))}function jv(e,t,n){n===void 0&&(n=!1),tS(e)===0?(n?Object.keys:Nw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function tS(e){var t=e[yi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:SX(e)?2:TX(e)?3:0}function Rw(e,t){return tS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function owt(e,t){return tS(e)===2?e.get(t):e[t]}function fIe(e,t,n){var r=tS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function dIe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function SX(e){return dwt&&e instanceof Map}function TX(e){return hwt&&e instanceof Set}function _1(e){return e.o||e.t}function AX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=pIe(e);delete t[yi];for(var n=Nw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function CX(e,t){return t===void 0&&(t=!1),IX(e)||Y0(e)||!Cm(e)||(tS(e)>1&&(e.set=e.add=e.clear=e.delete=awt),Object.freeze(e),t&&jv(e,function(n,r){return CX(r,!0)},!0)),e}function awt(){mf(2)}function IX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Zd(e){var t=cz[e];return t||mf(18,e),t}function uwt(e,t){cz[e]||(cz[e]=t)}function az(){return C2}function bj(e,t){t&&(Zd("Patches"),e.u=[],e.s=[],e.v=t)}function H3(e){uz(e),e.p.forEach(lwt),e.p=null}function uz(e){e===C2&&(C2=e.l)}function Sce(e){return C2={p:[],l:C2,h:e,m:!0,_:0}}function lwt(e){var t=e[yi];t.i===0||t.i===1?t.j():t.g=!0}function _j(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Zd("ES5").S(t,e,r),r?(n[yi].P&&(H3(t),mf(4)),Cm(e)&&(e=q3(t,e),t.l||W3(t,e)),t.u&&Zd("Patches").M(n[yi].t,e,t.u,t.s)):e=q3(t,n,[]),H3(t),t.u&&t.v(t.u,t.s),e!==hIe?e:void 0}function q3(e,t,n){if(IX(t))return t;var r=t[yi];if(!r)return jv(t,function(a,u){return Tce(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return W3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=AX(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),jv(s,function(a,u){return Tce(e,r,i,a,u,n,o)}),W3(e,i,!1),n&&e.u&&Zd("Patches").N(r,n,e.u,e.s)}return r.o}function Tce(e,t,n,r,i,s,o){if(Y0(i)){var a=q3(e,i,s&&t&&t.i!==3&&!Rw(t.R,r)?s.concat(r):void 0);if(fIe(n,r,a),!Y0(a))return;e.m=!1}else o&&n.add(i);if(Cm(i)&&!IX(i)){if(!e.h.D&&e._<1)return;q3(e,i),t&&t.A.l||W3(e,i)}}function W3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&CX(t,n)}function wj(e,t){var n=e[yi];return(n?_1(n):e)[t]}function Ace(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function $g(e){e.P||(e.P=!0,e.l&&$g(e.l))}function Ej(e){e.o||(e.o=AX(e.t))}function lz(e,t,n){var r=SX(t)?Zd("MapSet").F(t,n):TX(t)?Zd("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:az(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=I2;o&&(u=[a],l=oA);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Zd("ES5").J(t,n);return(n?n.A:az()).p.push(r),r}function cwt(e){return Y0(e)||mf(22,e),function t(n){if(!Cm(n))return n;var r,i=n[yi],s=tS(n);if(i){if(!i.P&&(i.i<4||!Zd("ES5").K(i)))return i.t;i.I=!0,r=Cce(n,s),i.I=!1}else r=Cce(n,s);return jv(r,function(o,a){i&&owt(i.t,o)===a||fIe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Cce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return AX(e)}function fwt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[yi];return I2.get(u,s)},set:function(u){var l=this[yi];I2.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][yi];if(!a.P)switch(a.i){case 5:r(a)&&$g(a);break;case 4:n(a)&&$g(a)}}}function n(s){for(var o=s.t,a=s.k,u=Nw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==yi){var f=o[c];if(f===void 0&&!Rw(o,c))return!0;var d=a[c],h=d&&d[yi];if(h?h.t!==f:!dIe(d,f))return!0}}var p=!!o[yi];return u.length!==Nw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};uwt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=pIe(f);delete p[yi];for(var m=Nw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:az(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,yi,{value:l,writable:!0}),u},S:function(s,o,a){a?Y0(o)&&o[yi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[yi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)jv(d,function(b){b!==yi&&(f[b]!==void 0||Rw(f,b)?h[b]||u(d[b]):(h[b]=!0,$g(c)))}),jv(f,function(b){d[b]!==void 0||Rw(d,b)||(h[b]=!1,$g(c))});else if(p===5){if(r(c)&&($g(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Ice,C2,kX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",dwt=typeof Map<"u",hwt=typeof Set<"u",kce=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",hIe=kX?Symbol.for("immer-nothing"):((Ice={})["immer-nothing"]=!0,Ice),Rce=kX?Symbol.for("immer-draftable"):"__$immer_draftable",yi=kX?Symbol.for("immer-state"):"__$immer_state",pwt=""+Object.prototype.constructor,Nw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,pIe=Object.getOwnPropertyDescriptors||function(e){var t={};return Nw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},cz={},I2={get:function(e,t){if(t===yi)return e;var n=_1(e);if(!Rw(n,t))return function(i,s,o){var a,u=Ace(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Cm(r)?r:r===wj(e.t,t)?(Ej(e),e.o[t]=lz(e.A.h,r,e)):r},has:function(e,t){return t in _1(e)},ownKeys:function(e){return Reflect.ownKeys(_1(e))},set:function(e,t,n){var r=Ace(_1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=wj(_1(e),t),s=i==null?void 0:i[yi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(dIe(n,i)&&(n!==void 0||Rw(e.t,t)))return!0;Ej(e),$g(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return wj(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Ej(e),$g(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=_1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){mf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){mf(12)}},oA={};jv(I2,function(e,t){oA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),oA.deleteProperty=function(e,t){return oA.set.call(this,e,t,void 0)},oA.set=function(e,t,n){return I2.set.call(this,e[0],t,n,e[0])};var mwt=function(){function e(n){var r=this;this.O=kce,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&mf(6),o!==void 0&&typeof o!="function"&&mf(7),Cm(i)){var c=Sce(r),f=lz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?H3(c):uz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return bj(c,o),_j(m,c)},function(m){throw H3(c),m}):(bj(c,o),_j(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===hIe&&(l=void 0),r.D&&CX(l,!0),o){var h=[],p=[];Zd("Patches").M(i,l,h,p),o(h,p)}return l}mf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Cm(n)||mf(8),Y0(n)&&(n=cwt(n));var r=Sce(this),i=lz(this,n,void 0);return i[yi].C=!0,uz(r),i},t.finishDraft=function(n,r){var i=n&&n[yi],s=i.A;return bj(s,r),_j(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!kce&&mf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Zd("Patches").$;return Y0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Dl=new mwt,gwt=Dl.produce;Dl.produceWithPatches.bind(Dl);Dl.setAutoFreeze.bind(Dl);Dl.setUseProxies.bind(Dl);Dl.applyPatches.bind(Dl);Dl.createDraft.bind(Dl);Dl.finishDraft.bind(Dl);const mIe=gwt;function k2(e){"@babel/helpers - typeof";return k2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k2(e)}function ywt(e,t){if(k2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(k2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vwt(e){var t=ywt(e,"string");return k2(t)=="symbol"?t:t+""}function bwt(e,t,n){return(t=vwt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nce(Object(n),!0).forEach(function(r){bwt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nce(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zo(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Dce=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),xj=function(){return Math.random().toString(36).substring(7).split("").join(".")},G3={INIT:"@@redux/INIT"+xj(),REPLACE:"@@redux/REPLACE"+xj(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+xj()}};function _wt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function gIe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Zo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Zo(1));return n(gIe)(e,t)}if(typeof e!="function")throw new Error(Zo(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Zo(3));return s}function f(m){if(typeof m!="function")throw new Error(Zo(4));if(u)throw new Error(Zo(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Zo(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!_wt(m))throw new Error(Zo(7));if(typeof m.type>"u")throw new Error(Zo(8));if(u)throw new Error(Zo(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(Zo(10));i=m,d({type:G3.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Zo(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Dce]=function(){return this},m}return d({type:G3.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Dce]=p,r}function wwt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:G3.INIT});if(typeof r>"u")throw new Error(Zo(12));if(typeof n(void 0,{type:G3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zo(13))})}function Ewt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{wwt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Zo(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function Y3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function xwt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Zo(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=Y3.apply(void 0,a)(i.dispatch),Pce(Pce({},i),{},{dispatch:s})}}}function yIe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var fz=yIe();fz.withExtraArgument=yIe;var vIe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),uk=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Bv=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Swt=Object.defineProperty,Twt=Object.defineProperties,Awt=Object.getOwnPropertyDescriptors,Oce=Object.getOwnPropertySymbols,Cwt=Object.prototype.hasOwnProperty,Iwt=Object.prototype.propertyIsEnumerable,$ce=function(e,t,n){return t in e?Swt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},m0=function(e,t){for(var n in t||(t={}))Cwt.call(t,n)&&$ce(e,n,t[n]);if(Oce)for(var r=0,i=Oce(t);r<i.length;r++){var n=i[r];Iwt.call(t,n)&&$ce(e,n,t[n])}return e},Sj=function(e,t){return Twt(e,Awt(t))},lk=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},kwt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Y3:Y3.apply(null,arguments)};function bIe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var Rwt=function(e){return e&&typeof e.match=="function"};function eh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return m0(m0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Nwt(e){return bIe(e)&&"type"in e}var Pwt=function(e){vIe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Bv([void 0],n[0].concat(this)))):new(t.bind.apply(t,Bv([void 0],n.concat(this))))},t}(Array),Dwt=function(e){vIe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Bv([void 0],n[0].concat(this)))):new(t.bind.apply(t,Bv([void 0],n.concat(this))))},t}(Array);function dz(e){return Cm(e)?mIe(e,function(){}):e}function Owt(e){return typeof e=="boolean"}function $wt(){return function(t){return Mwt(t)}}function Mwt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new Pwt;return n&&(Owt(n)?r.push(fz):r.push(fz.withExtraArgument(n.extraArgument))),r}var Lwt=!0;function Fwt(e){var t=$wt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(bIe(i))h=Ewt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=xwt.apply(void 0,p),g=Y3;u&&(g=kwt(m0({trace:!Lwt},typeof u=="object"&&u)));var y=new Dwt(m),v=y;Array.isArray(d)?v=Bv([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return gIe(h,c,b)}function _Ie(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function jwt(e){return typeof e=="function"}function Bwt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?_Ie(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(jwt(e))u=function(){return dz(e())};else{var l=dz(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=Bv([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Y0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Cm(p))return mIe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function Uwt(e,t){return e+"/"+t}function zwt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:dz(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=Uwt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?eh(d,p):eh(d)});function u(){var c=typeof e.extraReducers=="function"?_Ie(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=m0(m0({},d),o);return Bwt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var S=E[w];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Vwt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",wIe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Vwt[Math.random()*64|0];return t},Hwt=["name","message","stack","code"],Tj=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Mce=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),qwt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=Hwt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=eh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:Sj(m0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=eh(t+"/pending",function(l,c,f){return{payload:void 0,meta:Sj(m0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=eh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||qwt)(l||"Rejected"),meta:Sj(m0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):wIe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return lk(this,null,function(){var v,b,w,E,S,T,A;return uk(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),Gwt(E)?[4,E]:[3,2];case 1:E=C.sent(),C.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(I,R){return p.signal.addEventListener("abort",function(){return R({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(I,R){return new Tj(I,R)},fulfillWithValue:function(I,R){return new Mce(I,R)}})).then(function(I){if(I instanceof Tj)throw I;return I instanceof Mce?i(I.payload,h,l,I.meta):i(I,h,l)})])];case 3:return w=C.sent(),[3,5];case 4:return T=C.sent(),w=T instanceof Tj?o(null,h,l,T.payload,T.meta):o(T,h,l),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,A||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(Wwt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function Wwt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Gwt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Ywt=function(e,t){return Rwt(e)?e.match(t):e(t)};function Lce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return Ywt(r,n)})}}var RX=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},hz=function(){},EIe=function(e,t){return t===void 0&&(t=hz),e.catch(t),e},xIe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Pw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Kwt="task",SIe="listener",TIe="completed",NX="cancelled",Xwt="task-"+NX,Qwt="task-"+TIe,AIe=SIe+"-"+NX,Jwt=SIe+"-"+TIe,T6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=Kwt+" "+NX+" (reason: "+t+")"}return e}(),Dw=function(e){if(e.aborted)throw new T6(e.reason)};function CIe(e,t){var n=hz;return new Promise(function(r,i){var s=function(){return i(new T6(e.reason))};if(e.aborted){s();return}n=xIe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=hz})}var Zwt=function(e,t){return lk(void 0,null,function(){var n,r;return uk(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof T6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},K3=function(e){return function(t){return EIe(CIe(e,t).then(function(n){return Dw(e),n}))}},IIe=function(e){var t=K3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},eEt=Object.assign,Fce={},ck="listenerMiddleware",tEt=function(e,t){var n=function(r){return xIe(e,function(){return Pw(r,e.reason)})};return function(r,i){RX(r,"taskExecutor");var s=new AbortController;n(s);var o=Zwt(function(){return lk(void 0,null,function(){var a;return uk(this,function(u){switch(u.label){case 0:return Dw(e),Dw(s.signal),[4,r({pause:K3(s.signal),delay:IIe(s.signal),signal:s.signal})];case 1:return a=u.sent(),Dw(s.signal),[2,a]}})})},function(){return Pw(s,Qwt)});return i!=null&&i.autoJoin&&t.push(o),{result:K3(e)(o),cancel:function(){Pw(s,Xwt)}}}},nEt=function(e,t){var n=function(r,i){return lk(void 0,null,function(){var s,o,a,u;return uk(this,function(l){switch(l.label){case 0:Dw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,CIe(t,Promise.race(a))];case 2:return u=l.sent(),Dw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return EIe(n(r,i))}},kIe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=eh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return RX(s,"options.listener"),{predicate:i,type:t,effect:s}},rEt=function(e){var t=kIe(e),n=t.type,r=t.predicate,i=t.effect,s=wIe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},pz=function(e){e.pending.forEach(function(t){Pw(t,AIe)})},iEt=function(e){return function(){e.forEach(pz),e.clear()}},jce=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},sEt=eh(ck+"/add"),oEt=eh(ck+"/removeAll"),aEt=eh(ck+"/remove"),uEt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Bv([ck+"/error"],e))};function lEt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?uEt:i;RX(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&pz(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=rEt(h)),o(p)},l=function(h){var p=kIe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&pz(v)),!!v},c=function(h,p,m,g){return lk(t,null,function(){var y,v,b,w;return uk(this,function(E){switch(E.label){case 0:y=new AbortController,v=nEt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,eEt({},m,{getOriginalState:g,condition:function(S,T){return v(S,T).then(Boolean)},take:v,delay:IIe(y.signal),pause:K3(y.signal),extra:r,signal:y.signal,fork:tEt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,T,A){S!==y&&(Pw(S,AIe),A.delete(S))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof T6||jce(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),Pw(y,Jwt),h.pending.delete(y),[7];case 6:return[2]}})})},f=iEt(n),d=function(h){return function(p){return function(m){if(!Nwt(m))return p(m);if(sEt.match(m))return u(m.payload);if(oEt.match(m)){f();return}if(aEt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Fce)throw new Error(ck+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,S=w;E<S.length;E++){var T=S[E],A=!1;try{A=T.predicate(m,b,g)}catch(C){A=!1,jce(s,C,{raisedBy:"predicate"})}A&&c(T,m,h,y)}}finally{g=Fce}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Bce;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);fwt();function cEt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let TN;const fEt=new Uint8Array(16);function dEt(){if(!TN&&(TN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!TN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return TN(fEt)}const po=[];for(let e=0;e<256;++e)po.push((e+256).toString(16).slice(1));function hEt(e,t=0){return(po[e[t+0]]+po[e[t+1]]+po[e[t+2]]+po[e[t+3]]+"-"+po[e[t+4]]+po[e[t+5]]+"-"+po[e[t+6]]+po[e[t+7]]+"-"+po[e[t+8]]+po[e[t+9]]+"-"+po[e[t+10]]+po[e[t+11]]+po[e[t+12]]+po[e[t+13]]+po[e[t+14]]+po[e[t+15]]).toLowerCase()}const pEt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Uce={randomUUID:pEt};function zce(e,t,n){if(Uce.randomUUID&&!t&&!e)return Uce.randomUUID();e=e||{};const r=e.random||(e.rng||dEt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,hEt(r)}class th{static get(){let t=zce();for(;this.ids.has(t);)t=zce();return this.ids.set(t,!0),t}}th.ids=new Map;function nh(e){return"parent"in e}function mEt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:th.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:th.get(),createdOn:Date.now(),val:r}]:[];return{id:th.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function gEt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:th.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:th.get(),createdOn:Date.now(),val:s}]:[];return{id:th.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Vi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=TEt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Uv(e){return!!e&&!!e[Ol]}function K0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===AEt}(e)||Array.isArray(e)||!!e[rC]||!!(!((t=e.constructor)===null||t===void 0)&&t[rC])||A6(e)||C6(e))}function OE(e,t,n){n===void 0&&(n=!1),X0(e)===0?(n?Object.keys:LX)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function X0(e){var t=e[Ol];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:A6(e)?2:C6(e)?3:0}function R2(e,t){return X0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function QP(e,t){return X0(e)===2?e.get(t):e[t]}function RIe(e,t,n){var r=X0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function yEt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function A6(e){return xEt&&e instanceof Map}function C6(e){return SEt&&e instanceof Set}function w1(e){return e.o||e.t}function PX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=CEt(e);delete t[Ol];for(var n=LX(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function DX(e,t){return t===void 0&&(t=!1),OX(e)||Uv(e)||!K0(e)||(X0(e)>1&&(e.set=e.add=e.clear=e.delete=vEt),Object.freeze(e),t&&OE(e,function(n,r){return DX(r,!0)},!0)),e}function vEt(){Vi(2)}function OX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function rh(e){var t=vz[e];return t||Vi(18,e),t}function bEt(e,t){vz[e]||(vz[e]=t)}function Vce(){return{}.NODE_ENV==="production"||$E||Vi(0),$E}function Aj(e,t){t&&(rh("Patches"),e.u=[],e.s=[],e.v=t)}function X3(e){mz(e),e.p.forEach(_Et),e.p=null}function mz(e){e===$E&&($E=e.l)}function Hce(e){return $E={p:[],l:$E,h:e,m:!0,_:0}}function _Et(e){var t=e[Ol];t.i===0||t.i===1?t.j():t.O=!0}function Cj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||rh("ES5").S(t,e,r),r?(n[Ol].P&&(X3(t),Vi(4)),K0(e)&&(e=Q3(t,e),t.l||J3(t,e)),t.u&&rh("Patches").M(n[Ol].t,e,t.u,t.s)):e=Q3(t,n,[]),X3(t),t.u&&t.v(t.u,t.s),e!==MX?e:void 0}function Q3(e,t,n){if(OX(t))return t;var r=t[Ol];if(!r)return OE(t,function(s,o){return qce(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return J3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=PX(r.k):r.o;OE(r.i===3?new Set(i):i,function(s,o){return qce(e,r,i,s,o,n)}),J3(e,i,!1),n&&e.u&&rh("Patches").R(r,n,e.u,e.s)}return r.o}function qce(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Vi(5),Uv(i)){var o=Q3(e,i,s&&t&&t.i!==3&&!R2(t.D,r)?s.concat(r):void 0);if(RIe(n,r,o),!Uv(o))return;e.m=!1}if(K0(i)&&!OX(i)){if(!e.h.F&&e._<1)return;Q3(e,i),t&&t.A.l||J3(e,i)}}function J3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&DX(t,n)}function Ij(e,t){var n=e[Ol];return(n?w1(n):e)[t]}function Wce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function gz(e){e.P||(e.P=!0,e.l&&gz(e.l))}function kj(e){e.o||(e.o=PX(e.t))}function yz(e,t,n){var r=A6(t)?rh("MapSet").N(t,n):C6(t)?rh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Vce(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=bz;o&&(u=[a],l=aA);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):rh("ES5").J(t,n);return(n?n.A:Vce()).p.push(r),r}function wEt(e){return Uv(e)||Vi(22,e),function t(n){if(!K0(n))return n;var r,i=n[Ol],s=X0(n);if(i){if(!i.P&&(i.i<4||!rh("ES5").K(i)))return i.t;i.I=!0,r=Gce(n,s),i.I=!1}else r=Gce(n,s);return OE(r,function(o,a){i&&QP(i.t,o)===a||RIe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Gce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return PX(e)}function EEt(){function e(r){if(!K0(r))return r;if(Array.isArray(r))return r.map(e);if(A6(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(C6(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return R2(r,rC)&&(i[rC]=r[rC]),i}function t(r){return Uv(r)?e(r):r}var n="add";bEt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=X0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Vi(24),typeof u=="function"&&f==="prototype"&&Vi(24),typeof(u=QP(u,f))!="object"&&Vi(15,o.join("/"))}var d=X0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Vi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Vi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;OE(a.D,function(h,p){var m=QP(f,h),g=QP(d,h),y=p?R2(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===MX?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Yce,$E,$X=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",xEt=typeof Map<"u",SEt=typeof Set<"u",Kce=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",MX=$X?Symbol.for("immer-nothing"):((Yce={})["immer-nothing"]=!0,Yce),rC=$X?Symbol.for("immer-draftable"):"__$immer_draftable",Ol=$X?Symbol.for("immer-state"):"__$immer_state",TEt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},AEt=""+Object.prototype.constructor,LX=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,CEt=Object.getOwnPropertyDescriptors||function(e){var t={};return LX(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},vz={},bz={get:function(e,t){if(t===Ol)return e;var n=w1(e);if(!R2(n,t))return function(i,s,o){var a,u=Wce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!K0(r)?r:r===Ij(e.t,t)?(kj(e),e.o[t]=yz(e.A.h,r,e)):r},has:function(e,t){return t in w1(e)},ownKeys:function(e){return Reflect.ownKeys(w1(e))},set:function(e,t,n){var r=Wce(w1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Ij(w1(e),t),s=i==null?void 0:i[Ol];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(yEt(n,i)&&(n!==void 0||R2(e.t,t)))return!0;kj(e),gz(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Ij(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,kj(e),gz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=w1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Vi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Vi(12)}},aA={};OE(bz,function(e,t){aA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),aA.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Vi(13),aA.set.call(this,e,t,void 0)},aA.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Vi(14),bz.set.call(this,e[0],t,n,e[0])};var IEt=function(){function e(n){var r=this;this.g=Kce,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Vi(6),o!==void 0&&typeof o!="function"&&Vi(7),K0(i)){var c=Hce(r),f=yz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?X3(c):mz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Aj(c,o),Cj(m,c)},function(m){throw X3(c),m}):(Aj(c,o),Cj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===MX&&(l=void 0),r.F&&DX(l,!0),o){var h=[],p=[];rh("Patches").M(i,l,h,p),o(h,p)}return l}Vi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){K0(n)||Vi(8),Uv(n)&&(n=wEt(n));var r=Hce(this),i=yz(this,n,void 0);return i[Ol].C=!0,mz(r),i},t.finishDraft=function(n,r){var i=n&&n[Ol];({}).NODE_ENV!=="production"&&(i&&i.C||Vi(9),i.I&&Vi(10));var s=i.A;return Aj(s,r),Cj(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Kce&&Vi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=rh("Patches").$;return Uv(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),$l=new IEt,kEt=$l.produce;$l.produceWithPatches.bind($l);$l.setAutoFreeze.bind($l);$l.setUseProxies.bind($l);$l.applyPatches.bind($l);$l.createDraft.bind($l);$l.finishDraft.bind($l);function REt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=mEt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return zwt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:th.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:th.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function NEt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=REt(e),s=lEt();s.startListening({matcher:Lce(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Lce(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=Fwt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:th.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var PEt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),DEt=Object.prototype.hasOwnProperty;function _z(e,t){return DEt.call(e,t)}function wz(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)_z(e,i)&&r.push(i);return r}function Ru(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Ez(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function E1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function NIe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function xz(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(xz(e[t]))return!0}else if(typeof e=="object"){for(var r=wz(e),i=r.length,s=0;s<i;s++)if(xz(e[r[s]]))return!0}}return!1}function Xce(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var PIe=function(e){PEt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Xce(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Xce(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Fi=PIe,OEt=Ru,nw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Z3(n,this.path);r&&(r=Ru(r));var i=dv(n,{op:"remove",path:this.from}).removed;return dv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Z3(n,this.from);return dv(n,{op:"add",path:this.path,value:Ru(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:N2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},$Et={add:function(e,t,n){return Ez(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:nw.move,copy:nw.copy,test:nw.test,_get:nw._get};function Z3(e,t){if(t=="")return e;var n={op:"_get",path:t};return dv(e,n),n.value}function dv(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):e$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=Z3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=N2(e,t.value),o.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Fi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ru(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=e$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=NIe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Ez(h))throw new Fi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Ez(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Fi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=$Et[t.op].call(t,l,h,e);if(o.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=nw[t.op].call(t,l,h,e);if(o.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Fi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function I6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Fi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ru(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=dv(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function MEt(e,t,n){var r=dv(e,t);if(r.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function e$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Fi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(nw[e.op]){if(typeof e.path!="string")throw new Fi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Fi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Fi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Fi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&xz(e.value))throw new Fi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Fi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Fi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=DIe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Fi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Fi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function DIe(e,t,n){try{if(!Array.isArray(e))throw new Fi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)I6(Ru(t),Ru(e),n||!0);else{n=n||e$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Fi)return i;throw i}}function N2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!N2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!N2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const LEt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Fi,_areEquals:N2,applyOperation:dv,applyPatch:I6,applyReducer:MEt,deepClone:OEt,getValueByPointer:Z3,validate:DIe,validator:e$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var FX=new WeakMap,FEt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),jEt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function BEt(e){return FX.get(e)}function UEt(e,t){return e.observers.get(t)}function zEt(e,t){e.observers.delete(t.callback)}function VEt(e,t){t.unobserve()}function HEt(e,t){var n=[],r,i=BEt(e);if(!i)i=new FEt(e),FX.set(e,i);else{var s=UEt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ru(e),t){r.callback=t,r.next=null;var o=function(){Sz(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Sz(r),clearTimeout(r.next),zEt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new jEt(t,r)),r}function Sz(e,t){t===void 0&&(t=!1);var n=FX.get(e.object);jX(n.value,e.object,e.patches,"",t),e.patches.length&&I6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function jX(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=wz(t),o=wz(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(_z(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?jX(c,f,n,r+"/"+E1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+E1(l),value:Ru(c)}),n.push({op:"replace",path:r+"/"+E1(l),value:Ru(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+E1(l),value:Ru(c)}),n.push({op:"remove",path:r+"/"+E1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!_z(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+E1(l),value:Ru(t[l])})}}}function OIe(e,t,n){n===void 0&&(n=!1);var r=[];return jX(e,t,r,"",n),r}const qEt=Object.freeze(Object.defineProperty({__proto__:null,compare:OIe,generate:Sz,observe:HEt,unobserve:VEt},Symbol.toStringTag,{value:"Module"}));Object.assign({},LEt,qEt,{JsonPatchError:PIe,deepClone:Ru,escapePathComponent:E1,unescapePathComponent:NIe});var uA=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(uA||{});function JP(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=MIe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=JP(i,t);return I6(a,Ru(o),!0,!1).newDocument}function WEt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function $Ie({registry:e,initialState:t}){let n=!1;const r=cEt(),i=NEt(t);function s(c){return i.backend.nodes[c]}r.listen(uA.TRAVERSAL_START,()=>{n=!0}),r.listen(uA.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return JP(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=JP(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=OIe(y,f);if(WEt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=gEt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=JP(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(uA.TRAVERSAL_START);const f=MIe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);YEt(p,m)?nh(p)&&d.push(...p.sideEffects.undo):nh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(uA.TRAVERSAL_END)},undo(){const{current:c}=i;return nh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return LIe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function GEt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;nh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)nh(r)&&(r=n[r.parent]),nh(i)&&(i=n[i.parent]);return r.id}function MIe(e,t,n){const r=GEt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),nh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),nh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function YEt(e,t){if(nh(e)&&e.parent===t.id)return!0;if(nh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function LIe(e,t){return{...e,children:e.children.map(n=>LIe(t[n],t)),name:`${e.label}`}}EEt();function KEt(e){return e.length===2?kEt(e):e}class k6{static create(){return new k6}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:KEt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),eh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var XEt="Expected a function",Qce=NaN,QEt="[object Symbol]",JEt=/^\s+|\s+$/g,ZEt=/^[-+]0x[0-9a-f]+$/i,ext=/^0b[01]+$/i,txt=/^0o[0-7]+$/i,nxt=parseInt,rxt=typeof Js=="object"&&Js&&Js.Object===Object&&Js,ixt=typeof self=="object"&&self&&self.Object===Object&&self,sxt=rxt||ixt||Function("return this")(),oxt=Object.prototype,axt=oxt.toString,uxt=Math.max,lxt=Math.min,Rj=function(){return sxt.Date.now()};function cxt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(XEt);t=Jce(t)||0,Tz(n)&&(c=!!n.leading,f="maxWait"in n,s=f?uxt(Jce(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var T=r,A=i;return r=i=void 0,l=S,o=e.apply(A,T),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var T=S-u,A=S-l,C=t-T;return f?lxt(C,s-A):C}function g(S){var T=S-u,A=S-l;return u===void 0||T>=t||T<0||f&&A>=s}function y(){var S=Rj();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(Rj())}function E(){var S=Rj(),T=g(S);if(r=arguments,i=this,u=S,T){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function Tz(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function fxt(e){return!!e&&typeof e=="object"}function dxt(e){return typeof e=="symbol"||fxt(e)&&axt.call(e)==QEt}function Jce(e){if(typeof e=="number")return e;if(dxt(e))return Qce;if(Tz(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Tz(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(JEt,"");var n=ext.test(e);return n||txt.test(e)?nxt(e.slice(2),n?2:8):ZEt.test(e)?Qce:+e}var hxt=cxt;const pd=Ul(hxt);function FIe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>jx(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(dm,{children:_.jsx(Os,{gap:3,children:_.jsx(ot,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const pxt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:FIe},Symbol.toStringTag,{value:"Module"})),Nj=15;function jIe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=ps("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<Nj&&Math.abs(t(g[r.y])-p[1])<Nj);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:Nj,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const mxt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:jIe},Symbol.toStringTag,{value:"Module"})),hi={top:15,left:100,right:15,bottom:70};function Az({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=gw(),[c]=gw(),[f]=gw(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-hi.left-hi.right,[l]),m=N.useMemo(()=>u-hi.top-hi.bottom,[u]),g=N.useMemo(()=>{const I=Array.from(new Set(s.map(R=>R[i.category])));return Ux(QSe).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=N.useMemo(()=>{const I=s.map(L=>+L[i.x]).filter(L=>L!==null),[R,M]=Lae(I),P=s.map(L=>+L[i.y]).filter(L=>L!==null),[O,F]=Lae(P);return{xMin:R,xMax:M,yMin:O,yMax:F}},[s,i.x,i.y]),E=N.useMemo(()=>{const I=b-y;return p<=0?null:i.dataType==="date"?qSe([hi.left,p+hi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):bm([hi.left,p+hi.left]).domain([y-I/10,b+I/10]).nice()},[i.dataType,p,b,y]),S=N.useMemo(()=>{const I=w-v;return m<=0?null:bm([m+hi.top,hi.top]).domain([v-I/10,w+I/10]).nice()},[m,w,v]),T=N.useMemo(()=>{if(!E||!S)return()=>null;if(r==="Axis Selection"){const I=llt().extent([[hi.left,hi.top+m-5],[hi.left+p,hi.top+m+5]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[M.selection[0],null],[M.selection[1],null]],E,S,M.mode)}),R=clt().extent([[hi.left-5,hi.top],[hi.left+5,hi.top+m]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[null,M.selection[0]],[null,M.selection[1]]],E,S,M.mode)});return c.current&&f.current&&(ps(f.current).call(R),ps(c.current).call(I),t.hasBrush||(ps(f.current).call(R.move,[S(w),S(v)]),ps(c.current).call(I.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(w)],[E(new Date("2015-12-31")),S(v)]],E,S,"drag"))),()=>{ps(f.current).call(R.move,[S(w),S(v)]),ps(c.current).call(I.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(w)],[E(new Date("2015-12-31")),S(v)]],E,S,"clear")}}if(r==="Rectangular Selection"){const I=flt().extent([[hi.left,hi.top],[hi.left+p,hi.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],E,S,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(ps(a.current).call(I.move,null),e(null))});return ps(a.current).call(I),()=>{ps(a.current).call(I.move,null),n([[null,null],[null,null]],E,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),S(w)],[E(b),S(v)]],E,S,null),()=>n([[E(y),S(w)],[E(b),S(v)]],E,S,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),S(w)],[E(b),S(v)]],E,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,w,v,S]),A=N.useMemo(()=>o.length===0?null:new Set(o),[o]),C=N.useMemo(()=>!E||!S?null:s.map((I,R)=>{if(I[i.x]===null||I[i.y]===null)return null;const M=i.dataType==="date"?E(new Date(I[i.x])):E(I[i.x]);return _.jsx("circle",{opacity:A&&!A.has(I[i.ids])?.3:1,r:3,fill:A&&!A.has(I[i.ids])?"lightgray":g(I[i.category]),cx:M,cy:S(I[i.y])},R)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,S]);return N.useEffect(()=>{r==="Axis Selection"&&tat(".handle").style("fill","darkgrey")},[t,r]),_.jsxs($p,{children:[_.jsxs(Os,{children:[_.jsx(Rn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T==null||T()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(bG,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(Os,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&S?_.jsxs("g",{children:[_.jsx(FIe,{yScale:S,label:i.y,horizontalPosition:hi.left,xRange:E.range()}),_.jsx(ZY,{xScale:E,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+hi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:E(I)}))})]}):null,C,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&S&&r==="Paintbrush Selection"?_.jsx(jIe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:S}):null]}),r==="Slider Selection"&&E&&S?_.jsxs($p,{style:{flexGrow:1},gap:50,children:[_.jsxs($p,{gap:0,children:[_.jsx(ot,{children:i.x}),_.jsx(gO,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[E(I[0]),t.y1],[E(I[1]),t.y2]],E,S,"drag")},style:{width:"300px"},marks:E.ticks(5).map(I=>({value:I,label:I})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs($p,{gap:0,children:[_.jsx(ot,{children:i.y}),_.jsx(gO,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:I=>{n([[t.x1,S(I[1])],[t.x2,S(I[0])]],E,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(I=>({value:I,label:I})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const gxt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:Az,default:Az},Symbol.toStringTag,{value:"Module"}));function Zce({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=N.useState(null);N.useEffect(()=>{zlt(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=N.useMemo(()=>o?swt(o):null,[o]),{actions:l,trrack:c}=N.useMemo(()=>{const g=k6.create(),y=g.register("brush",(S,T)=>(S.all={brush:T},S)),v=g.register("brushMove",(S,T)=>(S.all={brush:T},S)),b=g.register("brushResize",(S,T)=>(S.all={brush:T},S)),w=g.register("brushClear",(S,T)=>(S.all={brush:T},S)),E=$Ie({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:w},trrack:E}},[]),f=N.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=N.useMemo(()=>pd(f,100,{maxWait:100}),[f]),h=N.useCallback((g,y,v,b,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),S=y.invert(g[1][0]||i.x2),T=v.invert(g[1][1]||i.y2),A=v.invert(g[0][1]||i.y1);let C=null;if(b==="clear")C=u;else if(w){const R=new Set(w);C=u.filter(vj(M=>R.has(M[e.ids])))}else e.brushType==="Axis Selection"?C=u.filter(vj(R=>new Date(R[e.x])>=new Date(E)&&new Date(R[e.x])<=new Date(S)&&R[e.y]>=T&&R[e.y]<=A)):C=u.filter(vj(R=>R[e.x]>=E&&R[e.x]<=S&&R[e.y]>=T&&R[e.y]<=A));const I={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?C==null?void 0:C.array("id"):[]};s(I),b==="drag"||b==="handle"?d(b,I):b==="clear"&&c.apply("Clear Brush",l.clearBrush(I)),r(C),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=N.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=N.useCallback(g=>{r(g)},[]);return o?_.jsxs($p,{gap:"xs",children:[_.jsx(Az,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(L7,{data:o,parameters:e,barsTable:p})]}):_.jsx(jm,{})}const yxt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Zce,default:Zce},Symbol.toStringTag,{value:"Module"})),vxt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),efe=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},nS=e=>{const t=N.useRef(null),n=efe(e),[r,i]=N.useState(0),[s,o]=N.useState(0);N.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=efe({...n,width:n.width||r,height:n.height||s});return[t,a]},bxt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:nS},Symbol.toStringTag,{value:"Module"}));function BIe({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const _xt=Object.freeze(Object.defineProperty({__proto__:null,Bars:BIe},Symbol.toStringTag,{value:"Module"}));function BX({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=bm().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const wxt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:BX},Symbol.toStringTag,{value:"Module"}));function UIe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=KI().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const Ext=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:UIe},Symbol.toStringTag,{value:"Module"})),xxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function Sxt({parameters:e}){const[n,r]=nS(xxt),i=KI().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=bm().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(UIe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(BX,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(BIe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const Txt=Object.freeze(Object.defineProperty({__proto__:null,default:Sxt},Symbol.toStringTag,{value:"Module"}));function zIe({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const Axt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:zIe},Symbol.toStringTag,{value:"Module"}));function UX({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const Cxt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:UX},Symbol.toStringTag,{value:"Module"})),Ixt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},kxt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=ESe().size([t-10,n-10]).padding(1.5),o=HL(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},Rxt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function Nxt({parameters:e}){const[t,n]=nS(Ixt),r=kxt(e,n.width,n.height),i=Rxt(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(zIe,{data:r}),_.jsx(UX,{positions:i})]})})})}const Pxt=Object.freeze(Object.defineProperty({__proto__:null,default:Nxt},Symbol.toStringTag,{value:"Module"}));function VIe({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const Dxt=Object.freeze(Object.defineProperty({__proto__:null,Slices:VIe},Symbol.toStringTag,{value:"Module"}));function HIe({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const Oxt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:HIe},Symbol.toStringTag,{value:"Module"})),$xt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},Mxt=Npt().value(e=>e.value),fT=150;function Lxt({parameters:e}){const[t,n]=nS($xt),r=Mxt(e.data),i=r.map(o=>M7().innerRadius(0).outerRadius(fT).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>M7().outerRadius(fT+10).innerRadius(fT+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+fT,n.marginTop+fT].join(",")})`,children:[_.jsx(VIe,{arcs:i}),_.jsx(HIe,{positions:s})]})})})}const Fxt=Object.freeze(Object.defineProperty({__proto__:null,default:Lxt},Symbol.toStringTag,{value:"Module"}));function qIe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=bm().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const jxt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:qIe},Symbol.toStringTag,{value:"Module"}));function WIe({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const Bxt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:WIe},Symbol.toStringTag,{value:"Module"})),Uxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function zxt({parameters:e}){const[n,r]=nS(Uxt),i=KI().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=bm().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,w)=>Number(b)+Number(w))/100,y={};p.forEach((b,w)=>{y[String.fromCharCode(w+65)]=b/g});const v=[y];return Zpt().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(qIe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(BX,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(WIe,{data:c,barWidth:f,yScale:s}),_.jsx(UX,{positions:d})]})]})})})}const Vxt=Object.freeze(Object.defineProperty({__proto__:null,default:zxt},Symbol.toStringTag,{value:"Module"})),Hxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function qxt({parameters:e,setAnswer:t}){const[n,r]=nS(Hxt),[i,s]=N.useState(100),[o,a]=N.useState(100),[u,l]=N.useState(300),{taskid:c}=e,{actions:f,trrack:d}=N.useMemo(()=>{const p=k6.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=$Ie({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=N.useCallback(p=>{const m=ps("#movingCircle"),g=ps("#clickAccuracySvg"),y=JU(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return N.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;ps(n.current).select("circle").transition().duration(y).ease(Kut).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(Ee,{children:["Adjust speed (px/s):",_.jsx(mL,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const Wxt=Object.freeze(Object.defineProperty({__proto__:null,default:qxt},Symbol.toStringTag,{value:"Module"}));function tfe({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function Gxt({parameters:e,setAnswer:t}){const n=qm(),[r,i]=N.useState(""),{goToNextStep:s,isNextDisabled:o}=mEe(),a=N.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=N.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=N.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=N.useCallback(()=>{o||s()},[o,s]);N.useEffect(()=>{const h=mBe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(Ba,{children:[_.jsxs(Ba.Col,{span:2,children:[_.jsx(tfe,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(Rn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(loe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(Ba.Col,{span:2,children:[_.jsx(tfe,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(Rn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(loe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const Yxt=Object.freeze(Object.defineProperty({__proto__:null,default:Gxt},Symbol.toStringTag,{value:"Module"})),nfe=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":nmt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":yxt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":mxt,"../public/demo-brush-interactions/assets/Scatter.tsx":gxt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":emt,"../public/demo-brush-interactions/assets/YAxis.tsx":pxt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":tmt,"../public/demo-brush-interactions/assets/types.ts":vxt,"../public/demo-cleveland/assets/BarChart.tsx":Txt,"../public/demo-cleveland/assets/BubbleChart.tsx":Pxt,"../public/demo-cleveland/assets/PieChart.tsx":Fxt,"../public/demo-cleveland/assets/StackedBarChart.tsx":Vxt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":_xt,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":Axt,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":Cxt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":jxt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":wxt,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":Ext,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":Dxt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":Oxt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":Bxt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":bxt,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":Wxt,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":Yxt});function Kxt({currentConfig:e}){const t=Hm(),n=qm(),r=`../public/${e.path}`,i=r in nfe?nfe[r].default:null,s=Lh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Mh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(Rv,{path:e.path})})}function Xxt({currentConfig:e}){const[t,n]=N.useState(""),[r,i]=N.useState(!0);return N.useEffect(()=>{async function s(){const o=await fY(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Ga,{text:t}):_.jsx(Rv,{path:e.path})}const Qxt={},Jxt=Object.freeze(Object.defineProperty({__proto__:null,default:Qxt},Symbol.toStringTag,{value:"Module"})),Zxt=P5e(Jxt);var eSt=Zxt;function tSt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function nSt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function rSt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function iSt(e){return e.__COMMENTS__}function sSt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var R6={EOL:eSt.EOL||`
`,tryParseNumber:tSt,createComment:nSt,removeComment:rSt,getComment:iSt,forceComment:sSt},oSt="3.2.1";function aSt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return rfe}else if(e.length===0)return rfe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return lSt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),uSt.bind(null,n)}function uSt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function rfe(){}function lSt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function GIe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}GIe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function YIe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}YIe.description="parse hexadecimal numbers prefixed with 0x";function KIe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}KIe.description="support ISO dates";var zX={loadDsf:aSt,std:{math:GIe,hex:YIe,date:KIe}},cSt=function(e,t){var n=R6,r=zX,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(O){return O==="{"||O==="}"||O==="["||O==="]"||O===","||O===":"}function d(O){var F,L=0,B=1;for(F=s-1;F>0&&i[F]!==`
`;F--,L++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error(O+" at line "+B+","+L+" >>>"+i.substr(s-L,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(O){return i.charAt(s+O)}function m(O){for(var F="",L=o;h();){if(o===L)return h(),O&&L==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var H=o.charCodeAt(0),D;o>="0"&&o<="9"?D=H-48:o>="a"&&o<="f"?D=H-97+10:o>="A"&&o<="F"?D=H-65+10:d("Bad \\u char "+o),B=B*16+D}F+=String.fromCharCode(B)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var O="",F=0,L=0;;){var B=p(-L-5);if(!B||B===`
`)break;L++}function U(){for(var H=L;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return O.slice(-1)===`
`&&(O=O.slice(0,-1)),O;continue}else for(;F>0;)O+="'",F--;o===`
`?(O+=`
`,h(),U()):(o!=="\r"&&(O+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var O="",F=s,L=-1;;){if(o===":")return O?L>=0&&L!==O.length&&(s=F+L,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),O;o<=" "?o?L<0&&(L=O.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):O+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var O=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var L=O[0];switch(L){case"f":if(O.trim()==="false")return!1;break;case"n":if(O.trim()==="null")return null;break;case"t":if(O.trim()==="true")return!0;break;default:if(L==="-"||L>="0"&&L<="9"){var B=n.tryParseNumber(O);if(B!==void 0)return B}}if(F){O=O.trim();var U=l(O);return U!==void 0?U:O}}O+=o}}function w(O,F){var L;for(O--,L=s-2;L>O&&i[L]<=" "&&i[L]!==`
`;L--);i[L]===`
`&&L--,i[L]==="\r"&&L--;var B=i.substr(O,L-O+1);for(L=0;L<B.length;L++)if(B[L]>" "){var U=B.indexOf(`
`);if(U>=0){var H=[B.substr(0,U),B.substr(U+1)];return F&&H[0].trim().length===0&&H.shift(),H}else return[B]}return[]}function E(O){function F(B,U){var H,D,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(H=0,z=B.length;H<z;H++)W=F(B[H],U)||W;else for(D in B)Object.prototype.hasOwnProperty.call(B,D)&&(W=F(B[D],U)||W)}return W}function L(B){var U=F(O,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return L("}")||L("]")}function S(){var O=[],F,L,B;try{if(u&&(F=n.createComment(O,{a:[]})),h(),L=s,v(),F&&(B=w(L,!0).join(`
`)),o==="]")return h(),F&&(F.e=[B]),O;for(;o;){if(O.push(A()),L=s,v(),o===","&&(h(),L=s,v()),F){var U=w(L);F.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),O;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||E(O),H}}function T(O){var F="",L={},B,U,H;try{if(u&&(B=n.createComment(L,{c:{},o:[]})),O?U=1:(h(),U=s),v(),B&&(H=w(U,!0).join(`
`)),o==="}"&&!O)return B&&(B.e=[H]),h(),L;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),L[F]=A(),U=s,v(),o===","&&(h(),U=s,v()),B){var D=w(U);B.c[F]=[H||"",D[0]||""],H=D[1],B.o.push(F)}if(o==="}"&&!O)return h(),B&&(B.c[F][1]+=H||""),L;v()}if(O)return L;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(L),z}}function A(){switch(v(),o){case"{":return T();case"[":return S();case"'":case'"':return m(!0);default:return b()}}function C(O,F){var L=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),U=w(L).join(`
`);if(U||B){var H=n.createComment(O,n.getComment(O));H.r=[B,U]}}return O}function I(){v();var O=u?w(1):null;switch(o){case"{":return C(T(),O);case"[":return C(S(),O);default:return C(A(),O)}}function R(){v();var O=u?w(1):null;switch(o){case"{":return C(T(),O);case"[":return C(S(),O)}try{return C(T(!0),O)}catch(F){c();try{return C(A(),O)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var M=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,M=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf(M,"parse"),i=e,c(),P?R():I()},fSt=function(e,t){var n=R6,r=zX,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="-­؀-؄܏឴឵‌-‏\u2028- ⁠-⁯\uFEFF￰-￿",S=new RegExp('[\\\\\\"\0-'+E+"]","g"),T=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),C=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),I={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},R=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,M="",P=0;function O(W,j){return P+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(S,function(j){var q=I[j];return typeof q=="string"?O(g.esc,q):O(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function L(W,j,q,G){return W?(T.lastIndex=0,C.lastIndex=0,c||q||T.test(W)||n.tryParseNumber(W,!0)!==void 0||C.test(W)?(S.lastIndex=0,A.lastIndex=0,S.test(W)?!A.test(W)&&!G&&d?B(W,j):O(g.qstr,F(W)):O(g.qstr,W)):O(g.str,W)):O(g.qstr,"")}function B(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return O(g.mstr,G[0]);var ne=s+j+g.mstr[0];for(q=0;q<G.length;q++)ne+=s,G[q]&&(ne+=j+G[q]);return ne+s+j+g.mstr[1]}function U(W){return W?l||R.test(W)?(S.lastIndex=0,O(g.qkey,S.test(W)?F(W):W)):O(g.key,W):'""'}function H(W,j,q,G){function ne(hn){return hn&&hn[hn[0]==="\r"?1:0]===`
`}function ce(hn){return hn&&!ne(hn)}function de(hn,Sn,tr){if(!hn)return"";hn=n.forceComment(hn);var nr,Lo=hn.length;for(nr=0;nr<Lo&&hn[nr]<=" ";nr++);return tr&&nr>0&&(hn=hn.substr(nr)),nr<Lo?Sn+O(g.rem,hn):hn}var he=w(W);if(he!==void 0)return O(g.dsf,he);switch(typeof W){case"string":return L(W,M,j,G);case"number":return isFinite(W)?O(g.num,String(W)):O(g.lit,"null");case"boolean":return O(g.lit,String(W));case"object":if(!W)return O(g.lit,"null");var ye;a&&(ye=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",ve=M;M+=o;var Ke=s+ve,Ue=s+M,gt=q||u?"":Ke,rt=[],be,ke=f?[]:null,ze=c,ct=d,Dt=h?"":g.com[0],We=0,me,dt,yt,pe,Ce,He,ut,_t,Mn;if(Ie){for(me=0,dt=W.length;me<dt;me++){if(be=me<dt-1,ye?(He=ye.a[me]||[],ut=ce(He[1]),rt.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):rt.push(Ue),P=0,pe=W[me],rt.push(H(pe,ye?ut:!1,!0)+(be?h:"")),ke){switch(typeof pe){case"string":P=0,c=!0,d=0,ke.push(H(pe,!1,!0)+(be?g.com[0]:"")),c=ze,d=ct;break;case"object":if(pe){ke=null;break}default:ke.push(rt[rt.length-1]+(be?Dt:""));break}be&&(P+=g.com[0].length-g.com[2]),We+=P}ye&&He[1]&&rt.push(de(He[1],ut?" ":`
`,ut))}dt===0?ye&&ye.e&&rt.push(de(ye.e[0],`
`)+Ke):rt.push(Ke),rt.length===0?_t=O(g.arr,""):(_t=gt+O(g.arr,rt.join("")),ke&&(Mn=ke.join(" "),Mn.length-We<=f&&(_t=O(g.arr,Mn))))}else{var Sr=ye?ye.o.slice():[],Ln=[];for(yt in W)Object.prototype.hasOwnProperty.call(W,yt)&&Sr.indexOf(yt)<0&&Ln.push(yt);m&&Ln.sort();var lr=Sr.concat(Ln);for(me=0,dt=lr.length;me<dt;me++)if(be=me<dt-1,yt=lr[me],ye?(He=ye.c[yt]||[],ut=ce(He[1]),rt.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):rt.push(Ue),P=0,pe=W[yt],Ce=H(pe,ye&&ut),rt.push(U(yt)+g.col[0]+(ne(Ce)?"":" ")+Ce+(be?h:"")),ye&&He[1]&&rt.push(de(He[1],ut?" ":`
`,ut)),ke){switch(typeof pe){case"string":P=0,c=!0,d=0,Ce=H(pe,!1),c=ze,d=ct,ke.push(U(yt)+g.col[0]+" "+Ce+(be?g.com[0]:""));break;case"object":if(pe){ke=null;break}default:ke.push(rt[rt.length-1]+(be?Dt:""));break}P+=g.col[0].length-g.col[2],be&&(P+=g.com[0].length-g.com[2]),We+=P}dt===0?ye&&ye.e&&rt.push(de(ye.e[0],`
`)+Ke):rt.push(Ke),rt.length===0?_t=O(g.obj,""):(_t=gt+O(g.obj,rt.join("")),ke&&(Mn=ke.join(" "),Mn.length-We<=f&&(_t=O(g.obj,Mn))))}return M=ve,_t}}w=r.loadDsf(p,"stringify");var D="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(D=z[0]+`
`),D+=H(e,null,!0,!0),z&&(D+=z[1]||""),D},Ow=R6;function iC(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function Cz(e,t){if(!(e===null||typeof e!="object")){var n=Ow.getComment(e);n&&Ow.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)ife(o.a,r,n.a[r],Cz(e[r]))&&(s=!0);!s&&n.e&&(o.e=iC(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];ife(o.s,l,n.c[l],Cz(e[l]))&&(s=!0)}!s&&n.e&&(o.e=iC(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=iC(n.r[0],n.r[1])),s?o:void 0}}function dSt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function hSt(e,t){var n=[];if(Iz(e,t,n,[]),n.length>0){var r=t$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+dSt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),t$(t,r,1)}}function ife(e,t,n,r){var i=iC(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function sC(e,t){var n=iC(t.b,t.a);return n.path=e,n}function oC(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(sC(s,o)),oC(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(sC(u,l)),oC(l.x,t,u))});e.e&&t.push(sC(n,e.e))}}function Iz(e,t,n,r){if(e){if(t===null||typeof t!="object"){oC(e,n,r);return}var i,s=Ow.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],Iz(u.x,t[i],n,l)):(n.push(sC(l,u)),oC(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],Iz(d.x,t[c],n,f))):d&&(n.push(sC(f,d)),oC(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function t$(e,t,n){var r=Ow.createComment(e,Ow.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Ow.forceComment(t)),r.r[n]||""}var pSt={extract:function(e){return Cz(e,!0)},merge:hSt,header:function(e,t){return t$(e,t,0)},footer:function(e,t){return t$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var sfe=R6,mSt=oSt,ofe=cSt,afe=fSt,gSt=pSt,ySt=zX,VX={parse:ofe,stringify:afe,endOfLine:function(){return sfe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(sfe.EOL=e)},version:mSt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,ofe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,afe(e,t)}},comments:gSt,dsf:ySt.std},kz={exports:{}},XIe={},Rf={},ME={},fk={},Pn={},P2={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(P2);var Rz={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=P2;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(Rz);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=P2,n=Rz;var r=P2;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Rz;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,G){return this}}class o extends s{constructor(q,G,ne){super(),this.varKind=q,this.name=G,this.rhs=ne}render({es5:q,_n:G}){const ne=q?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ce};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=O(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,G,ne){super(),this.lhs=q,this.rhs=G,this.sideEffects=ne}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=O(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(q,this.rhs)}}class u extends a{constructor(q,G,ne,ce){super(q,ne,ce),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=O(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,ne)=>G+ne.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const ne=q[G].optimizeNodes();Array.isArray(ne)?q.splice(G,1,...ne):ne?q[G]=ne:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:ne}=this;let ce=ne.length;for(;ce--;){const de=ne[ce];de.optimizeNames(q,G)||(F(q,de.names),ne.splice(ce,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>M(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const ne=G.optimizeNodes();G=this.else=Array.isArray(ne)?new g(ne):ne}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(L(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=O(this.condition,q,G),this}get names(){const q=super.names;return P(q,this.condition),this.else&&M(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=O(this.iteration,q,G),this}get names(){return M(super.names,this.iteration.names)}}class w extends v{constructor(q,G,ne,ce){super(),this.varKind=q,this.name=G,this.from=ne,this.to=ce}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:ne,from:ce,to:de}=this;return`for(${G} ${ne}=${ce}; ${ne}<${de}; ${ne}++)`+super.render(q)}get names(){const q=P(super.names,this.from);return P(q,this.to)}}class E extends v{constructor(q,G,ne,ce){super(),this.loop=q,this.varKind=G,this.name=ne,this.iterable=ce}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=O(this.iterable,q,G),this}get names(){return M(super.names,this.iterable.names)}}class S extends p{constructor(q,G,ne){super(),this.name=q,this.args=G,this.async=ne}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}S.kind="func";class T extends h{render(q){return"return "+super.render(q)}}T.kind="return";class A extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var ne,ce;return super.optimizeNames(q,G),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(q,G),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&M(q,this.catch.names),this.finally&&M(q,this.finally.names),q}}class C extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}C.kind="catch";class I extends p{render(q){return"finally"+super.render(q)}}I.kind="finally";class R{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const ne=this._extScope.value(q,G);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,ne,ce){const de=this._scope.toName(G);return ne!==void 0&&ce&&(this._constants[de.str]=ne),this._leafNode(new o(q,de,ne)),de}const(q,G,ne){return this._def(n.varKinds.const,q,G,ne)}let(q,G,ne){return this._def(n.varKinds.let,q,G,ne)}var(q,G,ne){return this._def(n.varKinds.var,q,G,ne)}assign(q,G,ne){return this._leafNode(new a(q,G,ne))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[ne,ce]of q)G.length>1&&G.push(","),G.push(ne),(ne!==ce||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ce));return G.push("}"),new t._Code(G)}if(q,G,ne){if(this._blockNode(new y(q)),G&&ne)this.code(G).else().code(ne).endIf();else if(G)this.code(G).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new b(q),G)}forRange(q,G,ne,ce,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(q);return this._for(new w(de,he,G,ne),()=>ce(he))}forOf(q,G,ne,ce=n.varKinds.const){const de=this._scope.toName(q);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ye=>{this.var(de,(0,t._)`${he}[${ye}]`),ne(de)})}return this._for(new E("of",ce,de,G),()=>ne(de))}forIn(q,G,ne,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,ne);const de=this._scope.toName(q);return this._for(new E("in",ce,de,G),()=>ne(de))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new T;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(q,G,ne){if(!G&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new A;if(this._blockNode(ce),this.code(q),G){const de=this.name("e");this._currNode=ce.catch=new C(de),G(de)}return ne&&(this._currNode=ce.finally=new I,this.code(ne)),this._endBlockNode(C,I)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-G;if(ne<0||q!==void 0&&ne!==q)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,ne,ce){return this._blockNode(new S(q,G,ne)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const ne=this._currNode;if(ne instanceof q||G&&ne instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=R;function M(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function P(j,q){return q instanceof t._CodeOrName?M(j,q.names):j}function O(j,q,G){if(j instanceof t.Name)return ne(j);if(!ce(j))return j;return new t._Code(j._items.reduce((de,he)=>(he instanceof t.Name&&(he=ne(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ne(de){const he=G[de.str];return he===void 0||q[de.str]!==1?de:(delete q[de.str],he)}function ce(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&q[he.str]===1&&G[he.str]!==void 0)}}function F(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function L(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=L;const B=z(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const H=z(e.operators.OR);function D(...j){return j.reduce(H)}e.or=D;function z(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Pn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const qr=Pn,vSt=P2;function bSt(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=bSt;function _St(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(QIe(e,t),!JIe(t,e.self.RULES.all))}wt.alwaysValidSchema=_St;function QIe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||tke(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=QIe;function JIe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=JIe;function wSt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=wSt;function ESt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,qr._)`${n}`}return(0,qr._)`${e}${t}${(0,qr.getProperty)(r)}`}wt.schemaRefOrVal=ESt;function xSt(e){return ZIe(decodeURIComponent(e))}wt.unescapeFragment=xSt;function SSt(e){return encodeURIComponent(HX(e))}wt.escapeFragment=SSt;function HX(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=HX;function ZIe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=ZIe;function TSt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=TSt;function ufe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof qr.Name?(s instanceof qr.Name?e(i,s,o):t(i,s,o),o):s instanceof qr.Name?(t(i,o,s),s):n(s,o);return a===qr.Name&&!(u instanceof qr.Name)?r(i,u):u}}wt.mergeEvaluated={props:ufe({mergeNames:(e,t,n)=>e.if((0,qr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,qr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,qr._)`${n} || {}`).code((0,qr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,qr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,qr._)`${n} || {}`),qX(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:eke}),items:ufe({mergeNames:(e,t,n)=>e.if((0,qr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,qr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,qr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,qr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function eke(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,qr._)`{}`);return t!==void 0&&qX(e,n,t),n}wt.evaluatedPropsToName=eke;function qX(e,t,n){Object.keys(n).forEach(r=>e.assign((0,qr._)`${t}${(0,qr.getProperty)(r)}`,!0))}wt.setEvaluated=qX;const lfe={};function ASt(e,t){return e.scopeValue("func",{ref:t,code:lfe[t.code]||(lfe[t.code]=new vSt._Code(t.code))})}wt.useFunc=ASt;var Nz;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Nz||(wt.Type=Nz={}));function CSt(e,t,n){if(e instanceof qr.Name){const r=t===Nz.Num;return n?r?(0,qr._)`"[" + ${e} + "]"`:(0,qr._)`"['" + ${e} + "']"`:r?(0,qr._)`"/" + ${e}`:(0,qr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,qr.getProperty)(e).toString():"/"+HX(e)}wt.getErrorPath=CSt;function tke(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=tke;var zh={};Object.defineProperty(zh,"__esModule",{value:!0});const Ko=Pn,ISt={data:new Ko.Name("data"),valCxt:new Ko.Name("valCxt"),instancePath:new Ko.Name("instancePath"),parentData:new Ko.Name("parentData"),parentDataProperty:new Ko.Name("parentDataProperty"),rootData:new Ko.Name("rootData"),dynamicAnchors:new Ko.Name("dynamicAnchors"),vErrors:new Ko.Name("vErrors"),errors:new Ko.Name("errors"),this:new Ko.Name("this"),self:new Ko.Name("self"),scope:new Ko.Name("scope"),json:new Ko.Name("json"),jsonPos:new Ko.Name("jsonPos"),jsonLen:new Ko.Name("jsonLen"),jsonPart:new Ko.Name("jsonPart")};zh.default=ISt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Pn,n=wt,r=zh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:S,allErrors:T}=w,A=f(g,y,v);b??(S||T)?u(E,A):l(w,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:S}=b,T=f(g,y,v);u(w,T),E||S||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",w,r.default.errors,T=>{g.const(S,(0,t._)`${r.default.vErrors}[${T}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:S,it:T}=g,{opts:A,propertyName:C,topSchemaRef:I,schemaPath:R}=T;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&b.push([c.message,typeof v=="function"?v(g):v]),A.verbose&&b.push([c.schema,S],[c.parentSchema,(0,t._)`${I}${R}`],[r.default.data,E]),C&&b.push([c.propertyName,C])}})(fk);Object.defineProperty(ME,"__esModule",{value:!0});ME.boolOrEmptySchema=ME.topBoolOrEmptySchema=void 0;const kSt=fk,RSt=Pn,NSt=zh,PSt={message:"boolean schema is false"};function DSt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?nke(e,!1):typeof n=="object"&&n.$async===!0?t.return(NSt.default.data):(t.assign((0,RSt._)`${r}.errors`,null),t.return(!0))}ME.topBoolOrEmptySchema=DSt;function OSt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),nke(e)):n.var(t,!0)}ME.boolOrEmptySchema=OSt;function nke(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,kSt.reportError)(i,PSt,void 0,t)}var Es={},zv={};Object.defineProperty(zv,"__esModule",{value:!0});zv.getRules=zv.isJSONType=void 0;const $St=["string","number","integer","boolean","null","object","array"],MSt=new Set($St);function LSt(e){return typeof e=="string"&&MSt.has(e)}zv.isJSONType=LSt;function FSt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}zv.getRules=FSt;var Qp={};Object.defineProperty(Qp,"__esModule",{value:!0});Qp.shouldUseRule=Qp.shouldUseGroup=Qp.schemaHasRulesForType=void 0;function jSt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&rke(e,r)}Qp.schemaHasRulesForType=jSt;function rke(e,t){return t.rules.some(n=>ike(e,n))}Qp.shouldUseGroup=rke;function ike(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Qp.shouldUseRule=ike;Object.defineProperty(Es,"__esModule",{value:!0});Es.reportTypeError=Es.checkDataTypes=Es.checkDataType=Es.coerceAndCheckDataType=Es.getJSONTypes=Es.getSchemaTypes=Es.DataType=void 0;const BSt=zv,USt=Qp,zSt=fk,bn=Pn,ske=wt;var $w;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})($w||(Es.DataType=$w={}));function VSt(e){const t=oke(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Es.getSchemaTypes=VSt;function oke(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(BSt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Es.getJSONTypes=oke;function HSt(e,t){const{gen:n,data:r,opts:i}=e,s=qSt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,USt.schemaHasRulesForType)(e,t[0]));if(o){const a=WX(t,r,i.strictNumbers,$w.Wrong);n.if(a,()=>{s.length?WSt(e,t,s):GX(e)})}return o}Es.coerceAndCheckDataType=HSt;const ake=new Set(["string","number","integer","boolean","null"]);function qSt(e,t){return t?e.filter(n=>ake.has(n)||t==="array"&&n==="array"):[]}function WSt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,bn._)`typeof ${i}`),a=r.let("coerced",(0,bn._)`undefined`);s.coerceTypes==="array"&&r.if((0,bn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,bn._)`${i}[0]`).assign(o,(0,bn._)`typeof ${i}`).if(WX(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,bn._)`${a} !== undefined`);for(const l of n)(ake.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),GX(e),r.endIf(),r.if((0,bn._)`${a} !== undefined`,()=>{r.assign(i,a),GSt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,bn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,bn._)`"" + ${i}`).elseIf((0,bn._)`${i} === null`).assign(a,(0,bn._)`""`);return;case"number":r.elseIf((0,bn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,bn._)`+${i}`);return;case"integer":r.elseIf((0,bn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,bn._)`+${i}`);return;case"boolean":r.elseIf((0,bn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,bn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,bn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,bn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,bn._)`[${i}]`)}}}function GSt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,bn._)`${t} !== undefined`,()=>e.assign((0,bn._)`${t}[${n}]`,r))}function Pz(e,t,n,r=$w.Correct){const i=r===$w.Correct?bn.operators.EQ:bn.operators.NEQ;let s;switch(e){case"null":return(0,bn._)`${t} ${i} null`;case"array":s=(0,bn._)`Array.isArray(${t})`;break;case"object":s=(0,bn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,bn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,bn._)`typeof ${t} ${i} ${e}`}return r===$w.Correct?s:(0,bn.not)(s);function o(a=bn.nil){return(0,bn.and)((0,bn._)`typeof ${t} == "number"`,a,n?(0,bn._)`isFinite(${t})`:bn.nil)}}Es.checkDataType=Pz;function WX(e,t,n,r){if(e.length===1)return Pz(e[0],t,n,r);let i;const s=(0,ske.toHash)(e);if(s.array&&s.object){const o=(0,bn._)`typeof ${t} != "object"`;i=s.null?o:(0,bn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=bn.nil;s.number&&delete s.integer;for(const o in s)i=(0,bn.and)(i,Pz(o,t,n,r));return i}Es.checkDataTypes=WX;const YSt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,bn._)`{type: ${e}}`:(0,bn._)`{type: ${t}}`};function GX(e){const t=KSt(e);(0,zSt.reportError)(t,YSt)}Es.reportTypeError=GX;function KSt(e){const{gen:t,data:n,schema:r}=e,i=(0,ske.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var N6={};Object.defineProperty(N6,"__esModule",{value:!0});N6.assignDefaults=void 0;const d_=Pn,XSt=wt;function QSt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)cfe(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>cfe(e,s,i.default))}N6.assignDefaults=QSt;function cfe(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,d_._)`${s}${(0,d_.getProperty)(t)}`;if(i){(0,XSt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,d_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,d_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,d_._)`${a} = ${(0,d_.stringify)(n)}`)}var Hd={},kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.validateUnion=kn.validateArray=kn.usePattern=kn.callValidateCode=kn.schemaProperties=kn.allSchemaProperties=kn.noPropertyInData=kn.propertyInData=kn.isOwnProperty=kn.hasPropFunc=kn.reportMissingProp=kn.checkMissingProp=kn.checkReportMissingProp=void 0;const si=Pn,YX=wt,dg=zh,JSt=wt;function ZSt(e,t){const{gen:n,data:r,it:i}=e;n.if(XX(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,si._)`${t}`},!0),e.error()})}kn.checkReportMissingProp=ZSt;function eTt({gen:e,data:t,it:{opts:n}},r,i){return(0,si.or)(...r.map(s=>(0,si.and)(XX(e,t,s,n.ownProperties),(0,si._)`${i} = ${s}`)))}kn.checkMissingProp=eTt;function tTt(e,t){e.setParams({missingProperty:t},!0),e.error()}kn.reportMissingProp=tTt;function uke(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,si._)`Object.prototype.hasOwnProperty`})}kn.hasPropFunc=uke;function KX(e,t,n){return(0,si._)`${uke(e)}.call(${t}, ${n})`}kn.isOwnProperty=KX;function nTt(e,t,n,r){const i=(0,si._)`${t}${(0,si.getProperty)(n)} !== undefined`;return r?(0,si._)`${i} && ${KX(e,t,n)}`:i}kn.propertyInData=nTt;function XX(e,t,n,r){const i=(0,si._)`${t}${(0,si.getProperty)(n)} === undefined`;return r?(0,si.or)(i,(0,si.not)(KX(e,t,n))):i}kn.noPropertyInData=XX;function lke(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}kn.allSchemaProperties=lke;function rTt(e,t){return lke(t).filter(n=>!(0,YX.alwaysValidSchema)(e,t[n]))}kn.schemaProperties=rTt;function iTt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,si._)`${e}, ${t}, ${r}${i}`:t,f=[[dg.default.instancePath,(0,si.strConcat)(dg.default.instancePath,s)],[dg.default.parentData,o.parentData],[dg.default.parentDataProperty,o.parentDataProperty],[dg.default.rootData,dg.default.rootData]];o.opts.dynamicRef&&f.push([dg.default.dynamicAnchors,dg.default.dynamicAnchors]);const d=(0,si._)`${c}, ${n.object(...f)}`;return u!==si.nil?(0,si._)`${a}.call(${u}, ${d})`:(0,si._)`${a}(${d})`}kn.callValidateCode=iTt;const sTt=(0,si._)`new RegExp`;function oTt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,si._)`${i.code==="new RegExp"?sTt:(0,JSt.useFunc)(e,i)}(${n}, ${r})`})}kn.usePattern=oTt;function aTt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,si._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:YX.Type.Num},s),t.if((0,si.not)(s),a)})}}kn.validateArray=aTt;function uTt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,YX.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,si._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,si.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}kn.validateUnion=uTt;Object.defineProperty(Hd,"__esModule",{value:!0});Hd.validateKeywordUsage=Hd.validSchemaType=Hd.funcKeywordCode=Hd.macroKeywordCode=void 0;const Da=Pn,N1=zh,lTt=kn,cTt=fk;function fTt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=cke(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Da.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Hd.macroKeywordCode=fTt;function dTt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;pTt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=cke(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&ffe(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&ffe(e),g(()=>hTt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Da._)`await `),v=>r.assign(f,!1).if((0,Da._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Da._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Da._)`${c}.errors`;return r.assign(y,null),m(Da.nil),y}function m(y=t.async?(0,Da._)`await `:Da.nil){const v=u.opts.passContext?N1.default.this:N1.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Da._)`${y}${(0,lTt.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,Da.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Hd.funcKeywordCode=dTt;function ffe(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Da._)`${r.parentData}[${r.parentDataProperty}]`))}function hTt(e,t){const{gen:n}=e;n.if((0,Da._)`Array.isArray(${t})`,()=>{n.assign(N1.default.vErrors,(0,Da._)`${N1.default.vErrors} === null ? ${t} : ${N1.default.vErrors}.concat(${t})`).assign(N1.default.errors,(0,Da._)`${N1.default.vErrors}.length`),(0,cTt.extendErrors)(e)},()=>e.error())}function pTt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function cke(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Da.stringify)(n)})}function mTt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Hd.validSchemaType=mTt;function gTt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Hd.validateKeywordUsage=gTt;var g0={};Object.defineProperty(g0,"__esModule",{value:!0});g0.extendSubschemaMode=g0.extendSubschemaData=g0.getSubschema=void 0;const jd=Pn,fke=wt;function yTt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,jd._)`${e.schemaPath}${(0,jd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,jd._)`${e.schemaPath}${(0,jd.getProperty)(t)}${(0,jd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,fke.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}g0.getSubschema=yTt;function vTt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,jd._)`${t.data}${(0,jd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,jd.str)`${l}${(0,fke.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,jd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof jd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}g0.extendSubschemaData=vTt;function bTt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}g0.extendSubschemaMode=bTt;var Eo={},dke={exports:{}},Wg=dke.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};ZP(t,r,i,e,"",e)};Wg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Wg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Wg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Wg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function ZP(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Wg.arrayKeywords)for(var d=0;d<f.length;d++)ZP(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Wg.propsKeywords){if(f&&typeof f=="object")for(var h in f)ZP(e,t,n,f[h],i+"/"+c+"/"+_Tt(h),s,i,c,r,h)}else(c in Wg.keywords||e.allKeys&&!(c in Wg.skipKeywords))&&ZP(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function _Tt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var wTt=dke.exports;Object.defineProperty(Eo,"__esModule",{value:!0});Eo.getSchemaRefs=Eo.resolveUrl=Eo.normalizeId=Eo._getFullPath=Eo.getFullPath=Eo.inlineRef=void 0;const ETt=wt,xTt=cY,STt=wTt,TTt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ATt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Dz(e):t?hke(e)<=t:!1}Eo.inlineRef=ATt;const CTt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Dz(e){for(const t in e){if(CTt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(Dz)||typeof n=="object"&&Dz(n))return!0}return!1}function hke(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!TTt.has(n)&&(typeof e[n]=="object"&&(0,ETt.eachItem)(e[n],r=>t+=hke(r)),t===1/0))return 1/0}return t}function pke(e,t="",n){n!==!1&&(t=Mw(t));const r=e.parse(t);return mke(e,r)}Eo.getFullPath=pke;function mke(e,t){return e.serialize(t).split("#")[0]+"#"}Eo._getFullPath=mke;const ITt=/#\/?$/;function Mw(e){return e?e.replace(ITt,""):""}Eo.normalizeId=Mw;function kTt(e,t,n){return n=Mw(n),e.resolve(t,n)}Eo.resolveUrl=kTt;const RTt=/^[a-z_][-a-z0-9._]*$/i;function NTt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Mw(e[n]||t),s={"":i},o=pke(r,i,!1),a={},u=new Set;return STt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=Mw(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==Mw(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!RTt.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!xTt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Eo.getSchemaRefs=NTt;Object.defineProperty(Rf,"__esModule",{value:!0});Rf.getData=Rf.KeywordCxt=Rf.validateFunctionCode=void 0;const gke=ME,dfe=Es,QX=Qp,n$=Es,PTt=N6,aC=Hd,Pj=g0,Pt=Pn,nn=zh,DTt=Eo,Jp=wt,dT=fk;function OTt(e){if(bke(e)&&(_ke(e),vke(e))){LTt(e);return}yke(e,()=>(0,gke.topBoolOrEmptySchema)(e))}Rf.validateFunctionCode=OTt;function yke({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Pt._)`${nn.default.data}, ${nn.default.valCxt}`,r.$async,()=>{e.code((0,Pt._)`"use strict"; ${hfe(n,i)}`),MTt(e,i),e.code(s)}):e.func(t,(0,Pt._)`${nn.default.data}, ${$Tt(i)}`,r.$async,()=>e.code(hfe(n,i)).code(s))}function $Tt(e){return(0,Pt._)`{${nn.default.instancePath}="", ${nn.default.parentData}, ${nn.default.parentDataProperty}, ${nn.default.rootData}=${nn.default.data}${e.dynamicRef?(0,Pt._)`, ${nn.default.dynamicAnchors}={}`:Pt.nil}}={}`}function MTt(e,t){e.if(nn.default.valCxt,()=>{e.var(nn.default.instancePath,(0,Pt._)`${nn.default.valCxt}.${nn.default.instancePath}`),e.var(nn.default.parentData,(0,Pt._)`${nn.default.valCxt}.${nn.default.parentData}`),e.var(nn.default.parentDataProperty,(0,Pt._)`${nn.default.valCxt}.${nn.default.parentDataProperty}`),e.var(nn.default.rootData,(0,Pt._)`${nn.default.valCxt}.${nn.default.rootData}`),t.dynamicRef&&e.var(nn.default.dynamicAnchors,(0,Pt._)`${nn.default.valCxt}.${nn.default.dynamicAnchors}`)},()=>{e.var(nn.default.instancePath,(0,Pt._)`""`),e.var(nn.default.parentData,(0,Pt._)`undefined`),e.var(nn.default.parentDataProperty,(0,Pt._)`undefined`),e.var(nn.default.rootData,nn.default.data),t.dynamicRef&&e.var(nn.default.dynamicAnchors,(0,Pt._)`{}`)})}function LTt(e){const{schema:t,opts:n,gen:r}=e;yke(e,()=>{n.$comment&&t.$comment&&Eke(e),zTt(e),r.let(nn.default.vErrors,null),r.let(nn.default.errors,0),n.unevaluated&&FTt(e),wke(e),qTt(e)})}function FTt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Pt._)`${n}.evaluated`),t.if((0,Pt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Pt._)`${e.evaluated}.props`,(0,Pt._)`undefined`)),t.if((0,Pt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Pt._)`${e.evaluated}.items`,(0,Pt._)`undefined`))}function hfe(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Pt._)`/*# sourceURL=${n} */`:Pt.nil}function jTt(e,t){if(bke(e)&&(_ke(e),vke(e))){BTt(e,t);return}(0,gke.boolOrEmptySchema)(e,t)}function vke({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function bke(e){return typeof e.schema!="boolean"}function BTt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&Eke(e),VTt(e),HTt(e);const s=r.const("_errs",nn.default.errors);wke(e,s),r.var(t,(0,Pt._)`${s} === ${nn.default.errors}`)}function _ke(e){(0,Jp.checkUnknownRules)(e),UTt(e)}function wke(e,t){if(e.opts.jtd)return pfe(e,[],!1,t);const n=(0,dfe.getSchemaTypes)(e.schema),r=(0,dfe.coerceAndCheckDataType)(e,n);pfe(e,n,!r,t)}function UTt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Jp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function zTt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Jp.checkStrictMode)(e,"default is ignored in the schema root")}function VTt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,DTt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function HTt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Eke({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Pt._)`${nn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Pt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Pt._)`${nn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function qTt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Pt._)`${nn.default.errors} === 0`,()=>t.return(nn.default.data),()=>t.throw((0,Pt._)`new ${i}(${nn.default.vErrors})`)):(t.assign((0,Pt._)`${r}.errors`,nn.default.vErrors),s.unevaluated&&WTt(e),t.return((0,Pt._)`${nn.default.errors} === 0`))}function WTt({gen:e,evaluated:t,props:n,items:r}){n instanceof Pt.Name&&e.assign((0,Pt._)`${t}.props`,n),r instanceof Pt.Name&&e.assign((0,Pt._)`${t}.items`,r)}function pfe(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Jp.schemaHasRulesButRef)(s,c))){i.block(()=>Tke(e,"$ref",c.all.$ref.definition));return}u.jtd||GTt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,QX.shouldUseGroup)(s,d)&&(d.type?(i.if((0,n$.checkDataType)(d.type,o,u.strictNumbers)),mfe(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,n$.reportTypeError)(e)),i.endIf()):mfe(e,d),a||i.if((0,Pt._)`${nn.default.errors} === ${r||0}`))}}function mfe(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,PTt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,QX.shouldUseRule)(r,s)&&Tke(e,s.keyword,s.definition,t.type)})}function GTt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(YTt(e,t),e.opts.allowUnionTypes||KTt(e,t),XTt(e,e.dataTypes))}function YTt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{xke(e.dataTypes,n)||JX(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),JTt(e,t)}}function KTt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&JX(e,"use allowUnionTypes to allow union type keyword")}function XTt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,QX.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>QTt(t,o))&&JX(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function QTt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function xke(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function JTt(e,t){const n=[];for(const r of e.dataTypes)xke(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function JX(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Jp.checkStrictMode)(e,t,e.opts.strictTypes)}class Ske{constructor(t,n,r){if((0,aC.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Jp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",Ake(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,aC.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",nn.default.errors))}result(t,n,r){this.failResult((0,Pt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Pt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Pt._)`${n} !== undefined && (${(0,Pt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?dT.reportExtraError:dT.reportError)(this,this.def.error,n)}$dataError(){(0,dT.reportError)(this,this.def.$dataError||dT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,dT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Pt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Pt.nil,n=Pt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Pt.or)((0,Pt._)`${i} === undefined`,n)),t!==Pt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Pt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Pt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Pt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Pt._)`${(0,n$.checkDataTypes)(u,n,s.opts.strictNumbers,n$.DataType.Wrong)}`}return Pt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Pt._)`!${u}(${n})`}return Pt.nil}}subschema(t,n){const r=(0,Pj.getSubschema)(this.it,t);(0,Pj.extendSubschemaData)(r,this.it,t),(0,Pj.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return jTt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Jp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Jp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Pt.Name)),!0}}Rf.KeywordCxt=Ske;function Tke(e,t,n,r){const i=new Ske(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,aC.funcKeywordCode)(i,n):"macro"in n?(0,aC.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,aC.funcKeywordCode)(i,n)}const ZTt=/^\/(?:[^~]|~0|~1)*$/,eAt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ake(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return nn.default.rootData;if(e[0]==="/"){if(!ZTt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=nn.default.rootData}else{const l=eAt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Pt._)`${s}${(0,Pt.getProperty)((0,Jp.unescapeJsonPointer)(l))}`,o=(0,Pt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Rf.getData=Ake;var dk={};Object.defineProperty(dk,"__esModule",{value:!0});class tAt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}dk.default=tAt;var rS={};Object.defineProperty(rS,"__esModule",{value:!0});const Dj=Eo;class nAt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,Dj.resolveUrl)(t,n,r),this.missingSchema=(0,Dj.normalizeId)((0,Dj.getFullPath)(t,this.missingRef))}}rS.default=nAt;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.resolveSchema=xu.getCompilingSchema=xu.resolveRef=xu.compileSchema=xu.SchemaEnv=void 0;const qc=Pn,rAt=dk,e1=zh,gf=Eo,gfe=wt,iAt=Rf;class P6{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,gf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}xu.SchemaEnv=P6;function ZX(e){const t=Cke.call(this,e);if(t)return t;const n=(0,gf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new qc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:rAt.default,code:(0,qc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:e1.default.data,parentData:e1.default.parentData,parentDataProperty:e1.default.parentDataProperty,dataNames:[e1.default.data],dataPathArr:[qc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,qc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:qc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,qc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,iAt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(e1.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${e1.default.self}`,`${e1.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof qc.Name?void 0:p,items:m instanceof qc.Name?void 0:m,dynamicProps:p instanceof qc.Name,dynamicItems:m instanceof qc.Name},h.source&&(h.source.evaluated=(0,qc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}xu.compileSchema=ZX;function sAt(e,t,n){var r;n=(0,gf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=uAt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new P6({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=oAt.call(this,s)}xu.resolveRef=sAt;function oAt(e){return(0,gf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:ZX.call(this,e)}function Cke(e){for(const t of this._compilations)if(aAt(t,e))return t}xu.getCompilingSchema=Cke;function aAt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function uAt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||D6.call(this,e,t)}function D6(e,t){const n=this.opts.uriResolver.parse(t),r=(0,gf._getFullPath)(this.opts.uriResolver,n);let i=(0,gf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return Oj.call(this,n,e);const s=(0,gf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=D6.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:Oj.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||ZX.call(this,o),s===(0,gf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,gf.resolveUrl)(this.opts.uriResolver,i,l)),new P6({schema:a,schemaId:u,root:e,baseId:i})}return Oj.call(this,n,o)}}xu.resolveSchema=D6;const lAt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Oj(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,gfe.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!lAt.has(a)&&l&&(t=(0,gf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,gfe.schemaHasRulesButRef)(n,this.RULES)){const a=(0,gf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=D6.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new P6({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const cAt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",fAt="Meta-schema for $data reference (JSON AnySchema extension proposal)",dAt="object",hAt=["$data"],pAt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},mAt=!1,gAt={$id:cAt,description:fAt,type:dAt,required:hAt,properties:pAt,additionalProperties:mAt};var eQ={},Oz={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Js,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Se=ee.length-1,xe=1;xe<Se;++xe)ee[xe]=ee[xe].slice(1,-1);return ee[Se]=ee[Se].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Se in ee)ae[Se]=ee[Se];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Se=r(ae,"[A-Fa-f]"),xe=i(i("%[EFef]"+Se+"%"+Se+Se+"%"+Se+Se)+"|"+i("%[89A-Fa-f]"+Se+"%"+Se+Se)+"|"+i("%"+Se+Se)),st="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Vt=r(st,St),Dn=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Fn=oe?"[\\uE000-\\uF8FF]":"[]",fn=r(ee,ae,"[\\-\\.\\_\\~]",Dn);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(xe+"|"+r(fn,St,"[\\:]"))+"*");var rr=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Ar=i(rr+"\\."+rr+"\\."+rr+"\\."+rr),zt=i(Se+"{1,4}"),ir=i(i(zt+"\\:"+zt)+"|"+Ar),Ur=i(i(zt+"\\:")+"{6}"+ir),Qn=i("\\:\\:"+i(zt+"\\:")+"{5}"+ir),Ti=i(i(zt)+"?\\:\\:"+i(zt+"\\:")+"{4}"+ir),Bs=i(i(i(zt+"\\:")+"{0,1}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{3}"+ir),Yr=i(i(i(zt+"\\:")+"{0,2}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{2}"+ir),co=i(i(i(zt+"\\:")+"{0,3}"+zt)+"?\\:\\:"+zt+"\\:"+ir),$i=i(i(i(zt+"\\:")+"{0,4}"+zt)+"?\\:\\:"+ir),Mi=i(i(i(zt+"\\:")+"{0,5}"+zt)+"?\\:\\:"+zt),Fo=i(i(i(zt+"\\:")+"{0,6}"+zt)+"?\\:\\:"),Aa=i([Ur,Qn,Ti,Bs,Yr,co,$i,Mi,Fo].join("|")),Us=i(i(fn+"|"+xe)+"+");i("[vV]"+Se+"+\\."+r(fn,St,"[\\:]")+"+"),i(i(xe+"|"+r(fn,St))+"*");var Wl=i(xe+"|"+r(fn,St,"[\\:\\@]"));return i(i(xe+"|"+r(fn,St,"[\\@]"))+"+"),i(i(Wl+"|"+r("[\\/\\?]",Fn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",fn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",fn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",fn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",fn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",fn,St,"[\\:\\@\\/\\?]",Fn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",fn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",fn,St),"g"),UNRESERVED:new RegExp(fn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",fn,Vt),"g"),PCT_ENCODED:new RegExp(xe,"g"),IPV4ADDRESS:new RegExp("^("+Ar+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Aa+")"+i(i("\\%25|\\%(?!"+Se+"{2})")+"("+Us+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Se=[],xe=!0,st=!1,St=void 0;try{for(var Vt=ee[Symbol.iterator](),Dn;!(xe=(Dn=Vt.next()).done)&&(Se.push(Dn.value),!(ae&&Se.length===ae));xe=!0);}catch(Fn){st=!0,St=Fn}finally{try{!xe&&Vt.return&&Vt.return()}finally{if(st)throw St}}return Se}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,S="-",T=/^xn--/,A=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-g,M=Math.floor,P=String.fromCharCode;function O(oe){throw new RangeError(I[oe])}function F(oe,ee){for(var ae=[],Se=oe.length;Se--;)ae[Se]=ee(oe[Se]);return ae}function L(oe,ee){var ae=oe.split("@"),Se="";ae.length>1&&(Se=ae[0]+"@",oe=ae[1]),oe=oe.replace(C,".");var xe=oe.split("."),st=F(xe,ee).join(".");return Se+st}function B(oe){for(var ee=[],ae=0,Se=oe.length;ae<Se;){var xe=oe.charCodeAt(ae++);if(xe>=55296&&xe<=56319&&ae<Se){var st=oe.charCodeAt(ae++);(st&64512)==56320?ee.push(((xe&1023)<<10)+(st&1023)+65536):(ee.push(xe),ae--)}else ee.push(xe)}return ee}var U=function(ee){return String.fromCodePoint.apply(String,h(ee))},H=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},D=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},z=function(ee,ae,Se){var xe=0;for(ee=Se?M(ee/b):ee>>1,ee+=M(ee/ae);ee>R*y>>1;xe+=m)ee=M(ee/R);return M(xe+(R+1)*ee/(ee+v))},W=function(ee){var ae=[],Se=ee.length,xe=0,st=E,St=w,Vt=ee.lastIndexOf(S);Vt<0&&(Vt=0);for(var Dn=0;Dn<Vt;++Dn)ee.charCodeAt(Dn)>=128&&O("not-basic"),ae.push(ee.charCodeAt(Dn));for(var Fn=Vt>0?Vt+1:0;Fn<Se;){for(var fn=xe,rr=1,Ar=m;;Ar+=m){Fn>=Se&&O("invalid-input");var zt=H(ee.charCodeAt(Fn++));(zt>=m||zt>M((p-xe)/rr))&&O("overflow"),xe+=zt*rr;var ir=Ar<=St?g:Ar>=St+y?y:Ar-St;if(zt<ir)break;var Ur=m-ir;rr>M(p/Ur)&&O("overflow"),rr*=Ur}var Qn=ae.length+1;St=z(xe-fn,Qn,fn==0),M(xe/Qn)>p-st&&O("overflow"),st+=M(xe/Qn),xe%=Qn,ae.splice(xe++,0,st)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Se=ee.length,xe=E,st=0,St=w,Vt=!0,Dn=!1,Fn=void 0;try{for(var fn=ee[Symbol.iterator](),rr;!(Vt=(rr=fn.next()).done);Vt=!0){var Ar=rr.value;Ar<128&&ae.push(P(Ar))}}catch(Oe){Dn=!0,Fn=Oe}finally{try{!Vt&&fn.return&&fn.return()}finally{if(Dn)throw Fn}}var zt=ae.length,ir=zt;for(zt&&ae.push(S);ir<Se;){var Ur=p,Qn=!0,Ti=!1,Bs=void 0;try{for(var Yr=ee[Symbol.iterator](),co;!(Qn=(co=Yr.next()).done);Qn=!0){var $i=co.value;$i>=xe&&$i<Ur&&(Ur=$i)}}catch(Oe){Ti=!0,Bs=Oe}finally{try{!Qn&&Yr.return&&Yr.return()}finally{if(Ti)throw Bs}}var Mi=ir+1;Ur-xe>M((p-st)/Mi)&&O("overflow"),st+=(Ur-xe)*Mi,xe=Ur;var Fo=!0,Aa=!1,Us=void 0;try{for(var Wl=ee[Symbol.iterator](),ad;!(Fo=(ad=Wl.next()).done);Fo=!0){var Y=ad.value;if(Y<xe&&++st>p&&O("overflow"),Y==xe){for(var se=st,Z=m;;Z+=m){var fe=Z<=St?g:Z>=St+y?y:Z-St;if(se<fe)break;var ge=se-fe,le=m-fe;ae.push(P(D(fe+ge%le,0))),se=M(ge/le)}ae.push(P(D(se,0))),St=z(st,Mi,ir==zt),st=0,++ir}}}catch(Oe){Aa=!0,Us=Oe}finally{try{!Fo&&Wl.return&&Wl.return()}finally{if(Aa)throw Us}}++st,++xe}return ae.join("")},q=function(ee){return L(ee,function(ae){return T.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return L(ee,function(ae){return A.test(ae)?"xn--"+j(ae):ae})},ne={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:q},ce={};function de(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var ee="",ae=0,Se=oe.length;ae<Se;){var xe=parseInt(oe.substr(ae+1,2),16);if(xe<128)ee+=String.fromCharCode(xe),ae+=3;else if(xe>=194&&xe<224){if(Se-ae>=6){var st=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((xe&31)<<6|st&63)}else ee+=oe.substr(ae,6);ae+=6}else if(xe>=224){if(Se-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),Vt=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((xe&15)<<12|(St&63)<<6|Vt&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ye(oe,ee){function ae(Se){var xe=he(Se);return xe.match(ee.UNRESERVED)?xe:Se}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,de).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,de).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,de).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,de).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,de).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function ve(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Se=d(ae,2),xe=Se[1];return xe?xe.split(".").map(Ie).join("."):oe}function Ke(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Se=d(ae,3),xe=Se[1],st=Se[2];if(xe){for(var St=xe.toLowerCase().split("::").reverse(),Vt=d(St,2),Dn=Vt[0],Fn=Vt[1],fn=Fn?Fn.split(":").map(Ie):[],rr=Dn.split(":").map(Ie),Ar=ee.IPV4ADDRESS.test(rr[rr.length-1]),zt=Ar?7:8,ir=rr.length-zt,Ur=Array(zt),Qn=0;Qn<zt;++Qn)Ur[Qn]=fn[Qn]||rr[ir+Qn]||"";Ar&&(Ur[zt-1]=ve(Ur[zt-1],ee));var Ti=Ur.reduce(function(Mi,Fo,Aa){if(!Fo||Fo==="0"){var Us=Mi[Mi.length-1];Us&&Us.index+Us.length===Aa?Us.length++:Mi.push({index:Aa,length:1})}return Mi},[]),Bs=Ti.sort(function(Mi,Fo){return Fo.length-Mi.length})[0],Yr=void 0;if(Bs&&Bs.length>1){var co=Ur.slice(0,Bs.index),$i=Ur.slice(Bs.index+Bs.length);Yr=co.join(":")+"::"+$i.join(":")}else Yr=Ur.join(":");return st&&(Yr+="%"+st),Yr}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,gt="".match(/(){0}/)[1]===void 0;function rt(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Se=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var xe=oe.match(Ue);if(xe){gt?(ae.scheme=xe[1],ae.userinfo=xe[3],ae.host=xe[4],ae.port=parseInt(xe[5],10),ae.path=xe[6]||"",ae.query=xe[7],ae.fragment=xe[8],isNaN(ae.port)&&(ae.port=xe[5])):(ae.scheme=xe[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?xe[3]:void 0,ae.host=oe.indexOf("//")!==-1?xe[4]:void 0,ae.port=parseInt(xe[5],10),ae.path=xe[6]||"",ae.query=oe.indexOf("?")!==-1?xe[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?xe[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?xe[4]:void 0)),ae.host&&(ae.host=Ke(ve(ae.host,Se),Se)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var st=ce[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!st||!st.unicodeSupport)){if(ae.host&&(ee.domainHost||st&&st.domainHost))try{ae.host=ne.toASCII(ae.host.replace(Se.PCT_ENCODED,he).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ye(ae,c)}else ye(ae,Se);st&&st.parse&&st.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function be(oe,ee){var ae=ee.iri!==!1?f:c,Se=[];return oe.userinfo!==void 0&&(Se.push(oe.userinfo),Se.push("@")),oe.host!==void 0&&Se.push(Ke(ve(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(xe,st,St){return"["+st+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Se.push(":"),Se.push(String(oe.port))),Se.length?Se.join(""):void 0}var ke=/^\.\.?\//,ze=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Dt=/^\/?(?:.|\n)*?(?=\/|$)/;function We(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(ze))oe=oe.replace(ze,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Dt);if(ae){var Se=ae[0];oe=oe.slice(Se.length),ee.push(Se)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function me(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Se=[],xe=ce[(ee.scheme||oe.scheme||"").toLowerCase()];if(xe&&xe.serialize&&xe.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||xe&&xe.domainHost)try{oe.host=ee.iri?ne.toUnicode(oe.host):ne.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(Vt){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Vt}}ye(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Se.push(oe.scheme),Se.push(":"));var st=be(oe,ee);if(st!==void 0&&(ee.reference!=="suffix"&&Se.push("//"),Se.push(st),oe.path&&oe.path.charAt(0)!=="/"&&Se.push("/")),oe.path!==void 0){var St=oe.path;!ee.absolutePath&&(!xe||!xe.absolutePath)&&(St=We(St)),st===void 0&&(St=St.replace(/^\/\//,"/%2F")),Se.push(St)}return oe.query!==void 0&&(Se.push("?"),Se.push(oe.query)),oe.fragment!==void 0&&(Se.push("#"),Se.push(oe.fragment)),Se.join("")}function dt(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Se=arguments[3],xe={};return Se||(oe=rt(me(oe,ae),ae),ee=rt(me(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(xe.scheme=ee.scheme,xe.userinfo=ee.userinfo,xe.host=ee.host,xe.port=ee.port,xe.path=We(ee.path||""),xe.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(xe.userinfo=ee.userinfo,xe.host=ee.host,xe.port=ee.port,xe.path=We(ee.path||""),xe.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?xe.path=We(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?xe.path="/"+ee.path:oe.path?xe.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:xe.path=ee.path,xe.path=We(xe.path)),xe.query=ee.query):(xe.path=oe.path,ee.query!==void 0?xe.query=ee.query:xe.query=oe.query),xe.userinfo=oe.userinfo,xe.host=oe.host,xe.port=oe.port),xe.scheme=oe.scheme),xe.fragment=ee.fragment,xe}function yt(oe,ee,ae){var Se=u({scheme:"null"},ae);return me(dt(rt(oe,Se),rt(ee,Se),Se,!0),Se)}function pe(oe,ee){return typeof oe=="string"?oe=me(rt(oe,ee),ee):s(oe)==="object"&&(oe=rt(me(oe,ee),ee)),oe}function Ce(oe,ee,ae){return typeof oe=="string"?oe=me(rt(oe,ae),ae):s(oe)==="object"&&(oe=me(oe,ae)),typeof ee=="string"?ee=me(rt(ee,ae),ae):s(ee)==="object"&&(ee=me(ee,ae)),oe===ee}function He(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,de)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var _t={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Se=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Se?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Mn={scheme:"https",domainHost:_t.domainHost,parse:_t.parse,serialize:_t.serialize};function Sr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var Ln={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Se=ee;return Se.secure=Sr(Se),Se.resourceName=(Se.path||"/")+(Se.query?"?"+Se.query:""),Se.path=void 0,Se.query=void 0,Se},serialize:function(ee,ae){if((ee.port===(Sr(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Se=ee.resourceName.split("?"),xe=d(Se,2),st=xe[0],St=xe[1];ee.path=st&&st!=="/"?st:void 0,ee.query=St,ee.resourceName=void 0}return ee.fragment=void 0,ee}},lr={scheme:"wss",domainHost:Ln.domainHost,parse:Ln.parse,serialize:Ln.serialize},hn={},Sn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",tr="[0-9A-Fa-f]",nr=i(i("%[EFef]"+tr+"%"+tr+tr+"%"+tr+tr)+"|"+i("%[89A-Fa-f]"+tr+"%"+tr+tr)+"|"+i("%"+tr+tr)),Lo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Di="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Tn=r(Di,'[\\"\\\\]'),Oi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Tr=new RegExp(Sn,"g"),fs=new RegExp(nr,"g"),ep=new RegExp(r("[^]",Lo,"[\\.]",'[\\"]',Tn),"g"),rl=new RegExp(r("[^]",Sn,Oi),"g"),od=rl;function wr(oe){var ee=he(oe);return ee.match(Tr)?ee:oe}var Si={scheme:"mailto",parse:function(ee,ae){var Se=ee,xe=Se.to=Se.path?Se.path.split(","):[];if(Se.path=void 0,Se.query){for(var st=!1,St={},Vt=Se.query.split("&"),Dn=0,Fn=Vt.length;Dn<Fn;++Dn){var fn=Vt[Dn].split("=");switch(fn[0]){case"to":for(var rr=fn[1].split(","),Ar=0,zt=rr.length;Ar<zt;++Ar)xe.push(rr[Ar]);break;case"subject":Se.subject=ut(fn[1],ae);break;case"body":Se.body=ut(fn[1],ae);break;default:st=!0,St[ut(fn[0],ae)]=ut(fn[1],ae);break}}st&&(Se.headers=St)}Se.query=void 0;for(var ir=0,Ur=xe.length;ir<Ur;++ir){var Qn=xe[ir].split("@");if(Qn[0]=ut(Qn[0]),ae.unicodeSupport)Qn[1]=ut(Qn[1],ae).toLowerCase();else try{Qn[1]=ne.toASCII(ut(Qn[1],ae).toLowerCase())}catch(Ti){Se.error=Se.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ti}xe[ir]=Qn.join("@")}return Se},serialize:function(ee,ae){var Se=ee,xe=a(ee.to);if(xe){for(var st=0,St=xe.length;st<St;++st){var Vt=String(xe[st]),Dn=Vt.lastIndexOf("@"),Fn=Vt.slice(0,Dn).replace(fs,wr).replace(fs,o).replace(ep,de),fn=Vt.slice(Dn+1);try{fn=ae.iri?ne.toUnicode(fn):ne.toASCII(ut(fn,ae).toLowerCase())}catch(ir){Se.error=Se.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+ir}xe[st]=Fn+"@"+fn}Se.path=xe.join(",")}var rr=ee.headers=ee.headers||{};ee.subject&&(rr.subject=ee.subject),ee.body&&(rr.body=ee.body);var Ar=[];for(var zt in rr)rr[zt]!==hn[zt]&&Ar.push(zt.replace(fs,wr).replace(fs,o).replace(rl,de)+"="+rr[zt].replace(fs,wr).replace(fs,o).replace(od,de));return Ar.length&&(Se.query=Ar.join("&")),Se}},Gr=/^([^\:]+)\:(.*)/,ou={scheme:"urn",parse:function(ee,ae){var Se=ee.path&&ee.path.match(Gr),xe=ee;if(Se){var st=ae.scheme||xe.scheme||"urn",St=Se[1].toLowerCase(),Vt=Se[2],Dn=st+":"+(ae.nid||St),Fn=ce[Dn];xe.nid=St,xe.nss=Vt,xe.path=void 0,Fn&&(xe=Fn.parse(xe,ae))}else xe.error=xe.error||"URN can not be parsed.";return xe},serialize:function(ee,ae){var Se=ae.scheme||ee.scheme||"urn",xe=ee.nid,st=Se+":"+(ae.nid||xe),St=ce[st];St&&(ee=St.serialize(ee,ae));var Vt=ee,Dn=ee.nss;return Vt.path=(xe||ae.nid)+":"+Dn,Vt}},Sa=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ta={scheme:"urn:uuid",parse:function(ee,ae){var Se=ee;return Se.uuid=Se.nss,Se.nss=void 0,!ae.tolerant&&(!Se.uuid||!Se.uuid.match(Sa))&&(Se.error=Se.error||"UUID is not valid."),Se},serialize:function(ee,ae){var Se=ee;return Se.nss=(ee.uuid||"").toLowerCase(),Se}};ce[_t.scheme]=_t,ce[Mn.scheme]=Mn,ce[Ln.scheme]=Ln,ce[lr.scheme]=lr,ce[Si.scheme]=Si,ce[ou.scheme]=ou,ce[Ta.scheme]=Ta,n.SCHEMES=ce,n.pctEncChar=de,n.pctDecChars=he,n.parse=rt,n.removeDotSegments=We,n.serialize=me,n.resolveComponents=dt,n.resolve=yt,n.normalize=pe,n.equal=Ce,n.escapeComponent=He,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(Oz,Oz.exports);var yAt=Oz.exports;Object.defineProperty(eQ,"__esModule",{value:!0});const Ike=yAt;Ike.code='require("ajv/dist/runtime/uri").default';eQ.default=Ike;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Rf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Pn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=dk,i=rS,s=zv,o=xu,a=Pn,u=Eo,l=Es,c=wt,f=gAt,d=eQ,h=(D,z)=>new RegExp(D,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(D){var z,W,j,q,G,ne,ce,de,he,ye,Ie,ve,Ke,Ue,gt,rt,be,ke,ze,ct,Dt,We,me,dt,yt;const pe=D.strict,Ce=(z=D.code)===null||z===void 0?void 0:z.optimize,He=Ce===!0||Ce===void 0?1:Ce||0,ut=(j=(W=D.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,_t=(q=D.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(ne=(G=D.strictSchema)!==null&&G!==void 0?G:pe)!==null&&ne!==void 0?ne:!0,strictNumbers:(de=(ce=D.strictNumbers)!==null&&ce!==void 0?ce:pe)!==null&&de!==void 0?de:!0,strictTypes:(ye=(he=D.strictTypes)!==null&&he!==void 0?he:pe)!==null&&ye!==void 0?ye:"log",strictTuples:(ve=(Ie=D.strictTuples)!==null&&Ie!==void 0?Ie:pe)!==null&&ve!==void 0?ve:"log",strictRequired:(Ue=(Ke=D.strictRequired)!==null&&Ke!==void 0?Ke:pe)!==null&&Ue!==void 0?Ue:!1,code:D.code?{...D.code,optimize:He,regExp:ut}:{optimize:He,regExp:ut},loopRequired:(gt=D.loopRequired)!==null&&gt!==void 0?gt:v,loopEnum:(rt=D.loopEnum)!==null&&rt!==void 0?rt:v,meta:(be=D.meta)!==null&&be!==void 0?be:!0,messages:(ke=D.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(ze=D.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(ct=D.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Dt=D.addUsedSchema)!==null&&Dt!==void 0?Dt:!0,validateSchema:(We=D.validateSchema)!==null&&We!==void 0?We:!0,validateFormats:(me=D.validateFormats)!==null&&me!==void 0?me:!0,unicodeRegExp:(dt=D.unicodeRegExp)!==null&&dt!==void 0?dt:!0,int32range:(yt=D.int32range)!==null&&yt!==void 0?yt:!0,uriResolver:_t}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...b(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=M(z.logger);const q=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=I.call(this),z.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&C.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),T.call(this),z.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&z&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,z,W);async function q(ye,Ie){await G.call(this,ye.$schema);const ve=this._addSchema(ye,Ie);return ve.validate||ne.call(this,ve)}async function G(ye){ye&&!this.getSchema(ye)&&await q.call(this,{$ref:ye},!0)}async function ne(ye){try{return this._compileSchemaEnv(ye)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return ce.call(this,Ie),await de.call(this,Ie.missingSchema),ne.call(this,ye)}}function ce({missingSchema:ye,missingRef:Ie}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ie} cannot be resolved`)}async function de(ye){const Ie=await he.call(this,ye);this.refs[ye]||await G.call(this,Ie.$schema),this.refs[ye]||this.addSchema(Ie,ye,W)}async function he(ye){const Ie=this._loading[ye];if(Ie)return Ie;try{return await(this._loading[ye]=j(ye))}finally{delete this._loading[ye]}}}addSchema(z,W,j,q=this.opts.validateSchema){if(Array.isArray(z)){for(const ne of z)this.addSchema(ne,void 0,j,q);return this}let G;if(typeof z=="object"){const{schemaId:ne}=this.opts;if(G=z[ne],G!==void 0&&typeof G!="string")throw new Error(`schema ${ne} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,q,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,z);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(z){let W;for(;typeof(W=S.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,q,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(O.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>F.call(this,G,q):G=>q.type.forEach(ne=>F.call(this,G,q,ne))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===z);q>=0&&j.rules.splice(q,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const q of W){const G=q.split("/").slice(1);let ne=z;for(const ce of G)ne=ne[ce];for(const ce in j){const de=j[ce];if(typeof de!="object")continue;const{$data:he}=de.definition,ye=ne[ce];he&&ye&&(ne[ce]=H(ye))}}return z}_removeAllSchemas(z,W){for(const j in z){const q=z[j];(!W||W.test(j))&&(typeof q=="string"?delete z[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete z[j]))}}_addSchema(z,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let ne;const{schemaId:ce}=this.opts;if(typeof z=="object")ne=z[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(z);if(de!==void 0)return de;j=(0,u.normalizeId)(ne||j);const he=u.getSchemaRefs.call(this,z,j);return de=new o.SchemaEnv({schema:z,schemaId:ce,meta:W,baseId:j,localRefs:he}),this._cache.set(de.schema,de),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=de),q&&this.validateSchema(z,!0),de}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(D,z,W,j="error"){for(const q in D){const G=q;G in z&&this.logger[j](`${W}: option ${q}. ${D[G]}`)}}function S(D){return D=(0,u.normalizeId)(D),this.schemas[D]||this.refs[D]}function T(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const z in D)this.addSchema(D[z],z)}function A(){for(const D in this.opts.formats){const z=this.opts.formats[D];z&&this.addFormat(D,z)}}function C(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in D){const W=D[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function I(){const D={...this.opts};for(const z of p)delete D[z];return D}const R={log(){},warn(){},error(){}};function M(D){if(D===!1)return R;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function O(D,z){const{RULES:W}=this;if((0,c.eachItem)(D,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!P.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function F(D,z,W){var j;const q=z==null?void 0:z.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ne=q?G.post:G.rules.find(({type:de})=>de===W);if(ne||(ne={type:W,rules:[]},G.rules.push(ne)),G.keywords[D]=!0,!z)return;const ce={keyword:D,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?L.call(this,ne,ce,z.before):ne.rules.push(ce),G.all[D]=ce,(j=z.implements)===null||j===void 0||j.forEach(de=>this.addKeyword(de))}function L(D,z,W){const j=D.rules.findIndex(q=>q.keyword===W);j>=0?D.rules.splice(j,0,z):(D.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(D){let{metaSchema:z}=D;z!==void 0&&(D.$data&&this.opts.$data&&(z=H(z)),D.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(D){return{anyOf:[D,U]}}})(XIe);var tQ={},nQ={},rQ={};Object.defineProperty(rQ,"__esModule",{value:!0});const vAt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};rQ.default=vAt;var Vv={};Object.defineProperty(Vv,"__esModule",{value:!0});Vv.callRef=Vv.getValidate=void 0;const bAt=rS,yfe=kn,hu=Pn,h_=zh,vfe=xu,AN=wt,_At={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=vfe.resolveRef.call(u,l,i,n);if(c===void 0)throw new bAt.default(r.opts.uriResolver,i,n);if(c instanceof vfe.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return eD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return eD(e,(0,hu._)`${p}.validate`,l,l.$async)}function d(p){const m=kke(e,p);eD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,hu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:hu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function kke(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,hu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Vv.getValidate=kke;function eD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?h_.default.this:hu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,hu._)`await ${(0,yfe.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,hu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,yfe.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,hu._)`${p}.errors`;i.assign(h_.default.vErrors,(0,hu._)`${h_.default.vErrors} === null ? ${m} : ${h_.default.vErrors}.concat(${m})`),i.assign(h_.default.errors,(0,hu._)`${h_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=AN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,hu._)`${p}.evaluated.props`);s.props=AN.mergeEvaluated.props(i,y,s.props,hu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=AN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,hu._)`${p}.evaluated.items`);s.items=AN.mergeEvaluated.items(i,y,s.items,hu.Name)}}}Vv.callRef=eD;Vv.default=_At;Object.defineProperty(nQ,"__esModule",{value:!0});const wAt=rQ,EAt=Vv,xAt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",wAt.default,EAt.default];nQ.default=xAt;var iQ={},sQ={};Object.defineProperty(sQ,"__esModule",{value:!0});const r$=Pn,hg=r$.operators,i$={maximum:{okStr:"<=",ok:hg.LTE,fail:hg.GT},minimum:{okStr:">=",ok:hg.GTE,fail:hg.LT},exclusiveMaximum:{okStr:"<",ok:hg.LT,fail:hg.GTE},exclusiveMinimum:{okStr:">",ok:hg.GT,fail:hg.LTE}},SAt={message:({keyword:e,schemaCode:t})=>(0,r$.str)`must be ${i$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,r$._)`{comparison: ${i$[e].okStr}, limit: ${t}}`},TAt={keyword:Object.keys(i$),type:"number",schemaType:"number",$data:!0,error:SAt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,r$._)`${n} ${i$[t].fail} ${r} || isNaN(${n})`)}};sQ.default=TAt;var oQ={};Object.defineProperty(oQ,"__esModule",{value:!0});const uC=Pn,AAt={message:({schemaCode:e})=>(0,uC.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,uC._)`{multipleOf: ${e}}`},CAt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:AAt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,uC._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,uC._)`${o} !== parseInt(${o})`;e.fail$data((0,uC._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};oQ.default=CAt;var aQ={},uQ={};Object.defineProperty(uQ,"__esModule",{value:!0});function Rke(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}uQ.default=Rke;Rke.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(aQ,"__esModule",{value:!0});const P1=Pn,IAt=wt,kAt=uQ,RAt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,P1.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,P1._)`{limit: ${e}}`},NAt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:RAt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?P1.operators.GT:P1.operators.LT,o=i.opts.unicode===!1?(0,P1._)`${n}.length`:(0,P1._)`${(0,IAt.useFunc)(e.gen,kAt.default)}(${n})`;e.fail$data((0,P1._)`${o} ${s} ${r}`)}};aQ.default=NAt;var lQ={};Object.defineProperty(lQ,"__esModule",{value:!0});const PAt=kn,s$=Pn,DAt={message:({schemaCode:e})=>(0,s$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,s$._)`{pattern: ${e}}`},OAt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:DAt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,s$._)`(new RegExp(${i}, ${o}))`:(0,PAt.usePattern)(e,r);e.fail$data((0,s$._)`!${a}.test(${t})`)}};lQ.default=OAt;var cQ={};Object.defineProperty(cQ,"__esModule",{value:!0});const lC=Pn,$At={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,lC.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,lC._)`{limit: ${e}}`},MAt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:$At,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?lC.operators.GT:lC.operators.LT;e.fail$data((0,lC._)`Object.keys(${n}).length ${i} ${r}`)}};cQ.default=MAt;var fQ={};Object.defineProperty(fQ,"__esModule",{value:!0});const hT=kn,cC=Pn,LAt=wt,FAt={message:({params:{missingProperty:e}})=>(0,cC.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,cC._)`{missingProperty: ${e}}`},jAt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:FAt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,LAt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(cC.nil,f);else for(const h of n)(0,hT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,hT.checkMissingProp)(e,n,h)),(0,hT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,hT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,hT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,cC.not)(p),()=>{e.error(),t.break()})},cC.nil)}}};fQ.default=jAt;var dQ={};Object.defineProperty(dQ,"__esModule",{value:!0});const fC=Pn,BAt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,fC.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,fC._)`{limit: ${e}}`},UAt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:BAt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?fC.operators.GT:fC.operators.LT;e.fail$data((0,fC._)`${n}.length ${i} ${r}`)}};dQ.default=UAt;var hQ={},hk={};Object.defineProperty(hk,"__esModule",{value:!0});const Nke=cY;Nke.code='require("ajv/dist/runtime/equal").default';hk.default=Nke;Object.defineProperty(hQ,"__esModule",{value:!0});const $j=Es,go=Pn,zAt=wt,VAt=hk,HAt={message:({params:{i:e,j:t}})=>(0,go.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,go._)`{i: ${e}, j: ${t}}`},qAt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:HAt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,$j.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,go._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,go._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,go._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,$j.checkDataTypes)(l,g,a.opts.strictNumbers,$j.DataType.Wrong),v=t.const("indices",(0,go._)`{}`);t.for((0,go._)`;${p}--;`,()=>{t.let(g,(0,go._)`${n}[${p}]`),t.if(y,(0,go._)`continue`),l.length>1&&t.if((0,go._)`typeof ${g} == "string"`,(0,go._)`${g} += "_"`),t.if((0,go._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,go._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,go._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,zAt.useFunc)(t,VAt.default),y=t.name("outer");t.label(y).for((0,go._)`;${p}--;`,()=>t.for((0,go._)`${m} = ${p}; ${m}--;`,()=>t.if((0,go._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};hQ.default=qAt;var pQ={};Object.defineProperty(pQ,"__esModule",{value:!0});const $z=Pn,WAt=wt,GAt=hk,YAt={message:"must be equal to constant",params:({schemaCode:e})=>(0,$z._)`{allowedValue: ${e}}`},KAt={keyword:"const",$data:!0,error:YAt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,$z._)`!${(0,WAt.useFunc)(t,GAt.default)}(${n}, ${i})`):e.fail((0,$z._)`${s} !== ${n}`)}};pQ.default=KAt;var mQ={};Object.defineProperty(mQ,"__esModule",{value:!0});const lA=Pn,XAt=wt,QAt=hk,JAt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,lA._)`{allowedValues: ${e}}`},ZAt={keyword:"enum",schemaType:"array",$data:!0,error:JAt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,XAt.useFunc)(t,QAt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,lA.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,lA._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,lA._)`${l()}(${n}, ${h}[${p}])`:(0,lA._)`${n} === ${m}`}}};mQ.default=ZAt;Object.defineProperty(iQ,"__esModule",{value:!0});const eCt=sQ,tCt=oQ,nCt=aQ,rCt=lQ,iCt=cQ,sCt=fQ,oCt=dQ,aCt=hQ,uCt=pQ,lCt=mQ,cCt=[eCt.default,tCt.default,nCt.default,rCt.default,iCt.default,sCt.default,oCt.default,aCt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},uCt.default,lCt.default];iQ.default=cCt;var gQ={},iS={};Object.defineProperty(iS,"__esModule",{value:!0});iS.validateAdditionalItems=void 0;const D1=Pn,Mz=wt,fCt={message:({params:{len:e}})=>(0,D1.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,D1._)`{limit: ${e}}`},dCt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:fCt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,Mz.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}Pke(e,r)}};function Pke(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,D1._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,D1._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,Mz.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,D1._)`${a} <= ${t.length}`);n.if((0,D1.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:Mz.Type.Num},l),o.allErrors||n.if((0,D1.not)(l),()=>n.break())})}}iS.validateAdditionalItems=Pke;iS.default=dCt;var yQ={},sS={};Object.defineProperty(sS,"__esModule",{value:!0});sS.validateTuple=void 0;const bfe=Pn,tD=wt,hCt=kn,pCt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return Dke(e,"additionalItems",t);n.items=!0,!(0,tD.alwaysValidSchema)(n,t)&&e.ok((0,hCt.validateArray)(e))}};function Dke(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=tD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,bfe._)`${s}.length`);n.forEach((f,d)=>{(0,tD.alwaysValidSchema)(a,f)||(r.if((0,bfe._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,tD.checkStrictMode)(a,g,d.strictTuples)}}}sS.validateTuple=Dke;sS.default=pCt;Object.defineProperty(yQ,"__esModule",{value:!0});const mCt=sS,gCt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,mCt.validateTuple)(e,"items")};yQ.default=gCt;var vQ={};Object.defineProperty(vQ,"__esModule",{value:!0});const _fe=Pn,yCt=wt,vCt=kn,bCt=iS,_Ct={message:({params:{len:e}})=>(0,_fe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,_fe._)`{limit: ${e}}`},wCt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:_Ct,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,yCt.alwaysValidSchema)(r,t)&&(i?(0,bCt.validateAdditionalItems)(e,i):e.ok((0,vCt.validateArray)(e)))}};vQ.default=wCt;var bQ={};Object.defineProperty(bQ,"__esModule",{value:!0});const nc=Pn,CN=wt,ECt={message:({params:{min:e,max:t}})=>t===void 0?(0,nc.str)`must contain at least ${e} valid item(s)`:(0,nc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,nc._)`{minContains: ${e}}`:(0,nc._)`{minContains: ${e}, maxContains: ${t}}`},xCt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:ECt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,nc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,CN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,CN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,CN.alwaysValidSchema)(s,n)){let m=(0,nc._)`${c} >= ${o}`;a!==void 0&&(m=(0,nc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,nc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:CN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,nc._)`${m}++`),a===void 0?t.if((0,nc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,nc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,nc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};bQ.default=xCt;var Oke={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Pn,n=wt,r=kn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(Oke);var _Q={};Object.defineProperty(_Q,"__esModule",{value:!0});const $ke=Pn,SCt=wt,TCt={message:"property name must be valid",params:({params:e})=>(0,$ke._)`{propertyName: ${e.propertyName}}`},ACt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:TCt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,SCt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,$ke.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};_Q.default=ACt;var O6={};Object.defineProperty(O6,"__esModule",{value:!0});const IN=kn,Jc=Pn,CCt=zh,kN=wt,ICt={message:"must NOT have additional properties",params:({params:e})=>(0,Jc._)`{additionalProperty: ${e.additionalProperty}}`},kCt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:ICt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,kN.alwaysValidSchema)(o,n))return;const l=(0,IN.allSchemaProperties)(r.properties),c=(0,IN.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Jc._)`${s} === ${CCt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,kN.schemaRefOrVal)(o,r.properties,"properties");y=(0,IN.isOwnProperty)(t,v,g)}else l.length?y=(0,Jc.or)(...l.map(v=>(0,Jc._)`${g} === ${v}`)):y=Jc.nil;return c.length&&(y=(0,Jc.or)(y,...c.map(v=>(0,Jc._)`${(0,IN.usePattern)(e,v)}.test(${g})`))),(0,Jc.not)(y)}function h(g){t.code((0,Jc._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,kN.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Jc.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Jc.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:kN.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};O6.default=kCt;var wQ={};Object.defineProperty(wQ,"__esModule",{value:!0});const RCt=Rf,wfe=kn,Mj=wt,Efe=O6,NCt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Efe.default.code(new RCt.KeywordCxt(s,Efe.default,"additionalProperties"));const o=(0,wfe.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=Mj.mergeEvaluated.props(t,(0,Mj.toHash)(o),s.props));const a=o.filter(f=>!(0,Mj.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,wfe.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};wQ.default=NCt;var EQ={};Object.defineProperty(EQ,"__esModule",{value:!0});const xfe=kn,RN=Pn,Sfe=wt,Tfe=wt,PCt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,xfe.allSchemaProperties)(n),u=a.filter(m=>(0,Sfe.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof RN.Name)&&(s.props=(0,Tfe.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Sfe.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,RN._)`${(0,xfe.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Tfe.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,RN._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,RN.not)(c),()=>t.break())})})}}};EQ.default=PCt;var xQ={};Object.defineProperty(xQ,"__esModule",{value:!0});const DCt=wt,OCt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,DCt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};xQ.default=OCt;var SQ={};Object.defineProperty(SQ,"__esModule",{value:!0});const $Ct=kn,MCt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:$Ct.validateUnion,error:{message:"must match a schema in anyOf"}};SQ.default=MCt;var TQ={};Object.defineProperty(TQ,"__esModule",{value:!0});const nD=Pn,LCt=wt,FCt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,nD._)`{passingSchemas: ${e.passing}}`},jCt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:FCt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,LCt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,nD._)`${u} && ${o}`).assign(o,!1).assign(a,(0,nD._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,nD.Name)})})}}};TQ.default=jCt;var AQ={};Object.defineProperty(AQ,"__esModule",{value:!0});const BCt=wt,UCt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,BCt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};AQ.default=UCt;var CQ={};Object.defineProperty(CQ,"__esModule",{value:!0});const o$=Pn,Mke=wt,zCt={message:({params:e})=>(0,o$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,o$._)`{failingKeyword: ${e.ifClause}}`},VCt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:zCt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,Mke.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Afe(r,"then"),s=Afe(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,o$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,o$._)`${c}`):e.setParams({ifClause:c})}}}};function Afe(e,t){const n=e.schema[t];return n!==void 0&&!(0,Mke.alwaysValidSchema)(e,n)}CQ.default=VCt;var IQ={};Object.defineProperty(IQ,"__esModule",{value:!0});const HCt=wt,qCt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,HCt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};IQ.default=qCt;Object.defineProperty(gQ,"__esModule",{value:!0});const WCt=iS,GCt=yQ,YCt=sS,KCt=vQ,XCt=bQ,QCt=Oke,JCt=_Q,ZCt=O6,e2t=wQ,t2t=EQ,n2t=xQ,r2t=SQ,i2t=TQ,s2t=AQ,o2t=CQ,a2t=IQ;function u2t(e=!1){const t=[n2t.default,r2t.default,i2t.default,s2t.default,o2t.default,a2t.default,JCt.default,ZCt.default,QCt.default,e2t.default,t2t.default];return e?t.push(GCt.default,KCt.default):t.push(WCt.default,YCt.default),t.push(XCt.default),t}gQ.default=u2t;var kQ={},RQ={};Object.defineProperty(RQ,"__esModule",{value:!0});const Zi=Pn,l2t={message:({schemaCode:e})=>(0,Zi.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Zi._)`{format: ${e}}`},c2t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:l2t,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,Zi._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,Zi._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,Zi._)`${m}.type || "string"`).assign(y,(0,Zi._)`${m}.validate`),()=>n.assign(g,(0,Zi._)`"string"`).assign(y,m)),e.fail$data((0,Zi.or)(v(),b()));function v(){return u.strictSchema===!1?Zi.nil:(0,Zi._)`${o} && !${y}`}function b(){const w=c.$async?(0,Zi._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,Zi._)`${y}(${r})`,E=(0,Zi._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,Zi._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const S=E instanceof RegExp?(0,Zi.regexpCode)(E):u.code.formats?(0,Zi._)`${u.code.formats}${(0,Zi.getProperty)(s)}`:void 0,T=n.scopeValue("formats",{key:s,ref:E,code:S});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,Zi._)`${T}.validate`]:["string",E,T]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,Zi._)`await ${y}(${r})`}return typeof g=="function"?(0,Zi._)`${y}(${r})`:(0,Zi._)`${y}.test(${r})`}}}};RQ.default=c2t;Object.defineProperty(kQ,"__esModule",{value:!0});const f2t=RQ,d2t=[f2t.default];kQ.default=d2t;var LE={};Object.defineProperty(LE,"__esModule",{value:!0});LE.contentVocabulary=LE.metadataVocabulary=void 0;LE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];LE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(tQ,"__esModule",{value:!0});const h2t=nQ,p2t=iQ,m2t=gQ,g2t=kQ,Cfe=LE,y2t=[h2t.default,p2t.default,(0,m2t.default)(),g2t.default,Cfe.metadataVocabulary,Cfe.contentVocabulary];tQ.default=y2t;var NQ={},$6={};Object.defineProperty($6,"__esModule",{value:!0});$6.DiscrError=void 0;var Ife;(function(e){e.Tag="tag",e.Mapping="mapping"})(Ife||($6.DiscrError=Ife={}));Object.defineProperty(NQ,"__esModule",{value:!0});const P_=Pn,Lz=$6,kfe=xu,v2t=rS,b2t=wt,_2t={message:({params:{discrError:e,tagName:t}})=>e===Lz.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,P_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},w2t={keyword:"discriminator",type:"object",schemaType:"object",error:_2t,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,P_._)`${n}${(0,P_.getProperty)(a)}`);t.if((0,P_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:Lz.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,P_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:Lz.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,P_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,b2t.schemaHasRulesButRef)(E,s.self.RULES)){const T=E.$ref;if(E=kfe.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,T),E instanceof kfe.SchemaEnv&&(E=E.schema),E===void 0)throw new v2t.default(s.opts.uriResolver,s.baseId,T)}const S=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(S,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const S of w.enum)b(S,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};NQ.default=w2t;const E2t="http://json-schema.org/draft-07/schema#",x2t="http://json-schema.org/draft-07/schema#",S2t="Core schema meta-schema",T2t={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},A2t=["object","boolean"],C2t={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},I2t={$schema:E2t,$id:x2t,title:S2t,definitions:T2t,type:A2t,properties:C2t,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=XIe,r=tQ,i=NQ,s=I2t,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Rf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Pn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=dk;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=rS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(kz,kz.exports);var k2t=kz.exports;const Lke=Ul(k2t),R2t="#/definitions/StudyConfig",N2t="http://json-schema.org/draft-07/schema#",P2t={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js {   "type": "markdown",   "path": "<study-name>/assets/question.md",   "response": [     {       "id": "response1",       "prompt": "What is 2 + 2?",       "required": true,       "location": "belowStimulus",       "type": "numerical"     }   ]   "correctAnswer": [{     "id": "response1",     "answer": 4   }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": {     "instructionLocation": "sidebar",     "nextButtonLocation": "sidebar",     "path": "<study-name>/assets/my-image.jpg",     "response": [         {             "id": "my-image-id",             "options": [                 {                     "label": "Europe",                     "value": "Europe"                 },                 {                     "label": "Japan",                     "value": "Japan"                 },                 {                     "label": "USA",                     "value": "USA"                 }             ],             "prompt": "Your Selected Answer:",             "type": "dropdown"         }     ],     "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": {     "baseComponent": "my-image-component",     "description": "Choosing section with largest GDP",     "instruction": "Which region has the largest GDP?" }, "q2": {     "baseComponent": "my-image-component",     "description": "Choosing section with lowest GDP",     "instruction": "Which region has the lowest GDP?" }, "q3": {     "baseComponent": "my-image-component",     "description": "Choosing section with highest exports of Wheat",     "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js {  "id": "q7",  "prompt": "Checkbox example (not required)",  "required": false,  "location": "aboveStimulus",  "type": "checkbox",  "options": [      {          "label": "Option 1",          "value": "opt-1"      },      {          "label": "Option 2",          "value": "opt-2"      },      {          "label": "Option 3",          "value": "opt-3"      }  ] }',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js {  "order": "random",  "components": [    "component1",    "component2",    "component3"  ] }\n\nThis snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [  ["component2", "component3", "component1"],  ["component1", "component3", "component2"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2", "component3"],  ["component2", "component3", "component1"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2"],  ["component2", "component3"],  ["component3", "component1"],  ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "check": "block",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "firstLocation": 2,      "spacing": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js {  "id": "q-color",  "prompt": "What is your favorite color?",  "required": true,  "location": "aboveStimulus",  "type": "dropdown",  "placeholder": "Please choose your favorite color",  "options": [      {          "label": "Red",          "value": "red"      },      {          "label": "Blue",          "value": "blue"      }  ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js {   "type": "image",   "path": "<study-name>/assets/image.jpg",   "style": {     "maxWidth": "50%"   } }',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "responses",      "to": "end"    }  ]  ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "response",      "responseId": "attentionCheckResponse",      "value": "the right answer",      "to": "end"    }  ]  ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likerts Scale:

\`\`\`js {    "id": "q-satisfaction",    "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).",    "required": true,    "location": "aboveStimulus",    "type": "likert",    "leftLabel": "Not Enjoyable",    "rightLabel": "Very Enjoyable",    "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js {  "id": "q-name",  "prompt": "What is your first name?",  "required": true,  "location": "aboveStimulus",  "type": "longText",  "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js {   "type": "markdown",   "path": "<study-name>/assets/help.md",   "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js {  "id": "q-numerical",  "prompt": "Numerical example",  "required": true,  "location": "aboveStimulus",  "type": "numerical",  "placeholder": "Enter your age, range from 0 - 120",  "max": 120,  "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js {  "type": "questionnaire",  "response": [    {      "id": "gender",      "prompt": "Gender:",      "required": true,      "location": "belowStimulus",      "type": "checkbox",      "options": [        {          "label": "Man",          "value": "Man"        },        {          "label": "Woman",          "value": "Woman"        },        {          "label": "Genderqueer",          "value": "Genderqueer"        },        {          "label": "Third-gender",          "value": "Third-gender"        },        ... etc.      ]    }  ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "spacing": "random",      "numInterruptions": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } ```\n\nThe resulting sequence array could be:\n\n```js [  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6],  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6],  ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6],  ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types. ```ts {  parameters: T;  setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ``` parameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js {  type: 'react-component';  path: 'my_study/CoolComponent.tsx';  parameters: {    name: 'Zach';    age: 26;  } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) {    // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0-beta13/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0-beta13/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "repeatedComponent",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js {  "id": "q-short-text",  "prompt": "Short text example",  "required": true,  "location": "aboveStimulus",  "type": "shortText",  "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js {  "id": "q-slider",  "prompt": "How are you feeling?",  "location": "aboveStimulus",  "required": true,  "type": "slider",  "options": [      {          "label": "Bad",          "value": 0      },      {          "label": "OK",          "value": 50      },      {          "label": "Good",          "value": 100      }  ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0-beta13/src/parser/StudyConfigSchema.json",  "studyMetadata": {    ...  },  "uiConfig": {    ...  },  "components": {    ...  },  "sequence": {    ...  } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : {  "title": "My New Study",  "version": "pilot",  "authors": [    "Jane Doe",    "John Doe"  ],  "date": "2024-04-01",  "description": "This study is meant to test your patience.",  "organizations": [    "The reVISit Team",    "The Other Team"  ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration ```js uiConfig:{  "contactEmail": "contact@revisit.dev",  "helpTextPath": "<study-name>/assets/help.md",  "logoPath": "<study-name>/assets/logo.jpg",  "withProgressBar": true,  "autoDownloadStudy": true  "autoDownloadTime": 5000,  "studyEndMsg": "Thank you for completing this study. You\'re the best!",  "sidebar": true,  "windowEventDebounceTime": 500,  "urlParticipantIdParam": "PROLIFIC_ID",  "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js {  "type": "website",  "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js {  "type": "website",  "path": "<study-name>/website.html",  "parameters": {    "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]  }  "response": [    {      "id": "barChart",      "prompt": "Your selected answer:",      "required": true,      "location": "belowStimulus",      "type": "iframe"    }  ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script>  Revisit.onDataReceive((data) => {    const barData = data[\'barData\'];    ...  });\n\n // Call out that \'barChart\' needs to match ID in \'response\' object  Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js  const trrack = initializeTrrack({      initialState,      registry  });\n\n ...  Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},D2t={$ref:R2t,$schema:N2t,definitions:P2t},O2t="#/definitions/GlobalConfig",$2t="http://json-schema.org/draft-07/schema#",M2t={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},adminUsers:{description:"A required property listing out the emails of users who require admin access.",items:{type:"string"},type:"array"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},L2t={$ref:O2t,$schema:$2t,definitions:M2t},Fke=new Lke;Fke.addSchema(L2t);const Rfe=Fke.getSchema("#/definitions/GlobalConfig"),jke=new Lke;jke.addSchema(D2t);const Lj=jke.getSchema("#/definitions/StudyConfig");function F2t(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function M6(e){return e.baseComponent!==void 0}function j2t(e){const t=VX.parse(e),n=Rfe(t),r=F2t(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Rfe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function Bke(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):Bke(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function B2t(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;M6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=uEe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return Bke(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function U2t(e){let t=!1,n;try{n=VX.parse(e),t=Lj(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=B2t(n);r=[...Lj.errors||[],...s],i=o}else r=Lj.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function Uke(){const e=Hm(),{setAlertModal:t}=Mh(),n=Lh();N.useEffect(()=>{const i=(new URLSearchParams(window.location.search).get("admin")||"f")==="t"},[e,t,n])}const Nfe=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta"],Pfe=["participantId","trialId","trialOrder","responseId"];function PQ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function z2t(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(mm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=t.components[o],l=M6(u)&&u.baseComponent&&t.baseComponents?uY({},t.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(n.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),n.includes("percentComplete")&&(p.percentComplete=r),n.includes("description")&&(p.description=l.description),n.includes("instruction")&&(p.instruction=l.instruction),n.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),n.includes("answer")&&(p.answer=h),n.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return n.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),n.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),n.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),n.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),n.includes("duration")&&(p.duration=c),n.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}function V2t({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=N.useState([...Nfe].filter(c=>c!=="meta")),a=N.useMemo(()=>{const c=[...Pfe,...s],f=c,d=i.map(h=>z2t(h,r,c)).flat().sort((h,p)=>h!==p?h.participantId.localeCompare(p.participantId):h.trialOrder-p.trialOrder);return{header:f,rows:d}},[i,s,r]),u=N.useCallback(()=>{const c=[a.header.join(","),...a.rows.map(f=>a.header.map(d=>f[d]).join(","))].join(`
`);PQ(c,n)},[n,a.header,a.rows]),l=N.useMemo(()=>{const c=a.rows.length>5?5:a.rows.length,f=c===1?"":"s";return`This is a preview of the first ${f?c:""} row${f} of the CSV. The full CSV contains ${a.rows.length} row${f}.`},[a.rows]);return _.jsxs(vs,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(fG,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Nfe],value:s,onChange:c=>o(c),label:"Included optional columns:",leftSection:_.jsx(JYe,{}),variant:"filled"}),_.jsx(If,{h:"md"}),_.jsx(Ee,{mih:300,style:{width:"100%",overflow:"scroll"},children:_.jsxs(An,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(An.Thead,{children:_.jsx(An.Tr,{children:a.header.map(c=>_.jsx(An.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(c)?200:void 0},children:_.jsxs(Jt,{direction:"row",justify:"space-between",align:"center",children:[c,!Pfe.includes(c)&&_.jsx(N0,{onClick:()=>o(s.filter(f=>f!==c)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(m_e,{size:16})})]})},c))})}),_.jsx(An.Tbody,{children:a.rows.slice(0,5).map((c,f)=>_.jsx(An.Tr,{children:a.header.map(d=>_.jsx(An.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(d)?"normal":"nowrap"},children:c[d]},`${f}-${d}`))},f))})]})}),_.jsx(If,{h:"sm"}),_.jsx(Jt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(ot,{children:l})}),_.jsx(If,{h:"md"}),_.jsxs(Os,{justify:"right",children:[_.jsx(Rn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(Rn,{leftSection:_.jsx(h_e,{}),onClick:()=>u(),"data-autofocus":!0,children:"Download"})]})]})}function H2t(){const e=gm(),{storageEngine:t}=wa(),{answers:n}=Lc(m=>m),[r,i]=N.useState(!1);N.useEffect(()=>{const m=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(m))},1e3)},[]),Uke();const[s,o]=N.useState(),[a,u]=N.useState(""),l=e.studyMetadata.title.replace(" ","_");N.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=N.useCallback(async()=>{PQ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=N.useState(Math.floor(d/1e3));return N.useEffect(()=>{if(r){const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(f&&c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)}return()=>{}},[f,r,h,c]),_.jsx(dm,{style:{height:"100%"},children:_.jsx(Jt,{direction:"column",children:r?_.jsx(ot,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Ga,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(ot,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(If,{h:"lg"}),_.jsx(dm,{children:_.jsx(jm,{color:"blue"})})]})})})}function q2t(){var d;const e=gm(),t=Hm(),n=qm()||"Notfound",r=e.components[n],i=lY();Uke();const{storageEngine:s}=wa(),o=Lh(),{setAlertModal:a}=Mh();if(N.useEffect(()=>{s==null||s.getEngine()},[a,s,o]),n==="end")return _.jsx(H2t,{});if(n==="Notfound")return _.jsx(Rv,{email:e.uiConfig.contactEmail});const u=M6(r)&&e.baseComponents?uY({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return _.jsxs(_.Fragment,{children:[c==="aboveStimulus"&&_.jsx(Ga,{text:l}),_.jsx(IO,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&_.jsx(Xxt,{currentConfig:u}),u.type==="website"&&_.jsx(tst,{currentConfig:u}),u.type==="image"&&_.jsx(rst,{currentConfig:u}),u.type==="react-component"&&_.jsx(Kxt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&_.jsx(Ga,{text:l}),_.jsx(IO,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function Fz(e){const[t]=DG();return _.jsx(PG,{...e,to:{pathname:e.to,search:t.toString()}})}function zke(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=zke(o,t,n,r),r.includes(o.orderPath))break}return i}function Vke(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=Vke(s,r)}}),n}function W2t(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function G2t({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s,participantView:o}){const a=UI(),u=Vm(),l=Hm(),c=gm(),[f,{close:d,open:h}]=yw(!1),p=e in c.components&&c.components[e],m=s&&s.components.slice(r).includes(e)?zke(n,e,r,s.orderPath):-1,g=o?l===m:l===`reviewer-${e}`;return _.jsxs(Qr,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:f,offset:20,children:[_.jsx(Qr.Target,{children:_.jsx(Ee,{onMouseEnter:h,onMouseLeave:d,children:_.jsx(uL,{active:g,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(Ee,{children:[i&&_.jsx(VYe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),g?_.jsx(ot,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(ot,{size:"sm",display:"inline",children:e})]}),onClick:()=>u(o?`/${a}/${m}`:`/${a}/reviewer-${e}`),disabled:t})})}),p&&(p.description||p.meta)&&_.jsx(Qr.Dropdown,{onMouseLeave:d,children:_.jsx(ot,{size:"sm",children:_.jsxs(Ee,{children:[p.description&&_.jsxs(Ee,{children:[_.jsx(ot,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(ot,{fw:400,component:"span",children:p.description})]}),p.meta&&_.jsxs(ot,{children:[_.jsx(ot,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(ot,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})})]})}function jz({configSequence:e,fullSequence:t,participantSequence:n,participantView:r}){var s;let i=lv(e.components);return n&&r&&(i=W2t(lv(e.components),lv(n.components))),r||(i=[...((s=e.interruptions)==null?void 0:s.flatMap(o=>o.components))||[],...i]),_.jsx(_.Fragment,{children:i.map((o,a)=>{if(typeof o=="string")return _.jsx(G2t,{step:o,disabled:r&&(n==null?void 0:n.components[a])!==o,fullSequence:t,startIndex:a,interruption:e.interruptions&&e.interruptions.findIndex(f=>f.components.includes(o))>-1||!1,subSequence:n,participantView:r},a);const u=n==null?void 0:n.components.find(f=>typeof f!="string"&&f.orderPath===o.orderPath),l=u?mm(u).length-Vke(o,u):0,c=mm(o);return _.jsx(uL,{label:_.jsxs(Ee,{style:{opacity:l>0?1:.5},children:[_.jsx(ot,{size:"sm",display:"inline",children:o.order}),o.order==="random"||o.order==="latinSquare"?_.jsx(UYe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(Gp,{ml:5,variant:"light",children:[l,"/",c.length]}),r&&o.interruptions&&_.jsx(Gp,{ml:5,color:"orange",variant:"light",children:(u==null?void 0:u.components.filter(f=>{var d;return typeof f=="string"&&((d=o.interruptions)==null?void 0:d.flatMap(h=>h.components).includes(f))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(Ee,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(jz,{configSequence:o,participantSequence:u,fullSequence:t,participantView:r})})},a)})})}function Hke(e,t,n,r){e==null||e.nextParticipant(t,n).then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function qke(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>qke(n,`${t}-${r}`))}}function Dfe({text:e}){return _.jsx(sa,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(QYe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function Y2t(){const{showStudyBrowser:e,sequence:t,metadata:n}=Lc(h=>h),{toggleStudyBrowser:r}=Mh(),i=qm(),s=gm(),o=Lh(),a=UI(),u=a_e(`/${a}`),{storageEngine:l}=wa(),c=N.useMemo(()=>{let h=lv(s.sequence);return h=qke(h,"root"),h.components.push("end"),h},[s.sequence]),[f,d]=N.useState("participant");return e||i==="end"&&s.uiConfig.autoDownloadStudy?_.jsxs(ci.Aside,{p:"0",children:[_.jsx(ci.Section,{children:_.jsxs(Jt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(ot,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(Rn,{variant:"light",leftSection:_.jsx($G,{size:14}),onClick:()=>Hke(l,s,n,u),size:"xs",disabled:f==="allTrials",children:"Next Participant"}),_.jsx(_y,{onClick:()=>o(r()),mt:1})]})}),_.jsx(ci.Section,{grow:!0,component:yb,p:"xs",pt:0,children:_.jsxs(es,{value:f,onChange:d,children:[_.jsx(Ee,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(es.List,{grow:!0,children:[_.jsxs(es.Tab,{value:"participant",children:["Participant View",_.jsx(Dfe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(es.Tab,{value:"allTrials",children:["All Trials View",_.jsx(Dfe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(es.Panel,{value:"participant",children:_.jsx(jz,{configSequence:c,participantSequence:t,fullSequence:t,participantView:!0})}),_.jsx(es.Panel,{value:"allTrials",children:_.jsx(jz,{configSequence:c,participantSequence:t,fullSequence:t,participantView:!1})})]})})]}):null}var Ofe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wke=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},K2t=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},DQ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Wke(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):K2t(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new X2t;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class X2t extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Q2t=function(e){const t=Wke(e);return DQ.encodeByteArray(t,!0)},a$=function(e){return Q2t(e).replace(/\./g,"")},Gke=function(e){try{return DQ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2t=()=>Yke().__FIREBASE_DEFAULTS__,Z2t=()=>{if(typeof process>"u"||typeof Ofe>"u")return;const e=Ofe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},eIt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Gke(e[1]);return t&&JSON.parse(t)},L6=()=>{try{return J2t()||Z2t()||eIt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Kke=e=>{var t,n;return(n=(t=L6())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},tIt=e=>{const t=Kke(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Xke=()=>{var e;return(e=L6())===null||e===void 0?void 0:e.config},Qke=e=>{var t;return(t=L6())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nIt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a$(JSON.stringify(n)),a$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rIt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Do())}function iIt(){var e;const t=(e=L6())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sIt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function oIt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aIt(){const e=Do();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function uIt(){return!iIt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OQ(){try{return typeof indexedDB=="object"}catch{return!1}}function lIt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cIt="FirebaseError";class Vh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=cIt,Object.setPrototypeOf(this,Vh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oS.prototype.create)}}class oS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?fIt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Vh(i,a,r)}}function fIt(e,t){return e.replace(dIt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const dIt=/\{\$([^}]+)}/g;function hIt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function O2(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if($fe(s)&&$fe(o)){if(!O2(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $fe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function pIt(e,t){const n=new mIt(e,t);return n.subscribe.bind(n)}class mIt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gIt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Fj),i.error===void 0&&(i.error=Fj),i.complete===void 0&&(i.complete=Fj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gIt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Fj(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yIt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vIt=1e3,bIt=2,_It=4*60*60*1e3,wIt=.5;function EIt(e,t=vIt,n=bIt){const r=t*Math.pow(n,e),i=Math.round(wIt*r*(Math.random()-.5)*2);return Math.min(_It,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(e){return e&&e._delegate?e._delegate:e}class _h{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xIt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new D2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(TIt(t))try{this.getOrInitializeService({instanceIdentifier:x1})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=x1){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=x1){return this.instances.has(t)}getOptions(t=x1){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SIt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=x1){return this.component?this.component.multipleInstances?t:x1:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SIt(e){return e===x1?void 0:e}function TIt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AIt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new xIt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Wn||(Wn={}));const CIt={debug:Wn.DEBUG,verbose:Wn.VERBOSE,info:Wn.INFO,warn:Wn.WARN,error:Wn.ERROR,silent:Wn.SILENT},IIt=Wn.INFO,kIt={[Wn.DEBUG]:"log",[Wn.VERBOSE]:"log",[Wn.INFO]:"info",[Wn.WARN]:"warn",[Wn.ERROR]:"error"},RIt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=kIt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class F6{constructor(t){this.name=t,this._logLevel=IIt,this._logHandler=RIt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Wn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?CIt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Wn.DEBUG,...t),this._logHandler(this,Wn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Wn.VERBOSE,...t),this._logHandler(this,Wn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Wn.INFO,...t),this._logHandler(this,Wn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Wn.WARN,...t),this._logHandler(this,Wn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Wn.ERROR,...t),this._logHandler(this,Wn.ERROR,...t)}}const NIt=(e,t)=>t.some(n=>e instanceof n);let Mfe,Lfe;function PIt(){return Mfe||(Mfe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DIt(){return Lfe||(Lfe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jke=new WeakMap,Bz=new WeakMap,Zke=new WeakMap,jj=new WeakMap,$Q=new WeakMap;function OIt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(y0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Jke.set(n,e)}).catch(()=>{}),$Q.set(t,e),t}function $It(e){if(Bz.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Bz.set(e,t)}let Uz={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Bz.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Zke.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function MIt(e){Uz=e(Uz)}function LIt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Bj(this),t,...n);return Zke.set(r,t.sort?t.sort():[t]),y0(r)}:DIt().includes(e)?function(...t){return e.apply(Bj(this),t),y0(Jke.get(this))}:function(...t){return y0(e.apply(Bj(this),t))}}function FIt(e){return typeof e=="function"?LIt(e):(e instanceof IDBTransaction&&$It(e),NIt(e,PIt())?new Proxy(e,Uz):e)}function y0(e){if(e instanceof IDBRequest)return OIt(e);if(jj.has(e))return jj.get(e);const t=FIt(e);return t!==e&&(jj.set(e,t),$Q.set(t,e)),t}const Bj=e=>$Q.get(e);function jIt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=y0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(y0(o.result),u.oldVersion,u.newVersion,y0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const BIt=["get","getKey","getAll","getAllKeys","count"],UIt=["put","add","delete","clear"],Uj=new Map;function Ffe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Uj.get(t))return Uj.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=UIt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BIt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Uj.set(t,s),s}MIt(e=>({...e,get:(t,n,r)=>Ffe(t,n)||e.get(t,n,r),has:(t,n)=>!!Ffe(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zIt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VIt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VIt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const zz="@firebase/app",jfe="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new F6("@firebase/app"),HIt="@firebase/app-compat",qIt="@firebase/analytics-compat",WIt="@firebase/analytics",GIt="@firebase/app-check-compat",YIt="@firebase/app-check",KIt="@firebase/auth",XIt="@firebase/auth-compat",QIt="@firebase/database",JIt="@firebase/database-compat",ZIt="@firebase/functions",ekt="@firebase/functions-compat",tkt="@firebase/installations",nkt="@firebase/installations-compat",rkt="@firebase/messaging",ikt="@firebase/messaging-compat",skt="@firebase/performance",okt="@firebase/performance-compat",akt="@firebase/remote-config",ukt="@firebase/remote-config-compat",lkt="@firebase/storage",ckt="@firebase/storage-compat",fkt="@firebase/firestore",dkt="@firebase/vertexai-preview",hkt="@firebase/firestore-compat",pkt="firebase",mkt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz="[DEFAULT]",gkt={[zz]:"fire-core",[HIt]:"fire-core-compat",[WIt]:"fire-analytics",[qIt]:"fire-analytics-compat",[YIt]:"fire-app-check",[GIt]:"fire-app-check-compat",[KIt]:"fire-auth",[XIt]:"fire-auth-compat",[QIt]:"fire-rtdb",[JIt]:"fire-rtdb-compat",[ZIt]:"fire-fn",[ekt]:"fire-fn-compat",[tkt]:"fire-iid",[nkt]:"fire-iid-compat",[rkt]:"fire-fcm",[ikt]:"fire-fcm-compat",[skt]:"fire-perf",[okt]:"fire-perf-compat",[akt]:"fire-rc",[ukt]:"fire-rc-compat",[lkt]:"fire-gcs",[ckt]:"fire-gcs-compat",[fkt]:"fire-fst",[hkt]:"fire-fst-compat",[dkt]:"fire-vertex","fire-js":"fire-js",[pkt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=new Map,ykt=new Map,Hz=new Map;function Bfe(e,t){try{e.container.addComponent(t)}catch(n){Hv.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Im(e){const t=e.name;if(Hz.has(t))return Hv.debug(`There were multiple attempts to register component ${t}.`),!1;Hz.set(t,e);for(const n of u$.values())Bfe(n,e);for(const n of ykt.values())Bfe(n,e);return!0}function aS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function qd(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vkt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},v0=new oS("app","Firebase",vkt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bkt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _h("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw v0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=mkt;function eRe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Vz,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw v0.create("bad-app-name",{appName:String(i)});if(n||(n=Xke()),!n)throw v0.create("no-options");const s=u$.get(i);if(s){if(O2(n,s.options)&&O2(r,s.config))return s;throw v0.create("duplicate-app",{appName:i})}const o=new AIt(i);for(const u of Hz.values())o.addComponent(u);const a=new bkt(n,r,o);return u$.set(i,a),a}function MQ(e=Vz){const t=u$.get(e);if(!t&&e===Vz&&Xke())return eRe();if(!t)throw v0.create("no-app",{appName:e});return t}function Nf(e,t,n){var r;let i=(r=gkt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Hv.warn(a.join(" "));return}Im(new _h(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _kt="firebase-heartbeat-database",wkt=1,$2="firebase-heartbeat-store";let zj=null;function tRe(){return zj||(zj=jIt(_kt,wkt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore($2)}catch(n){console.warn(n)}}}}).catch(e=>{throw v0.create("idb-open",{originalErrorMessage:e.message})})),zj}async function Ekt(e){try{const n=(await tRe()).transaction($2),r=await n.objectStore($2).get(nRe(e));return await n.done,r}catch(t){if(t instanceof Vh)Hv.warn(t.message);else{const n=v0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Hv.warn(n.message)}}}async function Ufe(e,t){try{const r=(await tRe()).transaction($2,"readwrite");await r.objectStore($2).put(t,nRe(e)),await r.done}catch(n){if(n instanceof Vh)Hv.warn(n.message);else{const r=v0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hv.warn(r.message)}}}function nRe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xkt=1024,Skt=30*24*60*60*1e3;class Tkt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ckt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zfe();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Skt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zfe(),{heartbeatsToSend:r,unsentEntries:i}=Akt(this._heartbeatsCache.heartbeats),s=a$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function zfe(){return new Date().toISOString().substring(0,10)}function Akt(e,t=xkt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Vfe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Vfe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ckt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OQ()?lIt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ekt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ufe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ufe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Vfe(e){return a$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ikt(e){Im(new _h("platform-logger",t=>new zIt(t),"PRIVATE")),Im(new _h("heartbeat",t=>new Tkt(t),"PRIVATE")),Nf(zz,jfe,e),Nf(zz,jfe,"esm2017"),Nf("fire-js","")}Ikt("");function rRe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kkt=rRe,iRe=new oS("auth","Firebase",rRe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$=new F6("@firebase/auth");function Rkt(e,...t){l$.logLevel<=Wn.WARN&&l$.warn(`Auth (${kb}): ${e}`,...t)}function rD(e,...t){l$.logLevel<=Wn.ERROR&&l$.error(`Auth (${kb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(e,...t){throw FQ(e,...t)}function Pf(e,...t){return FQ(e,...t)}function LQ(e,t,n){const r=Object.assign(Object.assign({},kkt()),{[t]:n});return new oS("auth","Firebase",r).create(t,{appName:e.name})}function b0(e){return LQ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nkt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&wh(e,"argument-error"),LQ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function FQ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return iRe.create(e,...t)}function rn(e,t,...n){if(!e)throw FQ(t,...n)}function Bp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw rD(t),new Error(t)}function km(e,t){e||Bp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Pkt(){return Hfe()==="http:"||Hfe()==="https:"}function Hfe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dkt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pkt()||sIt()||"connection"in navigator)?navigator.onLine:!0}function Okt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(t,n){this.shortDelay=t,this.longDelay=n,km(n>t,"Short delay should be less than long delay!"),this.isMobile=rIt()||oIt()}get(){return Dkt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jQ(e,t){km(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sRe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mkt=new mk(3e4,6e4);function j6(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function uS(e,t,n,r,i={}){return oRe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=pk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),sRe.fetch()(uRe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function oRe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},$kt),t);try{const i=new Lkt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw NN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw NN(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw NN(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw NN(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw LQ(e,c,l);wh(e,c)}}catch(i){if(i instanceof Vh)throw i;wh(e,"network-request-failed",{message:String(i)})}}async function aRe(e,t,n,r,i={}){const s=await uS(e,t,n,r,i);return"mfaPendingCredential"in s&&wh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function uRe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?jQ(e.config,i):`${e.config.apiScheme}://${i}`}class Lkt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pf(this.auth,"network-request-failed")),Mkt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function NN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fkt(e,t){return uS(e,"POST","/v1/accounts:delete",t)}async function lRe(e,t){return uS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function jkt(e,t=!1){const n=ni(e),r=await n.getIdToken(t),i=BQ(r);rn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:dC(Vj(i.auth_time)),issuedAtTime:dC(Vj(i.iat)),expirationTime:dC(Vj(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Vj(e){return Number(e)*1e3}function BQ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return rD("JWT malformed, contained fewer than 3 sections"),null;try{const i=Gke(n);return i?JSON.parse(i):(rD("Failed to decode base64 JWT payload"),null)}catch(i){return rD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function qfe(e){const t=BQ(e);return rn(t,"internal-error"),rn(typeof t.exp<"u","internal-error"),rn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Vh&&Bkt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Bkt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ukt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dC(this.lastLoginAt),this.creationTime=dC(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await M2(e,lRe(n,{idToken:r}));rn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?cRe(s.providerUserInfo):[],a=Vkt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Wz(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function zkt(e){const t=ni(e);await c$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Vkt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function cRe(e){return e.map(t=>{var{providerId:n}=t,r=xI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hkt(e,t){const n=await oRe(e,{},async()=>{const r=pk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=uRe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",sRe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qkt(e,t){return uS(e,"POST","/v2/accounts:revokeToken",j6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){rn(t.idToken,"internal-error"),rn(typeof t.idToken<"u","internal-error"),rn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):qfe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){rn(t.length!==0,"internal-error");const n=qfe(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(rn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Hkt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Lw;return r&&(rn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(rn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(rn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Lw,this.toJSON())}_performRefresh(){return Bp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(e,t){rn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Up{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=xI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ukt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wz(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await M2(this,this.stsTokenManager.getToken(this.auth,t));return rn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return jkt(this,t)}reload(){return zkt(this)}_assign(t){this!==t&&(rn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Up(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await c$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qd(this.auth.app))return Promise.reject(b0(this.auth));const t=await this.getIdToken();return await M2(this,Fkt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:S,stsTokenManager:T}=n;rn(b&&T,t,"internal-error");const A=Lw.fromJSON(this.name,T);rn(typeof b=="string",t,"internal-error"),pg(f,t.name),pg(d,t.name),rn(typeof w=="boolean",t,"internal-error"),rn(typeof E=="boolean",t,"internal-error"),pg(h,t.name),pg(p,t.name),pg(m,t.name),pg(g,t.name),pg(y,t.name),pg(v,t.name);const C=new Up({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(C.providerData=S.map(I=>Object.assign({},I))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,r=!1){const i=new Lw;i.updateFromServerResponse(n);const s=new Up({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await c$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];rn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?cRe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Lw;a.updateFromIdToken(r);const u=new Up({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Wz(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wfe=new Map;function zp(e){km(e instanceof Function,"Expected a class definition");let t=Wfe.get(e);return t?(km(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Wfe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fRe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}fRe.type="NONE";const Gfe=fRe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(e,t,n){return`firebase:${e}:${t}:${n}`}class Fw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=iD(this.userKey,i.apiKey,s),this.fullPersistenceKey=iD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Up._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Fw(zp(Gfe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||zp(Gfe);const o=iD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Up._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Fw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Fw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yfe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pRe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dRe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gRe(t))return"Blackberry";if(yRe(t))return"Webos";if(UQ(t))return"Safari";if((t.includes("chrome/")||hRe(t))&&!t.includes("edge/"))return"Chrome";if(mRe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dRe(e=Do()){return/firefox\//i.test(e)}function UQ(e=Do()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hRe(e=Do()){return/crios\//i.test(e)}function pRe(e=Do()){return/iemobile/i.test(e)}function mRe(e=Do()){return/android/i.test(e)}function gRe(e=Do()){return/blackberry/i.test(e)}function yRe(e=Do()){return/webos/i.test(e)}function B6(e=Do()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Wkt(e=Do()){var t;return B6(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Gkt(){return aIt()&&document.documentMode===10}function vRe(e=Do()){return B6(e)||mRe(e)||yRe(e)||gRe(e)||/windows phone/i.test(e)||pRe(e)}function Ykt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bRe(e,t=[]){let n;switch(e){case"Browser":n=Yfe(Do());break;case"Worker":n=`${Yfe(Do())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${kb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kkt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xkt(e,t={}){return uS(e,"GET","/v2/passwordPolicy",j6(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qkt=6;class Jkt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Qkt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zkt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kfe(this),this.idTokenSubscription=new Kfe(this),this.beforeStateQueue=new Kkt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iRe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=zp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Fw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await lRe(this,{idToken:t}),r=await Up._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(qd(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await c$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Okt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(qd(this.app))return Promise.reject(b0(this));const n=t?ni(t):null;return n&&rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&rn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return qd(this.app)?Promise.reject(b0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return qd(this.app)?Promise.reject(b0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Xkt(this),n=new Jkt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new oS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qkt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&zp(t)||this._popupRedirectResolver;rn(n,this,"argument-error"),this.redirectPersistenceManager=await Fw.create(this,[zp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(rn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=bRe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Rkt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gk(e){return ni(e)}class Kfe{constructor(t){this.auth=t,this.observer=null,this.addObserver=pIt(n=>this.observer=n)}get next(){return rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zQ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eRt(e){zQ=e}function tRt(e){return zQ.loadJS(e)}function nRt(){return zQ.gapiScript}function rRt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iRt(e,t){const n=aS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(O2(s,t??{}))return i;wh(i,"already-initialized")}return n.initialize({options:t})}function sRt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function oRt(e,t,n){const r=gk(e);rn(r._canInitEmulator,r,"emulator-config-failed"),rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=_Re(t),{host:o,port:a}=aRt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),uRt()}function _Re(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function aRt(e){const t=_Re(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Xfe(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Xfe(o)}}}function Xfe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function uRt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wRe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Bp("not implemented")}_getIdTokenResponse(t){return Bp("not implemented")}_linkToIdToken(t,n){return Bp("not implemented")}_getReauthenticationResolver(t){return Bp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(e,t){return aRe(e,"POST","/v1/accounts:signInWithIdp",j6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lRt="http://localhost";class qv extends wRe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new qv(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):wh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=xI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new qv(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return jw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,jw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,jw(t,n)}buildRequest(){const t={requestUri:lRt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=pk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VQ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk extends VQ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends yk{constructor(){super("facebook.com")}static credential(t){return qv._fromParams({providerId:Mg.PROVIDER_ID,signInMethod:Mg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Mg.credentialFromTaggedObject(t)}static credentialFromError(t){return Mg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Mg.credential(t.oauthAccessToken)}catch{return null}}}Mg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends yk{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return qv._fromParams({providerId:Np.PROVIDER_ID,signInMethod:Np.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Np.credentialFromTaggedObject(t)}static credentialFromError(t){return Np.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Np.credential(n,r)}catch{return null}}}Np.GOOGLE_SIGN_IN_METHOD="google.com";Np.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends yk{constructor(){super("github.com")}static credential(t){return qv._fromParams({providerId:Lg.PROVIDER_ID,signInMethod:Lg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Lg.credentialFromTaggedObject(t)}static credentialFromError(t){return Lg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Lg.credential(t.oauthAccessToken)}catch{return null}}}Lg.GITHUB_SIGN_IN_METHOD="github.com";Lg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends yk{constructor(){super("twitter.com")}static credential(t,n){return qv._fromParams({providerId:Fg.PROVIDER_ID,signInMethod:Fg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Fg.credentialFromTaggedObject(t)}static credentialFromError(t){return Fg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Fg.credential(n,r)}catch{return null}}}Fg.TWITTER_SIGN_IN_METHOD="twitter.com";Fg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cRt(e,t){return aRe(e,"POST","/v1/accounts:signUp",j6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Up._fromIdTokenResponse(t,r,i),o=Qfe(r);return new Q0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Qfe(r);return new Q0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Qfe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fRt(e){var t;if(qd(e.app))return Promise.reject(b0(e));const n=gk(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Q0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await cRt(n,{returnSecureToken:!0}),i=await Q0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f$ extends Vh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,f$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new f$(t,n,r,i)}}function ERe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?f$._fromErrorAndOperation(e,s,t,r):s})}async function dRt(e,t,n=!1){const r=await M2(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Q0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hRt(e,t,n=!1){const{auth:r}=e;if(qd(r.app))return Promise.reject(b0(r));const i="reauthenticate";try{const s=await M2(e,ERe(r,i,t,e),n);rn(s.idToken,r,"internal-error");const o=BQ(s.idToken);rn(o,r,"internal-error");const{sub:a}=o;return rn(e.uid===a,r,"user-mismatch"),Q0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&wh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pRt(e,t,n=!1){if(qd(e.app))return Promise.reject(b0(e));const r="signIn",i=await ERe(e,r,t),s=await Q0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function mRt(e,t,n,r){return ni(e).onIdTokenChanged(t,n,r)}function gRt(e,t,n){return ni(e).beforeAuthStateChanged(t,n)}function yRt(e,t,n,r){return ni(e).onAuthStateChanged(t,n,r)}function vRt(e){return ni(e).signOut()}const d$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xRe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(d$,"1"),this.storage.removeItem(d$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bRt(){const e=Do();return UQ(e)||B6(e)}const _Rt=1e3,wRt=10;class SRe extends xRe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=bRt()&&Ykt(),this.fallbackToPolling=vRe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Gkt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,wRt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},_Rt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}SRe.type="LOCAL";const ERt=SRe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TRe extends xRe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}TRe.type="SESSION";const ARe=TRe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xRt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new U6(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await xRt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}U6.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HQ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SRt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=HQ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(){return window}function TRt(e){ih().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CRe(){return typeof ih().WorkerGlobalScope<"u"&&typeof ih().importScripts=="function"}async function ARt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CRt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function IRt(){return CRe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IRe="firebaseLocalStorageDb",kRt=1,h$="firebaseLocalStorage",kRe="fbase_key";class vk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function z6(e,t){return e.transaction([h$],t?"readwrite":"readonly").objectStore(h$)}function RRt(){const e=indexedDB.deleteDatabase(IRe);return new vk(e).toPromise()}function Gz(){const e=indexedDB.open(IRe,kRt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(h$,{keyPath:kRe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(h$)?t(r):(r.close(),await RRt(),t(await Gz()))})})}async function Jfe(e,t,n){const r=z6(e,!0).put({[kRe]:t,value:n});return new vk(r).toPromise()}async function NRt(e,t){const n=z6(e,!1).get(t),r=await new vk(n).toPromise();return r===void 0?null:r.value}function Zfe(e,t){const n=z6(e,!0).delete(t);return new vk(n).toPromise()}const PRt=800,DRt=3;class RRe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gz(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>DRt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CRe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=U6._getInstance(IRt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await ARt(),!this.activeServiceWorker)return;this.sender=new SRt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||CRt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Gz();return await Jfe(t,d$,"1"),await Zfe(t,d$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Jfe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>NRt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zfe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=z6(i,!1).getAll();return new vk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PRt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RRe.type="LOCAL";const ORt=RRe;new mk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NRe(e,t){return t?zp(t):(rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ extends wRe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return jw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return jw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return jw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function $Rt(e){return pRt(e.auth,new qQ(e),e.bypassAuthState)}function MRt(e){const{auth:t,user:n}=e;return rn(n,t,"internal-error"),hRt(n,new qQ(e),e.bypassAuthState)}async function LRt(e){const{auth:t,user:n}=e;return rn(n,t,"internal-error"),dRt(n,new qQ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PRe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return $Rt;case"linkViaPopup":case"linkViaRedirect":return LRt;case"reauthViaPopup":case"reauthViaRedirect":return MRt;default:wh(this.auth,"internal-error")}}resolve(t){km(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){km(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FRt=new mk(2e3,1e4);async function jRt(e,t,n){if(qd(e.app))return Promise.reject(Pf(e,"operation-not-supported-in-this-environment"));const r=gk(e);Nkt(e,t,VQ);const i=NRe(r,n);return new tv(r,"signInViaPopup",t,i).executeNotNull()}class tv extends PRe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,tv.currentPopupAction&&tv.currentPopupAction.cancel(),tv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return rn(t,this.auth,"internal-error"),t}async onExecution(){km(this.filter.length===1,"Popup operations only handle one event");const t=HQ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Pf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,FRt.get())};t()}}tv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BRt="pendingRedirect",sD=new Map;class URt extends PRe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=sD.get(this.auth._key());if(!t){try{const r=await zRt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}sD.set(this.auth._key(),t)}return this.bypassAuthState||sD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zRt(e,t){const n=qRt(t),r=HRt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function VRt(e,t){sD.set(e._key(),t)}function HRt(e){return zp(e._redirectPersistence)}function qRt(e){return iD(BRt,e.config.apiKey,e.name)}async function WRt(e,t,n=!1){if(qd(e.app))return Promise.reject(b0(e));const r=gk(e),i=NRe(r,t),o=await new URt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GRt=10*60*1e3;class YRt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!KRt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!DRe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=GRt&&this.cachedEventUids.clear(),this.cachedEventUids.has(ede(t))}saveEventToCache(t){this.cachedEventUids.add(ede(t)),this.lastProcessedEventTime=Date.now()}}function ede(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function DRe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function KRt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DRe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XRt(e,t={}){return uS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QRt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JRt=/^https?/;async function ZRt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await XRt(e);for(const n of t)try{if(eNt(n))return}catch{}wh(e,"unauthorized-domain")}function eNt(e){const t=qz(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!JRt.test(n))return!1;if(QRt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tNt=new mk(3e4,6e4);function tde(){const e=ih().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function nNt(e){return new Promise((t,n)=>{var r,i,s;function o(){tde(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{tde(),n(Pf(e,"network-request-failed"))},timeout:tNt.get()})}if(!((i=(r=ih().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=ih().gapi)===null||s===void 0)&&s.load)o();else{const a=rRt("iframefcb");return ih()[a]=()=>{gapi.load?o():n(Pf(e,"network-request-failed"))},tRt(`${nRt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw oD=null,t})}let oD=null;function rNt(e){return oD=oD||nNt(e),oD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iNt=new mk(5e3,15e3),sNt="__/auth/iframe",oNt="emulator/auth/iframe",aNt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uNt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lNt(e){const t=e.config;rn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?jQ(t,oNt):`https://${e.config.authDomain}/${sNt}`,r={apiKey:t.apiKey,appName:e.name,v:kb},i=uNt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${pk(r).slice(1)}`}async function cNt(e){const t=await rNt(e),n=ih().gapi;return rn(n,e,"internal-error"),t.open({where:document.body,url:lNt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aNt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Pf(e,"network-request-failed"),a=ih().setTimeout(()=>{s(o)},iNt.get());function u(){ih().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fNt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dNt=500,hNt=600,pNt="_blank",mNt="http://localhost";class nde{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gNt(e,t,n,r=dNt,i=hNt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},fNt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Do().toLowerCase();n&&(a=hRe(l)?pNt:n),dRe(l)&&(t=t||mNt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(Wkt(l)&&a!=="_self")return yNt(t||"",a),new nde(null);const f=window.open(t||"",a,c);rn(f,e,"popup-blocked");try{f.focus()}catch{}return new nde(f)}function yNt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vNt="__/auth/handler",bNt="emulator/auth/handler",_Nt=encodeURIComponent("fac");async function rde(e,t,n,r,i,s){rn(e.config.authDomain,e,"auth-domain-config-required"),rn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:kb,eventId:i};if(t instanceof VQ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",hIt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof yk){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${_Nt}=${encodeURIComponent(u)}`:"";return`${wNt(e)}?${pk(a).slice(1)}${l}`}function wNt({config:e}){return e.emulator?jQ(e,bNt):`https://${e.authDomain}/${vNt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="webStorageSupport";class ENt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ARe,this._completeRedirectFn=WRt,this._overrideRedirectResult=VRt}async _openPopup(t,n,r,i){var s;km((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await rde(t,n,r,qz(),i);return gNt(t,o,HQ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await rde(t,n,r,qz(),i);return TRt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(km(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await cNt(t),r=new YRt(t);return n.register("authEvent",i=>(rn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Hj,{type:Hj},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Hj];o!==void 0&&n(!!o),wh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZRt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return vRe()||UQ()||B6()}}const ORe=ENt;var ide="@firebase/auth",sde="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xNt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SNt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TNt(e){Im(new _h("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;rn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bRe(e)},l=new Zkt(r,i,s,u);return sRt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Im(new _h("auth-internal",t=>{const n=gk(t.getProvider("auth").getImmediate());return(r=>new xNt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nf(ide,sde,SNt(e)),Nf(ide,sde,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ANt=5*60,CNt=Qke("authIdTokenMaxAge")||ANt;let ode=null;const INt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>CNt)return;const i=n==null?void 0:n.token;ode!==i&&(ode=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function p$(e=MQ()){const t=aS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=iRt(e,{popupRedirectResolver:ORe,persistence:[ORt,ERt,ARe]}),r=Qke("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=INt(s.toString());gRt(n,o,()=>o(n.currentUser)),mRt(n,a=>o(a))}}const i=Kke("auth");return i&&oRt(n,`http://${i}`),n}function kNt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}eRt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Pf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",kNt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TNt("Browser");var RNt="firebase",NNt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nf(RNt,NNt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Re="firebasestorage.googleapis.com",MRe="storageBucket",PNt=2*60*1e3,DNt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Vh{constructor(t,n,r=0){super(qj(t),`Firebase Storage: ${n} (${qj(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return qj(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ki;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ki||(Ki={}));function qj(e){return"storage/"+e}function WQ(){const e="An unknown error occurred, please check the error payload for server response.";return new Xi(Ki.UNKNOWN,e)}function ONt(e){return new Xi(Ki.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function $Nt(e){return new Xi(Ki.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function MNt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xi(Ki.UNAUTHENTICATED,e)}function LNt(){return new Xi(Ki.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function FNt(e){return new Xi(Ki.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function jNt(){return new Xi(Ki.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BNt(){return new Xi(Ki.CANCELED,"User canceled the upload/download.")}function UNt(e){return new Xi(Ki.INVALID_URL,"Invalid URL '"+e+"'.")}function zNt(e){return new Xi(Ki.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function VNt(){return new Xi(Ki.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MRe+"' property when initializing the app?")}function HNt(){return new Xi(Ki.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qNt(){return new Xi(Ki.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function WNt(e){return new Xi(Ki.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Yz(e){return new Xi(Ki.INVALID_ARGUMENT,e)}function LRe(){return new Xi(Ki.APP_DELETED,"The Firebase app was deleted.")}function GNt(e){return new Xi(Ki.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hC(e,t){return new Xi(Ki.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function pT(e){throw new Xi(Ki.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=za.makeFromUrl(t,n)}catch{return new za(t,"")}if(r.path==="")return r;throw zNt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===$Re?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],S=E.regex.exec(t);if(S){const T=S[E.indices.bucket];let A=S[E.indices.path];A||(A=""),r=new za(T,A),E.postModify(r);break}}if(r==null)throw UNt(t);return r}}class YNt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KNt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function XNt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QNt(e){return e!==void 0}function JNt(e){return typeof e=="object"&&!Array.isArray(e)}function GQ(e){return typeof e=="string"||e instanceof String}function ade(e){return YQ()&&e instanceof Blob}function YQ(){return typeof Blob<"u"}function Kz(e,t,n,r){if(r<t)throw Yz(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Yz(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function FRe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hv;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(hv||(hv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZNt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ePt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new PN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===hv.NO_ERROR,u=s.getStatus();if(!a||ZNt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===hv.ABORT;r(!1,new PN(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new PN(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());QNt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=WQ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?LRe():BNt();o(u)}else{const u=jNt();o(u)}};this.canceled_?n(!1,new PN(!1,null,!0)):this.backoffId_=KNt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&XNt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class PN{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function tPt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function nPt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function rPt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function iPt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function sPt(e,t,n,r,i,s,o=!0){const a=FRe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return rPt(l,t),tPt(l,n),nPt(l,s),iPt(l,r),new ePt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oPt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function aPt(...e){const t=oPt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(YQ())return new Blob(e);throw new Xi(Ki.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uPt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lPt(e){if(typeof atob>"u")throw WNt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wj{constructor(t,n){this.data=t,this.contentType=n||null}}function cPt(e,t){switch(e){case Wd.RAW:return new Wj(jRe(t));case Wd.BASE64:case Wd.BASE64URL:return new Wj(BRe(e,t));case Wd.DATA_URL:return new Wj(dPt(t),hPt(t))}throw WQ()}function jRe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function fPt(e){let t;try{t=decodeURIComponent(e)}catch{throw hC(Wd.DATA_URL,"Malformed data URL.")}return jRe(t)}function BRe(e,t){switch(e){case Wd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw hC(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Wd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw hC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=lPt(t)}catch(i){throw i.message.includes("polyfill")?i:hC(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class URe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw hC(Wd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=pPt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function dPt(e){const t=new URe(e);return t.base64?BRe(Wd.BASE64,t.rest):fPt(t.rest)}function hPt(e){return new URe(e).contentType}function pPt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(t,n){let r=0,i="";ade(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(ade(this.data_)){const r=this.data_,i=uPt(r,t,n);return i===null?null:new jg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new jg(r,!0)}}static getBlob(...t){if(YQ()){const n=t.map(r=>r instanceof jg?r.data_:r);return new jg(aPt.apply(null,n))}else{const n=t.map(o=>GQ(o)?cPt(Wd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new jg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KQ(e){let t;try{t=JSON.parse(e)}catch{return null}return JNt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mPt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function gPt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function zRe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yPt(e,t){return t}class ka{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||yPt}}let DN=null;function vPt(e){return!GQ(e)||e.length<2?e:zRe(e)}function VRe(){if(DN)return DN;const e=[];e.push(new ka("bucket")),e.push(new ka("generation")),e.push(new ka("metageneration")),e.push(new ka("name","fullPath",!0));function t(s,o){return vPt(o)}const n=new ka("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ka("size");return i.xform=r,e.push(i),e.push(new ka("timeCreated")),e.push(new ka("updated")),e.push(new ka("md5Hash",null,!0)),e.push(new ka("cacheControl",null,!0)),e.push(new ka("contentDisposition",null,!0)),e.push(new ka("contentEncoding",null,!0)),e.push(new ka("contentLanguage",null,!0)),e.push(new ka("contentType",null,!0)),e.push(new ka("metadata","customMetadata",!0)),DN=e,DN}function bPt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new za(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function _Pt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return bPt(r,e),r}function HRe(e,t,n){const r=KQ(t);return r===null?null:_Pt(e,r,n)}function wPt(e,t,n,r){const i=KQ(t);if(i===null||!GQ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=bk(d,n,r),p=FRe({alt:"media",token:l});return h+p})[0]}function EPt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ude="prefixes",lde="items";function xPt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[ude])for(const i of n[ude]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new za(t,s));r.prefixes.push(o)}if(n[lde])for(const i of n[lde]){const s=e._makeStorageReference(new za(t,i.name));r.items.push(s)}return r}function SPt(e,t,n){const r=KQ(n);return r===null?null:xPt(e,t,r)}class V6{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XQ(e){if(!e)throw WQ()}function TPt(e,t){function n(r,i){const s=HRe(e,i,t);return XQ(s!==null),s}return n}function APt(e,t){function n(r,i){const s=SPt(e,t,i);return XQ(s!==null),s}return n}function CPt(e,t){function n(r,i){const s=HRe(e,i,t);return XQ(s!==null),wPt(s,i,e.host,e._protocol)}return n}function QQ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=LNt():i=MNt():n.getStatus()===402?i=$Nt(e.bucket):n.getStatus()===403?i=FNt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function qRe(e){const t=QQ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=ONt(e.path)),s.serverResponse=i.serverResponse,s}return n}function IPt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=bk(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new V6(a,u,APt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=QQ(t),c}function kPt(e,t,n){const r=t.fullServerUrl(),i=bk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new V6(i,s,CPt(e,n),o);return a.errorHandler=qRe(t),a}function RPt(e,t){const n=t.fullServerUrl(),r=bk(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new V6(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=qRe(t),a}function NPt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function PPt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=NPt(null,t)),r}function DPt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=PPt(t,r,i),c=EPt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=jg.getBlob(f,r,d);if(h===null)throw HNt();const p={name:l.fullPath},m=bk(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new V6(m,g,TPt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=QQ(t),v}class OPt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hv.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hv.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hv.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw pT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw pT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class $Pt extends OPt{initXhr(){this.xhr_.responseType="text"}}function H6(){return new $Pt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(t,n){this._service=t,n instanceof za?this._location=n:this._location=za.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Wv(t,n)}get root(){const t=new za(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zRe(this._location.path)}get storage(){return this._service}get parent(){const t=mPt(this._location.path);if(t===null)return null;const n=new za(this._location.bucket,t);return new Wv(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw GNt(t)}}function MPt(e,t,n){e._throwIfRoot("uploadBytes");const r=DPt(e.storage,e._location,VRe(),new jg(t,!0),n);return e.storage.makeRequestWithTokens(r,H6).then(i=>({metadata:i,ref:e}))}function LPt(e){const t={prefixes:[],items:[]};return WRe(e,t).then(()=>t)}async function WRe(e,t,n){const i=await FPt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await WRe(e,t,i.nextPageToken)}function FPt(e,t){t!=null&&typeof t.maxResults=="number"&&Kz("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=IPt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,H6)}function jPt(e){e._throwIfRoot("getDownloadURL");const t=kPt(e.storage,e._location,VRe());return e.storage.makeRequestWithTokens(t,H6).then(n=>{if(n===null)throw qNt();return n})}function BPt(e){e._throwIfRoot("deleteObject");const t=RPt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,H6)}function UPt(e,t){const n=gPt(e._location.path,t),r=new za(e._location.bucket,n);return new Wv(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zPt(e){return/^[A-Za-z]+:\/\//.test(e)}function VPt(e,t){return new Wv(e,t)}function GRe(e,t){if(e instanceof JQ){const n=e;if(n._bucket==null)throw VNt();const r=new Wv(n,n._bucket);return t!=null?GRe(r,t):r}else return t!==void 0?UPt(e,t):e}function HPt(e,t){if(t&&zPt(t)){if(e instanceof JQ)return VPt(e,t);throw Yz("To use ref(service, url), the first argument must be a Storage instance.")}else return GRe(e,t)}function cde(e,t){const n=t==null?void 0:t[MRe];return n==null?null:za.makeFromBucketSpec(n,e)}function qPt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:nIt(i,e.app.options.projectId))}class JQ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=$Re,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=PNt,this._maxUploadRetryTime=DNt,this._requests=new Set,i!=null?this._bucket=za.makeFromBucketSpec(i,this._host):this._bucket=cde(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=za.makeFromBucketSpec(this._url,t):this._bucket=cde(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Kz("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Kz("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Wv(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new YNt(LRe());{const o=sPt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const fde="@firebase/storage",dde="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YRe="storage";function Gj(e,t,n){return e=ni(e),MPt(e,t,n)}function mT(e){return e=ni(e),LPt(e)}function Yj(e){return e=ni(e),jPt(e)}function hde(e){return e=ni(e),BPt(e)}function Wc(e,t){return e=ni(e),HPt(e,t)}function WPt(e=MQ(),t){e=ni(e);const r=aS(e,YRe).getImmediate({identifier:t}),i=tIt("storage");return i&&GPt(r,...i),r}function GPt(e,t,n,r={}){qPt(e,t,n,r)}function YPt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new JQ(n,r,i,t,kb)}function KPt(){Im(new _h(YRe,YPt,"PUBLIC").setMultipleInstances(!0)),Nf(fde,dde,""),Nf(fde,dde,"esm2017")}KPt();var pde=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pv,KRe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,A){function C(){}C.prototype=A.prototype,T.D=A.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(I,R,M){for(var P=Array(arguments.length-2),O=2;O<arguments.length;O++)P[O-2]=arguments[O];return A.prototype[R].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,A,C){C||(C=0);var I=Array(16);if(typeof A=="string")for(var R=0;16>R;++R)I[R]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(R=0;16>R;++R)I[R]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=T.g[0],C=T.g[1],R=T.g[2];var M=T.g[3],P=A+(M^C&(R^M))+I[0]+3614090360&4294967295;A=C+(P<<7&4294967295|P>>>25),P=M+(R^A&(C^R))+I[1]+3905402710&4294967295,M=A+(P<<12&4294967295|P>>>20),P=R+(C^M&(A^C))+I[2]+606105819&4294967295,R=M+(P<<17&4294967295|P>>>15),P=C+(A^R&(M^A))+I[3]+3250441966&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(M^C&(R^M))+I[4]+4118548399&4294967295,A=C+(P<<7&4294967295|P>>>25),P=M+(R^A&(C^R))+I[5]+1200080426&4294967295,M=A+(P<<12&4294967295|P>>>20),P=R+(C^M&(A^C))+I[6]+2821735955&4294967295,R=M+(P<<17&4294967295|P>>>15),P=C+(A^R&(M^A))+I[7]+4249261313&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(M^C&(R^M))+I[8]+1770035416&4294967295,A=C+(P<<7&4294967295|P>>>25),P=M+(R^A&(C^R))+I[9]+2336552879&4294967295,M=A+(P<<12&4294967295|P>>>20),P=R+(C^M&(A^C))+I[10]+4294925233&4294967295,R=M+(P<<17&4294967295|P>>>15),P=C+(A^R&(M^A))+I[11]+2304563134&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(M^C&(R^M))+I[12]+1804603682&4294967295,A=C+(P<<7&4294967295|P>>>25),P=M+(R^A&(C^R))+I[13]+4254626195&4294967295,M=A+(P<<12&4294967295|P>>>20),P=R+(C^M&(A^C))+I[14]+2792965006&4294967295,R=M+(P<<17&4294967295|P>>>15),P=C+(A^R&(M^A))+I[15]+1236535329&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(R^M&(C^R))+I[1]+4129170786&4294967295,A=C+(P<<5&4294967295|P>>>27),P=M+(C^R&(A^C))+I[6]+3225465664&4294967295,M=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(M^A))+I[11]+643717713&4294967295,R=M+(P<<14&4294967295|P>>>18),P=C+(M^A&(R^M))+I[0]+3921069994&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(R^M&(C^R))+I[5]+3593408605&4294967295,A=C+(P<<5&4294967295|P>>>27),P=M+(C^R&(A^C))+I[10]+38016083&4294967295,M=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(M^A))+I[15]+3634488961&4294967295,R=M+(P<<14&4294967295|P>>>18),P=C+(M^A&(R^M))+I[4]+3889429448&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(R^M&(C^R))+I[9]+568446438&4294967295,A=C+(P<<5&4294967295|P>>>27),P=M+(C^R&(A^C))+I[14]+3275163606&4294967295,M=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(M^A))+I[3]+4107603335&4294967295,R=M+(P<<14&4294967295|P>>>18),P=C+(M^A&(R^M))+I[8]+1163531501&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(R^M&(C^R))+I[13]+2850285829&4294967295,A=C+(P<<5&4294967295|P>>>27),P=M+(C^R&(A^C))+I[2]+4243563512&4294967295,M=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(M^A))+I[7]+1735328473&4294967295,R=M+(P<<14&4294967295|P>>>18),P=C+(M^A&(R^M))+I[12]+2368359562&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(C^R^M)+I[5]+4294588738&4294967295,A=C+(P<<4&4294967295|P>>>28),P=M+(A^C^R)+I[8]+2272392833&4294967295,M=A+(P<<11&4294967295|P>>>21),P=R+(M^A^C)+I[11]+1839030562&4294967295,R=M+(P<<16&4294967295|P>>>16),P=C+(R^M^A)+I[14]+4259657740&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(C^R^M)+I[1]+2763975236&4294967295,A=C+(P<<4&4294967295|P>>>28),P=M+(A^C^R)+I[4]+1272893353&4294967295,M=A+(P<<11&4294967295|P>>>21),P=R+(M^A^C)+I[7]+4139469664&4294967295,R=M+(P<<16&4294967295|P>>>16),P=C+(R^M^A)+I[10]+3200236656&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(C^R^M)+I[13]+681279174&4294967295,A=C+(P<<4&4294967295|P>>>28),P=M+(A^C^R)+I[0]+3936430074&4294967295,M=A+(P<<11&4294967295|P>>>21),P=R+(M^A^C)+I[3]+3572445317&4294967295,R=M+(P<<16&4294967295|P>>>16),P=C+(R^M^A)+I[6]+76029189&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(C^R^M)+I[9]+3654602809&4294967295,A=C+(P<<4&4294967295|P>>>28),P=M+(A^C^R)+I[12]+3873151461&4294967295,M=A+(P<<11&4294967295|P>>>21),P=R+(M^A^C)+I[15]+530742520&4294967295,R=M+(P<<16&4294967295|P>>>16),P=C+(R^M^A)+I[2]+3299628645&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(R^(C|~M))+I[0]+4096336452&4294967295,A=C+(P<<6&4294967295|P>>>26),P=M+(C^(A|~R))+I[7]+1126891415&4294967295,M=A+(P<<10&4294967295|P>>>22),P=R+(A^(M|~C))+I[14]+2878612391&4294967295,R=M+(P<<15&4294967295|P>>>17),P=C+(M^(R|~A))+I[5]+4237533241&4294967295,C=R+(P<<21&4294967295|P>>>11),P=A+(R^(C|~M))+I[12]+1700485571&4294967295,A=C+(P<<6&4294967295|P>>>26),P=M+(C^(A|~R))+I[3]+2399980690&4294967295,M=A+(P<<10&4294967295|P>>>22),P=R+(A^(M|~C))+I[10]+4293915773&4294967295,R=M+(P<<15&4294967295|P>>>17),P=C+(M^(R|~A))+I[1]+2240044497&4294967295,C=R+(P<<21&4294967295|P>>>11),P=A+(R^(C|~M))+I[8]+1873313359&4294967295,A=C+(P<<6&4294967295|P>>>26),P=M+(C^(A|~R))+I[15]+4264355552&4294967295,M=A+(P<<10&4294967295|P>>>22),P=R+(A^(M|~C))+I[6]+2734768916&4294967295,R=M+(P<<15&4294967295|P>>>17),P=C+(M^(R|~A))+I[13]+1309151649&4294967295,C=R+(P<<21&4294967295|P>>>11),P=A+(R^(C|~M))+I[4]+4149444226&4294967295,A=C+(P<<6&4294967295|P>>>26),P=M+(C^(A|~R))+I[11]+3174756917&4294967295,M=A+(P<<10&4294967295|P>>>22),P=R+(A^(M|~C))+I[2]+718787259&4294967295,R=M+(P<<15&4294967295|P>>>17),P=C+(M^(R|~A))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+M&4294967295}r.prototype.u=function(T,A){A===void 0&&(A=T.length);for(var C=A-this.blockSize,I=this.B,R=this.h,M=0;M<A;){if(R==0)for(;M<=C;)i(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<A;)if(I[R++]=T.charCodeAt(M++),R==this.blockSize){i(this,I),R=0;break}}else for(;M<A;)if(I[R++]=T[M++],R==this.blockSize){i(this,I),R=0;break}}this.h=R,this.o+=A},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;var C=8*this.o;for(A=T.length-8;A<T.length;++A)T[A]=C&255,C/=256;for(this.u(T),T=Array(16),A=C=0;4>A;++A)for(var I=0;32>I;I+=8)T[C++]=this.g[A]>>>I&255;return T};function s(T,A){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=A(T)}function o(T,A){this.h=A;for(var C=[],I=!0,R=T.length-1;0<=R;R--){var M=T[R]|0;I&&M==A||(C[R]=M,I=!1)}this.g=C}var a={};function u(T){return-128<=T&&128>T?s(T,function(A){return new o([A|0],0>A?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return g(l(-T));for(var A=[],C=1,I=0;T>=C;I++)A[I]=T/C|0,C*=4294967296;return new o(A,0)}function c(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return g(c(T.substring(1),A));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(A,8)),I=f,R=0;R<T.length;R+=8){var M=Math.min(8,T.length-R),P=parseInt(T.substring(R,R+M),A);8>M?(M=l(Math.pow(A,M)),I=I.j(M).add(l(P))):(I=I.j(C),I=I.add(l(P)))}return I}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var T=0,A=1,C=0;C<this.g.length;C++){var I=this.i(C);T+=(0<=I?I:4294967296+I)*A,A*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+g(this).toString(T);for(var A=l(Math.pow(T,6)),C=this,I="";;){var R=w(C,A).g;C=y(C,R.j(A));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=R,p(C))return M+I;for(;6>M.length;)M="0"+M;I=M+I}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function m(T){return T.h==-1}e.l=function(T){return T=y(this,T),m(T)?-1:p(T)?0:1};function g(T){for(var A=T.g.length,C=[],I=0;I<A;I++)C[I]=~T.g[I];return new o(C,~T.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0,R=0;R<=A;R++){var M=I+(this.i(R)&65535)+(T.i(R)&65535),P=(M>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);I=P>>>16,M&=65535,P&=65535,C[R]=P<<16|M}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(T,A){return T.add(g(A))}e.j=function(T){if(p(this)||p(T))return f;if(m(this))return m(T)?g(this).j(g(T)):g(g(this).j(T));if(m(T))return g(this.j(g(T)));if(0>this.l(h)&&0>T.l(h))return l(this.m()*T.m());for(var A=this.g.length+T.g.length,C=[],I=0;I<2*A;I++)C[I]=0;for(I=0;I<this.g.length;I++)for(var R=0;R<T.g.length;R++){var M=this.i(I)>>>16,P=this.i(I)&65535,O=T.i(R)>>>16,F=T.i(R)&65535;C[2*I+2*R]+=P*F,v(C,2*I+2*R),C[2*I+2*R+1]+=M*F,v(C,2*I+2*R+1),C[2*I+2*R+1]+=P*O,v(C,2*I+2*R+1),C[2*I+2*R+2]+=M*O,v(C,2*I+2*R+2)}for(I=0;I<A;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=A;I<2*A;I++)C[I]=0;return new o(C,0)};function v(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function b(T,A){this.g=T,this.h=A}function w(T,A){if(p(A))throw Error("division by zero");if(p(T))return new b(f,f);if(m(T))return A=w(g(T),A),new b(g(A.g),g(A.h));if(m(A))return A=w(T,g(A)),new b(g(A.g),A.h);if(30<T.g.length){if(m(T)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var C=d,I=A;0>=I.l(T);)C=E(C),I=E(I);var R=S(C,1),M=S(I,1);for(I=S(I,2),C=S(C,2);!p(I);){var P=M.add(I);0>=P.l(T)&&(R=R.add(C),M=P),I=S(I,1),C=S(C,1)}return A=y(T,R.j(A)),new b(R,A)}for(R=f;0<=T.l(A);){for(C=Math.max(1,Math.floor(T.m()/A.m())),I=Math.ceil(Math.log(C)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),M=l(C),P=M.j(A);m(P)||0<P.l(T);)C-=I,M=l(C),P=M.j(A);p(M)&&(M=d),R=R.add(M),T=y(T,P)}return new b(R,T)}e.A=function(T){return w(this,T).h},e.and=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)&T.i(I);return new o(C,this.h&T.h)},e.or=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)|T.i(I);return new o(C,this.h|T.h)},e.xor=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)^T.i(I);return new o(C,this.h^T.h)};function E(T){for(var A=T.g.length+1,C=[],I=0;I<A;I++)C[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(C,T.h)}function S(T,A){var C=A>>5;A%=32;for(var I=T.g.length-C,R=[],M=0;M<I;M++)R[M]=0<A?T.i(M+C)>>>A|T.i(M+C+1)<<32-A:T.i(M+C);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,KRe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,pv=o}).apply(typeof pde<"u"?pde:typeof self<"u"?self:typeof window<"u"?window:{});var ON=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XRe,QRe,cA,JRe,aD,Xz,ZRe,eNe,tNe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,$,V){return x==Array.prototype||x==Object.prototype||(x[$]=V.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof ON=="object"&&ON];for(var $=0;$<x.length;++$){var V=x[$];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(x,$){if($)e:{var V=r;x=x.split(".");for(var Q=0;Q<x.length-1;Q++){var _e=x[Q];if(!(_e in V))break e;V=V[_e]}x=x[x.length-1],Q=V[x],$=$(Q),$!=Q&&$!=null&&t(V,x,{configurable:!0,writable:!0,value:$})}}function s(x,$){x instanceof String&&(x+="");var V=0,Q=!1,_e={next:function(){if(!Q&&V<x.length){var De=V++;return{value:$(De,x[De]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}i("Array.prototype.values",function(x){return x||function(){return s(this,function($,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(x){var $=typeof x;return $=$!="object"?$:x?Array.isArray(x)?"array":$:"null",$=="array"||$=="object"&&typeof x.length=="number"}function l(x){var $=typeof x;return $=="object"&&x!=null||$=="function"}function c(x,$,V){return x.call.apply(x.bind,arguments)}function f(x,$,V){if(!x)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,Q),x.apply($,_e)}}return function(){return x.apply($,arguments)}}function d(x,$,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,$){var V=Array.prototype.slice.call(arguments,1);return function(){var Q=V.slice();return Q.push.apply(Q,arguments),x.apply(this,Q)}}function p(x,$){function V(){}V.prototype=$.prototype,x.aa=$.prototype,x.prototype=new V,x.prototype.constructor=x,x.Qb=function(Q,_e,De){for(var ft=Array(arguments.length-2),Hr=2;Hr<arguments.length;Hr++)ft[Hr-2]=arguments[Hr];return $.prototype[_e].apply(Q,ft)}}function m(x){const $=x.length;if(0<$){const V=Array($);for(let Q=0;Q<$;Q++)V[Q]=x[Q];return V}return[]}function g(x,$){for(let V=1;V<arguments.length;V++){const Q=arguments[V];if(u(Q)){const _e=x.length||0,De=Q.length||0;x.length=_e+De;for(let ft=0;ft<De;ft++)x[_e+ft]=Q[ft]}else x.push(Q)}}class y{constructor($,V){this.i=$,this.j=V,this.h=0,this.g=null}get(){let $;return 0<this.h?(this.h--,$=this.g,this.g=$.next,$.next=null):$=this.i(),$}}function v(x){return/^[\s\xa0]*$/.test(x)}function b(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function S(x,$,V){for(const Q in x)$.call(V,x[Q],Q,x)}function T(x,$){for(const V in x)$.call(void 0,x[V],V,x)}function A(x){const $={};for(const V in x)$[V]=x[V];return $}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(x,$){let V,Q;for(let _e=1;_e<arguments.length;_e++){Q=arguments[_e];for(V in Q)x[V]=Q[V];for(let De=0;De<C.length;De++)V=C[De],Object.prototype.hasOwnProperty.call(Q,V)&&(x[V]=Q[V])}}function R(x){var $=1;x=x.split(":");const V=[];for(;0<$&&x.length;)V.push(x.shift()),$--;return x.length&&V.push(x.join(":")),V}function M(x){a.setTimeout(()=>{throw x},0)}function P(){var x=H;let $=null;return x.g&&($=x.g,x.g=x.g.next,x.g||(x.h=null),$.next=null),$}class O{constructor(){this.h=this.g=null}add($,V){const Q=F.get();Q.set($,V),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new L,x=>x.reset());class L{constructor(){this.next=this.g=this.h=null}set($,V){this.h=$,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,H=new O,D=()=>{const x=a.Promise.resolve(void 0);B=()=>{x.then(z)}};var z=()=>{for(var x;x=P();){try{x.h.call(x.g)}catch(V){M(V)}var $=F;$.j(x),100>$.h&&($.h++,x.next=$.g,$.g=x)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,$){this.type=x,this.g=this.target=$,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,$=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const V=()=>{};a.addEventListener("test",V,$),a.removeEventListener("test",V,$)}catch{}return x}();function G(x,$){if(j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var V=this.type=x.type,Q=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=$,$=x.relatedTarget){if(E){e:{try{w($.nodeName);var _e=!0;break e}catch{}_e=!1}_e||($=null)}}else V=="mouseover"?$=x.fromElement:V=="mouseout"&&($=x.toElement);this.relatedTarget=$,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:ne[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(x,$,V,Q,_e){this.listener=x,this.proxy=null,this.src=$,this.type=V,this.capture=!!Q,this.ha=_e,this.key=++de,this.da=this.fa=!1}function ye(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Ie(x){this.src=x,this.g={},this.h=0}Ie.prototype.add=function(x,$,V,Q,_e){var De=x.toString();x=this.g[De],x||(x=this.g[De]=[],this.h++);var ft=Ke(x,$,Q,_e);return-1<ft?($=x[ft],V||($.fa=!1)):($=new he($,this.src,De,!!Q,_e),$.fa=V,x.push($)),$};function ve(x,$){var V=$.type;if(V in x.g){var Q=x.g[V],_e=Array.prototype.indexOf.call(Q,$,void 0),De;(De=0<=_e)&&Array.prototype.splice.call(Q,_e,1),De&&(ye($),x.g[V].length==0&&(delete x.g[V],x.h--))}}function Ke(x,$,V,Q){for(var _e=0;_e<x.length;++_e){var De=x[_e];if(!De.da&&De.listener==$&&De.capture==!!V&&De.ha==Q)return _e}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),gt={};function rt(x,$,V,Q,_e){if(Array.isArray($)){for(var De=0;De<$.length;De++)rt(x,$[De],V,Q,_e);return null}return V=yt(V),x&&x[ce]?x.K($,V,l(Q)?!!Q.capture:!!Q,_e):be(x,$,V,!1,Q,_e)}function be(x,$,V,Q,_e,De){if(!$)throw Error("Invalid event type");var ft=l(_e)?!!_e.capture:!!_e,Hr=me(x);if(Hr||(x[Ue]=Hr=new Ie(x)),V=Hr.add($,V,Q,ft,De),V.proxy)return V;if(Q=ke(),V.proxy=Q,Q.src=x,Q.listener=V,x.addEventListener)q||(_e=ft),_e===void 0&&(_e=!1),x.addEventListener($.toString(),Q,_e);else if(x.attachEvent)x.attachEvent(Dt($.toString()),Q);else if(x.addListener&&x.removeListener)x.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ke(){function x(V){return $.call(x.src,x.listener,V)}const $=We;return x}function ze(x,$,V,Q,_e){if(Array.isArray($))for(var De=0;De<$.length;De++)ze(x,$[De],V,Q,_e);else Q=l(Q)?!!Q.capture:!!Q,V=yt(V),x&&x[ce]?(x=x.i,$=String($).toString(),$ in x.g&&(De=x.g[$],V=Ke(De,V,Q,_e),-1<V&&(ye(De[V]),Array.prototype.splice.call(De,V,1),De.length==0&&(delete x.g[$],x.h--)))):x&&(x=me(x))&&($=x.g[$.toString()],x=-1,$&&(x=Ke($,V,Q,_e)),(V=-1<x?$[x]:null)&&ct(V))}function ct(x){if(typeof x!="number"&&x&&!x.da){var $=x.src;if($&&$[ce])ve($.i,x);else{var V=x.type,Q=x.proxy;$.removeEventListener?$.removeEventListener(V,Q,x.capture):$.detachEvent?$.detachEvent(Dt(V),Q):$.addListener&&$.removeListener&&$.removeListener(Q),(V=me($))?(ve(V,x),V.h==0&&(V.src=null,$[Ue]=null)):ye(x)}}}function Dt(x){return x in gt?gt[x]:gt[x]="on"+x}function We(x,$){if(x.da)x=!0;else{$=new G($,this);var V=x.listener,Q=x.ha||x.src;x.fa&&ct(x),x=V.call(Q,$)}return x}function me(x){return x=x[Ue],x instanceof Ie?x:null}var dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function yt(x){return typeof x=="function"?x:(x[dt]||(x[dt]=function($){return x.handleEvent($)}),x[dt])}function pe(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(pe,W),pe.prototype[ce]=!0,pe.prototype.removeEventListener=function(x,$,V,Q){ze(this,x,$,V,Q)};function Ce(x,$){var V,Q=x.F;if(Q)for(V=[];Q;Q=Q.F)V.push(Q);if(x=x.M,Q=$.type||$,typeof $=="string")$=new j($,x);else if($ instanceof j)$.target=$.target||x;else{var _e=$;$=new j(Q,x),I($,_e)}if(_e=!0,V)for(var De=V.length-1;0<=De;De--){var ft=$.g=V[De];_e=He(ft,Q,!0,$)&&_e}if(ft=$.g=x,_e=He(ft,Q,!0,$)&&_e,_e=He(ft,Q,!1,$)&&_e,V)for(De=0;De<V.length;De++)ft=$.g=V[De],_e=He(ft,Q,!1,$)&&_e}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var x=this.i,$;for($ in x.g){for(var V=x.g[$],Q=0;Q<V.length;Q++)ye(V[Q]);delete x.g[$],x.h--}}this.F=null},pe.prototype.K=function(x,$,V,Q){return this.i.add(String(x),$,!1,V,Q)},pe.prototype.L=function(x,$,V,Q){return this.i.add(String(x),$,!0,V,Q)};function He(x,$,V,Q){if($=x.i.g[String($)],!$)return!0;$=$.concat();for(var _e=!0,De=0;De<$.length;++De){var ft=$[De];if(ft&&!ft.da&&ft.capture==V){var Hr=ft.listener,fo=ft.ha||ft.src;ft.fa&&ve(x.i,ft),_e=Hr.call(fo,Q)!==!1&&_e}}return _e&&!Q.defaultPrevented}function ut(x,$,V){if(typeof x=="function")V&&(x=d(x,V));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number($)?-1:a.setTimeout(x,$||0)}function _t(x){x.g=ut(()=>{x.g=null,x.i&&(x.i=!1,_t(x))},x.l);const $=x.h;x.h=null,x.m.apply(null,$)}class Mn extends W{constructor($,V){super(),this.m=$,this.l=V,this.h=null,this.i=!1,this.g=null}j($){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(x){W.call(this),this.h=x,this.g={}}p(Sr,W);var Ln=[];function lr(x){S(x.g,function($,V){this.g.hasOwnProperty(V)&&ct($)},x),x.g={}}Sr.prototype.N=function(){Sr.aa.N.call(this),lr(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hn=a.JSON.stringify,Sn=a.JSON.parse,tr=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function nr(){}nr.prototype.h=null;function Lo(x){return x.h||(x.h=x.i())}function Di(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oi(){j.call(this,"d")}p(Oi,j);function Tr(){j.call(this,"c")}p(Tr,j);var fs={},ep=null;function rl(){return ep=ep||new pe}fs.La="serverreachability";function od(x){j.call(this,fs.La,x)}p(od,j);function wr(x){const $=rl();Ce($,new od($))}fs.STAT_EVENT="statevent";function Si(x,$){j.call(this,fs.STAT_EVENT,x),this.stat=$}p(Si,j);function Gr(x){const $=rl();Ce($,new Si($,x))}fs.Ma="timingevent";function ou(x,$){j.call(this,fs.Ma,x),this.size=$}p(ou,j);function Sa(x,$){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},$)}function Ta(){this.g=!0}Ta.prototype.xa=function(){this.g=!1};function oe(x,$,V,Q,_e,De){x.info(function(){if(x.g)if(De)for(var ft="",Hr=De.split("&"),fo=0;fo<Hr.length;fo++){var cr=Hr[fo].split("=");if(1<cr.length){var Uo=cr[0];cr=cr[1];var zo=Uo.split("_");ft=2<=zo.length&&zo[1]=="type"?ft+(Uo+"="+cr+"&"):ft+(Uo+"=redacted&")}}else ft=null;else ft=De;return"XMLHTTP REQ ("+Q+") [attempt "+_e+"]: "+$+`
`+V+`
`+ft})}function ee(x,$,V,Q,_e,De,ft){x.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+_e+"]: "+$+`
`+V+`
`+De+" "+ft})}function ae(x,$,V,Q){x.info(function(){return"XMLHTTP TEXT ("+$+"): "+xe(x,V)+(Q?" "+Q:"")})}function Se(x,$){x.info(function(){return"TIMEOUT: "+$})}Ta.prototype.info=function(){};function xe(x,$){if(!x.g)return $;if(!$)return null;try{var V=JSON.parse($);if(V){for(x=0;x<V.length;x++)if(Array.isArray(V[x])){var Q=V[x];if(!(2>Q.length)){var _e=Q[1];if(Array.isArray(_e)&&!(1>_e.length)){var De=_e[0];if(De!="noop"&&De!="stop"&&De!="close")for(var ft=1;ft<_e.length;ft++)_e[ft]=""}}}}return hn(V)}catch{return $}}var st={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vt;function Dn(){}p(Dn,nr),Dn.prototype.g=function(){return new XMLHttpRequest},Dn.prototype.i=function(){return{}},Vt=new Dn;function Fn(x,$,V,Q){this.j=x,this.i=$,this.l=V,this.R=Q||1,this.U=new Sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fn}function fn(){this.i=null,this.g="",this.h=!1}var rr={},Ar={};function zt(x,$,V){x.L=1,x.v=jn(Ge($)),x.m=V,x.P=!0,ir(x,null)}function ir(x,$){x.F=Date.now(),Ti(x),x.A=Ge(x.v);var V=x.A,Q=x.R;Array.isArray(Q)||(Q=[String(Q)]),mR(V.i,"t",Q),x.C=0,V=x.j.J,x.h=new fn,x.g=$re(x.j,V?$:null,!x.m),0<x.O&&(x.M=new Mn(d(x.Y,x,x.g),x.O)),$=x.U,V=x.g,Q=x.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(Ln[0]=_e.toString()),_e=Ln);for(var De=0;De<_e.length;De++){var ft=rt(V,_e[De],Q||$.handleEvent,!1,$.h||$);if(!ft)break;$.g[ft.key]=ft}$=x.H?A(x.H):{},x.m?(x.u||(x.u="POST"),$["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,$)):(x.u="GET",x.g.ea(x.A,x.u,null,$)),wr(),oe(x.i,x.u,x.A,x.l,x.R,x.m)}Fn.prototype.ca=function(x){x=x.target;const $=this.M;$&&Qi(x)==3?$.j():this.Y(x)},Fn.prototype.Y=function(x){try{if(x==this.g)e:{const zo=Qi(this.g);var $=this.g.Ba();const Jb=this.g.Z();if(!(3>zo)&&(zo!=3||this.g&&(this.h.h||this.g.oa()||Bo(this.g)))){this.J||zo!=4||$==7||($==8||0>=Jb?wr(3):wr(2)),Yr(this);var V=this.g.Z();this.X=V;t:if(Ur(this)){var Q=Bo(this.g);x="";var _e=Q.length,De=Qi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$i(this),co(this);var ft="";break t}this.h.i=new a.TextDecoder}for($=0;$<_e;$++)this.h.h=!0,x+=this.h.i.decode(Q[$],{stream:!(De&&$==_e-1)});Q.length=0,this.h.g+=x,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=V==200,ee(this.i,this.u,this.A,this.l,this.R,zo,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Hr,fo=this.g;if((Hr=fo.g?fo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Hr)){var cr=Hr;break t}}cr=null}if(V=cr)ae(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mi(this,V);else{this.o=!1,this.s=3,Gr(12),$i(this),co(this);break e}}if(this.P){V=!0;let Vc;for(;!this.J&&this.C<ft.length;)if(Vc=Qn(this,ft),Vc==Ar){zo==4&&(this.s=4,Gr(14),V=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(Vc==rr){this.s=4,Gr(15),ae(this.i,this.l,ft,"[Invalid Chunk]"),V=!1;break}else ae(this.i,this.l,Vc,null),Mi(this,Vc);if(Ur(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zo!=4||ft.length!=0||this.h.h||(this.s=1,Gr(16),V=!1),this.o=this.o&&V,!V)ae(this.i,this.l,ft,"[Invalid Chunked Response]"),$i(this),co(this);else if(0<ft.length&&!this.W){this.W=!0;var Uo=this.j;Uo.g==this&&Uo.ba&&!Uo.M&&(Uo.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),c5(Uo),Uo.M=!0,Gr(11))}}else ae(this.i,this.l,ft,null),Mi(this,ft);zo==4&&$i(this),this.o&&!this.J&&(zo==4?Nre(this.j,this):(this.o=!1,Ti(this)))}else Qy(this.g),V==400&&0<ft.indexOf("Unknown SID")?(this.s=3,Gr(12)):(this.s=0,Gr(13)),$i(this),co(this)}}}catch{}finally{}};function Ur(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Qn(x,$){var V=x.C,Q=$.indexOf(`
`,V);return Q==-1?Ar:(V=Number($.substring(V,Q)),isNaN(V)?rr:(Q+=1,Q+V>$.length?Ar:($=$.slice(Q,Q+V),x.C=Q+V,$)))}Fn.prototype.cancel=function(){this.J=!0,$i(this)};function Ti(x){x.S=Date.now()+x.I,Bs(x,x.I)}function Bs(x,$){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Sa(d(x.ba,x),$)}function Yr(x){x.B&&(a.clearTimeout(x.B),x.B=null)}Fn.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Se(this.i,this.A),this.L!=2&&(wr(),Gr(17)),$i(this),this.s=2,co(this)):Bs(this,this.S-x)};function co(x){x.j.G==0||x.J||Nre(x.j,x)}function $i(x){Yr(x);var $=x.M;$&&typeof $.ma=="function"&&$.ma(),x.M=null,lr(x.U),x.g&&($=x.g,x.g=null,$.abort(),$.ma())}function Mi(x,$){try{var V=x.j;if(V.G!=0&&(V.g==x||ad(V.h,x))){if(!x.K&&ad(V.h,x)&&V.G==3){try{var Q=V.Da.g.parse($)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var _e=Q;if(_e[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<x.F)ER(V),_R(V);else break e;l5(V),Gr(18)}}else V.za=_e[1],0<V.za-V.T&&37500>_e[2]&&V.F&&V.v==0&&!V.C&&(V.C=Sa(d(V.Za,V),6e3));if(1>=Wl(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Jy(V,11)}else if((x.K||V.g==x)&&ER(V),!v($))for(_e=V.Da.g.parse($),$=0;$<_e.length;$++){let cr=_e[$];if(V.T=cr[0],cr=cr[1],V.G==2)if(cr[0]=="c"){V.K=cr[1],V.ia=cr[2];const Uo=cr[3];Uo!=null&&(V.la=Uo,V.j.info("VER="+V.la));const zo=cr[4];zo!=null&&(V.Aa=zo,V.j.info("SVER="+V.Aa));const Jb=cr[5];Jb!=null&&typeof Jb=="number"&&0<Jb&&(Q=1.5*Jb,V.L=Q,V.j.info("backChannelRequestTimeoutMs_="+Q)),Q=V;const Vc=x.g;if(Vc){const SR=Vc.g?Vc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(SR){var De=Q.h;De.g||SR.indexOf("spdy")==-1&&SR.indexOf("quic")==-1&&SR.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(Y(De,De.h),De.h=null))}if(Q.D){const f5=Vc.g?Vc.g.getResponseHeader("X-HTTP-Session-Id"):null;f5&&(Q.ya=f5,Nt(Q.I,Q.D,f5))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-x.F,V.j.info("Handshake RTT: "+V.R+"ms")),Q=V;var ft=x;if(Q.qa=Ore(Q,Q.J?Q.ia:null,Q.W),ft.K){se(Q.h,ft);var Hr=ft,fo=Q.L;fo&&(Hr.I=fo),Hr.B&&(Yr(Hr),Ti(Hr)),Q.g=ft}else kre(Q);0<V.i.length&&wR(V)}else cr[0]!="stop"&&cr[0]!="close"||Jy(V,7);else V.G==3&&(cr[0]=="stop"||cr[0]=="close"?cr[0]=="stop"?Jy(V,7):Xb(V):cr[0]!="noop"&&V.l&&V.l.ta(cr),V.v=0)}}wr(4)}catch{}}var Fo=class{constructor(x,$){this.g=x,this.map=$}};function Aa(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Us(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Wl(x){return x.h?1:x.g?x.g.size:0}function ad(x,$){return x.h?x.h==$:x.g?x.g.has($):!1}function Y(x,$){x.g?x.g.add($):x.h=$}function se(x,$){x.h&&x.h==$?x.h=null:x.g&&x.g.has($)&&x.g.delete($)}Aa.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Z(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let $=x.i;for(const V of x.g.values())$=$.concat(V.D);return $}return m(x.i)}function fe(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var $=[],V=x.length,Q=0;Q<V;Q++)$.push(x[Q]);return $}$=[],V=0;for(Q in x)$[V++]=x[Q];return $}function ge(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var $=[];x=x.length;for(var V=0;V<x;V++)$.push(V);return $}$=[],V=0;for(const Q in x)$[V++]=Q;return $}}}function le(x,$){if(x.forEach&&typeof x.forEach=="function")x.forEach($,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,$,void 0);else for(var V=ge(x),Q=fe(x),_e=Q.length,De=0;De<_e;De++)$.call(void 0,Q[De],V&&V[De],x)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ve(x,$){if(x){x=x.split("&");for(var V=0;V<x.length;V++){var Q=x[V].indexOf("="),_e=null;if(0<=Q){var De=x[V].substring(0,Q);_e=x[V].substring(Q+1)}else De=x[V];$(De,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function qe(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof qe){this.h=x.h,it(this,x.j),this.o=x.o,this.g=x.g,Et(this,x.s),this.l=x.l;var $=x.i,V=new Gl;V.i=$.i,$.g&&(V.g=new Map($.g),V.h=$.h),dn(this,V),this.m=x.m}else x&&($=String(x).match(Oe))?(this.h=!1,it(this,$[1]||"",!0),this.o=Cr($[2]||""),this.g=Cr($[3]||"",!0),Et(this,$[4]),this.l=Cr($[5]||"",!0),dn(this,$[6]||"",!0),this.m=Cr($[7]||"")):(this.h=!1,this.i=new Gl(null,this.h))}qe.prototype.toString=function(){var x=[],$=this.j;$&&x.push(Ir($,ud,!0),":");var V=this.g;return(V||$=="file")&&(x.push("//"),($=this.o)&&x.push(Ir($,ud,!0),"@"),x.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&x.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&x.push("/"),x.push(Ir(V,V.charAt(0)=="/"?$S:tp,!0))),(V=this.i.toString())&&x.push("?",V),(V=this.m)&&x.push("#",Ir(V,pR)),x.join("")};function Ge(x){return new qe(x)}function it(x,$,V){x.j=V?Cr($,!0):$,x.j&&(x.j=x.j.replace(/:$/,""))}function Et(x,$){if($){if($=Number($),isNaN($)||0>$)throw Error("Bad port number "+$);x.s=$}else x.s=null}function dn(x,$,V){$ instanceof Gl?(x.i=$,MS(x.i,x.h)):(V||($=Ir($,Gy)),x.i=new Gl($,x.h))}function Nt(x,$,V){x.i.set($,V)}function jn(x){return Nt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function Cr(x,$){return x?$?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Ir(x,$,V){return typeof x=="string"?(x=encodeURI(x).replace($,jo),V&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function jo(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var ud=/[#\/\?@]/g,tp=/[#\?:]/g,$S=/[#\?]/g,Gy=/[#\?@]/g,pR=/#/g;function Gl(x,$){this.h=this.g=null,this.i=x||null,this.j=!!$}function au(x){x.g||(x.g=new Map,x.h=0,x.i&&Ve(x.i,function($,V){x.add(decodeURIComponent($.replace(/\+/g," ")),V)}))}e=Gl.prototype,e.add=function(x,$){au(this),this.i=null,x=rp(this,x);var V=this.g.get(x);return V||this.g.set(x,V=[]),V.push($),this.h+=1,this};function np(x,$){au(x),$=rp(x,$),x.g.has($)&&(x.i=null,x.h-=x.g.get($).length,x.g.delete($))}function Yb(x,$){return au(x),$=rp(x,$),x.g.has($)}e.forEach=function(x,$){au(this),this.g.forEach(function(V,Q){V.forEach(function(_e){x.call($,_e,Q,this)},this)},this)},e.na=function(){au(this);const x=Array.from(this.g.values()),$=Array.from(this.g.keys()),V=[];for(let Q=0;Q<$.length;Q++){const _e=x[Q];for(let De=0;De<_e.length;De++)V.push($[Q])}return V},e.V=function(x){au(this);let $=[];if(typeof x=="string")Yb(this,x)&&($=$.concat(this.g.get(rp(this,x))));else{x=Array.from(this.g.values());for(let V=0;V<x.length;V++)$=$.concat(x[V])}return $},e.set=function(x,$){return au(this),this.i=null,x=rp(this,x),Yb(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[$]),this.h+=1,this},e.get=function(x,$){return x?(x=this.V(x),0<x.length?String(x[0]):$):$};function mR(x,$,V){np(x,$),0<V.length&&(x.i=null,x.g.set(rp(x,$),m(V)),x.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],$=Array.from(this.g.keys());for(var V=0;V<$.length;V++){var Q=$[V];const De=encodeURIComponent(String(Q)),ft=this.V(Q);for(Q=0;Q<ft.length;Q++){var _e=De;ft[Q]!==""&&(_e+="="+encodeURIComponent(String(ft[Q]))),x.push(_e)}}return this.i=x.join("&")};function rp(x,$){return $=String($),x.j&&($=$.toLowerCase()),$}function MS(x,$){$&&!x.j&&(au(x),x.i=null,x.g.forEach(function(V,Q){var _e=Q.toLowerCase();Q!=_e&&(np(this,Q),mR(this,_e,V))},x)),x.j=$}function gR(x,$){const V=new Ta;if(a.Image){const Q=new Image;Q.onload=h(uu,V,"TestLoadImage: loaded",!0,$,Q),Q.onerror=h(uu,V,"TestLoadImage: error",!1,$,Q),Q.onabort=h(uu,V,"TestLoadImage: abort",!1,$,Q),Q.ontimeout=h(uu,V,"TestLoadImage: timeout",!1,$,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=x}else $(!1)}function ip(x,$){const V=new Ta,Q=new AbortController,_e=setTimeout(()=>{Q.abort(),uu(V,"TestPingServer: timeout",!1,$)},1e4);fetch(x,{signal:Q.signal}).then(De=>{clearTimeout(_e),De.ok?uu(V,"TestPingServer: ok",!0,$):uu(V,"TestPingServer: server error",!1,$)}).catch(()=>{clearTimeout(_e),uu(V,"TestPingServer: error",!1,$)})}function uu(x,$,V,Q,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),Q(V)}catch{}}function u5(){this.g=new tr}function yR(x,$,V){const Q=V||"";try{le(x,function(_e,De){let ft=_e;l(_e)&&(ft=hn(_e)),$.push(Q+De+"="+encodeURIComponent(ft))})}catch(_e){throw $.push(Q+"type="+encodeURIComponent("_badmap")),_e}}function Yy(x){this.l=x.Ub||null,this.j=x.eb||!1}p(Yy,nr),Yy.prototype.g=function(){return new Ky(this.l,this.j)},Yy.prototype.i=function(x){return function(){return x}}({});function Ky(x,$){pe.call(this),this.D=x,this.o=$,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Ky,pe),e=Ky.prototype,e.open=function(x,$){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=$,this.readyState=1,ug(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const $={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&($.body=x),(this.D||a).fetch(new Request(this.A,$)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xy(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ug(this)),this.g&&(this.readyState=3,ug(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vR(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function vR(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var $=x.value?x.value:new Uint8Array(0);($=this.v.decode($,{stream:!x.done}))&&(this.response=this.responseText+=$)}x.done?Xy(this):ug(this),this.readyState==3&&vR(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,Xy(this))},e.Qa=function(x){this.g&&(this.response=x,Xy(this))},e.ga=function(){this.g&&Xy(this)};function Xy(x){x.readyState=4,x.l=null,x.j=null,x.v=null,ug(x)}e.setRequestHeader=function(x,$){this.u.append(x,$)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],$=this.h.entries();for(var V=$.next();!V.done;)V=V.value,x.push(V[0]+": "+V[1]),V=$.next();return x.join(`\r
`)};function ug(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Ky.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function bR(x){let $="";return S(x,function(V,Q){$+=Q,$+=":",$+=V,$+=`\r
`}),$}function te(x,$,V){e:{for(Q in V){var Q=!1;break e}Q=!0}Q||(V=bR(V),typeof x=="string"?V!=null&&encodeURIComponent(String(V)):Nt(x,$,V))}function ue(x){pe.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,pe);var Re=/^https?$/i,Ct=["POST","PUT"];e=ue.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,$,V,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);$=$?$.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vt.g(),this.v=this.o?Lo(this.o):Lo(Vt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open($,String(x),!0),this.B=!1}catch(De){On(this,De);return}if(x=V||"",V=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var _e in Q)V.set(_e,Q[_e]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const De of Q.keys())V.set(De,Q.get(De));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(V.keys()).find(De=>De.toLowerCase()=="content-type"),_e=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ct,$,void 0))||Q||_e||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,ft]of V)this.g.setRequestHeader(De,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vr(this),this.u=!0,this.g.send(x),this.u=!1}catch(De){On(this,De)}};function On(x,$){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=$,x.m=5,Er(x),Bn(x)}function Er(x){x.A||(x.A=!0,Ce(x,"complete"),Ce(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ce(this,"complete"),Ce(this,"abort"),Bn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bn(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zr(this):this.bb())},e.bb=function(){zr(this)};function zr(x){if(x.h&&typeof o<"u"&&(!x.v[1]||Qi(x)!=4||x.Z()!=2)){if(x.u&&Qi(x)==4)ut(x.Ea,0,x);else if(Ce(x,"readystatechange"),Qi(x)==4){x.h=!1;try{const ft=x.Z();e:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var $=!0;break e;default:$=!1}var V;if(!(V=$)){var Q;if(Q=ft===0){var _e=String(x.D).match(Oe)[1]||null;!_e&&a.self&&a.self.location&&(_e=a.self.location.protocol.slice(0,-1)),Q=!Re.test(_e?_e.toLowerCase():"")}V=Q}if(V)Ce(x,"complete"),Ce(x,"success");else{x.m=6;try{var De=2<Qi(x)?x.g.statusText:""}catch{De=""}x.l=De+" ["+x.Z()+"]",Er(x)}}finally{Bn(x)}}}}function Bn(x,$){if(x.g){Vr(x);const V=x.g,Q=x.v[0]?()=>{}:null;x.g=null,x.v=null,$||Ce(x,"ready");try{V.onreadystatechange=Q}catch{}}}function Vr(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function Qi(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<Qi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var $=this.g.responseText;return x&&$.indexOf(x)==0&&($=$.substring(x.length)),Sn($)}};function Bo(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Qy(x){const $={};x=(x.g&&2<=Qi(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<x.length;Q++){if(v(x[Q]))continue;var V=R(x[Q]);const _e=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const De=$[_e]||[];$[_e]=De,De.push(V)}T($,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sp(x,$,V){return V&&V.internalChannelParams&&V.internalChannelParams[x]||$}function Kb(x){this.Aa=0,this.i=[],this.j=new Ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sp("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sp("baseRetryDelayMs",5e3,x),this.cb=sp("retryDelaySeedMs",1e4,x),this.Wa=sp("forwardChannelMaxRetries",2,x),this.wa=sp("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Aa(x&&x.concurrentRequestLimit),this.Da=new u5,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Kb.prototype,e.la=8,e.G=1,e.connect=function(x,$,V,Q){Gr(0),this.W=x,this.H=$||{},V&&Q!==void 0&&(this.H.OSID=V,this.H.OAID=Q),this.F=this.X,this.I=Ore(this,null,this.W),wR(this)};function Xb(x){if(Are(x),x.G==3){var $=x.U++,V=Ge(x.I);if(Nt(V,"SID",x.K),Nt(V,"RID",$),Nt(V,"TYPE","terminate"),LS(x,V),$=new Fn(x,x.j,$),$.L=2,$.v=jn(Ge(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon($.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=$.v,V=!0),V||($.g=$re($.j,null),$.g.ea($.v)),$.F=Date.now(),Ti($)}Dre(x)}function _R(x){x.g&&(c5(x),x.g.cancel(),x.g=null)}function Are(x){_R(x),x.u&&(a.clearTimeout(x.u),x.u=null),ER(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function wR(x){if(!Us(x.h)&&!x.s){x.s=!0;var $=x.Ga;B||D(),U||(B(),U=!0),H.add($,x),x.B=0}}function C5e(x,$){return Wl(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=$.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Sa(d(x.Ga,x,$),Pre(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const _e=new Fn(this,this.j,x);let De=this.o;if(this.S&&(De?(De=A(De),I(De,this.S)):De=this.S),this.m!==null||this.O||(_e.H=De,De=null),this.P)e:{for(var $=0,V=0;V<this.i.length;V++){t:{var Q=this.i[V];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if($+=Q,4096<$){$=V;break e}if($===4096||V===this.i.length-1){$=V+1;break e}}$=1e3}else $=1e3;$=Ire(this,_e,$),V=Ge(this.I),Nt(V,"RID",x),Nt(V,"CVER",22),this.D&&Nt(V,"X-HTTP-Session-Id",this.D),LS(this,V),De&&(this.O?$="headers="+encodeURIComponent(String(bR(De)))+"&"+$:this.m&&te(V,this.m,De)),Y(this.h,_e),this.Ua&&Nt(V,"TYPE","init"),this.P?(Nt(V,"$req",$),Nt(V,"SID","null"),_e.T=!0,zt(_e,V,null)):zt(_e,V,$),this.G=2}}else this.G==3&&(x?Cre(this,x):this.i.length==0||Us(this.h)||Cre(this))};function Cre(x,$){var V;$?V=$.l:V=x.U++;const Q=Ge(x.I);Nt(Q,"SID",x.K),Nt(Q,"RID",V),Nt(Q,"AID",x.T),LS(x,Q),x.m&&x.o&&te(Q,x.m,x.o),V=new Fn(x,x.j,V,x.B+1),x.m===null&&(V.H=x.o),$&&(x.i=$.D.concat(x.i)),$=Ire(x,V,1e3),V.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Y(x.h,V),zt(V,Q,$)}function LS(x,$){x.H&&S(x.H,function(V,Q){Nt($,Q,V)}),x.l&&le({},function(V,Q){Nt($,Q,V)})}function Ire(x,$,V){V=Math.min(x.i.length,V);var Q=x.l?d(x.l.Na,x.l,x):null;e:{var _e=x.i;let De=-1;for(;;){const ft=["count="+V];De==-1?0<V?(De=_e[0].g,ft.push("ofs="+De)):De=0:ft.push("ofs="+De);let Hr=!0;for(let fo=0;fo<V;fo++){let cr=_e[fo].g;const Uo=_e[fo].map;if(cr-=De,0>cr)De=Math.max(0,_e[fo].g-100),Hr=!1;else try{yR(Uo,ft,"req"+cr+"_")}catch{Q&&Q(Uo)}}if(Hr){Q=ft.join("&");break e}}}return x=x.i.splice(0,V),$.D=x,Q}function kre(x){if(!x.g&&!x.u){x.Y=1;var $=x.Fa;B||D(),U||(B(),U=!0),H.add($,x),x.v=0}}function l5(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Sa(d(x.Fa,x),Pre(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,Rre(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Sa(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gr(10),_R(this),Rre(this))};function c5(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function Rre(x){x.g=new Fn(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var $=Ge(x.qa);Nt($,"RID","rpc"),Nt($,"SID",x.K),Nt($,"AID",x.T),Nt($,"CI",x.F?"0":"1"),!x.F&&x.ja&&Nt($,"TO",x.ja),Nt($,"TYPE","xmlhttp"),LS(x,$),x.m&&x.o&&te($,x.m,x.o),x.L&&(x.g.I=x.L);var V=x.g;x=x.ia,V.L=1,V.v=jn(Ge($)),V.m=null,V.P=!0,ir(V,x)}e.Za=function(){this.C!=null&&(this.C=null,_R(this),l5(this),Gr(19))};function ER(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function Nre(x,$){var V=null;if(x.g==$){ER(x),c5(x),x.g=null;var Q=2}else if(ad(x.h,$))V=$.D,se(x.h,$),Q=1;else return;if(x.G!=0){if($.o)if(Q==1){V=$.m?$.m.length:0,$=Date.now()-$.F;var _e=x.B;Q=rl(),Ce(Q,new ou(Q,V)),wR(x)}else kre(x);else if(_e=$.s,_e==3||_e==0&&0<$.X||!(Q==1&&C5e(x,$)||Q==2&&l5(x)))switch(V&&0<V.length&&($=x.h,$.i=$.i.concat(V)),_e){case 1:Jy(x,5);break;case 4:Jy(x,10);break;case 3:Jy(x,6);break;default:Jy(x,2)}}}function Pre(x,$){let V=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(V*=2),V*$}function Jy(x,$){if(x.j.info("Error code "+$),$==2){var V=d(x.fb,x),Q=x.Xa;const _e=!Q;Q=new qe(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||it(Q,"https"),jn(Q),_e?gR(Q.toString(),V):ip(Q.toString(),V)}else Gr(2);x.G=0,x.l&&x.l.sa($),Dre(x),Are(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Gr(2)):(this.j.info("Failed to ping google.com"),Gr(1))};function Dre(x){if(x.G=0,x.ka=[],x.l){const $=Z(x.h);($.length!=0||x.i.length!=0)&&(g(x.ka,$),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function Ore(x,$,V){var Q=V instanceof qe?Ge(V):new qe(V);if(Q.g!="")$&&(Q.g=$+"."+Q.g),Et(Q,Q.s);else{var _e=a.location;Q=_e.protocol,$=$?$+"."+_e.hostname:_e.hostname,_e=+_e.port;var De=new qe(null);Q&&it(De,Q),$&&(De.g=$),_e&&Et(De,_e),V&&(De.l=V),Q=De}return V=x.D,$=x.ya,V&&$&&Nt(Q,V,$),Nt(Q,"VER",x.la),LS(x,Q),Q}function $re(x,$,V){if($&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return $=x.Ca&&!x.pa?new ue(new Yy({eb:V})):new ue(x.pa),$.Ha(x.J),$}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mre(){}e=Mre.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function xR(){}xR.prototype.g=function(x,$){return new il(x,$)};function il(x,$){pe.call(this),this.g=new Kb($),this.l=x,this.h=$&&$.messageUrlParams||null,x=$&&$.messageHeaders||null,$&&$.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=$&&$.initMessageHeaders||null,$&&$.messageContentType&&(x?x["X-WebChannel-Content-Type"]=$.messageContentType:x={"X-WebChannel-Content-Type":$.messageContentType}),$&&$.va&&(x?x["X-WebChannel-Client-Profile"]=$.va:x={"X-WebChannel-Client-Profile":$.va}),this.g.S=x,(x=$&&$.Sb)&&!v(x)&&(this.g.m=x),this.v=$&&$.supportsCrossDomainXhr||!1,this.u=$&&$.sendRawJson||!1,($=$&&$.httpSessionIdParam)&&!v($)&&(this.g.D=$,x=this.h,x!==null&&$ in x&&(x=this.h,$ in x&&delete x[$])),this.j=new Qb(this)}p(il,pe),il.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},il.prototype.close=function(){Xb(this.g)},il.prototype.o=function(x){var $=this.g;if(typeof x=="string"){var V={};V.__data__=x,x=V}else this.u&&(V={},V.__data__=hn(x),x=V);$.i.push(new Fo($.Ya++,x)),$.G==3&&wR($)},il.prototype.N=function(){this.g.l=null,delete this.j,Xb(this.g),delete this.g,il.aa.N.call(this)};function Lre(x){Oi.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var $=x.__sm__;if($){e:{for(const V in $){x=V;break e}x=void 0}(this.i=x)&&(x=this.i,$=$!==null&&x in $?$[x]:void 0),this.data=$}else this.data=x}p(Lre,Oi);function Fre(){Tr.call(this),this.status=1}p(Fre,Tr);function Qb(x){this.g=x}p(Qb,Mre),Qb.prototype.ua=function(){Ce(this.g,"a")},Qb.prototype.ta=function(x){Ce(this.g,new Lre(x))},Qb.prototype.sa=function(x){Ce(this.g,new Fre)},Qb.prototype.ra=function(){Ce(this.g,"b")},xR.prototype.createWebChannel=xR.prototype.g,il.prototype.send=il.prototype.o,il.prototype.open=il.prototype.m,il.prototype.close=il.prototype.close,tNe=function(){return new xR},eNe=function(){return rl()},ZRe=fs,Xz={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,aD=st,St.COMPLETE="complete",JRe=St,Di.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",pe.prototype.listen=pe.prototype.K,cA=Di,QRe=Yy,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,XRe=ue}).apply(typeof ON<"u"?ON:typeof self<"u"?self:typeof window<"u"?window:{});const mde="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}pu.UNAUTHENTICATED=new pu(null),pu.GOOGLE_CREDENTIALS=new pu("google-credentials-uid"),pu.FIRST_PARTY=new pu("first-party-uid"),pu.MOCK_USER=new pu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new F6("@firebase/firestore");function gT(){return Gv.logLevel}function It(e,...t){if(Gv.logLevel<=Wn.DEBUG){const n=t.map(ZQ);Gv.debug(`Firestore (${lS}): ${e}`,...n)}}function Rm(e,...t){if(Gv.logLevel<=Wn.ERROR){const n=t.map(ZQ);Gv.error(`Firestore (${lS}): ${e}`,...n)}}function L2(e,...t){if(Gv.logLevel<=Wn.WARN){const n=t.map(ZQ);Gv.warn(`Firestore (${lS}): ${e}`,...n)}}function ZQ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(e="Unexpected state"){const t=`FIRESTORE (${lS}) INTERNAL ASSERTION FAILED: `+e;throw Rm(t),new Error(t)}function ti(e,t){e||sn()}function cn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Vh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XPt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class QPt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(pu.UNAUTHENTICATED))}shutdown(){}}class JPt{constructor(t){this.t=t,this.currentUser=pu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Zp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zp,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zp)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ti(typeof r.accessToken=="string"),new XPt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ti(t===null||typeof t=="string"),new pu(t)}}class ZPt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=pu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eDt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new ZPt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(pu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tDt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nDt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ti(typeof n.token=="string"),this.R=n.token,new tDt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rDt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nNe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=rDt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function yr(e,t){return e<t?-1:e>t?1:0}function FE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ns.fromMillis(Date.now())}static fromDate(t){return Ns.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ns(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?yr(this.nanoseconds,t.nanoseconds):yr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ln(t)}static min(){return new ln(new Ns(0,0))}static max(){return new ln(new Ns(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(t,n,r){n===void 0?n=0:n>t.length&&sn(),r===void 0?r=t.length-n:r>t.length-n&&sn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return F2.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof F2?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class oi extends F2{construct(t,n,r){return new oi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new oi(n)}static emptyPath(){return new oi([])}}const iDt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xo extends F2{construct(t,n,r){return new xo(t,n,r)}static isValidIdentifier(t){return iDt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xo(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new xo(n)}static emptyPath(){return new xo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.path=t}static fromPath(t){return new Bt(oi.fromString(t))}static fromName(t){return new Bt(oi.fromString(t).popFirst(5))}static empty(){return new Bt(oi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&oi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return oi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Bt(new oi(t.slice()))}}function sDt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ln.fromTimestamp(r===1e9?new Ns(n+1,0):new Ns(n,r));return new J0(i,Bt.empty(),t)}function oDt(e){return new J0(e.readTime,e.key,-1)}class J0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new J0(ln.min(),Bt.empty(),-1)}static max(){return new J0(ln.max(),Bt.empty(),-1)}}function aDt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Bt.comparator(e.documentKey,t.documentKey),n!==0?n:yr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uDt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lDt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==uDt)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&sn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Xe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Xe?n:Xe.resolve(n)}catch(n){return Xe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.reject(n)}static resolve(t){return new Xe((n,r)=>{n(t)})}static reject(t){return new Xe((n,r)=>{r(t)})}static waitFor(t){return new Xe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Xe.resolve(!1);for(const r of t)n=n.next(i=>i?Xe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Xe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Xe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function cDt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wk(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}eJ.oe=-1;function q6(e){return e==null}function m$(e){return e===0&&1/e==-1/0}function fDt(e){return typeof e=="number"&&Number.isInteger(e)&&!m$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gde(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function rNe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(t,n){this.comparator=t,this.root=n||_o.EMPTY}insert(t,n){return new Pi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,_o.BLACK,null,null))}remove(t){return new Pi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,_o.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new $N(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new $N(this.root,t,this.comparator,!1)}getReverseIterator(){return new $N(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new $N(this.root,t,this.comparator,!0)}}class $N{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class _o{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??_o.RED,this.left=i??_o.EMPTY,this.right=s??_o.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new _o(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _o.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return _o.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,_o.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,_o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw sn();const t=this.left.check();if(t!==this.right.check())throw sn();return t+(this.isRed()?0:1)}}_o.EMPTY=null,_o.RED=!0,_o.BLACK=!1;_o.EMPTY=new class{constructor(){this.size=0}get key(){throw sn()}get value(){throw sn()}get color(){throw sn()}get left(){throw sn()}get right(){throw sn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new _o(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(t){this.comparator=t,this.data=new Pi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new yde(this.data.getIterator())}getIteratorFrom(t){return new yde(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Io)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Io(this.comparator);return n.data=t,n}}class yde{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t){this.fields=t,t.sort(xo.comparator)}static empty(){return new _l([])}unionWith(t){let n=new Io(xo.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new _l(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return FE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iNe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iNe("Invalid base64 string: "+s):s}}(t);return new ya(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new ya(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return yr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ya.EMPTY_BYTE_STRING=new ya("");const dDt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Z0(e){if(ti(!!e),typeof e=="string"){let t=0;const n=dDt.exec(e);if(ti(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ms(e.seconds),nanos:ms(e.nanos)}}function ms(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Yv(e){return typeof e=="string"?ya.fromBase64String(e):ya.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tJ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function nJ(e){const t=e.mapValue.fields.__previous_value__;return tJ(t)?nJ(t):t}function j2(e){const t=Z0(e.mapValue.fields.__local_write_time__.timestampValue);return new Ns(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hDt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class B2{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new B2("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof B2&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Kv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?tJ(e)?4:pDt(e)?9007199254740991:10:sn()}function Eh(e,t){if(e===t)return!0;const n=Kv(e);if(n!==Kv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return j2(e).isEqual(j2(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Z0(i.timestampValue),a=Z0(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return Yv(i.bytesValue).isEqual(Yv(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ms(i.geoPointValue.latitude)===ms(s.geoPointValue.latitude)&&ms(i.geoPointValue.longitude)===ms(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ms(i.integerValue)===ms(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ms(i.doubleValue),a=ms(s.doubleValue);return o===a?m$(o)===m$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return FE(e.arrayValue.values||[],t.arrayValue.values||[],Eh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(gde(o)!==gde(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Eh(o[u],a[u])))return!1;return!0}(e,t);default:return sn()}}function U2(e,t){return(e.values||[]).find(n=>Eh(n,t))!==void 0}function jE(e,t){if(e===t)return 0;const n=Kv(e),r=Kv(t);if(n!==r)return yr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return yr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ms(s.integerValue||s.doubleValue),u=ms(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return vde(e.timestampValue,t.timestampValue);case 4:return vde(j2(e),j2(t));case 5:return yr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=Yv(s),u=Yv(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=yr(a[l],u[l]);if(c!==0)return c}return yr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=yr(ms(s.latitude),ms(o.latitude));return a!==0?a:yr(ms(s.longitude),ms(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=jE(a[l],u[l]);if(c)return c}return yr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===MN.mapValue&&o===MN.mapValue)return 0;if(s===MN.mapValue)return 1;if(o===MN.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=yr(u[f],c[f]);if(d!==0)return d;const h=jE(a[u[f]],l[c[f]]);if(h!==0)return h}return yr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw sn()}}function vde(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return yr(e,t);const n=Z0(e),r=Z0(t),i=yr(n.seconds,r.seconds);return i!==0?i:yr(n.nanos,r.nanos)}function BE(e){return Qz(e)}function Qz(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Z0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Yv(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Bt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Qz(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Qz(n.fields[o])}`;return i+"}"}(e.mapValue):sn()}function bde(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Jz(e){return!!e&&"integerValue"in e}function rJ(e){return!!e&&"arrayValue"in e}function _de(e){return!!e&&"nullValue"in e}function wde(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uD(e){return!!e&&"mapValue"in e}function pC(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Rb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=pC(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=pC(e.arrayValue.values[n]);return t}return Object.assign({},e)}function pDt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(t){this.value=t}static empty(){return new Su({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!uD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=pC(n)}setAll(t){let n=xo.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=pC(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());uD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Eh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];uD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Rb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Su(pC(this.value))}}function sNe(e){const t=[];return Rb(e.fields,(n,r)=>{const i=new xo([n]);if(uD(r)){const s=sNe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new _l(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ia(t,0,ln.min(),ln.min(),ln.min(),Su.empty(),0)}static newFoundDocument(t,n,r,i){return new ia(t,1,n,ln.min(),r,i,0)}static newNoDocument(t,n){return new ia(t,2,n,ln.min(),ln.min(),Su.empty(),0)}static newUnknownDocument(t,n){return new ia(t,3,n,ln.min(),ln.min(),Su.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ln.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Su.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Su.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ln.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ia&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ia(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g$=class{constructor(t,n){this.position=t,this.inclusive=n}};function Ede(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Bt.comparator(Bt.fromName(o.referenceValue),n.key):r=jE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function xde(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Eh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(t,n="asc"){this.field=t,this.dir=n}}function mDt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oNe=class{};class ys extends oNe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new yDt(t,n,r):n==="array-contains"?new _Dt(t,r):n==="in"?new wDt(t,r):n==="not-in"?new EDt(t,r):n==="array-contains-any"?new xDt(t,r):new ys(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new vDt(t,r):new bDt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(jE(n,this.value)):n!==null&&Kv(this.value)===Kv(n)&&this.matchesComparison(jE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return sn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bf extends oNe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Bf(t,n)}matches(t){return aNe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function aNe(e){return e.op==="and"}function uNe(e){return gDt(e)&&aNe(e)}function gDt(e){for(const t of e.filters)if(t instanceof Bf)return!1;return!0}function Zz(e){if(e instanceof ys)return e.field.canonicalString()+e.op.toString()+BE(e.value);if(uNe(e))return e.filters.map(t=>Zz(t)).join(",");{const t=e.filters.map(n=>Zz(n)).join(",");return`${e.op}(${t})`}}function lNe(e,t){return e instanceof ys?function(r,i){return i instanceof ys&&r.op===i.op&&r.field.isEqual(i.field)&&Eh(r.value,i.value)}(e,t):e instanceof Bf?function(r,i){return i instanceof Bf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&lNe(o,i.filters[a]),!0):!1}(e,t):void sn()}function cNe(e){return e instanceof ys?function(n){return`${n.field.canonicalString()} ${n.op} ${BE(n.value)}`}(e):e instanceof Bf?function(n){return n.op.toString()+" {"+n.getFilters().map(cNe).join(" ,")+"}"}(e):"Filter"}class yDt extends ys{constructor(t,n,r){super(t,n,r),this.key=Bt.fromName(r.referenceValue)}matches(t){const n=Bt.comparator(t.key,this.key);return this.matchesComparison(n)}}class vDt extends ys{constructor(t,n){super(t,"in",n),this.keys=fNe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class bDt extends ys{constructor(t,n){super(t,"not-in",n),this.keys=fNe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function fNe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Bt.fromName(r.referenceValue))}class _Dt extends ys{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return rJ(n)&&U2(n.arrayValue,this.value)}}class wDt extends ys{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&U2(this.value.arrayValue,n)}}class EDt extends ys{constructor(t,n){super(t,"not-in",n)}matches(t){if(U2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!U2(this.value.arrayValue,n)}}class xDt extends ys{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!rJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>U2(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SDt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Sde(e,t=null,n=[],r=[],i=null,s=null,o=null){return new SDt(e,t,n,r,i,s,o)}function iJ(e){const t=cn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Zz(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),q6(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>BE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>BE(r)).join(",")),t.ue=n}return t.ue}function sJ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!mDt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!lNe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!xde(e.startAt,t.startAt)&&xde(e.endAt,t.endAt)}function eV(e){return Bt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function TDt(e,t,n,r,i,s,o,a){return new cS(e,t,n,r,i,s,o,a)}function oJ(e){return new cS(e)}function Tde(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function dNe(e){return e.collectionGroup!==null}function mC(e){const t=cn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Io(xo.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new z2(s,r))}),n.has(xo.keyField().canonicalString())||t.ce.push(new z2(xo.keyField(),r))}return t.ce}function sh(e){const t=cn(e);return t.le||(t.le=ADt(t,mC(e))),t.le}function ADt(e,t){if(e.limitType==="F")return Sde(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new z2(i.field,s)});const n=e.endAt?new g$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new g$(e.startAt.position,e.startAt.inclusive):null;return Sde(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function tV(e,t){const n=e.filters.concat([t]);return new cS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function nV(e,t,n){return new cS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function W6(e,t){return sJ(sh(e),sh(t))&&e.limitType===t.limitType}function hNe(e){return`${iJ(sh(e))}|lt:${e.limitType}`}function D_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>cNe(i)).join(", ")}]`),q6(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>BE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>BE(i)).join(",")),`Target(${r})`}(sh(e))}; limitType=${e.limitType})`}function G6(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Bt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of mC(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Ede(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,mC(r),i)||r.endAt&&!function(o,a,u){const l=Ede(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,mC(r),i))}(e,t)}function CDt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function pNe(e){return(t,n)=>{let r=!1;for(const i of mC(e)){const s=IDt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function IDt(e,t,n){const r=e.field.isKeyField()?Bt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?jE(u,l):sn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Rb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return rNe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kDt=new Pi(Bt.comparator);function Nm(){return kDt}const mNe=new Pi(Bt.comparator);function fA(...e){let t=mNe;for(const n of e)t=t.insert(n.key,n);return t}function gNe(e){let t=mNe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function nv(){return gC()}function yNe(){return gC()}function gC(){return new fS(e=>e.toString(),(e,t)=>e.isEqual(t))}const RDt=new Pi(Bt.comparator),NDt=new Io(Bt.comparator);function Un(...e){let t=NDt;for(const n of e)t=t.add(n);return t}const PDt=new Io(yr);function DDt(){return PDt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vNe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:m$(t)?"-0":t}}function bNe(e){return{integerValue:""+e}}function ODt(e,t){return fDt(t)?bNe(t):vNe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(){this._=void 0}}function $Dt(e,t,n){return e instanceof V2?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&tJ(s)&&(s=nJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof H2?wNe(e,t):e instanceof q2?ENe(e,t):function(i,s){const o=_Ne(i,s),a=Ade(o)+Ade(i.Pe);return Jz(o)&&Jz(i.Pe)?bNe(a):vNe(i.serializer,a)}(e,t)}function MDt(e,t,n){return e instanceof H2?wNe(e,t):e instanceof q2?ENe(e,t):n}function _Ne(e,t){return e instanceof y$?function(r){return Jz(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class V2 extends Y6{}class H2 extends Y6{constructor(t){super(),this.elements=t}}function wNe(e,t){const n=xNe(t);for(const r of e.elements)n.some(i=>Eh(i,r))||n.push(r);return{arrayValue:{values:n}}}class q2 extends Y6{constructor(t){super(),this.elements=t}}function ENe(e,t){let n=xNe(t);for(const r of e.elements)n=n.filter(i=>!Eh(i,r));return{arrayValue:{values:n}}}class y$ extends Y6{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Ade(e){return ms(e.integerValue||e.doubleValue)}function xNe(e){return rJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LDt{constructor(t,n){this.field=t,this.transform=n}}function FDt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof H2&&i instanceof H2||r instanceof q2&&i instanceof q2?FE(r.elements,i.elements,Eh):r instanceof y$&&i instanceof y$?Eh(r.Pe,i.Pe):r instanceof V2&&i instanceof V2}(e.transform,t.transform)}class jDt{constructor(t,n){this.version=t,this.transformResults=n}}class Fu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Fu}static exists(t){return new Fu(void 0,t)}static updateTime(t){return new Fu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function lD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class K6{}function SNe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new X6(e.key,Fu.none()):new Ek(e.key,e.data,Fu.none());{const n=e.data,r=Su.empty();let i=new Io(xo.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Dy(e.key,r,new _l(i.toArray()),Fu.none())}}function BDt(e,t,n){e instanceof Ek?function(i,s,o){const a=i.value.clone(),u=Ide(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Dy?function(i,s,o){if(!lD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Ide(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(TNe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function yC(e,t,n,r){return e instanceof Ek?function(s,o,a,u){if(!lD(s.precondition,o))return a;const l=s.value.clone(),c=kde(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Dy?function(s,o,a,u){if(!lD(s.precondition,o))return a;const l=kde(s.fieldTransforms,u,o),c=o.data;return c.setAll(TNe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return lD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function UDt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=_Ne(r.transform,i||null);s!=null&&(n===null&&(n=Su.empty()),n.set(r.field,s))}return n||null}function Cde(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&FE(r,i,(s,o)=>FDt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ek extends K6{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Dy extends K6{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function TNe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ide(e,t,n){const r=new Map;ti(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,MDt(o,a,n[i]))}return r}function kde(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,$Dt(s,o,t))}return r}class X6 extends K6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zDt extends K6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VDt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&BDt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=yC(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=yC(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=yNe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=SNe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ln.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Un())}isEqual(t){return this.batchId===t.batchId&&FE(this.mutations,t.mutations,(n,r)=>Cde(n,r))&&FE(this.baseMutations,t.baseMutations,(n,r)=>Cde(n,r))}}class aJ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ti(t.mutations.length===r.length);let i=function(){return RDt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new aJ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HDt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qDt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ds,Jn;function WDt(e){switch(e){default:return sn();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function ANe(e){if(e===void 0)return Rm("GRPC error has no .code"),Be.UNKNOWN;switch(e){case ds.OK:return Be.OK;case ds.CANCELLED:return Be.CANCELLED;case ds.UNKNOWN:return Be.UNKNOWN;case ds.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case ds.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case ds.INTERNAL:return Be.INTERNAL;case ds.UNAVAILABLE:return Be.UNAVAILABLE;case ds.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case ds.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case ds.NOT_FOUND:return Be.NOT_FOUND;case ds.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case ds.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case ds.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case ds.ABORTED:return Be.ABORTED;case ds.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case ds.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case ds.DATA_LOSS:return Be.DATA_LOSS;default:return sn()}}(Jn=ds||(ds={}))[Jn.OK=0]="OK",Jn[Jn.CANCELLED=1]="CANCELLED",Jn[Jn.UNKNOWN=2]="UNKNOWN",Jn[Jn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jn[Jn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jn[Jn.NOT_FOUND=5]="NOT_FOUND",Jn[Jn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jn[Jn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jn[Jn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jn[Jn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jn[Jn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jn[Jn.ABORTED=10]="ABORTED",Jn[Jn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jn[Jn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jn[Jn.INTERNAL=13]="INTERNAL",Jn[Jn.UNAVAILABLE=14]="UNAVAILABLE",Jn[Jn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GDt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YDt=new pv([4294967295,4294967295],0);function Rde(e){const t=GDt().encode(e),n=new KRe;return n.update(t),new Uint8Array(n.digest())}function Nde(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new pv([n,r],0),new pv([i,s],0)]}class uJ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dA(`Invalid padding: ${n}`);if(r<0)throw new dA(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new dA(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new dA(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=pv.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(pv.fromNumber(r)));return i.compare(YDt)===1&&(i=new pv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Rde(t),[r,i]=Nde(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new uJ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Rde(t),[r,i]=Nde(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class dA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,xk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Q6(ln.min(),i,new Pi(yr),Nm(),Un())}}class xk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new xk(r,n,Un(),Un(),Un())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class CNe{constructor(t,n){this.targetId=t,this.me=n}}class INe{constructor(t,n,r=ya.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Pde{constructor(){this.fe=0,this.ge=Ode(),this.pe=ya.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Un(),n=Un(),r=Un();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:sn()}}),new xk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Ode()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ti(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class KDt{constructor(t){this.Le=t,this.Be=new Map,this.ke=Nm(),this.qe=Dde(),this.Qe=new Pi(yr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:sn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(eV(s))if(r===0){const o=new Bt(s.path);this.Ue(n,o,ia.newNoDocument(o,ln.min()))}else ti(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Yv(r).toUint8Array()}catch(u){if(u instanceof iNe)return L2("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new uJ(o,i,s)}catch(u){return L2(u instanceof dA?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&eV(a.target)){const u=new Bt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ia.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Un();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new Q6(t,n,this.Qe,this.ke,r);return this.ke=Nm(),this.qe=Dde(),this.Qe=new Pi(yr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Pde,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Io(yr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Pde),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Dde(){return new Pi(Bt.comparator)}function Ode(){return new Pi(Bt.comparator)}const XDt={asc:"ASCENDING",desc:"DESCENDING"},QDt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JDt={and:"AND",or:"OR"};class ZDt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function rV(e,t){return e.useProto3Json||q6(t)?t:{value:t}}function v$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kNe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function eOt(e,t){return v$(e,t.toTimestamp())}function oh(e){return ti(!!e),ln.fromTimestamp(function(n){const r=Z0(n);return new Ns(r.seconds,r.nanos)}(e))}function lJ(e,t){return iV(e,t).canonicalString()}function iV(e,t){const n=function(i){return new oi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function RNe(e){const t=oi.fromString(e);return ti($Ne(t)),t}function sV(e,t){return lJ(e.databaseId,t.path)}function Kj(e,t){const n=RNe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bt(PNe(n))}function NNe(e,t){return lJ(e.databaseId,t)}function tOt(e){const t=RNe(e);return t.length===4?oi.emptyPath():PNe(t)}function oV(e){return new oi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function PNe(e){return ti(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function $de(e,t,n){return{name:sV(e,t),fields:n.value.mapValue.fields}}function nOt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:sn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ti(c===void 0||typeof c=="string"),ya.fromBase64String(c||"")):(ti(c===void 0||c instanceof Buffer||c instanceof Uint8Array),ya.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:ANe(l.code);return new bt(c,l.message||"")}(o);n=new INe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Kj(e,r.document.name),s=oh(r.document.updateTime),o=r.document.createTime?oh(r.document.createTime):ln.min(),a=new Su({mapValue:{fields:r.document.fields}}),u=ia.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new cD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Kj(e,r.document),s=r.readTime?oh(r.readTime):ln.min(),o=ia.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Kj(e,r.document),s=r.removedTargetIds||[];n=new cD([],s,i,null)}else{if(!("filter"in t))return sn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new qDt(i,s),a=r.targetId;n=new CNe(a,o)}}return n}function rOt(e,t){let n;if(t instanceof Ek)n={update:$de(e,t.key,t.value)};else if(t instanceof X6)n={delete:sV(e,t.key)};else if(t instanceof Dy)n={update:$de(e,t.key,t.data),updateMask:dOt(t.fieldMask)};else{if(!(t instanceof zDt))return sn();n={verify:sV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof V2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof H2)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof q2)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof y$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw sn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:eOt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:sn()}(e,t.precondition)),n}function iOt(e,t){return e&&e.length>0?(ti(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?oh(i.updateTime):oh(s);return o.isEqual(ln.min())&&(o=oh(s)),new jDt(o,i.transformResults||[])}(n,t))):[]}function sOt(e,t){return{documents:[NNe(e,t.path)]}}function oOt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NNe(e,i);const s=function(l){if(l.length!==0)return ONe(Bf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:O_(d.field),direction:lOt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=rV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function aOt(e){let t=tOt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ti(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=DNe(f);return d instanceof Bf&&uNe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new z2($_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,q6(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new g$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new g$(h,d)}(n.endAt)),TDt(t,i,o,s,a,"F",u,l)}function uOt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function DNe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$_(n.unaryFilter.field);return ys.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=$_(n.unaryFilter.field);return ys.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=$_(n.unaryFilter.field);return ys.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$_(n.unaryFilter.field);return ys.create(o,"!=",{nullValue:"NULL_VALUE"});default:return sn()}}(e):e.fieldFilter!==void 0?function(n){return ys.create($_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Bf.create(n.compositeFilter.filters.map(r=>DNe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return sn()}}(n.compositeFilter.op))}(e):sn()}function lOt(e){return XDt[e]}function cOt(e){return QDt[e]}function fOt(e){return JDt[e]}function O_(e){return{fieldPath:e.canonicalString()}}function $_(e){return xo.fromServerFormat(e.fieldPath)}function ONe(e){return e instanceof ys?function(n){if(n.op==="=="){if(wde(n.value))return{unaryFilter:{field:O_(n.field),op:"IS_NAN"}};if(_de(n.value))return{unaryFilter:{field:O_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wde(n.value))return{unaryFilter:{field:O_(n.field),op:"IS_NOT_NAN"}};if(_de(n.value))return{unaryFilter:{field:O_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:O_(n.field),op:cOt(n.op),value:n.value}}}(e):e instanceof Bf?function(n){const r=n.getFilters().map(i=>ONe(i));return r.length===1?r[0]:{compositeFilter:{op:fOt(n.op),filters:r}}}(e):sn()}function dOt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function $Ne(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(t,n,r,i,s=ln.min(),o=ln.min(),a=ya.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Gg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Gg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Gg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Gg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hOt{constructor(t){this.ct=t}}function pOt(e){const t=aOt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?nV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mOt{constructor(){this._n=new gOt}addToCollectionParentIndex(t,n){return this._n.add(n),Xe.resolve()}getCollectionParents(t,n){return Xe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Xe.resolve()}deleteFieldIndex(t,n){return Xe.resolve()}deleteAllFieldIndexes(t){return Xe.resolve()}createTargetIndexes(t,n){return Xe.resolve()}getDocumentsMatchingTarget(t,n){return Xe.resolve(null)}getIndexType(t,n){return Xe.resolve(0)}getFieldIndexes(t,n){return Xe.resolve([])}getNextCollectionGroupToUpdate(t){return Xe.resolve(null)}getMinOffset(t,n){return Xe.resolve(J0.min())}getMinOffsetFromCollectionGroup(t,n){return Xe.resolve(J0.min())}updateCollectionGroup(t,n,r){return Xe.resolve()}updateIndexEntries(t,n){return Xe.resolve()}}class gOt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Io(oi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Io(oi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new UE(0)}static Ln(){return new UE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yOt{constructor(){this.changes=new fS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ia.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Xe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vOt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bOt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&yC(r.mutation,i,_l.empty(),Ns.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Un()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Un()){const i=nv();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=fA();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=nv();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Un()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Nm();const o=gC(),a=function(){return gC()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Dy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),yC(c.mutation,l,c.mutation.getFieldMask(),Ns.now())):o.set(l.key,_l.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new vOt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=gC();let i=new Pi((o,a)=>o-a),s=Un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||_l.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Un()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=yNe();c.forEach(d=>{if(!s.has(d)){const h=SNe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Xe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):dNe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Xe.resolve(nv());let a=-1,u=s;return o.next(l=>Xe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Xe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Un())).next(c=>({batchId:a,changes:gNe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Bt(n)).next(r=>{let i=fA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=fA();return this.indexManager.getCollectionParents(t,s).next(a=>Xe.forEach(a,u=>{const l=function(f,d){return new cS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ia.newInvalidDocument(c)))});let a=fA();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&yC(c.mutation,l,_l.empty(),Ns.now()),G6(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Ot{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Xe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:oh(i.createTime)}}(n)),Xe.resolve()}getNamedQuery(t,n){return Xe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:pOt(i.bundledQuery),readTime:oh(i.readTime)}}(n)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wOt{constructor(){this.overlays=new Pi(Bt.comparator),this.hr=new Map}getOverlay(t,n){return Xe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=nv();return Xe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Xe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Xe.resolve()}getOverlaysForCollection(t,n,r){const i=nv(),s=n.length+1,o=new Bt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Xe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Pi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=nv(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=nv(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Xe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new HDt(n,r));let s=this.hr.get(n);s===void 0&&(s=Un(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJ{constructor(){this.Pr=new Io(Ws.Ir),this.Tr=new Io(Ws.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ws(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ws(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Bt(new oi([])),r=new Ws(n,t),i=new Ws(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Bt(new oi([])),r=new Ws(n,t),i=new Ws(n,t+1);let s=Un();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ws(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ws{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Bt.comparator(t.key,n.key)||yr(t.pr,n.pr)}static Er(t,n){return yr(t.pr,n.pr)||Bt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EOt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Io(Ws.Ir)}checkEmpty(t){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new VDt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ws(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Xe.resolve(o)}lookupMutationBatch(t,n){return Xe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ws(n,0),i=new Ws(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Io(yr);return n.forEach(i=>{const s=new Ws(i,0),o=new Ws(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Xe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Bt.isDocumentKey(s)||(s=s.child(""));const o=new Ws(new Bt(s),0);let a=new Io(yr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Xe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ti(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Xe.forEach(n.mutations,i=>{const s=new Ws(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ws(n,0),i=this.wr.firstAfterOrEqual(r);return Xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Xe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xOt{constructor(t){this.vr=t,this.docs=function(){return new Pi(Bt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Xe.resolve(r?r.document.mutableCopy():ia.newInvalidDocument(n))}getEntries(t,n){let r=Nm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ia.newInvalidDocument(i))}),Xe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Nm();const o=n.path,a=new Bt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||aDt(oDt(c),r)<=0||(i.has(c.key)||G6(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Xe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){sn()}Fr(t,n){return Xe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new SOt(this)}getSize(t){return Xe.resolve(this.size)}}class SOt extends yOt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Xe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TOt{constructor(t){this.persistence=t,this.Mr=new fS(n=>iJ(n),sJ),this.lastRemoteSnapshotVersion=ln.min(),this.highestTargetId=0,this.Or=0,this.Nr=new cJ,this.targetCount=0,this.Lr=UE.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Xe.resolve()}getLastRemoteSnapshotVersion(t){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Xe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Xe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new UE(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Xe.resolve()}updateTargetData(t,n){return this.qn(n),Xe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Xe.waitFor(s).next(()=>i)}getTargetCount(t){return Xe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Xe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Xe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Xe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Xe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Xe.resolve(r)}containsKey(t,n){return Xe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AOt{constructor(t,n){this.Br={},this.overlays={},this.kr=new eJ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new TOt(this),this.indexManager=new mOt,this.remoteDocumentCache=function(i){return new xOt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new hOt(n),this.$r=new _Ot(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new wOt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new EOt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new COt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Xe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class COt extends lDt{constructor(t){super(),this.currentSequenceNumber=t}}class fJ{constructor(t){this.persistence=t,this.zr=new cJ,this.jr=null}static Hr(t){return new fJ(t)}get Jr(){if(this.jr)return this.jr;throw sn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Xe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Xe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Xe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Jr,r=>{const i=Bt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,ln.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Xe.or([()=>Xe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dJ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Un(),i=Un();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new dJ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IOt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kOt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return uIt()?8:cDt(Do())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new IOt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(gT()<=Wn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",D_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Xe.resolve()):(gT()<=Wn.DEBUG&&It("QueryEngine","Query:",D_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(gT()<=Wn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",D_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,sh(n))):Xe.resolve())}ji(t,n){if(Tde(n))return Xe.resolve(null);let r=sh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=nV(n,null,"F"),r=sh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Un(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,nV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Tde(n)||i.isEqual(ln.min())?Xe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Xe.resolve(null):(gT()<=Wn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),D_(n)),this.es(t,o,n,sDt(i,-1)).next(a=>a))})}Zi(t,n){let r=new Io(pNe(t));return n.forEach((i,s)=>{G6(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return gT()<=Wn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",D_(n)),this.zi.getDocumentsMatchingQuery(t,n,J0.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ROt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Pi(yr),this.rs=new fS(s=>iJ(s),sJ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new bOt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function NOt(e,t,n,r){return new ROt(e,t,n,r)}async function MNe(e,t){const n=cn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Un();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function POt(e,t){const n=cn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Xe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ti(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Un();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function LNe(e){const t=cn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function DOt(e,t){const n=cn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(ya.EMPTY_BYTE_STRING,ln.min()).withLastLimboFreeSnapshotVersion(ln.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Nm(),l=Un();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(OOt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(ln.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Xe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function OOt(e,t,n){let r=Un(),i=Un();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Nm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ln.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function $Ot(e,t){const n=cn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function MOt(e,t){const n=cn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Xe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Gg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function aV(e,t,n){const r=cn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!wk(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Mde(e,t,n){const r=cn(e);let i=ln.min(),s=Un();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=cn(u),d=f.rs.get(c);return d!==void 0?Xe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,sh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:ln.min(),n?s:Un())).next(a=>(LOt(r,CDt(t),a),{documents:a,hs:s})))}function LOt(e,t,n){let r=e.ss.get(t)||ln.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Lde{constructor(){this.activeTargetIds=DDt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class FOt{constructor(){this.no=new Lde,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Lde,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jOt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fde{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LN=null;function Xj(){return LN===null?LN=function(){return 268435456+Math.round(2147483648*Math.random())}():LN++,"0x"+LN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BOt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UOt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="WebChannelConnection";class zOt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Xj(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw L2("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=BOt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=Xj();return new Promise((o,a)=>{const u=new XRe;u.setWithCredentials(!0),u.listenOnce(JRe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case aD.NO_ERROR:const c=u.getResponseJson();It(Xo,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case aD.TIMEOUT:It(Xo,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case aD.HTTP_ERROR:const f=u.getStatus();if(It(Xo,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:sn()}}finally{It(Xo,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(Xo,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=Xj(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=tNe(),a=eNe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new QRe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(Xo,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new UOt({lo:g=>{h?It(Xo,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(Xo,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(Xo,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,cA.EventType.OPEN,()=>{h||(It(Xo,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,cA.EventType.CLOSE,()=>{h||(h=!0,It(Xo,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,cA.EventType.ERROR,g=>{h||(h=!0,L2(Xo,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,cA.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ti(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){It(Xo,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let S=function(C){const I=ds[C];if(I!==void 0)return ANe(I)}(E),T=w.message;S===void 0&&(S=Be.INTERNAL,T="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new bt(S,T)),f.close()}else It(Xo,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,ZRe.STAT_EVENT,g=>{g.stat===Xz.PROXY?It(Xo,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===Xz.NOPROXY&&It(Xo,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Qj(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(e){return new ZDt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FNe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jNe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new FNe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Rm(n.toString()),Rm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VOt extends jNe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=nOt(this.serializer,t),r=function(s){if(!("targetChange"in s))return ln.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ln.min():o.readTime?oh(o.readTime):ln.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=oV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=eV(u)?{documents:sOt(s,u)}:{query:oOt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=kNe(s,o.resumeToken);const l=rV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ln.min())>0){a.readTime=v$(s,o.snapshotVersion.toTimestamp());const l=rV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=uOt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=oV(this.serializer),n.removeTarget=t,this.i_(n)}}class HOt extends jNe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ti(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=iOt(t.writeResults,t.commitTime),r=oh(t.commitTime);return this.listener.A_(r,n)}return ti(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=oV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>rOt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qOt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,iV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,iV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class WOt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Rm(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GOt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Nb(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=cn(u);l.M_.add(4),await Tk(l),l.N_.set("Unknown"),l.M_.delete(4),await Sk(l)}(this))})}),this.N_=new WOt(r,i)}}async function Sk(e){if(Nb(e))for(const t of e.x_)await t(!0)}async function Tk(e){for(const t of e.x_)await t(!1)}function BNe(e,t){const n=cn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),gJ(n)?mJ(n):dS(n).Xo()&&pJ(n,t))}function hJ(e,t){const n=cn(e),r=dS(n);n.F_.delete(t),r.Xo()&&UNe(n,t),n.F_.size===0&&(r.Xo()?r.n_():Nb(n)&&n.N_.set("Unknown"))}function pJ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ln.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}dS(e).P_(t)}function UNe(e,t){e.L_.xe(t),dS(e).I_(t)}function mJ(e){e.L_=new KDt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),dS(e).start(),e.N_.w_()}function gJ(e){return Nb(e)&&!dS(e).Zo()&&e.F_.size>0}function Nb(e){return cn(e).M_.size===0}function zNe(e){e.L_=void 0}async function YOt(e){e.N_.set("Online")}async function KOt(e){e.F_.forEach((t,n)=>{pJ(e,t)})}async function XOt(e,t){zNe(e),gJ(e)?(e.N_.D_(t),mJ(e)):e.N_.set("Unknown")}async function QOt(e,t,n){if(e.N_.set("Online"),t instanceof INe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await b$(e,r)}else if(t instanceof cD?e.L_.Ke(t):t instanceof CNe?e.L_.He(t):e.L_.We(t),!n.isEqual(ln.min()))try{const r=await LNe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(ya.EMPTY_BYTE_STRING,c.snapshotVersion)),UNe(s,u);const f=new Gg(c.target,u,l,c.sequenceNumber);pJ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await b$(e,r)}}async function b$(e,t,n){if(!wk(t))throw t;e.M_.add(1),await Tk(e),e.N_.set("Offline"),n||(n=()=>LNe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Sk(e)})}function VNe(e,t){return t().catch(n=>b$(e,n,t))}async function Z6(e){const t=cn(e),n=ey(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;JOt(t);)try{const i=await $Ot(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,ZOt(t,i)}catch(i){await b$(t,i)}HNe(t)&&qNe(t)}function JOt(e){return Nb(e)&&e.v_.length<10}function ZOt(e,t){e.v_.push(t);const n=ey(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function HNe(e){return Nb(e)&&!ey(e).Zo()&&e.v_.length>0}function qNe(e){ey(e).start()}async function e3t(e){ey(e).V_()}async function t3t(e){const t=ey(e);for(const n of e.v_)t.d_(n.mutations)}async function n3t(e,t,n){const r=e.v_.shift(),i=aJ.from(r,t,n);await VNe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Z6(e)}async function r3t(e,t){t&&ey(e).E_&&await async function(r,i){if(function(o){return WDt(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();ey(r).t_(),await VNe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Z6(r)}}(e,t),HNe(e)&&qNe(e)}async function jde(e,t){const n=cn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=Nb(n);n.M_.add(3),await Tk(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Sk(n)}async function i3t(e,t){const n=cn(e);t?(n.M_.delete(2),await Sk(n)):t||(n.M_.add(2),await Tk(n),n.N_.set("Unknown"))}function dS(e){return e.B_||(e.B_=function(n,r,i){const s=cn(n);return s.f_(),new VOt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:YOt.bind(null,e),To:KOt.bind(null,e),Ao:XOt.bind(null,e),h_:QOt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),gJ(e)?mJ(e):e.N_.set("Unknown")):(await e.B_.stop(),zNe(e))})),e.B_}function ey(e){return e.k_||(e.k_=function(n,r,i){const s=cn(n);return s.f_(),new HOt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:e3t.bind(null,e),Ao:r3t.bind(null,e),R_:t3t.bind(null,e),A_:n3t.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await Z6(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yJ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new yJ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vJ(e,t){if(Rm("AsyncQueue",`${t}: ${e}`),wk(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Bt.comparator(n.key,r.key):(n,r)=>Bt.comparator(n.key,r.key),this.keyedMap=fA(),this.sortedSet=new Pi(this.comparator)}static emptySet(t){return new Bw(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Bw)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Bw;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bde{constructor(){this.q_=new Pi(Bt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):sn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class zE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new zE(t,n,Bw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&W6(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3t{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class o3t{constructor(){this.queries=new fS(t=>hNe(t),W6),this.onlineState="Unknown",this.z_=new Set}}async function WNe(e,t){const n=cn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new s3t,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=vJ(o,`Initialization of query '${D_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&bJ(n)}async function GNe(e,t){const n=cn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function a3t(e,t){const n=cn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&bJ(n)}function u3t(e,t,n){const r=cn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function bJ(e){e.z_.forEach(t=>{t.next()})}var uV,Ude;(Ude=uV||(uV={})).J_="default",Ude.Cache="cache";class YNe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new zE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=zE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==uV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KNe{constructor(t){this.key=t}}class XNe{constructor(t){this.key=t}}class l3t{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Un(),this.mutatedKeys=Un(),this.Ia=pNe(t),this.Ta=new Bw(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Bde,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=G6(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new zE(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Bde,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Un(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new XNe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new KNe(r))}),n}pa(t){this.la=t.hs,this.Pa=Un();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return zE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class c3t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class f3t{constructor(t){this.key=t,this.wa=!1}}class d3t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new fS(a=>hNe(a),W6),this.Da=new Map,this.Ca=new Set,this.va=new Pi(Bt.comparator),this.Fa=new Map,this.Ma=new cJ,this.xa={},this.Oa=new Map,this.Na=UE.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function h3t(e,t,n=!0){const r=nPe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await QNe(r,t,n,!0),i}async function p3t(e,t){const n=nPe(e);await QNe(n,t,!0,!1)}async function QNe(e,t,n,r){const i=await MOt(e.localStore,sh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await m3t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&BNe(e.remoteStore,i),a}async function m3t(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await Mde(m.localStore,g.query,!1).then(({documents:T})=>g.view.da(T,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(b,m.isPrimaryClient,w,E);return Vde(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await Mde(e.localStore,t,!0),o=new l3t(t,s.hs),a=o.da(s.documents),u=xk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Vde(e,n,l.fa);const c=new c3t(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function g3t(e,t,n){const r=cn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!W6(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await aV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hJ(r.remoteStore,i.targetId),lV(r,i.targetId)}).catch(_k)):(lV(r,i.targetId),await aV(r.localStore,i.targetId,!0))}async function y3t(e,t){const n=cn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hJ(n.remoteStore,r.targetId))}async function v3t(e,t,n){const r=T3t(e);try{const i=await function(o,a){const u=cn(o),l=Ns.now(),c=a.reduce((h,p)=>h.add(p.key),Un());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Nm(),m=Un();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=UDt(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Dy(v.key,b,sNe(b.value.mapValue),Fu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:gNe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Pi(yr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await Ak(r,i.changes),await Z6(r.remoteStore)}catch(i){const s=vJ(i,"Failed to persist write");n.reject(s)}}async function JNe(e,t){const n=cn(e);try{const r=await DOt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ti(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ti(o.wa):i.removedDocuments.size>0&&(ti(o.wa),o.wa=!1))}),await Ak(n,r,t)}catch(r){await _k(r)}}function zde(e,t,n){const r=cn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=cn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&bJ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function b3t(e,t,n){const r=cn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Pi(Bt.comparator);o=o.insert(s,ia.newNoDocument(s,ln.min()));const a=Un().add(s),u=new Q6(ln.min(),new Map,new Pi(yr),o,a);await JNe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),_J(r)}else await aV(r.localStore,t,!1).then(()=>lV(r,t,n)).catch(_k)}async function _3t(e,t){const n=cn(e),r=t.batch.batchId;try{const i=await POt(n.localStore,t);ePe(n,r,null),ZNe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ak(n,i)}catch(i){await _k(i)}}async function w3t(e,t,n){const r=cn(e);try{const i=await function(o,a){const u=cn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ti(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);ePe(r,t,n),ZNe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ak(r,i)}catch(i){await _k(i)}}function ZNe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function ePe(e,t,n){const r=cn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function lV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||tPe(e,r)})}function tPe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(hJ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),_J(e))}function Vde(e,t,n){for(const r of n)r instanceof KNe?(e.Ma.addReference(r.key,t),E3t(e,r)):r instanceof XNe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||tPe(e,r.key)):sn()}function E3t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),_J(e))}function _J(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Bt(oi.fromString(t)),r=e.Na.next();e.Fa.set(r,new f3t(n)),e.va=e.va.insert(n,r),BNe(e.remoteStore,new Gg(sh(oJ(n.path)),r,"TargetPurposeLimboResolution",eJ.oe))}}async function Ak(e,t,n){const r=cn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=dJ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=cn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Xe.forEach(l,d=>Xe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Xe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!wk(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function x3t(e,t){const n=cn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await MNe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ak(n,r.us)}}function S3t(e,t){const n=cn(e),r=n.Fa.get(t);if(r&&r.wa)return Un().add(r.key);{let i=Un();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function nPe(e){const t=cn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=JNe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=S3t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=b3t.bind(null,t),t.Sa.h_=a3t.bind(null,t.eventManager),t.Sa.ka=u3t.bind(null,t.eventManager),t}function T3t(e){const t=cn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_3t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=w3t.bind(null,t),t}class Hde{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=J6(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return NOt(this.persistence,new kOt,t.initialUser,this.serializer)}createPersistence(t){return new AOt(fJ.Hr,this.serializer)}createSharedClientState(t){return new FOt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class A3t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zde(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=x3t.bind(null,this.syncEngine),await i3t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new o3t}()}createDatastore(t){const n=J6(t.databaseInfo.databaseId),r=function(s){return new zOt(s)}(t.databaseInfo);return function(s,o,a,u){return new qOt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new GOt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>zde(this.syncEngine,n,0),function(){return Fde.D()?new Fde:new jOt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new d3t(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=cn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Tk(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rPe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Rm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pu.UNAUTHENTICATED,this.clientId=nNe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Zp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=vJ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Jj(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await MNe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function qde(e,t){e.asyncQueue.verifyOperationInProgress();const n=await iPe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>jde(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>jde(t.remoteStore,i)),e._onlineComponents=t}function I3t(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function iPe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jj(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!I3t(n))throw n;L2("Error using user provided cache. Falling back to memory cache: "+n),await Jj(e,new Hde)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await Jj(e,new Hde);return e._offlineComponents}async function wJ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await qde(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await qde(e,new A3t))),e._onlineComponents}function k3t(e){return iPe(e).then(t=>t.persistence)}function R3t(e){return wJ(e).then(t=>t.remoteStore)}function N3t(e){return wJ(e).then(t=>t.syncEngine)}async function sPe(e){const t=await wJ(e),n=t.eventManager;return n.onListen=h3t.bind(null,t.syncEngine),n.onUnlisten=g3t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=p3t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=y3t.bind(null,t.syncEngine),n}function P3t(e){return e.asyncQueue.enqueue(async()=>{const t=await k3t(e),n=await R3t(e);return t.setNetworkEnabled(!0),function(i){const s=cn(i);return s.M_.delete(0),Sk(s)}(n)})}function D3t(e,t,n={}){const r=new Zp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new rPe({next:d=>{o.enqueueAndForget(()=>GNe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new YNe(oJ(a.path),c,{includeMetadataChanges:!0,ra:!0});return WNe(s,f)}(await sPe(e),e.asyncQueue,t,n,r)),r.promise}function O3t(e,t,n={}){const r=new Zp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new rPe({next:d=>{o.enqueueAndForget(()=>GNe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new YNe(a,c,{includeMetadataChanges:!0,ra:!0});return WNe(s,f)}(await sPe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oPe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wde=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aPe(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function $3t(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Gde(e){if(!Bt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Yde(e){if(Bt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function eF(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":sn()}function Uf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eF(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kde{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}$3t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oPe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class EJ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kde({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kde(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QPt;switch(r.type){case"firstParty":return new eDt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Wde.get(n);r&&(It("ComponentProvider","Removing Datastore"),Wde.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Pb(this.firestore,t,this._query)}}class qa{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qa(this.firestore,t,this._key)}}class _0 extends Pb{constructor(t,n,r){super(t,n,oJ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qa(this.firestore,null,new Bt(t))}withConverter(t){return new _0(this.firestore,t,this._path)}}function Gc(e,t,...n){if(e=ni(e),aPe("collection","path",t),e instanceof EJ){const r=oi.fromString(t,...n);return Yde(r),new _0(e,null,r)}{if(!(e instanceof qa||e instanceof _0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(oi.fromString(t,...n));return Yde(r),new _0(e.firestore,null,r)}}function zs(e,t,...n){if(e=ni(e),arguments.length===1&&(t=nNe.newId()),aPe("doc","path",t),e instanceof EJ){const r=oi.fromString(t,...n);return Gde(r),new qa(e,null,new Bt(r))}{if(!(e instanceof qa||e instanceof _0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(oi.fromString(t,...n));return Gde(r),new qa(e.firestore,e instanceof _0?e.converter:null,new Bt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new FNe(this,"async_queue_retry"),this.hu=()=>{const n=Qj();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=Qj();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=Qj();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Zp;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!wk(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Rm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=yJ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&sn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Oy extends EJ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new M3t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||uPe(this),this._firestoreClient.terminate()}}function L3t(e,t,n){n||(n="(default)");const r=aS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(O2(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function Ck(e){return e._firestoreClient||uPe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function uPe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new hDt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,oPe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new C3t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function F3t(e){return P3t(Ck(e=Uf(e,Oy)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new VE(ya.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new VE(ya.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xJ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return yr(this._lat,t._lat)||yr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3t=/^__.*__$/;class B3t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Dy(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ek(t,this.data,n,this.fieldTransforms)}}class lPe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Dy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function cPe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sn()}}class SJ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new SJ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return _$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(cPe(this.fu)&&j3t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class U3t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||J6(t)}Fu(t,n,r,i=!1){return new SJ({fu:t,methodName:n,vu:r,path:xo.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nF(e){const t=e._freezeSettings(),n=J6(e._databaseId);return new U3t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fPe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);AJ("Data must be an object, but it was:",o,r);const a=pPe(r,o);let u,l;if(s.merge)u=new _l(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=cV(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);gPe(c,d)||c.push(d)}u=new _l(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new B3t(new Su(a),u,l)}class rF extends tF{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof rF}}class TJ extends tF{_toFieldTransform(t){return new LDt(t.path,new V2)}isEqual(t){return t instanceof TJ}}function dPe(e,t,n,r){const i=e.Fu(1,t,n);AJ("Data must be an object, but it was:",i,r);const s=[],o=Su.empty();Rb(r,(u,l)=>{const c=CJ(t,u,n);l=ni(l);const f=i.Su(c);if(l instanceof rF)s.push(c);else{const d=kk(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new _l(s);return new lPe(o,a,i.fieldTransforms)}function hPe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[cV(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(cV(t,s[d])),u.push(s[d+1]);const l=[],c=Su.empty();for(let d=a.length-1;d>=0;--d)if(!gPe(l,a[d])){const h=a[d];let p=u[d];p=ni(p);const m=o.Su(h);if(p instanceof rF)l.push(h);else{const g=kk(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new _l(l);return new lPe(c,f,o.fieldTransforms)}function z3t(e,t,n,r=!1){return kk(n,e.Fu(r?4:3,t))}function kk(e,t){if(mPe(e=ni(e)))return AJ("Unsupported field value:",t,e),pPe(e,t);if(e instanceof tF)return function(r,i){if(!cPe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=kk(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ni(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ODt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ns.fromDate(r);return{timestampValue:v$(i.serializer,s)}}if(r instanceof Ns){const s=new Ns(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:v$(i.serializer,s)}}if(r instanceof xJ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof VE)return{bytesValue:kNe(i.serializer,r._byteString)};if(r instanceof qa){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lJ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${eF(r)}`)}(e,t)}function pPe(e,t){const n={};return rNe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rb(e,(r,i)=>{const s=kk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function mPe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ns||e instanceof xJ||e instanceof VE||e instanceof qa||e instanceof tF)}function AJ(e,t,n){if(!mPe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=eF(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function cV(e,t,n){if((t=ni(t))instanceof Ik)return t._internalPath;if(typeof t=="string")return CJ(e,t);throw _$("Field path arguments must be of type string or ",e,!1,void 0,n)}const V3t=new RegExp("[~\\*/\\[\\]]");function CJ(e,t,n){if(t.search(V3t)>=0)throw _$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ik(...t.split("."))._internalPath}catch{throw _$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function _$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function gPe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yPe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new H3t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(iF("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H3t extends yPe{data(){return super.data()}}function iF(e,t){return typeof t=="string"?CJ(e,t):t instanceof Ik?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class IJ{}class vPe extends IJ{}function Xde(e,t,...n){let r=[];t instanceof IJ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof kJ).length,a=s.filter(u=>u instanceof sF).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class sF extends vPe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new sF(t,n,r)}_apply(t){const n=this._parse(t);return bPe(t._query,n),new Pb(t.firestore,t.converter,tV(t._query,n))}_parse(t){const n=nF(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Jde(f,c);const h=[];for(const p of f)h.push(Qde(u,s,p));d={arrayValue:{values:h}}}else d=Qde(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Jde(f,c),d=z3t(a,o,f,c==="in"||c==="not-in");return ys.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function W3t(e,t,n){const r=t,i=iF("where",e);return sF._create(i,r,n)}class kJ extends IJ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new kJ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Bf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)bPe(o,u),o=tV(o,u)}(t._query,n),new Pb(t.firestore,t.converter,tV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class RJ extends vPe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new RJ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new z2(s,o)}(t._query,this._field,this._direction);return new Pb(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new cS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function G3t(e,t="asc"){const n=t,r=iF("orderBy",e);return RJ._create(r,n)}function Qde(e,t,n){if(typeof(n=ni(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dNe(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(oi.fromString(n));if(!Bt.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bde(e,new Bt(r))}if(n instanceof qa)return bde(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eF(n)}.`)}function Jde(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function bPe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Y3t{convertValue(t,n="none"){switch(Kv(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ms(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Yv(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw sn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Rb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new xJ(ms(t.latitude),ms(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=nJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(j2(t));default:return null}}convertTimestamp(t){const n=Z0(t);return new Ns(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=oi.fromString(t);ti($Ne(r));const i=new B2(r.get(1),r.get(3)),s=new Bt(r.popFirst(5));return i.isEqual(n)||Rm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Pe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class wPe extends yPe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new fD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(iF("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class fD extends wPe{data(t={}){return super.data(t)}}class K3t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new hA(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new fD(this._firestore,this._userDataWriter,r.key,r,new hA(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new fD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new fD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:X3t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function X3t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(e){e=Uf(e,qa);const t=Uf(e.firestore,Oy);return D3t(Ck(t),e._key).then(n=>Z3t(t,e,n))}class EPe extends Y3t{constructor(t){super(),this.firestore=t}convertBytes(t){return new VE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qa(this.firestore,null,n)}}function yT(e){e=Uf(e,Pb);const t=Uf(e.firestore,Oy),n=Ck(t),r=new EPe(t);return q3t(e._query),O3t(n,e._query).then(i=>new K3t(t,r,e,i))}function Yc(e,t,n){e=Uf(e,qa);const r=Uf(e.firestore,Oy),i=_Pe(e.converter,t,n);return oF(r,[fPe(nF(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Fu.none())])}function Q3t(e,t,n,...r){e=Uf(e,qa);const i=Uf(e.firestore,Oy),s=nF(i);let o;return o=typeof(t=ni(t))=="string"||t instanceof Ik?hPe(s,"updateDoc",e._key,t,n,r):dPe(s,"updateDoc",e._key,t),oF(i,[o.toMutation(e._key,Fu.exists(!0))])}function J3t(e){return oF(Uf(e.firestore,Oy),[new X6(e._key,Fu.none())])}function oF(e,t){return function(r,i){const s=new Zp;return r.asyncQueue.enqueueAndForget(async()=>v3t(await N3t(r),i,s)),s.promise}(Ck(e),t)}function Z3t(e,t,n){const r=n.docs.get(t._key),i=new EPe(e);return new wPe(e,i,t._key,r,new hA(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e$t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=nF(t)}set(t,n,r){this._verifyNotCommitted();const i=e9(t,this._firestore),s=_Pe(i.converter,n,r),o=fPe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Fu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=e9(t,this._firestore);let o;return o=typeof(n=ni(n))=="string"||n instanceof Ik?hPe(this._dataReader,"WriteBatch.update",s._key,n,r,i):dPe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Fu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=e9(t,this._firestore);return this._mutations=this._mutations.concat(new X6(n._key,Fu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function e9(e,t){if((e=ni(e)).firestore!==t)throw new bt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function t$t(){return new TJ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zde(e){return Ck(e=Uf(e,Oy)),new e$t(e,t=>oF(e,t))}(function(t,n=!0){(function(i){lS=i})(kb),Im(new _h("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Oy(new JPt(r.getProvider("auth-internal")),new nDt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new B2(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Nf(mde,"4.6.3",t),Nf(mde,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV=new Map,xPe={activated:!1,tokenObservers:[]},n$t={initialized:!1,enabled:!1};function Ps(e){return fV.get(e)||Object.assign({},xPe)}function r$t(e,t){return fV.set(e,t),fV.get(e)}function aF(){return n$t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SPe="https://content-firebaseappcheck.googleapis.com/v1",i$t="exchangeRecaptchaV3Token",s$t="exchangeDebugToken",ehe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},o$t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a$t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new D2,this.pending.promise.catch(n=>{}),await u$t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new D2,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function u$t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Nu=new oS("appCheck","AppCheck",l$t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function the(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function NJ(e){if(!Ps(e).activated)throw Nu.create("use-before-activation",{appName:e.name})}function TPe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=FN(n)+"d:"),r&&(o+=FN(r)+"h:"),o+=FN(i)+"m:"+FN(s)+"s",o}function FN(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PJ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Nu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Nu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Nu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Nu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function c$t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${SPe}/projects/${n}/apps/${r}:${i$t}?key=${i}`,body:{recaptcha_v3_token:t}}}function APe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${SPe}/projects/${n}/apps/${r}:${s$t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f$t="firebase-app-check-database",d$t=1,W2="firebase-app-check-store",CPe="debug-token";let jN=null;function IPe(){return jN||(jN=new Promise((e,t)=>{try{const n=indexedDB.open(f$t,d$t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Nu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(W2,{keyPath:"compositeKey"})}}}catch(n){t(Nu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),jN)}function h$t(e){return RPe(NPe(e))}function p$t(e,t){return kPe(NPe(e),t)}function m$t(e){return kPe(CPe,e)}function g$t(){return RPe(CPe)}async function kPe(e,t){const r=(await IPe()).transaction(W2,"readwrite"),s=r.objectStore(W2).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Nu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function RPe(e){const n=(await IPe()).transaction(W2,"readonly"),i=n.objectStore(W2).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Nu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function NPe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=new F6("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y$t(e){if(OQ()){let t;try{t=await h$t(e)}catch(n){G2.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function t9(e,t){return OQ()?p$t(e,t).catch(n=>{G2.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function v$t(){let e;try{e=await g$t()}catch{}if(e)return e;{const t=yIt();return m$t(t).catch(n=>G2.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJ(){return aF().enabled}async function OJ(){const e=aF();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function b$t(){const e=Yke(),t=aF();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new D2;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(v$t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$t={error:"UNKNOWN_ERROR"};function w$t(e){return DQ.encodeString(JSON.stringify(e),!1)}async function dV(e,t=!1){const n=e.app;NJ(n);const r=Ps(n);let i=r.token,s;if(i&&!rw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(rw(u)?i=u:await t9(n,void 0))}if(!t&&i&&rw(i))return{token:i.token};let o=!1;if(DJ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=PJ(APe(n,await OJ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await t9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Ps(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?G2.warn(u.message):G2.error(u),s=u}let a;return i?s?rw(i)?a={token:i.token,internalError:s}:a=rhe(s):(a={token:i.token},r.token=i,await t9(n,i)):a=rhe(s),o&&OPe(n,a),a}async function E$t(e){const t=e.app;NJ(t);const{provider:n}=Ps(t);if(DJ()){const r=await OJ(),{token:i}=await PJ(APe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function PPe(e,t,n,r){const{app:i}=e,s=Ps(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&rw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),nhe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>nhe(e))}function DPe(e,t){const n=Ps(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function nhe(e){const{app:t}=e,n=Ps(t);let r=n.tokenRefresher;r||(r=x$t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function x$t(e){const{app:t}=e;return new a$t(async()=>{const n=Ps(t);let r;if(n.token?r=await dV(e,!0):r=await dV(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ps(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},ehe.RETRIAL_MIN_WAIT,ehe.RETRIAL_MAX_WAIT)}function OPe(e,t){const n=Ps(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function rw(e){return e.expireTimeMillis-Date.now()>0}function rhe(e){return{token:w$t(_$t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S$t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Ps(this.app);for(const n of t)DPe(this.app,n.next);return Promise.resolve()}}function T$t(e,t){return new S$t(e,t)}function A$t(e){return{getToken:t=>dV(e,t),getLimitedUseToken:()=>E$t(e),addTokenListener:t=>PPe(e,"INTERNAL",t),removeTokenListener:t=>DPe(e.app,t)}}const C$t="@firebase/app-check",I$t="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$t="https://www.google.com/recaptcha/api.js";function R$t(e,t){const n=new D2,r=Ps(e);r.reCAPTCHAState={initialized:n};const i=N$t(e),s=the(!1);return s?ihe(e,t,s,i,n):O$t(()=>{const o=the(!1);if(!o)throw new Error("no recaptcha");ihe(e,t,o,i,n)}),n.promise}function ihe(e,t,n,r,i){n.ready(()=>{D$t(e,t,n,r),i.resolve(n)})}function N$t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function P$t(e){NJ(e);const n=await Ps(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Ps(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function D$t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Ps(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ps(e).reCAPTCHAState.succeeded=!1}}),s=Ps(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function O$t(e){const t=document.createElement("script");t.src=k$t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $J{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;M$t(this._throttleData);const i=await P$t(this._app).catch(o=>{throw Nu.create("recaptcha-error")});if(!(!((t=Ps(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Nu.create("recaptcha-error");let s;try{s=await PJ(c$t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=$$t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Nu.create("throttled",{time:TPe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=aS(t,"heartbeat"),R$t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof $J?this._siteKey===t._siteKey:!1}}function $$t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+o$t,httpStatus:e};{const n=t?t.backoffCount:0,r=EIt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function M$t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Nu.create("throttled",{time:TPe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L$t(e=MQ(),t){e=ni(e);const n=aS(e,"app-check");if(aF().initialized||b$t(),DJ()&&OJ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Nu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return F$t(e,t.provider,t.isTokenAutoRefreshEnabled),Ps(e).isTokenAutoRefreshEnabled&&PPe(r,"INTERNAL",()=>{}),r}function F$t(e,t,n){const r=r$t(e,Object.assign({},xPe));r.activated=!0,r.provider=t,r.cachedTokenPromise=y$t(e).then(i=>(i&&rw(i)&&(r.token=i,OPe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const j$t="app-check",she="app-check-internal";function B$t(){Im(new _h(j$t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return T$t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(she).initialize()})),Im(new _h(she,e=>{const t=e.getProvider("app-check").getImmediate();return A$t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Nf(C$t,I$t)}B$t();function BN(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $Pe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof BN=="function"&&BN;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof BN=="function"&&BN,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Js<"u"?Js:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,S){if(typeof E!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var T=new this.constructor(o);if(this.state!==c){var A=this.state===l?E:S;h(T,A,this.outcome)}else this.queue.push(new d(T,E,S));return T};function d(E,S,T){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,S,T){s(function(){var A;try{A=S(T)}catch(C){return a.reject(E,C)}A===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,A)})}a.resolve=function(E,S){var T=g(p,S);if(T.status==="error")return a.reject(E,T.value);var A=T.value;if(A)m(E,A);else{E.state=l,E.outcome=S;for(var C=-1,I=E.queue.length;++C<I;)E.queue[C].callFulfilled(S)}return E},a.reject=function(E,S){E.state=u,E.outcome=S;for(var T=-1,A=E.queue.length;++T<A;)E.queue[T].callRejected(S);return E};function p(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function m(E,S){var T=!1;function A(M){T||(T=!0,a.reject(E,M))}function C(M){T||(T=!0,a.resolve(E,M))}function I(){S(C,A)}var R=g(I);R.status==="error"&&A(R.value)}function g(E,S){var T={};try{T.value=E(S),T.status="success"}catch(A){T.status="error",T.value=A}return T}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var S=new this(o);return a.reject(S,E)}f.all=b;function b(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,A=!1;if(!T)return this.resolve([]);for(var C=new Array(T),I=0,R=-1,M=new this(o);++R<T;)P(E[R],R);return M;function P(O,F){S.resolve(O).then(L,function(B){A||(A=!0,a.reject(M,B))});function L(B){C[F]=B,++I===T&&!A&&(A=!0,a.resolve(M,C))}}}f.race=w;function w(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,A=!1;if(!T)return this.resolve([]);for(var C=-1,I=new this(o);++C<T;)R(E[C]);return I;function R(M){S.resolve(M).then(function(P){A||(A=!0,a.resolve(I,P))},function(P){A||(A=!0,a.reject(I,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Js<"u"?Js:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(le){if(le.name!=="TypeError")throw le;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ge=0;ge<Y.length;ge+=1)fe.append(Y[ge]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function S(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ge=0;ge<se;ge++)fe[ge]=Y.charCodeAt(ge);return Z}function T(Y){return new f(function(se){var Z=Y.transaction(g,E),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ge){ge.preventDefault(),ge.stopPropagation(),se(!1)},Z.oncomplete=function(){var ge=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);se(le||!ge||parseInt(ge[1],10)>=43)}}).catch(function(){return!1})}function A(Y){return typeof y=="boolean"?f.resolve(y):T(Y).then(function(se){return y=se,y})}function C(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ge){Z.resolve=fe,Z.reject=ge}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function I(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function R(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function M(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)C(Y),Y.db.close();else return Z(Y.db);var ge=[Y.name];se&&ge.push(Y.version);var le=u.open.apply(u,ge);se&&(le.onupgradeneeded=function(Oe){var Ve=le.result;try{Ve.createObjectStore(Y.storeName),Oe.oldVersion<=1&&Ve.createObjectStore(g)}catch(qe){if(qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw qe}}),le.onerror=function(Oe){Oe.preventDefault(),fe(le.error)},le.onsuccess=function(){var Oe=le.result;Oe.onversionchange=function(Ve){Ve.target.close()},Z(Oe),I(Y)}})}function P(Y){return M(Y,!1)}function O(Y){return M(Y,!0)}function F(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ge=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ge||Z){if(Z){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function L(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ge){var le=btoa(ge.target.result||"");se({__local_forage_encoded_blob:!0,data:le,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=S(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function H(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function D(Y){C(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ge=Z[fe];ge._dbInfo.db&&(ge._dbInfo.db.close(),ge._dbInfo.db=null)}return Y.db=null,P(Y).then(function(le){return Y.db=le,F(Y)?O(Y):le}).then(function(le){Y.db=se.db=le;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=le}).catch(function(le){throw R(Y,le),le})}function z(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ge=Y.db.transaction(Y.storeName,se);Z(null,ge)}catch(le){if(fe>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),O(Y)}).then(function(){return D(Y).then(function(){z(Y,se,Z,fe-1)})}).catch(Z);Z(le)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ge=v[Z.name];ge||(ge=W(),v[Z.name]=ge),ge.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=H);var le=[];function Oe(){return f.resolve()}for(var Ve=0;Ve<ge.forages.length;Ve++){var qe=ge.forages[Ve];qe!==se&&le.push(qe._initReady().catch(Oe))}var Ge=ge.forages.slice(0);return f.all(le).then(function(){return Z.db=ge.db,P(Z)}).then(function(it){return Z.db=it,F(Z,se._defaultConfig.version)?O(Z):it}).then(function(it){Z.db=ge.db=it,se._dbInfo=Z;for(var Et=0;Et<Ge.length;Et++){var dn=Ge[Et];dn!==se&&(dn._dbInfo.db=Z.db,dn._dbInfo.version=Z.version)}})}function q(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.get(Y);Ge.onsuccess=function(){var it=Ge.result;it===void 0&&(it=null),U(it)&&(it=B(it)),ge(it)},Ge.onerror=function(){le(Ge.error)}}catch(it){le(it)}})}).catch(le)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.openCursor(),it=1;Ge.onsuccess=function(){var Et=Ge.result;if(Et){var dn=Et.value;U(dn)&&(dn=B(dn));var Nt=Y(dn,Et.key,it++);Nt!==void 0?ge(Nt):Et.continue()}else ge()},Ge.onerror=function(){le(Ge.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function ne(Y,se,Z){var fe=this;Y=p(Y);var ge=new f(function(le,Oe){var Ve;fe.ready().then(function(){return Ve=fe._dbInfo,b.call(se)==="[object Blob]"?A(Ve.db).then(function(qe){return qe?se:L(se)}):se}).then(function(qe){z(fe._dbInfo,E,function(Ge,it){if(Ge)return Oe(Ge);try{var Et=it.objectStore(fe._dbInfo.storeName);qe===null&&(qe=void 0);var dn=Et.put(qe,Y);it.oncomplete=function(){qe===void 0&&(qe=null),le(qe)},it.onabort=it.onerror=function(){var Nt=dn.error?dn.error:dn.transaction.error;Oe(Nt)}}catch(Nt){Oe(Nt)}})}).catch(Oe)});return d(ge,Z),ge}function ce(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){z(Z._dbInfo,E,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.delete(Y);Ve.oncomplete=function(){ge()},Ve.onerror=function(){le(Ge.error)},Ve.onabort=function(){var it=Ge.error?Ge.error:Ge.transaction.error;le(it)}}catch(it){le(it)}})}).catch(le)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,E,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.clear();Oe.oncomplete=function(){fe()},Oe.onabort=Oe.onerror=function(){var Ge=qe.error?qe.error:qe.transaction.error;ge(Ge)}}catch(Ge){ge(Ge)}})}).catch(ge)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.count();qe.onsuccess=function(){fe(qe.result)},qe.onerror=function(){ge(qe.error)}}catch(Ge){ge(Ge)}})}).catch(ge)});return d(Z,Y),Z}function ye(Y,se){var Z=this,fe=new f(function(ge,le){if(Y<0){ge(null);return}Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=!1,it=qe.openKeyCursor();it.onsuccess=function(){var Et=it.result;if(!Et){ge(null);return}Y===0||Ge?ge(Et.key):(Ge=!0,Et.advance(Y))},it.onerror=function(){le(it.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function Ie(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.openKeyCursor(),Ge=[];qe.onsuccess=function(){var it=qe.result;if(!it){fe(Ge);return}Ge.push(it.key),it.continue()},qe.onerror=function(){ge(qe.error)}}catch(it){ge(it)}})}).catch(ge)});return d(Z,Y),Z}function ve(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;if(!Y.name)ge=f.reject("Invalid arguments");else{var le=Y.name===Z.name&&fe._dbInfo.db,Oe=le?f.resolve(fe._dbInfo.db):P(Y).then(function(Ve){var qe=v[Y.name],Ge=qe.forages;qe.db=Ve;for(var it=0;it<Ge.length;it++)Ge[it]._dbInfo.db=Ve;return Ve});Y.storeName?ge=Oe.then(function(Ve){if(Ve.objectStoreNames.contains(Y.storeName)){var qe=Ve.version+1;C(Y);var Ge=v[Y.name],it=Ge.forages;Ve.close();for(var Et=0;Et<it.length;Et++){var dn=it[Et];dn._dbInfo.db=null,dn._dbInfo.version=qe}var Nt=new f(function(jn,Cr){var Ir=u.open(Y.name,qe);Ir.onerror=function(jo){var ud=Ir.result;ud.close(),Cr(jo)},Ir.onupgradeneeded=function(){var jo=Ir.result;jo.deleteObjectStore(Y.storeName)},Ir.onsuccess=function(){var jo=Ir.result;jo.close(),jn(jo)}});return Nt.then(function(jn){Ge.db=jn;for(var Cr=0;Cr<it.length;Cr++){var Ir=it[Cr];Ir._dbInfo.db=jn,I(Ir._dbInfo)}}).catch(function(jn){throw(R(Y,jn)||f.resolve()).catch(function(){}),jn})}}):ge=Oe.then(function(Ve){C(Y);var qe=v[Y.name],Ge=qe.forages;Ve.close();for(var it=0;it<Ge.length;it++){var Et=Ge[it];Et._dbInfo.db=null}var dn=new f(function(Nt,jn){var Cr=u.deleteDatabase(Y.name);Cr.onerror=function(){var Ir=Cr.result;Ir&&Ir.close(),jn(Cr.error)},Cr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Cr.onsuccess=function(){var Ir=Cr.result;Ir&&Ir.close(),Nt(Ir)}});return dn.then(function(Nt){qe.db=Nt;for(var jn=0;jn<Ge.length;jn++){var Cr=Ge[jn];I(Cr._dbInfo)}}).catch(function(Nt){throw(R(Y,Nt)||f.resolve()).catch(function(){}),Nt})})}return d(ge,se),ge}var Ke={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:ne,removeItem:ce,clear:de,length:he,key:ye,keys:Ie,dropInstance:ve};function Ue(){return typeof openDatabase=="function"}var gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rt="~~local_forage_type~",be=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",ze=ke.length,ct="arbf",Dt="blob",We="si08",me="ui08",dt="uic8",yt="si16",pe="si32",Ce="ur16",He="ui32",ut="fl32",_t="fl64",Mn=ze+ct.length,Sr=Object.prototype.toString;function Ln(Y){var se=Y.length*.75,Z=Y.length,fe,ge=0,le,Oe,Ve,qe;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ge=new ArrayBuffer(se),it=new Uint8Array(Ge);for(fe=0;fe<Z;fe+=4)le=gt.indexOf(Y[fe]),Oe=gt.indexOf(Y[fe+1]),Ve=gt.indexOf(Y[fe+2]),qe=gt.indexOf(Y[fe+3]),it[ge++]=le<<2|Oe>>4,it[ge++]=(Oe&15)<<4|Ve>>2,it[ge++]=(Ve&3)<<6|qe&63;return Ge}function lr(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=gt[se[fe]>>2],Z+=gt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=gt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=gt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function hn(Y,se){var Z="";if(Y&&(Z=Sr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Sr.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ge=ke;Y instanceof ArrayBuffer?(fe=Y,ge+=ct):(fe=Y.buffer,Z==="[object Int8Array]"?ge+=We:Z==="[object Uint8Array]"?ge+=me:Z==="[object Uint8ClampedArray]"?ge+=dt:Z==="[object Int16Array]"?ge+=yt:Z==="[object Uint16Array]"?ge+=Ce:Z==="[object Int32Array]"?ge+=pe:Z==="[object Uint32Array]"?ge+=He:Z==="[object Float32Array]"?ge+=ut:Z==="[object Float64Array]"?ge+=_t:se(new Error("Failed to get type for BinaryArray"))),se(ge+lr(fe))}else if(Z==="[object Blob]"){var le=new FileReader;le.onload=function(){var Oe=rt+Y.type+"~"+lr(this.result);se(ke+Dt+Oe)},le.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function Sn(Y){if(Y.substring(0,ze)!==ke)return JSON.parse(Y);var se=Y.substring(Mn),Z=Y.substring(ze,Mn),fe;if(Z===Dt&&be.test(se)){var ge=se.match(be);fe=ge[1],se=se.substring(ge[0].length)}var le=Ln(se);switch(Z){case ct:return le;case Dt:return c([le],{type:fe});case We:return new Int8Array(le);case me:return new Uint8Array(le);case dt:return new Uint8ClampedArray(le);case yt:return new Int16Array(le);case Ce:return new Uint16Array(le);case pe:return new Int32Array(le);case He:return new Uint32Array(le);case ut:return new Float32Array(le);case _t:return new Float64Array(le);default:throw new Error("Unkown type: "+Z)}}var tr={serialize:hn,deserialize:Sn,stringToBuffer:Ln,bufferToString:lr};function nr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function Lo(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ge=new f(function(le,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ve){return Oe(Ve)}Z.db.transaction(function(Ve){nr(Ve,Z,function(){se._dbInfo=Z,le()},function(qe,Ge){Oe(Ge)})},Oe)});return Z.serializer=tr,ge}function Di(Y,se,Z,fe,ge,le){Y.executeSql(Z,fe,ge,function(Oe,Ve){Ve.code===Ve.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(qe,Ge){Ge.rows.length?le(qe,Ve):nr(qe,se,function(){qe.executeSql(Z,fe,ge,le)},le)},le):le(Oe,Ve)},le)}function Tn(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Di(Ve,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(qe,Ge){var it=Ge.rows.length?Ge.rows.item(0).value:null;it&&(it=Oe.serializer.deserialize(it)),ge(it)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Oi(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Di(Ve,Oe,"SELECT * FROM "+Oe.storeName,[],function(qe,Ge){for(var it=Ge.rows,Et=it.length,dn=0;dn<Et;dn++){var Nt=it.item(dn),jn=Nt.value;if(jn&&(jn=Oe.serializer.deserialize(jn)),jn=Y(jn,Nt.key,dn+1),jn!==void 0){ge(jn);return}}ge()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Tr(Y,se,Z,fe){var ge=this;Y=p(Y);var le=new f(function(Oe,Ve){ge.ready().then(function(){se===void 0&&(se=null);var qe=se,Ge=ge._dbInfo;Ge.serializer.serialize(se,function(it,Et){Et?Ve(Et):Ge.db.transaction(function(dn){Di(dn,Ge,"INSERT OR REPLACE INTO "+Ge.storeName+" (key, value) VALUES (?, ?)",[Y,it],function(){Oe(qe)},function(Nt,jn){Ve(jn)})},function(dn){if(dn.code===dn.QUOTA_ERR){if(fe>0){Oe(Tr.apply(ge,[Y,qe,Z,fe-1]));return}Ve(dn)}})})}).catch(Ve)});return d(le,Z),le}function fs(Y,se,Z){return Tr.apply(this,[Y,se,Z,1])}function ep(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Di(Ve,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){ge()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function rl(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){Di(Oe,le,"DELETE FROM "+le.storeName,[],function(){fe()},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function od(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){Di(Oe,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(Ve,qe){var Ge=qe.rows.item(0).c;fe(Ge)},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function wr(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Di(Ve,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(qe,Ge){var it=Ge.rows.length?Ge.rows.item(0).key:null;ge(it)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Si(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){Di(Oe,le,"SELECT key FROM "+le.storeName,[],function(Ve,qe){for(var Ge=[],it=0;it<qe.rows.length;it++)Ge.push(qe.rows.item(it).key);fe(Ge)},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function Gr(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ge,le){for(var Oe=[],Ve=0;Ve<le.rows.length;Ve++)Oe.push(le.rows.item(Ve).name);se({db:Y,storeNames:Oe})},function(ge,le){Z(le)})},function(fe){Z(fe)})})}function ou(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;return Y.name?ge=new f(function(le){var Oe;Y.name===Z.name?Oe=fe._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?le({db:Oe,storeNames:[Y.storeName]}):le(Gr(Oe))}).then(function(le){return new f(function(Oe,Ve){le.db.transaction(function(qe){function Ge(Nt){return new f(function(jn,Cr){qe.executeSql("DROP TABLE IF EXISTS "+Nt,[],function(){jn()},function(Ir,jo){Cr(jo)})})}for(var it=[],Et=0,dn=le.storeNames.length;Et<dn;Et++)it.push(Ge(le.storeNames[Et]));f.all(it).then(function(){Oe()}).catch(function(Nt){Ve(Nt)})},function(qe){Ve(qe)})})}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var Sa={_driver:"webSQLStorage",_initStorage:Lo,_support:Ue(),iterate:Oi,getItem:Tn,setItem:fs,removeItem:ep,clear:rl,length:od,key:wr,keys:Si,dropInstance:ou};function Ta(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Se(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=tr,f.resolve()):f.reject()}function xe(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ge=localStorage.length-1;ge>=0;ge--){var le=localStorage.key(ge);le.indexOf(fe)===0&&localStorage.removeItem(le)}});return d(Z,Y),Z}function st(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo,le=localStorage.getItem(ge.keyPrefix+Y);return le&&(le=ge.serializer.deserialize(le)),le});return d(fe,se),fe}function St(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ge=Z._dbInfo,le=ge.keyPrefix,Oe=le.length,Ve=localStorage.length,qe=1,Ge=0;Ge<Ve;Ge++){var it=localStorage.key(Ge);if(it.indexOf(le)===0){var Et=localStorage.getItem(it);if(Et&&(Et=ge.serializer.deserialize(Et)),Et=Y(Et,it.substring(Oe),qe++),Et!==void 0)return Et}}});return d(fe,se),fe}function Vt(Y,se){var Z=this,fe=Z.ready().then(function(){var ge=Z._dbInfo,le;try{le=localStorage.key(Y)}catch{le=null}return le&&(le=le.substring(ge.keyPrefix.length)),le});return d(fe,se),fe}function Dn(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ge=localStorage.length,le=[],Oe=0;Oe<ge;Oe++){var Ve=localStorage.key(Oe);Ve.indexOf(fe.keyPrefix)===0&&le.push(Ve.substring(fe.keyPrefix.length))}return le});return d(Z,Y),Z}function Fn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function fn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo;localStorage.removeItem(ge.keyPrefix+Y)});return d(fe,se),fe}function rr(Y,se,Z){var fe=this;Y=p(Y);var ge=fe.ready().then(function(){se===void 0&&(se=null);var le=se;return new f(function(Oe,Ve){var qe=fe._dbInfo;qe.serializer.serialize(se,function(Ge,it){if(it)Ve(it);else try{localStorage.setItem(qe.keyPrefix+Y,Ge),Oe(le)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ve(Et),Ve(Et)}})})});return d(ge,Z),ge}function Ar(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ge;return Y.name?ge=new f(function(le){Y.storeName?le(oe(Y,fe._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var Ve=localStorage.key(Oe);Ve.indexOf(le)===0&&localStorage.removeItem(Ve)}}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var zt={_driver:"localStorageWrapper",_initStorage:Se,_support:Ta(),iterate:St,getItem:st,setItem:rr,removeItem:fn,clear:xe,length:Fn,key:Vt,keys:Dn,dropInstance:Ar},ir=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Ur=function(se,Z){for(var fe=se.length,ge=0;ge<fe;){if(ir(se[ge],Z))return!0;ge++}return!1},Qn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ti={},Bs={},Yr={INDEXEDDB:Ke,WEBSQL:Sa,LOCALSTORAGE:zt},co=[Yr.INDEXEDDB._driver,Yr.WEBSQL._driver,Yr.LOCALSTORAGE._driver],$i=["dropInstance"],Mi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat($i),Fo={description:"",driver:co.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Aa(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function Us(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Qn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var Wl=function(){function Y(se){o(this,Y);for(var Z in Yr)if(Yr.hasOwnProperty(Z)){var fe=Yr[Z],ge=fe._driver;this[Z]=ge,Ti[ge]||this.defineDriver(fe)}this._defaultConfig=Us({},Fo),this._config=Us({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ge){var le=new f(function(Oe,Ve){try{var qe=Z._driver,Ge=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ve(Ge);return}for(var it=Mi.concat("_initStorage"),Et=0,dn=it.length;Et<dn;Et++){var Nt=it[Et],jn=!Ur($i,Nt);if((jn||Z[Nt])&&typeof Z[Nt]!="function"){Ve(Ge);return}}var Cr=function(){for(var ud=function(Gl){return function(){var au=new Error("Method "+Gl+" is not implemented by the current driver"),np=f.reject(au);return d(np,arguments[arguments.length-1]),np}},tp=0,$S=$i.length;tp<$S;tp++){var Gy=$i[tp];Z[Gy]||(Z[Gy]=ud(Gy))}};Cr();var Ir=function(ud){Ti[qe]&&console.info("Redefining LocalForage driver: "+qe),Ti[qe]=Z,Bs[qe]=ud,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Ir,Ve):Ir(!!Z._support):Ir(!0)}catch(jo){Ve(jo)}});return h(le,fe,ge),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ge){var le=Ti[Z]?f.resolve(Ti[Z]):f.reject(new Error("Driver not found."));return h(le,fe,ge),le},Y.prototype.getSerializer=function(Z){var fe=f.resolve(tr);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ge=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ge,Z,Z),ge},Y.prototype.setDriver=function(Z,fe,ge){var le=this;Qn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function Ve(){le._config.driver=le.driver()}function qe(Et){return le._extend(Et),Ve(),le._ready=le._initStorage(le._config),le._ready}function Ge(Et){return function(){var dn=0;function Nt(){for(;dn<Et.length;){var jn=Et[dn];return dn++,le._dbInfo=null,le._ready=null,le.getDriver(jn).then(qe).catch(Nt)}Ve();var Cr=new Error("No available storage method found.");return le._driverSet=f.reject(Cr),le._driverSet}return Nt()}}var it=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=it.then(function(){var Et=Oe[0];return le._dbInfo=null,le._ready=null,le.getDriver(Et).then(function(dn){le._driver=dn._driver,Ve(),le._wrapLibraryMethodsWithReady(),le._initDriver=Ge(Oe)})}).catch(function(){Ve();var Et=new Error("No available storage method found.");return le._driverSet=f.reject(Et),le._driverSet}),h(this._driverSet,fe,ge),this._driverSet},Y.prototype.supports=function(Z){return!!Bs[Z]},Y.prototype._extend=function(Z){Us(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ge=0,le=Z.length;ge<le;ge++){var Oe=Z[ge];this.supports(Oe)&&fe.push(Oe)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=Mi.length;Z<fe;Z++)Aa(this,Mi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),ad=new Wl;r.exports=ad},{3:3}]},{},[4])(4)})})($Pe);var U$t=$Pe.exports;const hV=Ul(U$t);var mo=[];for(var n9=0;n9<256;++n9)mo.push((n9+256).toString(16).slice(1));function z$t(e,t=0){return(mo[e[t+0]]+mo[e[t+1]]+mo[e[t+2]]+mo[e[t+3]]+"-"+mo[e[t+4]]+mo[e[t+5]]+"-"+mo[e[t+6]]+mo[e[t+7]]+"-"+mo[e[t+8]]+mo[e[t+9]]+"-"+mo[e[t+10]]+mo[e[t+11]]+mo[e[t+12]]+mo[e[t+13]]+mo[e[t+14]]+mo[e[t+15]]).toLowerCase()}var UN,V$t=new Uint8Array(16);function H$t(){if(!UN&&(UN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!UN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return UN(V$t)}var q$t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ohe={randomUUID:q$t};function w$(e,t,n){if(ohe.randomUUID&&!t&&!e)return ohe.randomUUID();e=e||{};var r=e.random||(e.rng||H$t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,z$t(r)}class MPe{constructor(t){sl(this,"engine");sl(this,"connected",!1);sl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Uw(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function vT(e){return e.participantId!==void 0}class Ep extends MPe{constructor(){super("firebase");sl(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");sl(this,"firestore");sl(this,"collectionPrefix","prod-");sl(this,"studyCollection");sl(this,"storage");sl(this,"studyId","");sl(this,"localForage",hV.createInstance({name:"currentParticipantId"}));sl(this,"participantData",null);const n=VX.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=eRe(n);this.firestore=L3t(r,{}),this.storage=WPt();try{L$t(r,{provider:new $J(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await F3t(this.firestore);const n=await zs(this.firestore,".info/connected");await Zj(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=p$();if(!i.currentUser&&(await fRt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await Uw(JSON.stringify(r));if(this.studyCollection=Gc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");if(vT(o))return this.participantData=o,o;const a=await Uw(JSON.stringify(r));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=w$(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=zs(this.studyCollection,"sequenceAssignment");await Yc(r,{});const i=Gc(r,"sequenceAssignment"),s=zs(i,this.currentParticipantId),o=Xde(i,W3t("participantId","==","")),a=await yT(o);if(a.docs.length>0){const h=a.docs[0],p=h.data().timestamp;await J3t(h.ref),await Yc(s,{participantId:this.currentParticipantId,timestamp:p})}else await Yc(s,{participantId:this.currentParticipantId,timestamp:t$t()});const u=Xde(i,G3t("timestamp","asc")),f=(await yT(u)).docs.map(h=>h.data()).findIndex(h=>h.participantId===this.currentParticipantId),d=n[f%n.length];if(!d)throw new Error("Latin square is empty");return d}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Wc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await mT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");vT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return vT(n)?n:null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=w$();await this.localForage.setItem("currentParticipantId",i),this.currentParticipantId=i;const s=await Uw(JSON.stringify(n)),o={participantId:i,participantConfigHash:s,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};return await this._pushToFirebaseStorage(`participants/${i}`,"participantData",o),o}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");return this.participantData.completed=!0,await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Gc(this.firestore,"user-management"),i=await yT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.user.uid=n.user.uid),await Yc(zs(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Yc(zs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Yc(zs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Yc(zs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Yc(zs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Wc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await mT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");vT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Gc(this.firestore,`${this.collectionPrefix}${n}`),s=Wc(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!vT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=zs(i,"sequenceAssignment"),u=Gc(a,"sequenceAssignment"),l=zs(u,r);await Q3t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=zs(this.firestore,"metadata","collections"),i=await Zj(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=zs(this.firestore,"metadata","collections");await Yc(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=zs(this.firestore,"metadata","collections"),i=await Zj(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Yc(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Wc(this.storage,n),s=(await mT(r)).items.map(o=>hde(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Wc(this.storage,n),o=(await mT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Wc(this.storage,n),s=Wc(this.storage,r),o=await Yj(i),u=await(await fetch(o)).blob();await Gj(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Gc(this.firestore,n),s=zs(i,"sequenceAssignment"),o=Gc(s,"sequenceAssignment"),a=Gc(this.firestore,r),u=zs(a,"sequenceAssignment");await Yc(u,{});const l=Gc(u,"sequenceAssignment"),c=await yT(o),f=Zde(this.firestore);c.docs.forEach(d=>{const h=zs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Gc(this.firestore,n),i=zs(r,"sequenceAssignment"),s=Gc(i,"sequenceAssignment"),o=await yT(s),a=Zde(this.firestore);o.forEach(u=>{const l=zs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Wc(this.storage,n);return(await mT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Wc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await Yj(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await Yj(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=Wc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await Gj(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await Gj(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Wc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await hde(i)}}const LPe=N.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),hS=()=>N.useContext(LPe);function W$t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=N.useState(t),[o,a]=N.useState(!1),{storageEngine:u}=wa(),l=async()=>{const h=p$();try{await vRt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;N.useEffect(()=>{s(t);let h;if(u instanceof Ep)try{h=p$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof Ep){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=yRt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=N.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(LPe.Provider,{value:d,children:i.determiningStatus?_.jsx(Ec,{visible:!0}):e})}function G$t(){const{config:e,metadata:t}=Lc(b=>b),n=aY(),r=Lh(),{toggleShowHelpText:i,toggleStudyBrowser:s}=Mh(),{storageEngine:o}=wa(),a=Hm();hS();const u=n.length-1,l=typeof a=="number"?a/u*100:0,[c,f]=N.useState(!1),d=e==null?void 0:e.uiConfig.logoPath,h=e==null?void 0:e.uiConfig.withProgressBar,p=UI(),m=a_e(`/${p}`),g=N.useRef(null),[y,v]=N.useState(!1);return N.useEffect(()=>{const b=g.current;b&&v(b.scrollWidth>b.offsetWidth)},[e]),_.jsx(ci.Header,{p:"md",children:_.jsxs(Ba,{mt:-7,align:"center",children:[_.jsx(Ba.Col,{span:4,children:_.jsxs(Jt,{align:"center",children:[_.jsx(xy,{w:40,src:`${Oh}${d}`,alt:"Study Logo"}),_.jsx(If,{w:"md"}),_.jsx(rs,{ref:g,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:y?e==null?void 0:e.studyMetadata.title:void 0,children:e==null?void 0:e.studyMetadata.title})]})}),_.jsx(Ba.Col,{span:4,children:h&&_.jsx(kx,{radius:"md",size:"lg",value:l})}),_.jsx(Ba.Col,{span:4,children:_.jsxs(Os,{wrap:"nowrap",justify:"right",children:[_.jsx(sa,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, we’re not collecting any data. Navigate the study via the study browser on the right.",children:_.jsx(Gp,{size:"lg",color:"orange",children:"Demo Mode"})}),(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&_.jsx(Rn,{variant:"outline",onClick:()=>r(i()),children:"Help"}),_.jsxs(bu,{shadow:"md",width:200,withinPortal:!0,opened:c,onChange:f,children:[_.jsx(bu.Target,{children:_.jsx(N0,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(KYe,{})})}),_.jsxs(bu.Dropdown,{children:[_.jsx(bu.Item,{leftSection:_.jsx(rKe,{size:14}),onClick:()=>r(s()),children:"Study Browser"}),_.jsx(bu.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(ZYe,{size:14}),children:"Contact"}),_.jsx(bu.Item,{leftSection:_.jsx($G,{size:14}),onClick:()=>Hke(o,e,t,m),children:"Next Participant"})]})]})]})})]})})}function Y$t(){var u;const e=(u=gm())==null?void 0:u.uiConfig.sidebar,t=gm(),n=qm(),r=t.components[n],i=N.useMemo(()=>{var l;return r?M6(r)&&t.baseComponents?uY({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=lY(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(ci.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(ci.Section,{bg:"gray.3",p:"md",children:_.jsxs(ot,{c:"gray.9",children:[_.jsx(ot,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Ga,{text:o})]})}),_.jsx(ci.Section,{p:"md",children:_.jsx(IO,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(ci.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(IO,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function K$t(){const{showHelpText:e,config:t}=Lc(u=>u),n=Lh(),{toggleShowHelpText:r}=Mh(),[i,s]=N.useState(""),[o,a]=N.useState(!0);return N.useEffect(()=>{async function u(){const l=await fY(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(vs,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Ga,{text:i}):_.jsx(Rv,{path:t.uiConfig.helpTextPath})})}function X$t(){const{alertModal:e}=Lc(o=>o),{setAlertModal:t}=Mh(),n=Lh(),[r,i]=N.useState(e.show),s=N.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return N.useEffect(()=>i(e.show),[e.show]),_.jsx(vs,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(AW,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(BYe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(ot,{my:"md",children:e.message}),_.jsx(Os,{w:"100%",justify:"end",children:_.jsx(Rn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function Q$t(){const e=N.useRef([]),t=gm(),n=t.uiConfig.windowEventDebounceTime??100,r=Lc(s=>s.showStudyBrowser);N.useEffect(()=>{const s=pd(p=>{e.current.push([Date.now(),"focus",p.target instanceof HTMLElement?p.target.tagName:""])},n,{maxWait:n}),o=pd(p=>{e.current.push([Date.now(),"input",p.data??""])},n,{maxWait:n}),a=pd(p=>{e.current.push([Date.now(),"keypress",p.key])},n,{maxWait:n}),u=pd(p=>{e.current.push([Date.now(),"mousedown",[p.clientX,p.clientY]])},n,{maxWait:n}),l=pd(p=>{e.current.push([Date.now(),"mouseup",[p.clientX,p.clientY]])},n,{maxWait:n}),c=pd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),f=pd(p=>{e.current.push([Date.now(),"mousemove",[p.clientX,p.clientY]])},n,{maxWait:n}),d=pd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),h=pd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",s,!0),window.addEventListener("input",o),window.addEventListener("keypress",a),window.addEventListener("mousedown",u),window.addEventListener("mouseup",l),window.addEventListener("resize",c),window.addEventListener("mousemove",f),window.addEventListener("scroll",d),document.addEventListener("visibilitychange",h),()=>{window.removeEventListener("focus",s,!0),window.removeEventListener("input",o),window.removeEventListener("keypress",a),window.addEventListener("mousedown",u),window.addEventListener("mouseup",l),window.removeEventListener("resize",c),window.removeEventListener("mousemove",f),window.removeEventListener("scroll",d),document.removeEventListener("visibilitychange",h)}},[]);const i=t.uiConfig.sidebarWidth??300;return _.jsx(pEe.Provider,{value:e,children:_.jsxs(ci,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!r,mobile:!r}},children:[_.jsx(Y$t,{}),_.jsx(Y2t,{}),_.jsx(G$t,{}),_.jsx(K$t,{}),_.jsx(X$t,{}),_.jsx(ci.Main,{children:_.jsx(AYe,{})})]})})}function J$t(e,t=!1){return typeof e=="number"?ahe(e,t):ahe(e.length,t).map(r=>r.map(i=>e[i]))}function ahe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function FPe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=FPe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function Z$t(e,t){const n=lv(e);return FPe(n,t,"root")}function jPe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&jPe(s,t,i,o)})}function eMt(e){const t=[];return jPe(e,t,"",0),t}function uhe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return J$t(i.sort(()=>.5-Math.random()),!0)}function tMt(e){const n=eMt(e.sequence).map(s=>({[s]:uhe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=Z$t(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=uhe(e,o))})}),i}var nMt={VITE_BASE_PATH:"/Upset-alltx-study/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth",VITE_REVISIT_MODE:"public",BASE_URL:"/Upset-alltx-study/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function rMt(e){const t=await(await fetch(`${Oh}${e}`)).text();return U2t(t)}async function uF(e,t){const n=t.configsList.find(r=>g_e(r)===e);if(n){const r=t.configs[n];return await rMt(`${r.path}`)}return null}async function iMt(e){const t={},n=e.configsList.filter(i=>nMt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>uF(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function sMt({globalConfig:e}){const t=UI(),[n,r]=N.useState(null),i=e.configsList.includes(t),s=hS();N.useEffect(()=>{uF(t,e).then(p=>{r(p)})},[e,t]);const[o,a]=N.useState([]),[u,l]=N.useState(null),{storageEngine:c}=wa(),[f]=DG();N.useEffect(()=>{async function p(){if(!c||!n||!t)return;await c.initializeStudyDb(t,n),await c.getSequenceArray()||await c.setSequenceArray(await tMt(n));const g=n.uiConfig.urlParticipantIdParam&&f.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(f.entries()),v=await fetch("https://api.ipify.org?format=json").catch(T=>""),b=v instanceof Response?await v.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:b.ip},E=await c.initializeParticipantSession(y,n,w,g),S=await _it(t,n,E.sequence,w,E.answers,s.user.isAdmin);l(S),a([{element:_.jsx(Q$t,{}),children:[{path:"/",element:_.jsx(Fz,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(rs,{order:2,mb:8,children:"Error loading config"}),_.jsx(MU,{issues:n.errors,type:"error"})]}):_.jsx(q2t,{})}]}])}p()},[c,n,t,f,s.user.isAdmin]);const d=l_e(o);let h=null;return i?o.length===0?h=_.jsx(Ec,{visible:!0}):h=d&&u?_.jsx(hEe.Provider,{value:u,children:_.jsx(prt,{store:u.store,children:d})}):_.jsx(Rv,{}):h=_.jsx(Rv,{}),h}function vC({studyIds:e}){const t=Vm(),{studyId:n}=aE(),r=wb(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=wa(),{user:o,logout:a}=hS(),[u,l]=N.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(XYe,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(HYe,{}),href:"/analysis/dashboard",needAdmin:!0},{name:"Settings",leftIcon:_.jsx(d_e,{}),href:"/settings",needAdmin:!0}];return _.jsx(ci.Header,{p:"md",children:_.jsxs(Ba,{mt:-7,align:"center",children:[_.jsx(Ba.Col,{span:6,children:_.jsxs(Jt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(xy,{w:40,src:`${Oh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(If,{w:"md"}),_.jsx(rs,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(Ba.Col,{span:6,children:_.jsxs(Jt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(PI,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(KW,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(Ph,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Jt,{direction:"column",mt:20,children:[_.jsx(ot,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(Rn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:_.jsx(Rn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),_.jsxs(Ee,{ml:10,children:[_.jsx(JW,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(ot,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:a,children:"Logout"}):_.jsx(ot,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function BPe({allParticipants:e,studyId:t,config:n}){const[r,{close:i,open:s}]=yw(!1),[o,{close:a,open:u}]=yw(!1),[l,{open:c,close:f}]=yw(!1);return _.jsxs(_.Fragment,{children:[_.jsxs(Os,{children:[_.jsxs(Qr,{opened:r,children:[_.jsx(Qr.Target,{children:_.jsx(Rn,{variant:"light",disabled:e.length===0,onClick:()=>{PQ(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:s,onMouseLeave:i,px:4,children:_.jsx(YYe,{})})}),_.jsx(Qr.Dropdown,{children:_.jsx(ot,{children:"Download all participants data as JSON"})})]}),_.jsxs(Qr,{opened:o,children:[_.jsx(Qr.Target,{children:_.jsx(Rn,{variant:"light",disabled:e.length===0,onClick:c,onMouseEnter:u,onMouseLeave:a,px:4,children:_.jsx(h_e,{})})}),_.jsx(Qr.Dropdown,{children:_.jsx(ot,{children:"Download all participants data as a tidy CSV"})})]})]}),l&&_.jsx(V2t,{opened:l,close:f,filename:`${t}_all_tidy.csv`,studyConfig:n,data:e})]})}function oMt({cellData:e}){return _.jsx(An.Td,{children:_.jsx($p,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(Ee,{children:[_.jsxs(ot,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(ot,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function lhe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(An.Td,{children:[t.toFixed(1)," ","s"]})}function aMt(e){const{metaData:t}=e;return _.jsx(An.Td,{children:_.jsx(EG,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs($p,{gap:"xs",children:[_.jsxs(Ee,{children:["IP:"," ",t.ip]}),_.jsxs(Ee,{children:["Language:"," ",t.language]}),_.jsxs(Ee,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(Ee,{children:["User Agent:"," ",t.userAgent]})]})})})}function uMt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=wa(),{studyId:s}=aE(),o=async g=>{i&&s&&(await i.rejectParticipant(s,g),await r())},[a,u]=N.useState([]),[l,c]=N.useState(!1),f=()=>wU({title:"Confirm rejecting participants",children:_.jsxs(ot,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(ot,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{c(!0);const g=a.map(async y=>await o(y));await Promise.all(g),u([]),await r(),c(!1)}});function d(g){g==="all"?a.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):a.includes(g)?u(a.filter(y=>y!==g)):u([...a,g])}const h=dEe(n.sequence),p=[_.jsx(An.Th,{children:_.jsx(Jt,{justify:"center",children:_.jsx(fm,{mb:-4,checked:a.length===[...e,...t].length,onChange:()=>d("all")})})},"action"),_.jsx(An.Th,{children:"ID"},"ID"),_.jsx(An.Th,{children:"Status"},"status"),_.jsx(An.Th,{children:"Meta"},"meta"),...h.flatMap(g=>[_.jsx(An.Th,{children:g.componentName},`header-${g.componentName}-${g.timesSeenInBlock}`),_.jsxs(An.Th,{children:[g.componentName," ","Duration"]},`header-${g.componentName}-${g.timesSeenInBlock}-duration`)]),_.jsx(An.Th,{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>_.jsxs(An.Tr,{children:[_.jsx(An.Td,{children:_.jsx(Jt,{justify:"center",children:_.jsx(fm,{mb:-4,checked:a.includes(g.participantId),onChange:()=>d(g.participantId)})})}),_.jsx(An.Td,{style:{whiteSpace:"nowrap"},children:g.participantId}),_.jsx(An.Td,{children:_.jsxs(Jt,{direction:"row",align:"center",children:[g.rejected?_.jsx(sa,{label:"Rejected",children:_.jsx(m_e,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?_.jsx(sa,{label:"Completed",children:_.jsx(GYe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(sa,{label:"In Progress",children:_.jsx(tKe,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&_.jsxs(ot,{size:"sm",mb:-1,ml:4,children:[(Object.entries(g.answers).filter(([y,v])=>v.endTime!==void 0).length/(mm(g.sequence).length-1)*100).toFixed(2),"%"]})]})}),g.metadata?_.jsx(aMt,{metaData:g.metadata}):_.jsx(An.Td,{children:"N/A"}),h.map(y=>{const v=cEe(g.sequence,y.orderPath),b=v&&Object.entries(g.answers).sort((w,E)=>{const S=parseInt(w[0].slice(w[0].lastIndexOf("_")+1),10),T=parseInt(E[0].slice(E[0].lastIndexOf("_")+1),10);return S-T}).filter(([w])=>{const E=w.slice(0,w.lastIndexOf("_")),S=parseInt(w.slice(w.lastIndexOf("_")+1),10);return E===y.componentName&&S<=v[0].lastIndex&&S>=v[0].firstIndex});return b!==null&&b.length>=y.timesSeenInBlock+1?_.jsxs(qi.Fragment,{children:[_.jsx(oMt,{cellData:b[y.timesSeenInBlock][1]}),_.jsx(lhe,{cellData:b[y.timesSeenInBlock][1]})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`):_.jsxs(qi.Fragment,{children:[_.jsx(An.Td,{children:"N/A"}),_.jsx(An.Td,{children:"N/A"})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`)}),_.jsx(lhe,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?_.jsxs(_.Fragment,{children:[_.jsx(Ec,{visible:l,overlayProps:{blur:2}}),_.jsxs(Jt,{justify:"space-between",mb:8,p:8,children:[_.jsx(Os,{children:_.jsx(PI,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,value:null,leftSection:_.jsx(iKe,{size:14}),onChange:g=>g&&d(g)})}),_.jsxs(Os,{children:[_.jsx(BPe,{allParticipants:[...e,...t],studyId:s||"",config:n}),_.jsx(Rn,{disabled:a.length===0,onClick:f,color:"red",children:"Reject Participants"})]})]}),_.jsxs(An,{striped:!0,withTableBorder:!0,children:[_.jsx(An.Thead,{children:_.jsx(An.Tr,{children:p})}),_.jsx(An.Tbody,{children:m})]})]}):_.jsx(Jt,{justify:"center",align:"center",style:{height:"100%"},children:_.jsx(ot,{children:"No data available"})})}function lMt({studyId:e,refresh:t}){const[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(""),[c,f]=N.useState([]),[d,h]=N.useState(""),[p,m]=N.useState(!1),[g,y]=N.useState(!1),{storageEngine:v}=wa(),b=v,w=N.useCallback(async()=>{y(!0);const M=await b.getSnapshots(e);f(M),y(!1)},[b,e]);N.useEffect(()=>{w()},[w]);const E=async()=>{m(!0),await b.createSnapshot(e,!1),w(),m(!1),await t()},S=async()=>{m(!0),h(""),r(!1),await b.createSnapshot(e,!0),w(),m(!1),await t()},T=async M=>{m(!0),await b.restoreSnapshot(e,M),w(),m(!1),await t()},A=async()=>{m(!0),h(""),s(!1),await b.removeSnapshotOrLive(u,!0),w(),m(!1),await t()},C=async()=>{m(!0),h(""),a(!1),await b.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},I=()=>wU({title:"Create a Snapshot",children:_.jsx(ot,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E()}),R=M=>wU({title:"Restore Snapshot",children:_.jsx(ot,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>T(M)});return _.jsxs(_.Fragment,{children:[_.jsx(Ec,{visible:p}),_.jsx(Nh,{children:_.jsxs(Ey,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(rs,{mb:"lg",order:4,children:"Data Management"}),_.jsxs(Jt,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(rs,{order:5,children:"Create a Snapshot"}),_.jsxs(ot,{children:["This will create a snapshot of the live"," ",_.jsx(ot,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(ot,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(sa,{label:"Create a snapshot",children:_.jsx(Rn,{onClick:I,children:"Snapshot"})})]}),_.jsx(If,{h:"lg"}),_.jsxs(Jt,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(rs,{order:5,children:"Archive Data"}),_.jsxs(ot,{children:["This will create a snapshot of the live"," ",_.jsx(ot,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(sa,{label:"Snapshot and Delete Data",children:_.jsx(Rn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(If,{h:"lg"}),_.jsxs(Jt,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(rs,{order:5,children:"Delete Data"}),_.jsxs(ot,{children:["This will delete the live"," ",_.jsx(ot,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(sa,{label:"Delete Data",children:_.jsx(Rn,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),_.jsx(If,{h:"xl"}),_.jsxs(Jt,{direction:"column",children:[_.jsx(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(rs,{order:5,children:"Snapshots"})}),_.jsxs(Ee,{style:{position:"relative"},children:[_.jsx(Ec,{visible:g}),c.length>0?c.map(M=>_.jsxs(Jt,{justify:"space-between",mb:"xs",children:[_.jsx(ot,{children:M}),_.jsxs(Jt,{direction:"row",gap:"xs",children:[_.jsx(sa,{label:"Restore Snapshot",children:_.jsx(N0,{color:"blue",variant:"subtle",onClick:()=>{R(M)},children:_.jsx(nKe,{})})}),_.jsx(sa,{label:"Delete Snapshot",children:_.jsx(N0,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(M)},children:_.jsx(p_e,{})})})]})]},M)):_.jsx(ot,{children:"No snapshots."})]})]})]})}),_.jsxs(vs,{opened:n,onClose:()=>{r(!1),h("")},title:_.jsx(ot,{children:"Archive Data"}),children:[_.jsx(ot,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(uv,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:M=>h(M.target.value)}),_.jsxs(Jt,{mt:"sm",justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),_.jsx(Rn,{color:"red",onClick:S,disabled:d!==e,children:"Archive"})]})]}),_.jsxs(vs,{opened:i,onClose:()=>{s(!1),h("")},title:_.jsx(ot,{children:"Delete Snapshot"}),children:[_.jsxs(ot,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(ot,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(uv,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:M=>h(M.target.value)}),_.jsxs(Jt,{mt:"sm",justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),_.jsx(Rn,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]}),_.jsxs(vs,{opened:o,onClose:()=>{a(!1),h("")},title:_.jsx(ot,{children:"Delete Live Data"}),children:[_.jsxs(ot,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(ot,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(ot,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(uv,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:M=>h(M.target.value)}),_.jsxs(Jt,{mt:"sm",justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),_.jsx(Rn,{color:"red",onClick:C,disabled:d!==e,children:"Delete"})]})]})]})}function cMt(e){const{globalConfig:t}=e,{studyId:n}=aE(),[r,i]=N.useState([]),[s,o]=N.useState(void 0),[a,u]=N.useState(!1),{storageEngine:l}=wa(),c=Vm(),{tab:f}=aE(),d=N.useCallback(async()=>{if(u(!0),n){const g=await uF(n,t);if(!g||!l)return;await l.initializeStudyDb(n,g);const y=await l.getAllParticipantsData();i(y),o(g),u(!1)}},[t,l,n]);N.useEffect(()=>{d()},[t,l,n,d]);const[h,p]=N.useMemo(()=>{const g=r.filter(v=>v.completed),y=r.filter(v=>!v.completed);return[g,y]},[r]),m=!1;return _.jsxs(_.Fragment,{children:[_.jsx(vC,{studyIds:e.globalConfig.configsList}),_.jsx(ci.Main,{children:_.jsxs(Nh,{fluid:!0,style:{height:"100%"},children:[_.jsx(Ec,{visible:a}),_.jsxs(es,{variant:"outline",value:f,onChange:g=>c(`./../${g}`),style:{height:"100%"},children:[_.jsxs(es.List,{children:[_.jsx(es.Tab,{value:"table",leftSection:_.jsx(sKe,{size:16}),children:"Table View"}),_.jsx(es.Tab,{value:"stats",leftSection:_.jsx(qYe,{size:16}),children:"Trial Stats"}),_.jsx(es.Tab,{value:"replay",leftSection:_.jsx(eKe,{size:16}),children:"Individual Replay"}),_.jsx(es.Tab,{value:"manage",leftSection:_.jsx(d_e,{size:16}),disabled:!m,children:"Manage"})]}),_.jsx(es.Panel,{value:"table",pt:"xs",style:{height:"calc(100% - 38px - 10px)",width:"100%",overflow:"scroll"},children:s&&_.jsx(uMt,{completed:h,inProgress:p,studyConfig:s,refresh:d})}),_.jsx(es.Panel,{value:"stats",pt:"xs",children:"statsboard"}),_.jsx(es.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(es.Panel,{value:"manage",pt:"xs",children:n&&m&&_.jsx(lMt,{studyId:n,refresh:d})})]})]})})]})}function r9({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=hS(),{storageEngine:i}=wa();return N.useEffect(()=>{(async()=>{try{t&&await n(t)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?_.jsx(Ec,{visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?_.jsx(PG,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function UPe(e,t,n){if(e instanceof Ep){t(!0);const r=new Np,i=p$();try{await jRt(i,r,ORe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function fMt(){const{user:e}=hS(),[t,n]=N.useState(null),[r,i]=N.useState(!1),{storageEngine:s}=wa();return N.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(PG,{to:"/"}):_.jsx(Nh,{children:_.jsx(Ey,{padding:"lg",children:_.jsxs(Jt,{align:"center",direction:"column",justify:"center",children:[_.jsx(xy,{maw:200,mt:50,mb:100,src:`${Oh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(ot,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(Rn,{onClick:()=>UPe(s,i,n),leftSection:_.jsx(oKe,{}),variant:"filled",children:"Sign In With Google"})]}),t?_.jsx(Gp,{size:"lg",color:"red",mt:30,children:t}):null,_.jsx(Ec,{visible:r})]})})})}var zPe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Js,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var F=["th","st","nd","rd"],L=O%100;return"["+O+(F[(L-20)%10]||F[L]||F[0])+"]"}},b=function(O,F,L){var B=String(O);return!B||B.length>=F?O:""+Array(F+1-B.length).join(L)+O},w={s:b,z:function(O){var F=-O.utcOffset(),L=Math.abs(F),B=Math.floor(L/60),U=L%60;return(F<=0?"+":"-")+b(B,2,"0")+":"+b(U,2,"0")},m:function O(F,L){if(F.date()<L.date())return-O(L,F);var B=12*(L.year()-F.year())+(L.month()-F.month()),U=F.clone().add(B,f),H=L-U<0,D=F.clone().add(B+(H?-1:1),f);return+(-(B+(L-U)/(H?U-D:D-U))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},E="en",S={};S[E]=v;var T="$isDayjsObject",A=function(O){return O instanceof M||!(!O||!O[T])},C=function O(F,L,B){var U;if(!F)return E;if(typeof F=="string"){var H=F.toLowerCase();S[H]&&(U=H),L&&(S[H]=L,U=H);var D=F.split("-");if(!U&&D.length>1)return O(D[0])}else{var z=F.name;S[z]=F,U=z}return!B&&U&&(E=U),U||!B&&E},I=function(O,F){if(A(O))return O.clone();var L=typeof F=="object"?F:{};return L.date=O,L.args=arguments,new M(L)},R=w;R.l=C,R.i=A,R.w=function(O,F){return I(O,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var M=function(){function O(L){this.$L=C(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[T]=!0}var F=O.prototype;return F.parse=function(L){this.$d=function(B){var U=B.date,H=B.utc;if(U===null)return new Date(NaN);if(R.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var D=U.match(g);if(D){var z=D[2]-1||0,W=(D[7]||"0").substring(0,3);return H?new Date(Date.UTC(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)):new Date(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)}}return new Date(U)}(L),this.init()},F.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},F.$utils=function(){return R},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(L,B){var U=I(L);return this.startOf(B)<=U&&U<=this.endOf(B)},F.isAfter=function(L,B){return I(L)<this.startOf(B)},F.isBefore=function(L,B){return this.endOf(B)<I(L)},F.$g=function(L,B,U){return R.u(L)?this[B]:this.set(U,L)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(L,B){var U=this,H=!!R.u(B)||B,D=R.p(L),z=function(he,ye){var Ie=R.w(U.$u?Date.UTC(U.$y,ye,he):new Date(U.$y,ye,he),U);return H?Ie:Ie.endOf(l)},W=function(he,ye){return R.w(U.toDate()[he].apply(U.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(ye)),U)},j=this.$W,q=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(D){case h:return H?z(1,0):z(31,11);case f:return H?z(1,q):z(0,q+1);case c:var ce=this.$locale().weekStart||0,de=(j<ce?j+7:j)-ce;return z(H?G-de:G+(6-de),q);case l:case p:return W(ne+"Hours",0);case u:return W(ne+"Minutes",1);case a:return W(ne+"Seconds",2);case o:return W(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(L){return this.startOf(L,!1)},F.$set=function(L,B){var U,H=R.p(L),D="set"+(this.$u?"UTC":""),z=(U={},U[l]=D+"Date",U[p]=D+"Date",U[f]=D+"Month",U[h]=D+"FullYear",U[u]=D+"Hours",U[a]=D+"Minutes",U[o]=D+"Seconds",U[s]=D+"Milliseconds",U)[H],W=H===l?this.$D+(B-this.$W):B;if(H===f||H===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},F.set=function(L,B){return this.clone().$set(L,B)},F.get=function(L){return this[R.p(L)]()},F.add=function(L,B){var U,H=this;L=Number(L);var D=R.p(B),z=function(q){var G=I(H);return R.w(G.date(G.date()+Math.round(q*L)),H)};if(D===f)return this.set(f,this.$M+L);if(D===h)return this.set(h,this.$y+L);if(D===l)return z(1);if(D===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[D]||1,j=this.$d.getTime()+L*W;return R.w(j,this)},F.subtract=function(L,B){return this.add(-1*L,B)},F.format=function(L){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var H=L||"YYYY-MM-DDTHH:mm:ssZ",D=R.z(this),z=this.$H,W=this.$m,j=this.$M,q=U.weekdays,G=U.months,ne=U.meridiem,ce=function(ye,Ie,ve,Ke){return ye&&(ye[Ie]||ye(B,H))||ve[Ie].slice(0,Ke)},de=function(ye){return R.s(z%12||12,ye,"0")},he=ne||function(ye,Ie,ve){var Ke=ye<12?"AM":"PM";return ve?Ke.toLowerCase():Ke};return H.replace(y,function(ye,Ie){return Ie||function(ve){switch(ve){case"YY":return String(B.$y).slice(-2);case"YYYY":return R.s(B.$y,4,"0");case"M":return j+1;case"MM":return R.s(j+1,2,"0");case"MMM":return ce(U.monthsShort,j,G,3);case"MMMM":return ce(G,j);case"D":return B.$D;case"DD":return R.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ce(U.weekdaysMin,B.$W,q,2);case"ddd":return ce(U.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(z);case"HH":return R.s(z,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(z,W,!0);case"A":return he(z,W,!1);case"m":return String(W);case"mm":return R.s(W,2,"0");case"s":return String(B.$s);case"ss":return R.s(B.$s,2,"0");case"SSS":return R.s(B.$ms,3,"0");case"Z":return D}return null}(ye)||D.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(L,B,U){var H,D=this,z=R.p(B),W=I(L),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return R.m(D,W)};switch(z){case h:H=G()/12;break;case f:H=G();break;case d:H=G()/3;break;case c:H=(q-j)/6048e5;break;case l:H=(q-j)/864e5;break;case u:H=q/i;break;case a:H=q/r;break;case o:H=q/n;break;default:H=q}return U?H:R.a(H)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return S[this.$L]},F.locale=function(L,B){if(!L)return this.$L;var U=this.clone(),H=C(L,B,!0);return H&&(U.$L=H),U},F.clone=function(){return R.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},O}(),P=M.prototype;return I.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(O){P[O[1]]=function(F){return this.$g(F,O[0],O[1])}}),I.extend=function(O,F){return O.$i||(O(F,M,I),O.$i=!0),I},I.locale=C,I.isDayjs=A,I.unix=function(O){return I(1e3*O)},I.en=S[E],I.Ls=S,I.p={},I})})(zPe);var dMt=zPe.exports;const Tt=Ul(dMt);function hMt({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function pMt({formatter:e,...t}){return(e||hMt)(t)}function mMt({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function VPe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=mMt({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?VPe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function gMt(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function yMt(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function MJ({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=gMt(i.key);if(s){i.preventDefault();const o=yMt(e);VPe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var HPe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Js,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],S=E===24?0:E,T=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",A=+d;return(o.utc(T).valueOf()-(A-=A%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(S,T,A){var C=S-60*T*1e3,I=l(C,A);if(T===I)return[C,T];var R=l(C-=60*(I-T)*1e3,A);return I===R?[C,I]:[S-60*Math.min(I,R)*1e3,Math.max(I,R)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(HPe);var vMt=HPe.exports;const bMt=Ul(vMt);var qPe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Js,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var S=E.match(r);if(!S)return null;var T=(""+S[0]).match(i)||["-",0,0],A=T[0],C=60*+T[1]+ +T[2];return C===0?0:A==="+"?C:-C}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(qPe);var _Mt=qPe.exports;const wMt=Ul(_Mt);Tt.extend(wMt);Tt.extend(bMt);function EMt(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const che=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=EMt(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function w0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>che(i,n,e)):che(t,n,e)}function xMt({minDate:e,maxDate:t,timezone:n}){const r=w0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const SMt={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"–",consistentWeeks:!1},TMt=N.createContext(SMt);function ql(){const e=N.useContext(TMt),t=N.useCallback(o=>o||e.locale,[e.locale]),n=N.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=N.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=N.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=N.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function AMt(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()} – ${r.toISOString()}`:`${n.toISOString()} –`:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function WPe({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:AMt(e,t),name:n,form:r})}WPe.displayName="@mantine/dates/HiddenDatesInput";var GPe={day:"m_396ce5cb"};const CMt={},IMt=(e,{size:t})=>({day:{"--day-size":yn(t,"day-size")}}),LJ=je((e,t)=>{const n=Ae("Day",CMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...E}=n,S=vt({name:f||"Day",classes:GPe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IMt,rootSelector:"day"}),T=ql();return _.jsx(Rs,{...S("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(w0("add",new Date,T.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});LJ.classes=GPe;LJ.displayName="@mantine/dates/Day";function kMt({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var YPe={weekday:"m_18a3eca"};const RMt={},NMt=(e,{size:t})=>({weekdaysRow:{"--wr-fz":so(t),"--wr-spacing":Il(t)}}),FJ=je((e,t)=>{const n=Ae("WeekdaysRow",RMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=vt({name:h||"WeekdaysRow",classes:YPe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NMt,rootSelector:"weekdaysRow"}),g=ql(),y=kMt({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(Ee,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});FJ.classes=YPe;FJ.displayName="@mantine/dates/WeekdaysRow";function PMt(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function DMt(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function OMt({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=PMt(s,t),a=DMt(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function KPe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function XPe(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function QPe(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function $Mt(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return QPe(c,n)&&XPe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||KPe(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var JPe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const MMt={withCellSpacing:!0},lF=je((e,t)=>{const n=Ae("Month",MMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:S,static:T,__getDayRef:A,__onDayKeyDown:C,__onDayClick:I,__onDayMouseEnter:R,__preventFocus:M,__stopPropagation:P,withCellSpacing:O,size:F,...L}=n,B=vt({name:l||"Month",classes:JPe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=ql(),H=OMt({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),D=$Mt(H,y,v,m,g,w,h),{resolvedClassNames:z,resolvedStyles:W}=Mm({classNames:r,styles:o,props:n}),j=H.map((q,G)=>{const ne=q.map((ce,de)=>{const he=!KPe(ce,h),ye=(S==null?void 0:S(ce))||Tt(ce).locale(c||U.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(ce),ve=Tt(ce).isSame(D,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":O||void 0,children:_.jsx(LJ,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":P||void 0,renderDay:b,date:ce,size:F,weekend:U.getWeekendDays(p).includes(ce.getDay()),outside:he,hidden:w?he:!1,"aria-label":ye,static:T,disabled:(g==null?void 0:g(ce))||!QPe(ce,v)||!XPe(ce,y),ref:Ke=>A==null?void 0:A(G,de,Ke),...Ie,onKeyDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onKeyDown)==null||Ue.call(Ie,Ke),C==null||C(Ke,{rowIndex:G,cellIndex:de,date:ce})},onMouseEnter:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseEnter)==null||Ue.call(Ie,Ke),R==null||R(Ke,ce)},onClick:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onClick)==null||Ue.call(Ie,Ke),I==null||I(Ke,ce)},onMouseDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseDown)==null||Ue.call(Ie,Ke),M&&Ke.preventDefault()},tabIndex:M||!ve?-1:0})},ce.toString())});return _.jsx("tr",{...B("monthRow"),children:ne},G)});return _.jsxs(Ee,{component:"table",...B("month"),size:F,ref:t,...L,children:[!E&&_.jsx("thead",{...B("monthThead"),children:_.jsx(FJ,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:z,styles:W,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:j})]})});lF.classes=JPe;lF.displayName="@mantine/dates/Month";var ZPe={pickerControl:"m_dc6a3c71"};const LMt={},FMt=(e,{size:t})=>({pickerControl:{"--dpc-fz":so(t),"--dpc-size":yn(t,"dpc-size")}}),cF=je((e,t)=>{const n=Ae("PickerControl",LMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=vt({name:d||"PickerControl",classes:ZPe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FMt,rootSelector:"pickerControl"});return _.jsx(Rs,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});cF.classes=ZPe;cF.displayName="@mantine/dates/PickerControl";function eDe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function jMt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!eDe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function tDe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var nDe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const BMt={yearsListFormat:"YYYY",withCellSpacing:!0},fF=je((e,t)=>{const n=Ae("YearsList",BMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...A}=n,C=vt({name:m||"YearsList",classes:nDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),I=ql(),R=tDe(l),M=jMt(R,d,h,p),P=R.map((O,F)=>{const L=O.map((B,U)=>{const H=p==null?void 0:p(B),D=Tt(B).isSame(M,"year");return _.jsx("td",{...C("yearsListCell"),"data-with-spacing":S||void 0,children:_.jsx(cF,{...C("yearsListControl"),size:T,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:eDe(B,d,h),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(B).locale(I.getLocale(f)).format(c)})},U)});return _.jsx("tr",{...C("yearsListRow"),children:L},F)});return _.jsx(Ee,{component:"table",ref:t,size:T,...C("yearsList"),...A,children:_.jsx("tbody",{children:P})})});fF.classes=nDe;fF.displayName="@mantine/dates/YearsList";function rDe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function UMt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!rDe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function zMt(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var iDe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const VMt={monthsListFormat:"MMM",withCellSpacing:!0},dF=je((e,t)=>{const n=Ae("MonthsList",VMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...A}=n,C=vt({name:l||"MonthsList",classes:iDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),I=ql(),R=zMt(c),M=UMt(R,h,p,m),P=R.map((O,F)=>{const L=O.map((B,U)=>{const H=m==null?void 0:m(B),D=Tt(B).isSame(M,"month");return _.jsx("td",{...C("monthsListCell"),"data-with-spacing":S||void 0,children:_.jsx(cF,{...C("monthsListControl"),size:T,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:rDe(B,h,p),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(B).locale(I.getLocale(d)).format(f)})},U)});return _.jsx("tr",{...C("monthsListRow"),children:L},F)});return _.jsx(Ee,{component:"table",ref:t,size:T,...C("monthsList"),...A,children:_.jsx("tbody",{children:P})})});dF.classes=iDe;dF.displayName="@mantine/dates/MonthsList";var sDe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const HMt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},qMt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":yn(t,"dch-control-size"),"--dch-fz":so(t)}}),$y=je((e,t)=>{const n=Ae("CalendarHeader",HMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:S,__staticSelector:T,__preventFocus:A,__stopPropagation:C,...I}=n,R=vt({name:T||"CalendarHeader",classes:sDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qMt,rootSelector:"calendarHeader"}),M=A?P=>P.preventDefault():void 0;return _.jsxs(Ee,{...R("calendarHeader"),ref:t,...I,children:[S&&_.jsx(Rs,{...R("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:M,disabled:v,"data-disabled":v||void 0,tabIndex:A||v?-1:0,"data-mantine-stop-propagation":C||void 0,children:c||_.jsx(dO,{...R("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(Rs,{component:b?"button":"div",...R("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?M:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:A||!b?-1:0,"data-mantine-stop-propagation":C||void 0,children:g}),E&&_.jsx(Rs,{...R("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:M,disabled:y,"data-disabled":y||void 0,tabIndex:A||y?-1:0,"data-mantine-stop-propagation":C||void 0,children:l||_.jsx(dO,{...R("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});$y.classes=sDe;$y.displayName="@mantine/dates/CalendarHeader";function WMt(e){const t=tDe(e);return[t[0][0],t[3][0]]}const GMt={decadeLabelFormat:"YYYY"},hF=je((e,t)=>{const n=Ae("DecadeLevel",GMt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:S,levelControlAriaLabel:T,withNext:A,withPrevious:C,decadeLabelFormat:I,classNames:R,styles:M,unstyled:P,__staticSelector:O,__stopPropagation:F,size:L,...B}=n,U=ql(),[H,D]=WMt(r),z={__staticSelector:O||"DecadeLevel",classNames:R,styles:M,unstyled:P,size:L},W=typeof E=="boolean"?E:o?!Tt(D).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Tt(H).startOf("year").isAfter(s):!1,q=(G,ne)=>Tt(G).locale(i||U.locale).format(ne);return _.jsxs(Ee,{"data-decade-level":!0,size:L,ref:t,...B,children:[_.jsx($y,{label:typeof I=="function"?I(H,D):`${q(H,I)} – ${q(D,I)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:T,withNext:A,withPrevious:C,...z}),_.jsx(fF,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...z})]})});hF.classes={...fF.classes,...$y.classes};hF.displayName="@mantine/dates/DecadeLevel";const YMt={yearLabelFormat:"YYYY"},pF=je((e,t)=>{const n=Ae("YearLevel",YMt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:S,previousDisabled:T,hasNextLevel:A,levelControlAriaLabel:C,withNext:I,withPrevious:R,yearLabelFormat:M,__staticSelector:P,__stopPropagation:O,size:F,classNames:L,styles:B,unstyled:U,...H}=n,D=ql(),z={__staticSelector:P||"YearLevel",classNames:L,styles:B,unstyled:U,size:F},W=typeof S=="boolean"?S:o?!Tt(r).endOf("year").isBefore(o):!1,j=typeof T=="boolean"?T:s?!Tt(r).startOf("year").isAfter(s):!1;return _.jsxs(Ee,{"data-year-level":!0,size:F,ref:t,...H,children:[_.jsx($y,{label:typeof M=="function"?M(r):Tt(r).locale(i||D.locale).format(M),__preventFocus:p,__stopPropagation:O,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:A,levelControlAriaLabel:C,withNext:I,withPrevious:R,...z}),_.jsx(dF,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:O,withCellSpacing:h,...z})]})});pF.classes={...$y.classes,...dF.classes};pF.displayName="@mantine/dates/YearLevel";const KMt={monthLabelFormat:"MMMM YYYY"},mF=je((e,t)=>{const n=Ae("MonthLevel",KMt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:E,__stopPropagation:S,nextIcon:T,previousIcon:A,nextLabel:C,previousLabel:I,onNext:R,onPrevious:M,onLevelClick:P,nextDisabled:O,previousDisabled:F,hasNextLevel:L,levelControlAriaLabel:B,withNext:U,withPrevious:H,monthLabelFormat:D,classNames:z,styles:W,unstyled:j,__staticSelector:q,size:G,static:ne,...ce}=n,de=ql(),he={__staticSelector:q||"MonthLevel",classNames:z,styles:W,unstyled:j,size:G},ye=typeof O=="boolean"?O:f?!Tt(r).endOf("month").isBefore(f):!1,Ie=typeof F=="boolean"?F:c?!Tt(r).startOf("month").isAfter(c):!1;return _.jsxs(Ee,{"data-month-level":!0,size:G,ref:t,...ce,children:[_.jsx($y,{label:typeof D=="function"?D(r):Tt(r).locale(i||de.locale).format(D),__preventFocus:E,__stopPropagation:S,nextIcon:T,previousIcon:A,nextLabel:C,previousLabel:I,onNext:R,onPrevious:M,onLevelClick:P,nextDisabled:ye,previousDisabled:Ie,hasNextLevel:L,levelControlAriaLabel:B,withNext:U,withPrevious:H,...he}),_.jsx(lF,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:E,__stopPropagation:S,static:ne,withCellSpacing:w,...he})]})});mF.classes={...lF.classes,...$y.classes};mF.displayName="@mantine/dates/MonthLevel";var oDe={levelsGroup:"m_30b26e33"};const XMt={},My=je((e,t)=>{const n=Ae("LevelsGroup",XMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=vt({name:l||"LevelsGroup",classes:oDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(Ee,{ref:t,...f("levelsGroup"),...c})});My.classes=oDe;My.displayName="@mantine/dates/LevelsGroup";const QMt={numberOfColumns:1},gF=je((e,t)=>{const n=Ae("DecadeLevelGroup",QMt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:S,unstyled:T,__staticSelector:A,__stopPropagation:C,numberOfColumns:I,levelControlAriaLabel:R,decadeLabelFormat:M,size:P,vars:O,...F}=n,L=N.useRef([]),B=Array(I).fill(0).map((U,H)=>{const D=Tt(r).add(H*10,"years").toDate();return _.jsx(hF,{size:P,yearsListFormat:a,decade:D,withNext:H===I-1,withPrevious:H===0,decadeLabelFormat:M,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>MJ({levelIndex:H,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:L}),__getControlRef:(z,W,j)=>{Array.isArray(L.current[H])||(L.current[H]=[]),Array.isArray(L.current[H][z])||(L.current[H][z]=[]),L.current[H][z][W]=j},levelControlAriaLabel:typeof R=="function"?R(D):R,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:C,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:A||"DecadeLevelGroup",classNames:E,styles:S,unstyled:T,withCellSpacing:f},H)});return _.jsx(My,{classNames:E,styles:S,__staticSelector:A||"DecadeLevelGroup",ref:t,size:P,unstyled:T,...F,children:B})});gF.classes={...My.classes,...hF.classes};gF.displayName="@mantine/dates/DecadeLevelGroup";const JMt={numberOfColumns:1},yF=je((e,t)=>{const n=Ae("YearLevelGroup",JMt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:S,classNames:T,styles:A,unstyled:C,__staticSelector:I,__stopPropagation:R,numberOfColumns:M,levelControlAriaLabel:P,yearLabelFormat:O,size:F,vars:L,...B}=n,U=N.useRef([]),H=Array(M).fill(0).map((D,z)=>{const W=Tt(r).add(z,"years").toDate();return _.jsx(pF,{size:F,monthsListFormat:a,year:W,withNext:z===M-1,withPrevious:z===0,yearLabelFormat:O,__stopPropagation:R,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>MJ({levelIndex:z,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,q,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][q]=G},levelControlAriaLabel:typeof P=="function"?P(W):P,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:S,getMonthControlProps:u,classNames:T,styles:A,unstyled:C,__staticSelector:I||"YearLevelGroup",withCellSpacing:f},z)});return _.jsx(My,{classNames:T,styles:A,__staticSelector:I||"YearLevelGroup",ref:t,size:F,unstyled:C,...B,children:H})});yF.classes={...pF.classes,...My.classes};yF.displayName="@mantine/dates/YearLevelGroup";const ZMt={numberOfColumns:1},vF=je((e,t)=>{const n=Ae("MonthLevelGroup",ZMt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:S,previousLabel:T,onNext:A,onPrevious:C,onLevelClick:I,nextDisabled:R,previousDisabled:M,hasNextLevel:P,classNames:O,styles:F,unstyled:L,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:H,__staticSelector:D,__stopPropagation:z,size:W,static:j,vars:q,...G}=n,ne=N.useRef([]),ce=Array(B).fill(0).map((de,he)=>{const ye=Tt(r).add(he,"months").toDate();return _.jsx(mF,{month:ye,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:H,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,ve)=>MJ({levelIndex:he,rowIndex:ve.rowIndex,cellIndex:ve.cellIndex,event:Ie,controlsRef:ne}),__getDayRef:(Ie,ve,Ke)=>{Array.isArray(ne.current[he])||(ne.current[he]=[]),Array.isArray(ne.current[he][Ie])||(ne.current[he][Ie]=[]),ne.current[he][Ie][ve]=Ke},levelControlAriaLabel:typeof U=="function"?U(ye):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:S,previousLabel:T,onNext:A,onPrevious:C,onLevelClick:I,nextDisabled:R,previousDisabled:M,hasNextLevel:P,classNames:O,styles:F,unstyled:L,__staticSelector:D||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},he)});return _.jsx(My,{classNames:O,styles:F,__staticSelector:D||"MonthLevelGroup",ref:t,size:W,...G,children:ce})});vF.classes={...My.classes,...mF.classes};vF.displayName="@mantine/dates/MonthLevelGroup";var aDe={input:"m_6fa5e2aa"};const eLt={},bF=je((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:S,value:T,name:A,form:C,type:I,...R}=zve("PickerInputBase",eLt,e),M=b||(g&&w&&!E&&!S?_.jsx(_y,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),P=()=>{I==="range"&&Array.isArray(T)&&T[0]&&!T[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(vs,{opened:p,onClose:P,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(Ri.Wrapper,{...r,children:_.jsxs(Qr,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var O;(O=u==null?void 0:u.onClose)==null||O.call(u),P()},children:[_.jsx(Qr.Target,{children:_.jsx(Ri,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:S,component:"button",type:"button",multiline:!0,onClick:O=>{m==null||m(O),h.toggle()},rightSection:M,...n,ref:t,classNames:{...s,input:Yi(aDe.input,s==null?void 0:s.input)},...R,children:d||_.jsx(Ri.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(Qr.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(WPe,{value:T,name:A,form:C,type:I})]})});bF.classes=aDe;bF.displayName="@mantine/dates/PickerInputBase";const fhe=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function jJ({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=N.useRef(e),o=ql(),[a,u,l]=Po({value:w0("add",t,o.getTimezone(),!i),defaultValue:w0("add",n,o.getTimezone(),!i),finalValue:fhe(e),onChange:f=>{r==null||r(w0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:fhe(e),u(c))),[c,u,l]}function i9(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function tLt(e){return e===0?"month":e===1?"year":"decade"}function bT(e,t,n){return tLt(Ud(i9(e,0),i9(t,0),i9(n,2)))}const nLt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},_F=je((e,t)=>{const n=Ae("Calendar",nLt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:A,excludeDate:C,renderDay:I,hideOutsideDates:R,hideWeekdays:M,getDayAriaLabel:P,monthLabelFormat:O,nextIcon:F,previousIcon:L,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:H,monthsListFormat:D,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:q,decadeLabelFormat:G,classNames:ne,styles:ce,unstyled:de,minDate:he,maxDate:ye,locale:Ie,__staticSelector:ve,size:Ke,__preventFocus:Ue,__stopPropagation:gt,onNextDecade:rt,onPreviousDecade:be,onNextYear:ke,onPreviousYear:ze,onNextMonth:ct,onPreviousMonth:Dt,static:We,__timezoneApplied:me,...dt}=n,{resolvedClassNames:yt,resolvedStyles:pe}=Mm({classNames:ne,styles:ce,props:n}),[Ce,He]=Po({value:a?bT(a,s,i):void 0,defaultValue:o?bT(o,s,i):void 0,finalValue:bT(void 0,s,i),onChange:u}),[ut,_t]=jJ({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!me}),Mn={__staticSelector:ve||"Calendar",styles:pe,classNames:yt,unstyled:de,size:Ke},Sr=ql(),Ln=h||d||1,lr=ut||w0("add",new Date,Sr.getTimezone()),hn=()=>{const Tn=Tt(lr).add(Ln,"month").toDate();ct==null||ct(Tn),_t(Tn)},Sn=()=>{const Tn=Tt(lr).subtract(Ln,"month").toDate();Dt==null||Dt(Tn),_t(Tn)},tr=()=>{const Tn=Tt(lr).add(Ln,"year").toDate();ke==null||ke(Tn),_t(Tn)},nr=()=>{const Tn=Tt(lr).subtract(Ln,"year").toDate();ze==null||ze(Tn),_t(Tn)},Lo=()=>{const Tn=Tt(lr).add(10*Ln,"year").toDate();rt==null||rt(Tn),_t(Tn)},Di=()=>{const Tn=Tt(lr).subtract(10*Ln,"year").toDate();be==null||be(Tn),_t(Tn)};return _.jsxs(Ee,{ref:t,size:Ke,"data-calendar":!0,...dt,children:[Ce==="month"&&_.jsx(vF,{month:lr,minDate:he,maxDate:ye,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:A,excludeDate:C,renderDay:I,hideOutsideDates:R,hideWeekdays:M,getDayAriaLabel:P,onNext:hn,onPrevious:Sn,hasNextLevel:i!=="month",onLevelClick:()=>He("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:L,monthLabelFormat:O,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:Ue,__stopPropagation:gt,static:We,withCellSpacing:H,...Mn}),Ce==="year"&&_.jsx(yF,{year:lr,numberOfColumns:d,minDate:he,maxDate:ye,monthsListFormat:D,getMonthControlProps:z,locale:Ie,onNext:tr,onPrevious:nr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>He("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:L,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(Tn,Oi)=>{w&&_t(Oi),He(bT("month",s,i)),g==null||g(Oi)},__preventFocus:Ue,__stopPropagation:gt,withCellSpacing:H,...Mn}),Ce==="decade"&&_.jsx(gF,{decade:lr,minDate:he,maxDate:ye,yearsListFormat:j,getYearControlProps:q,locale:Ie,onNext:Lo,onPrevious:Di,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:L,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(Tn,Oi)=>{b&&_t(Oi),He(bT("year",s,i)),m==null||m(Oi)},__preventFocus:Ue,__stopPropagation:gt,withCellSpacing:H,...Mn})]})});_F.classes={...gF.classes,...yF.classes,...vF.classes};_F.displayName="@mantine/dates/Calendar";function rLt(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:I,firstDayOfWeek:R,weekdayFormat:M,weekendDays:P,getDayProps:O,excludeDate:F,renderDay:L,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ye,locale:Ie,...ve}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:I,firstDayOfWeek:R,weekdayFormat:M,weekendDays:P,getDayProps:O,excludeDate:F,renderDay:L,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ye,locale:Ie},others:ve}}function dhe(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function iLt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=jJ({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=N.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=N.useState(null),m=S=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(S).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const T=[S,f];T.sort((A,C)=>A.getTime()-C.getTime()),c(T),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(S).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([S,null]),p(null),d(S);return}if(e==="multiple"){l.some(T=>Tt(T).isSame(S,t))?c(l.filter(T=>!Tt(T).isSame(S,t))):c([...l,S]);return}l&&o&&Tt(S).isSame(l,t)?c(null):c(S)},g=S=>f instanceof Date&&h instanceof Date?dhe(S,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?dhe(S,l):!1,y=e==="range"?S=>{a==null||a(S),p(null)}:a,v=S=>l[0]instanceof Date&&Tt(S).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,b=S=>l[1]instanceof Date?Tt(S).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(S).isSame(l[0],t),w=S=>{if(e==="range")return{selected:l.some(A=>A&&Tt(A).isSame(S,t)),inRange:g(S),firstInRange:v(S),lastInRange:b(S),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};if(e==="multiple")return{selected:l.some(A=>A&&Tt(A).isSame(S,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};const T=Tt(l).isSame(S,t);return{selected:T,"data-autofocus":T||void 0}},E=e==="range"&&f?p:()=>{};return N.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const sLt={type:"default",defaultLevel:"month",numberOfColumns:1},wF=je((e,t)=>{const n=Ae("DatePicker",sLt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:S,onHoveredDateChange:T,getControlProps:A}=iLt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:C,resolvedStyles:I}=Mm({classNames:r,styles:i,props:n}),R=ql();return _.jsx(_F,{ref:t,minLevel:"month",classNames:C,styles:I,__staticSelector:c||"DatePicker",onMouseLeave:S,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(M,P)=>{T(P),y==null||y(M,P)},__onDayClick:(M,P)=>{E(P),v==null||v(M,P)},getDayProps:M=>({...A(M),...f==null?void 0:f(M)}),...w,date:w0("add",w.date,R.getTimezone(),b),__timezoneApplied:!0})});wF.classes=_F.classes;wF.displayName="@mantine/dates/DatePicker";function oLt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=ql(),[f,d]=yw(!1),[h,p]=jJ({type:e,value:t,defaultValue:n,onChange:r}),m=pMt({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const aLt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},BJ=je((e,t)=>{const n=Ae("DatePickerInput",aLt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:S,...T}=n,{resolvedClassNames:A,resolvedStyles:C}=Mm({classNames:c,styles:f,props:n}),{calendarProps:I,others:R}=rLt(T),{_value:M,setValue:P,formattedValue:O,dropdownHandlers:F,dropdownOpened:L,onClear:B,shouldClear:U}=oLt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:S}),H=Array.isArray(M)?M[0]||E:M||E,D=ql();return _.jsx(bF,{formattedValue:O,dropdownOpened:L,dropdownHandlers:F,classNames:A,styles:C,unstyled:d,ref:t,onClear:B,shouldClear:U,value:M,size:p,variant:m,dropdownType:g,...R,type:r,__staticSelector:"DatePickerInput",children:_.jsx(wF,{...I,size:p,variant:m,type:r,value:M,defaultDate:H||xMt({maxDate:b,minDate:v,timezone:D.getTimezone()}),onChange:P,locale:l,classNames:A,styles:C,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:w0("add",I.date,D.getTimezone()),__timezoneApplied:!0})})});BJ.classes={...bF.classes,...wF.classes};BJ.displayName="@mantine/dates/DatePickerInput";var uDe={exports:{}},uLt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lLt=uLt,cLt=lLt;function lDe(){}function cDe(){}cDe.resetWarningCache=lDe;var fLt=function(){function e(r,i,s,o,a,u){if(u!==cLt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:cDe,resetWarningCache:lDe};return n.PropTypes=n,n};uDe.exports=fLt();var dLt=uDe.exports;const hhe=Ul(dLt),phe={};function pV(e,t){e===void 0&&(e=phe),t===void 0&&(t=phe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var hLt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pLt=Object.prototype.hasOwnProperty;function mV(e,t){return pLt.call(e,t)}function gV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)mV(e,i)&&r.push(i);return r}function wl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function yV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function S1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function fDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function vV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(vV(e[t]))return!0}else if(typeof e=="object"){for(var r=gV(e),i=r.length,s=0;s<i;s++)if(vV(e[r[s]]))return!0}}return!1}function mhe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var dDe=function(e){hLt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,mhe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=mhe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),ji=dDe,mLt=wl,iw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=E$(n,this.path);r&&(r=wl(r));var i=mv(n,{op:"remove",path:this.from}).removed;return mv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=E$(n,this.from);return mv(n,{op:"add",path:this.path,value:wl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Y2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},gLt={add:function(e,t,n){return yV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:iw.move,copy:iw.copy,test:iw.test,_get:iw._get};function E$(e,t){if(t=="")return e;var n={op:"_get",path:t};return mv(e,n),n.value}function mv(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):x$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=E$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Y2(e,t.value),o.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ji("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=wl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=x$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=fDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!yV(h))throw new ji("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);yV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ji("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=gLt[t.op].call(t,l,h,e);if(o.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=iw[t.op].call(t,l,h,e);if(o.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ji("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function EF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ji("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=wl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=mv(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function yLt(e,t,n){var r=mv(e,t);if(r.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function x$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ji("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(iw[e.op]){if(typeof e.path!="string")throw new ji("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ji('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ji("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ji("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&vV(e.value))throw new ji("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ji("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ji("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=hDe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ji("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ji("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function hDe(e,t,n){try{if(!Array.isArray(e))throw new ji("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)EF(wl(t),wl(e),n||!0);else{n=n||x$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ji)return i;throw i}}function Y2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!Y2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!Y2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const vLt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ji,_areEquals:Y2,applyOperation:mv,applyPatch:EF,applyReducer:yLt,deepClone:mLt,getValueByPointer:E$,validate:hDe,validator:x$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var UJ=new WeakMap,bLt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),_Lt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function wLt(e){return UJ.get(e)}function ELt(e,t){return e.observers.get(t)}function xLt(e,t){e.observers.delete(t.callback)}function SLt(e,t){t.unobserve()}function TLt(e,t){var n=[],r,i=wLt(e);if(!i)i=new bLt(e),UJ.set(e,i);else{var s=ELt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=wl(e),t){r.callback=t,r.next=null;var o=function(){bV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){bV(r),clearTimeout(r.next),xLt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new _Lt(t,r)),r}function bV(e,t){t===void 0&&(t=!1);var n=UJ.get(e.object);zJ(n.value,e.object,e.patches,"",t),e.patches.length&&EF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function zJ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=gV(t),o=gV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(mV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?zJ(c,f,n,r+"/"+S1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+S1(l),value:wl(c)}),n.push({op:"replace",path:r+"/"+S1(l),value:wl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+S1(l),value:wl(c)}),n.push({op:"remove",path:r+"/"+S1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!mV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+S1(l),value:wl(t[l])})}}}function ALt(e,t,n){n===void 0&&(n=!1);var r=[];return zJ(e,t,r,"",n),r}const CLt=Object.freeze(Object.defineProperty({__proto__:null,compare:ALt,generate:bV,observe:TLt,unobserve:SLt},Symbol.toStringTag,{value:"Module"}));Object.assign({},vLt,CLt,{JsonPatchError:dDe,deepClone:wl,escapePathComponent:S1,unescapePathComponent:fDe});var ILt=/("(?:[^\\"]|\\.)*")|[:,]/g,kLt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(ILt,function(S,T){return T||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const s9=Ul(kLt);function tl(e,t,n){return e.fields=t||[],e.fname=n,e}function Gi(e){return e==null?null:e.fname}function fa(e){return e==null?null:e.fields}function pDe(e){return e.length===1?RLt(e[0]):NLt(e)}const RLt=e=>function(t){return t[e]},NLt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Me(e){throw Error(e)}function Hh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Me("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Me("Access path missing closing bracket: "+e),r&&Me("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Tc(e,t,n){const r=Hh(e);return e=r.length===1?r[0]:e,tl((n&&n.get||pDe)(r),[e],t||e)}const Rk=Tc("id"),va=tl(e=>e,[],"identity"),Bg=tl(()=>0,[],"zero"),pS=tl(()=>1,[],"one"),Ac=tl(()=>!0,[],"true"),bg=tl(()=>!1,[],"false");function PLt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const mDe=0,VJ=1,HJ=2,gDe=3,yDe=4;function qJ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:PLt,r=e||mDe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=VJ&&n(t||"error","ERROR",arguments),this},warn(){return r>=HJ&&n(t||"warn","WARN",arguments),this},info(){return r>=gDe&&n(t||"log","INFO",arguments),this},debug(){return r>=yDe&&n(t||"log","DEBUG",arguments),this}}}var Fe=Array.isArray;function mt(e){return e===Object(e)}const ghe=e=>e!=="__proto__";function mS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=DLt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;gS(r,s,i[s],o)}return r},{})}function gS(e,t,n,r){if(!ghe(t))return;let i,s;if(mt(n)&&!Fe(n)){s=mt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?gS(s,i,n[i]):ghe(i)&&(s[i]=n[i])}else e[t]=n}function DLt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Xn(e){return e[e.length-1]}function ua(e){return e==null||e===""?null:+e}const vDe=e=>t=>e*Math.exp(t),bDe=e=>t=>Math.log(e*t),_De=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),wDe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,S$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function xF(e,t,n,r){const i=n(e[0]),s=n(Xn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function EDe(e,t){return xF(e,t,ua,va)}function xDe(e,t){var n=Math.sign(e[0]);return xF(e,t,bDe(n),vDe(n))}function SDe(e,t,n){return xF(e,t,S$(n),S$(1/n))}function TDe(e,t,n){return xF(e,t,_De(n),wDe(n))}function SF(e,t,n,r,i){const s=r(e[0]),o=r(Xn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function WJ(e,t,n){return SF(e,t,n,ua,va)}function GJ(e,t,n){const r=Math.sign(e[0]);return SF(e,t,n,bDe(r),vDe(r))}function T$(e,t,n,r){return SF(e,t,n,S$(r),S$(1/r))}function YJ(e,t,n,r){return SF(e,t,n,_De(r),wDe(r))}function ADe(e){return 1+~~(new Date(e).getMonth()/3)}function CDe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ht(e){return e!=null?Fe(e)?e:[e]:[]}function IDe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function vn(e){return typeof e=="function"}const OLt="descending";function KJ(e,t,n){n=n||{},t=ht(t)||[];const r=[],i=[],s={},o=n.comparator||$Lt;return ht(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===OLt?-1:1),i.push(a=vn(a)?a:Tc(a,null,n)),(fa(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:tl(o(i,r),Object.keys(s))}const TF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),$Lt=(e,t)=>e.length===1?MLt(e[0],t[0]):LLt(e,t,e.length),MLt=(e,t)=>function(n,r){return TF(e(n),e(r))*t},LLt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=TF(s(r),s(i));return o*t[a]});function ba(e){return vn(e)?e:()=>e}function XJ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function gn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function xh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function kDe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const FLt=Object.prototype.hasOwnProperty;function Ft(e,t){return FLt.call(e,t)}const zN={};function yS(e){let t={},n;function r(s){return Ft(t,s)&&t[s]!==zN}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===zN&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=zN),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==zN&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function RDe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Xn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),gn(r,n)}function sw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Ly(e){return typeof e=="boolean"}function E0(e){return Object.prototype.toString.call(e)==="[object Date]"}function NDe(e){return e&&vn(e[Symbol.iterator])}function ur(e){return typeof e=="number"}function PDe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function pt(e){return typeof e=="string"}function QJ(e,t,n){e&&(e=t?ht(e).map(a=>a.replace(/\\(.)/g,"$1")):ht(e));const r=e&&e.length,i=n&&n.get||pDe,s=a=>i(t?[a]:Hh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return tl(o,e,"key")}function DDe(e,t){const n=e[0],r=Xn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const jLt=1e4;function ODe(e){e=+e||jLt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ft(t,o)||Ft(n,o),get:o=>Ft(t,o)?t[o]:Ft(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ft(t,o)?t[o]=a:s(o,a)}}function $De(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function pA(e,t){let n="";for(;--t>=0;)n+=e;return n}function MDe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?pA(i,o)+s:r==="center"?pA(i,~~(o/2))+s+pA(i,Math.ceil(o/2)):s+pA(i,o)}function Nk(e){return e&&Xn(e)-e[0]||0}function nt(e){return Fe(e)?"["+e.map(nt)+"]":mt(e)||pt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function JJ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const BLt=e=>ur(e)||E0(e)?e:Date.parse(e);function ZJ(e,t){return t=t||BLt,e==null||e===""?null:t(e)}function eZ(e){return e==null||e===""?null:e+""}function zf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function LDe(e,t,n,r){const i=r??"…",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Cg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function ULt(e){return e}function zLt(e){if(e==null)return ULt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function VLt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function HLt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return yhe(e,n)})}:yhe(e,t)}function yhe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=FDe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function FDe(e,t){var n=zLt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&VLt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function qLt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function WLt(e){return FDe(e,GLt.apply(this,arguments))}function GLt(e,t,n){var r,i,s;if(arguments.length>1)r=YLt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:qLt(e,r)}}function YLt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const ko="year",Yu="quarter",da="month",Is="week",Ku="date",aa="day",Sh="dayofyear",Ml="hours",Ll="minutes",Cc="seconds",Vf="milliseconds",tZ=[ko,Yu,da,Is,Ku,aa,Sh,Ml,Ll,Cc,Vf],o9=tZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function nZ(e){const t=ht(e).slice(),n={};return t.length||Me("Missing time unit."),t.forEach(i=>{Ft(o9,i)?n[i]=1:Me(`Invalid time unit: ${i}.`)}),(n[Is]||n[aa]?1:0)+(n[Yu]||n[da]||n[Ku]?1:0)+(n[Sh]?1:0)>1&&Me(`Incompatible time units: ${e}`),t.sort((i,s)=>o9[i]-o9[s]),t}const KLt={[ko]:"%Y ",[Yu]:"Q%q ",[da]:"%b ",[Ku]:"%d ",[Is]:"W%U ",[aa]:"%a ",[Sh]:"%j ",[Ml]:"%H:00",[Ll]:"00:%M",[Cc]:":%S",[Vf]:".%L",[`${ko}-${da}`]:"%Y-%m ",[`${ko}-${da}-${Ku}`]:"%Y-%m-%d ",[`${Ml}-${Ll}`]:"%H:%M"};function jDe(e,t){const n=gn({},KLt,t),r=nZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const O1=new Date;function rZ(e){return O1.setFullYear(e),O1.setMonth(0),O1.setDate(1),O1.setHours(0,0,0,0),O1}function BDe(e){return zDe(new Date(e))}function UDe(e){return _V(new Date(e))}function zDe(e){return Xp.count(rZ(e.getFullYear())-1,e)}function _V(e){return zx.count(rZ(e.getFullYear())-1,e)}function wV(e){return rZ(e).getDay()}function XLt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function VDe(e){return qDe(new Date(e))}function HDe(e){return EV(new Date(e))}function qDe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return h0.count(t-1,e)}function EV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Vx.count(t-1,e)}function xV(e){return O1.setTime(Date.UTC(e,0,1)),O1.getUTCDay()}function QLt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function WDe(e,t,n,r,i){const s=t||1,o=Xn(e),a=(y,v,b)=>(b=b||y,JLt(n[b],r[b],y===o&&s,v)),u=new Date,l=zf(e),c=l[ko]?a(ko):ba(2012),f=l[da]?a(da):l[Yu]?a(Yu):Bg,d=l[Is]&&l[aa]?a(aa,1,Is+aa):l[Is]?a(Is,1):l[aa]?a(aa,1):l[Ku]?a(Ku,1):l[Sh]?a(Sh,1):pS,h=l[Ml]?a(Ml):Bg,p=l[Ll]?a(Ll):Bg,m=l[Cc]?a(Cc):Bg,g=l[Vf]?a(Vf):Bg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function JLt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function HE(e,t,n){return t+e*7-(n+6)%7}const ZLt={[ko]:e=>e.getFullYear(),[Yu]:e=>Math.floor(e.getMonth()/3),[da]:e=>e.getMonth(),[Ku]:e=>e.getDate(),[Ml]:e=>e.getHours(),[Ll]:e=>e.getMinutes(),[Cc]:e=>e.getSeconds(),[Vf]:e=>e.getMilliseconds(),[Sh]:e=>zDe(e),[Is]:e=>_V(e),[Is+aa]:(e,t)=>HE(_V(e),e.getDay(),wV(t)),[aa]:(e,t)=>HE(1,e.getDay(),wV(t))},e6t={[Yu]:e=>3*e,[Is]:(e,t)=>HE(e,0,wV(t))};function GDe(e,t){return WDe(e,t||1,ZLt,e6t,XLt)}const t6t={[ko]:e=>e.getUTCFullYear(),[Yu]:e=>Math.floor(e.getUTCMonth()/3),[da]:e=>e.getUTCMonth(),[Ku]:e=>e.getUTCDate(),[Ml]:e=>e.getUTCHours(),[Ll]:e=>e.getUTCMinutes(),[Cc]:e=>e.getUTCSeconds(),[Vf]:e=>e.getUTCMilliseconds(),[Sh]:e=>qDe(e),[Is]:e=>EV(e),[aa]:(e,t)=>HE(1,e.getUTCDay(),xV(t)),[Is+aa]:(e,t)=>HE(EV(e),e.getUTCDay(),xV(t))},n6t={[Yu]:e=>3*e,[Is]:(e,t)=>HE(e,0,xV(t))};function YDe(e,t){return WDe(e,t||1,t6t,n6t,QLt)}const r6t={[ko]:dh,[Yu]:p2.every(3),[da]:p2,[Is]:zx,[Ku]:Xp,[aa]:Xp,[Sh]:Xp,[Ml]:KL,[Ll]:GL,[Cc]:jp,[Vf]:bE},i6t={[ko]:hh,[Yu]:m2.every(3),[da]:m2,[Is]:Vx,[Ku]:h0,[aa]:h0,[Sh]:h0,[Ml]:XL,[Ll]:YL,[Cc]:jp,[Vf]:bE};function vS(e){return r6t[e]}function bS(e){return i6t[e]}function KDe(e,t,n){return e?e.offset(t,n):void 0}function XDe(e,t,n){return KDe(vS(e),t,n)}function QDe(e,t,n){return KDe(bS(e),t,n)}function JDe(e,t,n,r){return e?e.range(t,n,r):void 0}function ZDe(e,t,n,r){return JDe(vS(e),t,n,r)}function eOe(e,t,n,r){return JDe(bS(e),t,n,r)}const mA=1e3,gA=mA*60,yA=gA*60,AF=yA*24,s6t=AF*7,vhe=AF*30,SV=AF*365,tOe=[ko,da,Ku,Ml,Ll,Cc,Vf],vA=tOe.slice(0,-1),bA=vA.slice(0,-1),_A=bA.slice(0,-1),o6t=_A.slice(0,-1),a6t=[ko,Is],bhe=[ko,da],nOe=[ko],_T=[[vA,1,mA],[vA,5,5*mA],[vA,15,15*mA],[vA,30,30*mA],[bA,1,gA],[bA,5,5*gA],[bA,15,15*gA],[bA,30,30*gA],[_A,1,yA],[_A,3,3*yA],[_A,6,6*yA],[_A,12,12*yA],[o6t,1,AF],[a6t,1,s6t],[bhe,1,vhe],[bhe,3,3*vhe],[nOe,1,SV]];function rOe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Nk(t))/n;let i=Lx(a=>a[2]).right(_T,r),s,o;return i===_T.length?(s=nOe,o=$0(t[0]/SV,t[1]/SV,n)):i?(i=_T[r/_T[i-1][2]<_T[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=tOe,o=Math.max($0(t[0],t[1],n),1)),{units:s,step:o}}function wA(e){const t={};return n=>t[n]||(t[n]=e(n))}function u6t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=l6t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function l6t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function iOe(e){const t=wA(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Ov(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return u6t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Ov(o??",f");const a=$0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=kxe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Rxe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=Ixe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let TV;sOe();function sOe(){return TV=iOe({format:jx,formatPrefix:RY})}function oOe(e){return iOe(Cxe(e))}function A$(e){return arguments.length?TV=oOe(e):TV}function _he(e,t,n){n=n||{},mt(n)||Me(`Invalid time multi-format specifier: ${n}`);const r=t(Cc),i=t(Ll),s=t(Ml),o=t(Ku),a=t(Is),u=t(da),l=t(Yu),c=t(ko),f=e(n[Vf]||".%L"),d=e(n[Cc]||":%S"),h=e(n[Ll]||"%I:%M"),p=e(n[Ml]||"%I %p"),m=e(n[Ku]||n[aa]||"%a %d"),g=e(n[Is]||"%b %d"),y=e(n[da]||"%B"),v=e(n[Yu]||"%B"),b=e(n[ko]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function aOe(e){const t=wA(e.format),n=wA(e.utcFormat);return{timeFormat:r=>pt(r)?t(r):_he(t,vS,r),utcFormat:r=>pt(r)?n(r):_he(n,bS,r),timeParse:wA(e.parse),utcParse:wA(e.utcParse)}}let AV;uOe();function uOe(){return AV=aOe({format:VY,parse:VSe,utcFormat:QL,utcParse:HSe})}function lOe(e){return aOe(FSe(e))}function K2(e){return arguments.length?AV=lOe(e):AV}const CV=(e,t)=>gn({},e,t);function cOe(e,t){const n=e?oOe(e):A$(),r=t?lOe(t):K2();return CV(n,r)}function iZ(e,t){const n=arguments.length;return n&&n!==2&&Me("defaultLocale expects either zero or two arguments."),n?CV(A$(e),K2(t)):CV(A$(),K2())}function c6t(){return sOe(),uOe(),iZ()}const f6t=/^(data:|([A-Za-z]+:)?\/\/)/,d6t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,h6t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,whe="file://";function p6t(e,t){return n=>({options:n||{},sanitize:g6t,load:m6t,fileAccess:!!t,file:y6t(t),http:b6t(e)})}async function m6t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function g6t(e,t){t=gn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=d6t.test(e.replace(h6t,""));(e==null||typeof e!="string"||!a)&&Me("Sanitize failure, invalid URI: "+nt(e));const u=f6t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(whe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(whe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function y6t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):v6t}async function v6t(){Me("No file system access.")}function b6t(e){return e?async function(t,n){const r=gn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?vn(s[i])?s[i]():s.text():Me(s.status+""+s.statusText)}:_6t}async function _6t(){Me("No HTTP fetch method available.")}const w6t=e=>e!=null&&e===e,E6t=e=>e==="true"||e==="false"||e===!0||e===!1,x6t=e=>!Number.isNaN(Date.parse(e)),fOe=e=>!Number.isNaN(+e)&&!(e instanceof Date),S6t=e=>fOe(e)&&Number.isInteger(+e),IV={boolean:JJ,integer:ua,number:ua,date:ZJ,string:eZ,unknown:va},VN=[E6t,S6t,fOe,x6t],T6t=["boolean","integer","number","date"];function dOe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=VN.length,i=VN.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&w6t(u)&&!VN[a](u)&&(i[a]=0,++o,o===VN.length))return"string";return T6t[i.reduce((s,o)=>s===0?o:s,0)-1]}function hOe(e,t){return t.reduce((n,r)=>(n[r]=dOe(e,r),n),{})}function Ehe(e){const t=function(n,r){const i={delimiter:e};return sZ(n,r?gn(r,i):i)};return t.responseType="text",t}function sZ(e,t){return t.header&&(e=t.header.map(nt).join(t.delimiter)+`
`+e),Sxe(t.delimiter).parse(e+"")}sZ.responseType="text";function A6t(e){return typeof Buffer=="function"&&vn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function oZ(e,t){const n=t&&t.property?Tc(t.property):va;return mt(e)&&!A6t(e)?C6t(n(e),t):n(JSON.parse(e))}oZ.responseType="json";function C6t(e,t){return!Fe(e)&&NDe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const I6t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function pOe(e,t){let n,r,i,s;return e=oZ(e,t),t&&t.feature?(n=HLt,i=t.feature):t&&t.mesh?(n=WLt,i=t.mesh,s=I6t[t.filter]):Me("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Me("Invalid TopoJSON object: "+i),r&&r.features||[r]}pOe.responseType="json";const dD={dsv:sZ,csv:Ehe(","),tsv:Ehe("	"),json:oZ,topojson:pOe};function aZ(e,t){return arguments.length>1?(dD[e]=t,this):Ft(dD,e)?dD[e]:null}function mOe(e){const t=aZ(e);return t&&t.responseType||"text"}function gOe(e,t,n,r){t=t||{};const i=aZ(t.type||"json");return i||Me("Unknown data format type: "+t.type),e=i(e,t),t.parse&&k6t(e,t.parse,n,r),Ft(e,"columns")&&delete e.columns,e}function k6t(e,t,n,r){if(!e.length)return;const i=K2();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=hOe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!IV[p])throw Error("Illegal format pattern: "+h+":"+p);return IV[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const CF=p6t(typeof fetch<"u"&&fetch,null);function IF(e){const t=e||va,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function hD(e,t){try{await t(e)}catch(n){e.error(n)}}const yOe=Symbol("vega_id");let R6t=1;function kF(e){return!!(e&&Mt(e))}function Mt(e){return e[yOe]}function vOe(e,t){return e[yOe]=t,e}function _r(e){const t=e===Object(e)?e:{data:e};return Mt(t)?t:vOe(t,R6t++)}function uZ(e){return RF(e,_r({}))}function RF(e,t){for(const n in e)t[n]=e[n];return t}function bOe(e,t){return vOe(t,Mt(e))}function Db(e,t){return e?t?(n,r)=>e(n,r)||Mt(t(n))-Mt(t(r)):(n,r)=>e(n,r)||Mt(n)-Mt(r):null}function _Oe(e){return e&&e.constructor===Ob}function Ob(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Ob,insert(a){const u=ht(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=vn(a)?r:t,l=ht(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:ba(l)};return vn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return vn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Mt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Mt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Mt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Mt(m),l[g]?l[g]=1:a.add.push(_r(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Mt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Mt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Mt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Mt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Mt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const pD="_:mod:_";function NF(){Object.defineProperty(this,pD,{writable:!0,value:{}})}NF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[pD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Fe(n)?1+n.length:-1),i},modified(e,t){const n=this[pD];if(arguments.length){if(Fe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[pD]={},this}};let N6t=0;const P6t="pulse",D6t=new NF,O6t=1,$6t=2;function Wr(e,t,n,r){this.id=++N6t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function xhe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Wr.prototype={targets(){return this._targets||(this._targets=IF(Rk))},set(e){return this.value!==e?(this.value=e,1):0},skip:xhe(O6t),modified:xhe($6t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new NF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Wr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===P6t)ht(a).forEach(f=>{f instanceof Wr?f!==this&&(f.targets().add(this),s.push(f)):Me("Pulse parameters must be operator instances.")}),this.source=a;else if(Fe(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||D6t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function M6t(e,t,n,r){let i=1,s;return e instanceof Wr?s=e:e&&e.prototype instanceof Wr?s=new e:vn(e)?s=new Wr(null,e):(i=0,s=new Wr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function L6t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let F6t=0;function PF(e,t,n){this.id=++F6t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function _g(e,t,n){return new PF(e,t,n)}PF.prototype={_filter:Ac,_apply:va,targets(){return this._targets||(this._targets=IF(Rk))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=_g(e);return this.targets().add(t),t},apply(e){const t=_g(null,e);return this.targets().add(t),t},merge(){const e=_g();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=_g();return this.targets().add(_g(null,null,XJ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(_g(null,null,()=>n=!0)),t.targets().add(_g(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ac,this._targets=null}};function j6t(e,t,n,r){const i=this,s=_g(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ht(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function B6t(e,t){const n=this.locale();return gOe(e,t,n.timeParse,n.utcParse)}function U6t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function z6t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:mOe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function V6t(e,t,n){const r=this,i=r._pending||H6t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Ac).insert(s.data||[])),i.done(),s}function H6t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const q6t={skip:!0};function W6t(e,t,n,r,i){return(e instanceof Wr?Y6t:G6t)(this,e,t,n,r,i),this}function G6t(e,t,n,r,i,s){const o=gn({},s,q6t);let a,u;vn(n)||(n=ba(n)),r===void 0?a=l=>e.touch(n(l)):vn(r)?(u=new Wr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;_Oe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function Y6t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Wr(null,K6t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function K6t(e,t){return t=vn(t)?t:ba(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function X6t(e){e.rank=++this._rank}function Q6t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Me("Cycle detected in dataflow graph.")}const C$={},Sd=1,Ig=2,yp=4,J6t=Sd|Ig,She=Sd|yp,p_=Sd|Ig|yp,The=8,wT=16,Ahe=32,Che=64;function x0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function a9(e,t){const n=[];return Cg(e,t,r=>n.push(r)),n}function Ihe(e,t){const n={};return e.visit(t,r=>{n[Mt(r)]=1}),r=>n[Mt(r)]?null:r}function HN(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}x0.prototype={StopPropagation:C$,ADD:Sd,REM:Ig,MOD:yp,ADD_REM:J6t,ADD_MOD:She,ALL:p_,REFLOW:The,SOURCE:wT,NO_SOURCE:Ahe,NO_FIELDS:Che,fork(e){return new x0(this.dataflow).init(this,e)},clone(){const e=this.fork(p_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(p_|wT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new x0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Che)&&(n.fields=e.fields),t&Sd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Ig?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&yp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Ahe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||p_;return t&Sd&&this.add.length||t&Ig&&this.rem.length||t&yp&&this.mod.length},reflow(e){if(e)return this.fork(p_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(yp,Ihe(this,Sd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Fe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Fe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Sd&&(n.addF=HN(n.addF,t)),e&Ig&&(n.remF=HN(n.remF,t)),e&yp&&(n.modF=HN(n.modF,t)),e&wT&&(n.srcF=HN(n.srcF,t)),n},materialize(e){e=e||p_;const t=this;return e&Sd&&t.addF&&(t.add=a9(t.add,t.addF),t.addF=null),e&Ig&&t.remF&&(t.rem=a9(t.rem,t.remF),t.remF=null),e&yp&&t.modF&&(t.mod=a9(t.mod,t.modF),t.modF=null),e&wT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&wT)return Cg(n.source,n.srcF,r),n;e&Sd&&Cg(n.add,n.addF,r),e&Ig&&Cg(n.rem,n.remF,r),e&yp&&Cg(n.mod,n.modF,r);const i=n.source;if(e&The&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Cg(i,Ihe(n,She),r):Cg(i,n.srcF,r))}return n}};function lZ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(lZ,x0,{fork(e){const t=new x0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Fe(e)?e.some(r=>n[r]):n[e]:0},filter(){Me("MultiPulse does not support filtering.")},materialize(){Me("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Z6t(e,t,n){const r=this,i=[];if(r._pulse)return wOe(r);if(r._pending&&await r._pending,t&&await hD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new x0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=IF(Rk);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=C$),u!==C$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await hD(r,c[f].callback)}return n&&await hD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function eFt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function tFt(e,t,n){return this._pulse?wOe(this):(this.evaluate(e,t,n),this)}function nFt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function wOe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function rFt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function iFt(e,t){const n=e.source,r=this._clock;return n&&Fe(n)?new lZ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||sFt(this._pulse,n&&n.pulse)}function sFt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==C$&&(e.source=t.source),e)}const cZ={skip:!1,force:!1};function oFt(e,t){const n=t||cZ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function aFt(e,t,n){const r=n||cZ;return(e.set(t)||r.force)&&this.touch(e,r),this}function uFt(e,t,n){this.touch(e,n||cZ);const r=new x0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function lFt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),EOe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,cFt(t,0,e)):r=n,r}}}function EOe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function cFt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,EOe(e,r,t,n)}function zw(){this.logger(qJ()),this.logLevel(VJ),this._clock=0,this._rank=0,this._locale=iZ();try{this._loader=CF()}catch{}this._touched=IF(Rk),this._input={},this._pulse=null,this._heap=lFt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function ET(e){return function(){return this._log[e].apply(this,arguments)}}zw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:ET("error"),warn:ET("warn"),info:ET("info"),debug:ET("debug"),logLevel:ET("level"),cleanThreshold:1e4,add:M6t,connect:L6t,rank:X6t,rerank:Q6t,pulse:uFt,touch:oFt,update:aFt,changeset:Ob,ingest:U6t,parse:B6t,preload:V6t,request:z6t,events:j6t,on:W6t,evaluate:Z6t,run:tFt,runAsync:eFt,runAfter:nFt,_enqueue:rFt,_getPulse:iFt};function Pe(e,t){Wr.call(this,e,null,t)}lt(Pe,Wr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const qE={};function xOe(e){const t=SOe(e);return t&&t.Definition||null}function SOe(e){return e=e&&e.toLowerCase(),Ft(qE,e)?qE[e]:null}function*TOe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function fZ(e,t,n){const r=Float64Array.from(TOe(e,n));return r.sort(Yp),t.map(i=>CEe(r,i))}function dZ(e,t){return fZ(e,[.25,.5,.75],t)}function hZ(e,t){const n=e.length,r=lst(e,t),i=dZ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function AOe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Ic=Math.random;function fFt(e){Ic=e}function COe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(TOe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Ic()*s)];c[l]=a/s}return c.sort(Yp),[XU(c,n/2),XU(c,1-n/2)]}function IOe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?dFt(s,t+t/4):s}function dFt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function hFt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function pFt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Ic())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const kOe=Math.sqrt(2*Math.PI),mFt=Math.SQRT2;let xT=NaN;function DF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(xT===xT)n=xT,xT=NaN;else{do n=Ic()*2-1,r=Ic()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,xT=r*s}return e+n*t}function pZ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*kOe)}function OF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function $F(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*mFt*gFt(2*e-1)}function gFt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function mZ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>DF(n,r),pdf:s=>pZ(s,n,r),cdf:s=>OF(s,n,r),icdf:s=>$F(s,n,r)};return i.mean(e).stdev(t)}function gZ(e,t){const n=mZ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=hZ(e)),i):t},sample(){return e[~~(Ic()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function yZ(e,t){return e=e||0,t=t??1,Math.exp(e+DF()*t)}function vZ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*kOe*e)}function bZ(e,t,n){return OF(Math.log(e),t,n)}function _Z(e,t,n){return Math.exp($F(e,t,n))}function ROe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>yZ(n,r),pdf:s=>vZ(s,n,r),cdf:s=>bZ(s,n,r),icdf:s=>_Z(s,n,r)};return i.mean(e).stdev(t)}function NOe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Ic();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function wZ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ic()}function EZ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function xZ(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function SZ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function POe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>wZ(n,r),pdf:s=>EZ(s,n,r),cdf:s=>xZ(s,n,r),icdf:s=>SZ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function TZ(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Pk(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function MF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function Dk(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function _S(e,t,n,r,i){let s=0,o=0;return Dk(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function AZ(e,t,n){let r=0,i=0,s=0,o=0,a=0;Dk(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Pk(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:_S(e,t,n,i,l)}}function DOe(e,t,n){let r=0,i=0,s=0,o=0,a=0;Dk(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Pk(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:_S(e,t,n,i,l)}}function OOe(e,t,n){const[r,i,s,o]=MF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;Dk(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=Pk(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:_S(e,t,n,o,y)}}function $Oe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;Dk(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=Pk(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:_S(e,t,n,a,c)}}function CZ(e,t,n){const[r,i,s,o]=MF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,S=T=>(T=T-s,b*T*T+w*T+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:S,rSquared:_S(e,t,n,o,S)}}function MOe(e,t,n,r){if(r===0)return TZ(e,t,n);if(r===1)return AZ(e,t,n);if(r===2)return CZ(e,t,n);const[i,s,o,a]=MF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=vFt(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:yFt(f,y,-o,a),predict:v,rSquared:_S(e,t,n,a,v)}}function yFt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function vFt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const khe=2,Rhe=1e-12;function LOe(e,t,n,r){const[i,s,o,a]=MF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=khe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,S=0,T=0,A=0,C=0;const I=1/Math.abs(i[w]-y||1);for(let P=v;P<=b;++P){const O=i[P],F=s[P],L=bFt(Math.abs(y-O)*I)*d[P],B=O*L;E+=L,S+=B,T+=F*L,A+=F*B,C+=O*B}const[R,M]=Pk(S/E,T/E,A/E,C/E);c[g]=R+M*y,f[g]=Math.abs(s[g]-c[g]),_Ft(i,g+1,p)}if(h===khe)break;const m=IEe(f);if(Math.abs(m)<Rhe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Rhe:(v=1-y*y)*v}return wFt(i,c,o,a)}function bFt(e){return(e=1-e*e*e)*e*e}function _Ft(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function wFt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const EFt=.5*Math.PI/180;function LF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=xFt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&SFt(f,m,d,h,p)>EFt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function xFt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function SFt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function TFt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function kV(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:TFt(e)}function FOe(e,t,n){return n||e+(t?"_"+t:"")}const u9=()=>{},AFt={init:u9,add:u9,rem:u9,idx:0},X2={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Ok=Object.keys(X2).filter(e=>e!=="__count__");function CFt(e,t){return(n,r)=>gn({name:e,aggregate_param:r,out:n||e},AFt,t)}[...Ok,"__count__"].forEach(e=>{X2[e]=CFt(e,X2[e])});function jOe(e,t,n){return X2[e](n,t)}function BOe(e,t){return e.idx-t.idx}function IFt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=X2[i]())})};return e.forEach(n),Object.values(t).sort(BOe)}function kFt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function RFt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function NFt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function PFt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function UOe(e,t){const n=t||va,r=IFt(e),i=e.slice().sort(BOe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=kFt,s.prototype.add=RFt,s.prototype.rem=NFt,s.prototype.set=PFt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function IZ(e){this._key=e?Tc(e):Mt,this.reset()}const Mo=IZ.prototype;Mo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Mo.add=function(e){this._add.push(e)};Mo.rem=function(e){this._rem.push(e)};Mo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Mo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ft(n,s)||(n[s]=1,++i);return i};Mo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=kDe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Mo.argmin=function(e){return this.extent(e)[0]||{}};Mo.argmax=function(e){return this.extent(e)[1]||{}};Mo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Mo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Mo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=dZ(this.values(),e),this._get=e),this._q};Mo.q1=function(e){return this.quartile(e)[0]};Mo.q2=function(e){return this.quartile(e)[1]};Mo.q3=function(e){return this.quartile(e)[2]};Mo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=COe(this.values(),1e3,.05,e),this._get=e),this._ci};Mo.ci0=function(e){return this.ci(e)[0]};Mo.ci1=function(e){return this.ci(e)[1]};function ty(e){Pe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ty.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ok},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(ty,Pe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=ht(fa(v)),w=b.length;let E=0,S;for(;E<w;++E)r[S=b[E]]||(r[S]=1,t.push(S))}this._dims=ht(e.groupby),this._dnames=this._dims.map(v=>{const b=Gi(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:kV(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Me("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Me("Null aggregate field specified."),m=Gi(f),g=FOe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(jOe(d,h,g))}return this._measures=this._measures.map(v=>UOe(v,v.field)),Object.create(null)},cellkey:kV(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new IZ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?bOe(t.tuple,s):_r(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const DFt=1e-14;function kZ(e){Pe.call(this,null,e)}kZ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(kZ,Pe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(fa(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=AOe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ua(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(DFt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=tl(u,fa(t),e.name||"bin_"+Gi(t))}});function zOe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?$De(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function RZ(e){Pe.call(this,[],e)}RZ.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(RZ,Pe,{transform(e,t){const n=t.fork(t.ALL),r=zOe(Mt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Db(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function VOe(e){Wr.call(this,null,OFt,e)}lt(VOe,Wr);function OFt(e){return this.value&&!e.modified()?this.value:KJ(e.fields,e.orders)}function NZ(e){Pe.call(this,null,e)}NZ.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function $Ft(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(NZ,Pe,{transform(e,t){const n=f=>d=>{for(var h=$Ft(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=_r({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function PZ(e){Pe.call(this,null,e)}PZ.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(PZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=MFt(a,i,s,e.filter||Ac)):n.mod=a,n.source=this.value,n.modifies(r)}});function MFt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(_r(s)),s={},s[t]=l);return i}const Nhe={kde:gZ,mixture:NOe,normal:mZ,lognormal:ROe,uniform:POe},LFt="distributions",Phe="function",FFt="field";function HOe(e,t){const n=e[Phe];Ft(Nhe,n)||Me("Unknown distribution function: "+n);const r=Nhe[n]();for(const i in e)i===FFt?r.data((e.from||t()).map(e[i])):i===LFt?r[i](e[i].map(s=>HOe(s,t))):typeof r[i]===Phe&&r[i](e[i]);return r}function DZ(e){Pe.call(this,null,e)}const qOe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],jFt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:qOe},{name:"weights",type:"number",array:!0}]};DZ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:qOe.concat(jFt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(DZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=HOe(e.distribution,BFt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Me("Invalid density method: "+o),!e.extent&&!r.data&&Me("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||xh(r.data()),l=LF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],_r(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function BFt(e){return()=>e.materialize(e.SOURCE).source}function WOe(e,t){return e?e.map((n,r)=>t[r]||Gi(n)):null}function OZ(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const GOe="bin";function $Z(e){Pe.call(this,null,e)}$Z.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:GOe}]};const UFt=(e,t)=>Nk(xh(e,t))/30;lt($Z,Pe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=OZ(t.source,e.groupby,va),i=e.smooth||!1,s=e.field,o=e.step||UFt(n,s),a=Db((p,m)=>s(p)-s(m)),u=e.as||GOe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of IOe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function YOe(e){Wr.call(this,null,zFt,e),this.modified(!0)}lt(YOe,Wr);function zFt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:tl(n=>t(n,e),fa(t),Gi(t))}function MZ(e){Pe.call(this,[void 0,void 0],e)}MZ.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(MZ,Pe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ua(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Gi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function LZ(e,t){Wr.call(this,e),this.parent=t,this.count=0}lt(LZ,Wr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function FF(e){Pe.call(this,{},e),this._keys=yS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(FF,Pe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ft(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new LZ(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Mt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Mt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Mt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Mt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Mt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function KOe(e){Wr.call(this,null,VFt,e)}lt(KOe,Wr);function VFt(e){return this.value&&!e.modified()?this.value:Fe(e.name)?ht(e.name).map(t=>Tc(t)):Tc(e.name,e.as)}function FZ(e){Pe.call(this,yS(),e)}FZ.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(FZ,Pe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Mt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Mt(f),1)});function c(f){const d=Mt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function jZ(e){Pe.call(this,[],e)}jZ.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(jZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=WOe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=uZ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function BZ(e){Pe.call(this,[],e)}BZ.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(BZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Gi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=uZ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function UZ(e){Pe.call(this,null,e)}UZ.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(UZ,Pe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function XOe(e){Pe.call(this,[],e)}lt(XOe,Pe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=_r(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const qN={value:"value",median:IEe,mean:mst,min:KU,max:d0},HFt=[];function zZ(e){Pe.call(this,[],e)}zZ.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function qFt(e){var t=e.method||qN.value,n;if(qN[t]==null)Me("Unrecognized imputation method: "+t);else return t===qN.value?(n=e.value!==void 0?e.value:0,()=>n):qN[t]}function WFt(e){const t=e.field;return n=>n?t(n):NaN}lt(zZ,Pe,{transform(e,t){var n=t.fork(t.ALL),r=qFt(e),i=WFt(e),s=Gi(e.field),o=Gi(e.key),a=(e.groupby||[]).map(Gi),u=GFt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(_r(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function GFt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):HFt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function VZ(e){ty.call(this,e)}VZ.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Ok},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(VZ,ty,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{gn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function HZ(e){Pe.call(this,null,e)}HZ.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(HZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=OZ(r,e.groupby,e.field),s=(e.groupby||[]).map(Gi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Me("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=xh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=gZ(h,o)[a],m=e.counts?h.length:1,g=c||xh(h);LF(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(_r(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function QOe(e){Wr.call(this,null,YFt,e)}lt(QOe,Wr);function YFt(e){return this.value&&!e.modified()?this.value:QJ(e.fields,e.flat)}function JOe(e){Pe.call(this,[],e),this._pending=null}lt(JOe,Pe,{transform(e,t){const n=t.dataflow;return this._pending?l9(this,t,this._pending):KFt(e)?t.StopPropagation:e.values?l9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ht(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>l9(this,t,ht(r.data)))}});function KFt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function l9(e,t,n){n.forEach(_r);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function qZ(e){Pe.call(this,{},e)}qZ.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(qZ,Pe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Me('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Me('The "as" parameter has too few output field names.'),c=c||i.map(Gi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Me("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function ZOe(e){Wr.call(this,null,XFt,e)}lt(ZOe,Wr);function XFt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function e3e(e){Wr.call(this,null,QFt,e)}lt(e3e,Wr);function QFt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function t3e(e){Pe.call(this,null,e)}lt(t3e,Pe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function WZ(e){ty.call(this,e)}WZ.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Ok,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(WZ,ty,{_transform:ty.prototype.transform,transform(e,t){return this._transform(JFt(e,t),t)}});function JFt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=fa(n).concat(fa(r)),o=e4t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>ZFt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function ZFt(e,t,n,r){return tl(i=>t(i)===e?n(i):NaN,r,e+"")}function e4t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(TF),t?i.slice(0,t):i}function n3e(e){FF.call(this,e)}lt(n3e,FF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Mt(s),n,t,s);return(e.modified("field")||r&&t.modified(fa(r)))&&Me("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(_r(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function GZ(e){Pe.call(this,null,e)}GZ.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(GZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=WOe(e.fields,e.as||[]),s=r?(a,u)=>t4t(a,u,r,i):RF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Mt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,_r({}));o[Mt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Mt(a)]))}),n}});function t4t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function r3e(e){Pe.call(this,null,e)}lt(r3e,Pe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function YZ(e){Pe.call(this,null,e)}YZ.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const n4t=1e-14;lt(YZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=OZ(i,e.groupby,e.field),o=(e.groupby||[]).map(Gi),a=[],u=e.step||.01,l=e.probs||Iu(u/2,1-n4t,u),c=l.length;return s.forEach(f=>{const d=fZ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(_r(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function i3e(e){Pe.call(this,null,e)}lt(i3e,Pe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Mt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=uZ(i);r[Mt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Mt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function KZ(e){Pe.call(this,[],e),this.count=0}KZ.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(KZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Mt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Ic()),d<o.length&&d>=u&&(f=o[d],s[Mt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Mt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Mt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Mt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Mt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Mt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Mt(c)])),this.count=a,this.value=n.source=o,n}});function XZ(e){Pe.call(this,null,e)}XZ.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(XZ,Pe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Iu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,_r(s)}),n.add=t.add.concat(this.value),n}});function s3e(e){Pe.call(this,null,e),this.modified(!0)}lt(s3e,Pe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function QZ(e){Pe.call(this,null,e)}const o3e=["unit0","unit1"];QZ.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:tZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:o3e}]};lt(QZ,Pe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?bS:vS)(s.unit).offset,a=e.as||o3e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(fa(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:rOe({extent:e.extent||xh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=nZ(r),o=this.value||{},a=(n?YDe:GDe)(s,i);return a.unit=Xn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function a3e(e){Pe.call(this,yS(),e)}lt(a3e,Pe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function u3e(e){Pe.call(this,null,e)}lt(u3e,Pe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Db(e.sort)):t.source).map(e.field))}});function r4t(e,t,n,r){const i=Q2[e](t,n);return{init:i.init||Bg,update:function(s,o){o[r]=i.next(s)}}}const Q2={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Q2.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Me("ntile num must be greater than zero.");const n=Q2.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Me("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=i4t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function i4t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const s4t=Object.keys(Q2);function l3e(e){const t=ht(e.ops),n=ht(e.fields),r=ht(e.params),i=ht(e.aggregate_params),s=ht(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){ht(fa(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Gi(g),w=FOe(p,b,s[m]);if(h(g),o.push(w),Ft(Q2,p))a.push(r4t(p,g,y,w));else{if(g==null&&p!=="count"&&Me("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(jOe(p,v,w))}}),(c.length||f.length)&&(this.cell=o4t(f,c,d)),this.inputs=Object.keys(u)}const c3e=l3e.prototype;c3e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};c3e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function o4t(e,t,n){e=e.map(u=>UOe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new IZ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function JZ(e){Pe.call(this,{},e),this._mlen=0,this._mods=[]}JZ.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:s4t.concat(Ok)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(JZ,Pe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Db(e.sort),i=kV(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new l3e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)a4t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=zOe(Mt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function a4t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?Lx(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||ba(-1)};t.init();for(let f=0;f<u;++f)u4t(c,o,f,u),s&&l4t(c,l),t.update(c,a[f])}function u4t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function l4t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const c4t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ty,bin:kZ,collect:RZ,compare:VOe,countpattern:NZ,cross:PZ,density:DZ,dotbin:$Z,expression:YOe,extent:MZ,facet:FF,field:KOe,filter:FZ,flatten:jZ,fold:BZ,formula:UZ,generate:XOe,impute:zZ,joinaggregate:VZ,kde:HZ,key:QOe,load:JOe,lookup:qZ,multiextent:ZOe,multivalues:e3e,params:t3e,pivot:WZ,prefacet:n3e,project:GZ,proxy:r3e,quantile:YZ,relay:i3e,sample:KZ,sequence:XZ,sieve:s3e,subflow:LZ,timeunit:QZ,tupleindex:a3e,values:u3e,window:JZ},Symbol.toStringTag,{value:"Module"}));function S0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const f4t=()=>typeof Image<"u"?Image:null;function ZZ(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const d4t="identity",WE="linear",Pm="log",$k="pow",Mk="sqrt",jF="symlog",Xv="time",Qv="utc",ah="sequential",wS="diverging",GE="quantile",BF="quantize",UF="threshold",eee="ordinal",RV="point",f3e="band",tee="bin-ordinal",js="continuous",Lk="discrete",Fk="discretizing",Bc="interpolating",nee="temporal";function h4t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function p4t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function ree(){const e=Ux().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=ZZ(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Iu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,O0(h,m)-1),v=m===g?y:O0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return ree().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function d3e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return d3e(t())},e}function m4t(){return d3e(ree().paddingInner(1))}var g4t=Array.prototype.map;function y4t(e){return g4t.call(e,ua)}const v4t=Array.prototype.slice;function h3e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(O0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=y4t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=v4t.call(r),n):t.slice()},n.tickFormat=function(r,i){return ISe(e[0],Xn(e),r??10,i)},n.copy=function(){return h3e().domain(n.domain()).range(n.range())},n}const I$=new Map,p3e=Symbol("vega_scale");function m3e(e){return e[p3e]=!0,e}function b4t(e){return e&&e[p3e]===!0}function _4t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?h4t(s):s.invertExtent?p4t(s):void 0),s.type=e,m3e(s)};return r.metadata=zf(ht(n)),r}function mr(e,t,n){return arguments.length>1?(I$.set(e,_4t(e,t,n)),this):g3e(e)?I$.get(e):void 0}mr(d4t,kSe);mr(WE,bm,js);mr(Pm,NSe,[js,Pm]);mr($k,UY,js);mr(Mk,Gdt,js);mr(jF,PSe,js);mr(Xv,qSe,[js,nee]);mr(Qv,upt,[js,nee]);mr(ah,qY,[js,Bc]);mr(`${ah}-${WE}`,qY,[js,Bc]);mr(`${ah}-${Pm}`,WSe,[js,Bc,Pm]);mr(`${ah}-${$k}`,WY,[js,Bc]);mr(`${ah}-${Mk}`,lpt,[js,Bc]);mr(`${ah}-${jF}`,GSe,[js,Bc]);mr(`${wS}-${WE}`,YSe,[js,Bc]);mr(`${wS}-${Pm}`,KSe,[js,Bc,Pm]);mr(`${wS}-${$k}`,GY,[js,Bc]);mr(`${wS}-${Mk}`,cpt,[js,Bc]);mr(`${wS}-${jF}`,XSe,[js,Bc]);mr(GE,DSe,[Fk,GE]);mr(BF,OSe,Fk);mr(UF,$Se,Fk);mr(tee,h3e,[Lk,Fk]);mr(eee,Ux,Lk);mr(f3e,ree,Lk);mr(RV,m4t,Lk);function g3e(e){return I$.has(e)}function $b(e,t){const n=I$.get(e);return n&&n.metadata[t]}function iee(e){return $b(e,js)}function YE(e){return $b(e,Lk)}function NV(e){return $b(e,Fk)}function y3e(e){return $b(e,Pm)}function w4t(e){return $b(e,nee)}function v3e(e){return $b(e,Bc)}function b3e(e){return $b(e,GE)}const E4t=["clamp","base","constant","exponent"];function _3e(e,t){const n=t[0],r=Xn(t)-n;return function(i){return e(n+i*r)}}function zF(e,t,n){return _Y(see(t||"rgb",n),e)}function w3e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function E3e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?ba(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=mr(s)().domain([t,n]).range([0,1]),E4t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function see(e,t){const n=Bat[x4t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function x4t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const S4t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},T4t={accent:dpt,category10:fpt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:hpt,observable10:ppt,paired:mpt,pastel1:gpt,pastel2:ypt,set1:vpt,set2:bpt,set3:_pt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function x3e(e){if(Fe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function S3e(e,t){for(const n in e)oee(n,t(e[n]))}const Dhe={};S3e(T4t,x3e);S3e(S4t,e=>zF(x3e(e)));function oee(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Dhe[e]=t,this):Dhe[e]}const mD="symbol",A4t="discrete",C4t="gradient",I4t=e=>Fe(e)?e.map(t=>String(t)):String(e),k4t=(e,t)=>e[1]-t[1],R4t=(e,t)=>t[1]-e[1];function aee(e,t,n){let r;return ur(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Nk(e.domain())/n||1)+1))),mt(t)&&(r=t.step,t=t.interval),pt(t)&&(t=e.type===Xv?vS(t):e.type==Qv?bS(t):Me("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function T3e(e,t,n){let r=e.range(),i=r[0],s=Xn(r),o=k4t;if(i>s&&(r=s,s=i,i=r,o=R4t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Xn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function uee(e,t){return e.bins?T3e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function A3e(e,t,n,r,i,s){const o=t.type;let a=I4t;if(o===Xv||i===Xv)a=e.timeFormat(r);else if(o===Qv||i===Qv)a=e.utcFormat(r);else if(y3e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=C3e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function C3e(e,t,n){const r=uee(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const PV={[GE]:"quantiles",[BF]:"thresholds",[UF]:"domain"},I3e={[GE]:"quantiles",[BF]:"domain"};function k3e(e,t){return e.bins?D4t(e.bins):e.type===Pm?C3e(e,t,!0):PV[e.type]?P4t(e[PV[e.type]]()):uee(e,t)}function N4t(e,t,n){const r=t[I3e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function P4t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function D4t(e){const t=e.slice(0,-1);return t.max=Xn(e),t}const O4t=e=>PV[e.type]||e.bins;function R3e(e,t,n,r,i,s,o){const a=I3e[t.type]&&s!==Xv&&s!==Qv?N4t(e,t,i):A3e(e,t,n,i,s,o);return r===mD&&O4t(t)?$4t(a):r===A4t?M4t(a):L4t(a)}const $4t=e=>(t,n,r)=>{const i=Ohe(r[n+1],Ohe(r.max,1/0)),s=$he(t,e),o=$he(i,e);return s&&o?s+" – "+o:o?"< "+o:"≥ "+s},Ohe=(e,t)=>e??t,M4t=e=>(t,n)=>n?e(t):null,L4t=e=>t=>e(t),$he=(e,t)=>Number.isFinite(e)?t(e):null;function F4t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Xn(t),s=i-r;if(e.type===UF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function j4t(e,t,n,r){const i=r||t.type;return pt(n)&&w4t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Xv?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Qv?e.utcFormat("%A, %d %B %Y, %X UTC"):R3e(e,t,5,null,n,r,!0)}function N3e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=j4t(e,t,n.format,n.formatType);if(NV(t.type)){const s=k3e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(YE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Xn(s))}`}}let P3e=0;function B4t(){P3e=0}const k$="p_";function lee(e){return e&&e.gradient}function D3e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?k$:"";return i||(i=e.id="gradient_"+P3e++,r==="radial"?(e.x1=dd(e.x1,.5),e.y1=dd(e.y1,.5),e.r1=dd(e.r1,0),e.x2=dd(e.x2,.5),e.y2=dd(e.y2,.5),e.r2=dd(e.r2,.5),s=k$):(e.x1=dd(e.x1,0),e.y1=dd(e.y1,0),e.x2=dd(e.x2,1),e.y2=dd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function dd(e,t){return e??t}function O3e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Mhe={basis:{curve:Opt},"basis-closed":{curve:$pt},"basis-open":{curve:Mpt},bundle:{curve:Lpt,tension:"beta",value:.85},cardinal:{curve:Fpt,tension:"tension",value:0},"cardinal-open":{curve:Bpt,tension:"tension",value:0},"cardinal-closed":{curve:jpt,tension:"tension",value:0},"catmull-rom":{curve:Upt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:zpt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Vpt,tension:"alpha",value:.5},linear:{curve:YY},"linear-closed":{curve:Hpt},monotone:{horizontal:Wpt,vertical:qpt},natural:{curve:Gpt},step:{curve:Ypt},"step-after":{curve:Xpt},"step-before":{curve:Kpt}};function cee(e,t,n){var r=Ft(Mhe,e)&&Mhe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const U4t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},z4t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,V4t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,H4t=/^((\s+,?\s*)|(,\s*))/,q4t=/^[01]/;function KE(e){const t=[];return(e.match(z4t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=U4t[s],a=W4t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function W4t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?q4t:V4t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(H4t);u!==null&&(i+=u[0].length)}return r}const ny=Math.PI/180,G4t=1e-14,$1=Math.PI/2,Bd=Math.PI*2,m_=Math.sqrt(3)/2;var c9={},f9={},$3e=[].join;function Y4t(e,t,n,r,i,s,o,a,u){const l=$3e.call(arguments);if(c9[l])return c9[l];const c=o*ny,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,S=g*e+y*t,T=v*e+b*t;let C=1/((S-w)*(S-w)+(T-E)*(T-E))-.25;C<0&&(C=0);let I=Math.sqrt(C);s==i&&(I=-I);const R=.5*(w+S)-I*(T-E),M=.5*(E+T)+I*(S-w),P=Math.atan2(E-M,w-R);let F=Math.atan2(T-M,S-R)-P;F<0&&s===1?F+=Bd:F>0&&s===0&&(F-=Bd);const L=Math.ceil(Math.abs(F/($1+.001))),B=[];for(let U=0;U<L;++U){const H=P+U*F/L,D=P+(U+1)*F/L;B[U]=[R,M,H,D,n,r,f,d]}return c9[l]=B}function K4t(e){const t=$3e.call(e);if(f9[t])return f9[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,S=r+m+w*p,T=n+g,A=r+y,C=T+w*y,I=A-w*g;return f9[t]=[c*E+f*S,d*E+h*S,c*C+f*I,d*C+h*I,c*T+f*A,d*T+h*A]}const Ql=["l",0,0,0,0,0,0,0];function X4t(e,t,n){const r=Ql[0]=e[0];if(r==="a"||r==="A")Ql[1]=t*e[1],Ql[2]=n*e[2],Ql[3]=e[3],Ql[4]=e[4],Ql[5]=e[5],Ql[6]=t*e[6],Ql[7]=n*e[7];else if(r==="h"||r==="H")Ql[1]=t*e[1];else if(r==="v"||r==="V")Ql[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Ql[i]=(i%2==1?t:n)*e[i];return Ql}function J2(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=X4t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Lhe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Lhe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function Lhe(e,t,n,r){const i=Y4t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=K4t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Fhe=.5773502691896257,jhe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Bd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n,i=r-n*Fhe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n,i=r-n*Fhe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function M3e(e){return Ft(jhe,e)?jhe[e]:Q4t(e)}var d9={};function Q4t(e){if(!Ft(d9,e)){const t=KE(e);d9[e]={draw:function(n,r){J2(n,t,0,0,Math.sqrt(r)/2)}}}return d9[e]}const mg=.448084975506;function J4t(e){return e.x}function Z4t(e){return e.y}function e5t(e){return e.width}function t5t(e){return e.height}function up(e){return typeof e=="function"?e:()=>+e}function WN(e,t,n){return Math.max(t,Math.min(e,n))}function L3e(){var e=J4t,t=Z4t,n=e5t,r=t5t,i=up(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=WN(+i.call(this,c),0,v),w=WN(+s.call(this,c),0,v),E=WN(+o.call(this,c),0,v),S=WN(+a.call(this,c),0,v);if(u||(u=h=BL()),b<=0&&w<=0&&E<=0&&S<=0)u.rect(p,m,g,y);else{var T=p+g,A=m+y;u.moveTo(p+b,m),u.lineTo(T-w,m),u.bezierCurveTo(T-mg*w,m,T,m+mg*w,T,m+w),u.lineTo(T,A-S),u.bezierCurveTo(T,A-mg*S,T-mg*S,A,T-S,A),u.lineTo(p+E,A),u.bezierCurveTo(p+mg*E,A,p,A-mg*E,p,A-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+mg*b,p+mg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=up(c),l):e},l.y=function(c){return arguments.length?(t=up(c),l):t},l.width=function(c){return arguments.length?(n=up(c),l):n},l.height=function(c){return arguments.length?(r=up(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=up(c),s=f!=null?up(f):i,a=d!=null?up(d):i,o=h!=null?up(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function F3e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Bd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=BL()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function jk(e,t){return e??t}const Bk=e=>e.x||0,Uk=e=>e.y||0,n5t=e=>e.width||0,r5t=e=>e.height||0,i5t=e=>(e.x||0)+(e.width||0),s5t=e=>(e.y||0)+(e.height||0),o5t=e=>e.startAngle||0,a5t=e=>e.endAngle||0,u5t=e=>e.padAngle||0,l5t=e=>e.innerRadius||0,c5t=e=>e.outerRadius||0,f5t=e=>e.cornerRadius||0,d5t=e=>jk(e.cornerRadiusTopLeft,e.cornerRadius)||0,h5t=e=>jk(e.cornerRadiusTopRight,e.cornerRadius)||0,p5t=e=>jk(e.cornerRadiusBottomRight,e.cornerRadius)||0,m5t=e=>jk(e.cornerRadiusBottomLeft,e.cornerRadius)||0,g5t=e=>jk(e.size,64),y5t=e=>e.size||1,VF=e=>e.defined!==!1,v5t=e=>M3e(e.shape||"circle"),b5t=M7().startAngle(o5t).endAngle(a5t).padAngle(u5t).innerRadius(l5t).outerRadius(c5t).cornerRadius(f5t),_5t=nTe().x(Bk).y1(Uk).y0(s5t).defined(VF),w5t=nTe().y(Uk).x1(Bk).x0(i5t).defined(VF),E5t=tTe().x(Bk).y(Uk).defined(VF),x5t=L3e().x(Bk).y(Uk).width(n5t).height(r5t).cornerRadius(d5t,h5t,p5t,m5t),S5t=Dpt().type(v5t).size(g5t),T5t=F3e().x(Bk).y(Uk).defined(VF).size(y5t);function fee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function A5t(e,t){return b5t.context(e)(t)}function C5t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?w5t:_5t).curve(cee(r,n.orient,n.tension)).context(e)(t)}function I5t(e,t){const n=t[0],r=n.interpolate||"linear";return E5t.curve(cee(r,n.orient,n.tension)).context(e)(t)}function ES(e,t,n,r){return x5t.context(e)(t,n,r)}function k5t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function R5t(e,t){return S5t.context(e)(t)}function N5t(e,t){return T5t.context(e)(t)}var j3e=1;function B3e(){j3e=1}function dee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+j3e++),o=i.clipping[s]||(i.clipping[s]={id:s});return vn(r)?o.path=r(null):fee(n)?o.path=ES(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function bs(e){this.clear(),e&&this.union(e)}bs.prototype={clone(){return new bs(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function HF(e){this.mark=e,this.bounds=this.bounds||new bs}function qF(e){HF.call(this,e),this.items=this.items||[]}lt(qF,HF);class U3e{constructor(t){this._pending=0,this._loader=t||CF()}pending(){return this._pending}sanitizeURL(t){const n=this;return Bhe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(ST(n),r)).catch(()=>(ST(n),null))}loadImage(t){const n=this,r=f4t();return Bhe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ft(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>ST(n),o.onerror=()=>ST(n),o.src=s,o}).catch(i=>(ST(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Bhe(e){e._pending+=1}function ST(e){e._pending-=1}function Zm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?P5t(t,r):0))}return e}function P5t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const D5t=Bd-1e-8;let WF,gD,yD,rv,DV,vD,OV,$V;const Yg=(e,t)=>WF.add(e,t),bD=(e,t)=>Yg(gD=e,yD=t),Uhe=e=>Yg(e,WF.y1),zhe=e=>Yg(WF.x1,e),M1=(e,t)=>DV*e+OV*t,L1=(e,t)=>vD*e+$V*t,h9=(e,t)=>Yg(M1(e,t),L1(e,t)),p9=(e,t)=>bD(M1(e,t),L1(e,t));function zk(e,t){return WF=e,t?(rv=t*ny,DV=$V=Math.cos(rv),vD=Math.sin(rv),OV=-vD):(DV=$V=1,rv=vD=OV=0),O5t}const O5t={beginPath(){},closePath(){},moveTo:p9,lineTo:p9,rect(e,t,n,r){rv?(h9(e+n,t),h9(e+n,t+r),h9(e,t+r),p9(e,t)):(Yg(e+n,t+r),bD(e,t))},quadraticCurveTo(e,t,n,r){const i=M1(e,t),s=L1(e,t),o=M1(n,r),a=L1(n,r);Vhe(gD,i,o,Uhe),Vhe(yD,s,a,zhe),bD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=M1(e,t),a=L1(e,t),u=M1(n,r),l=L1(n,r),c=M1(i,s),f=L1(i,s);Hhe(gD,o,u,c,Uhe),Hhe(yD,a,l,f,zhe),bD(c,f)},arc(e,t,n,r,i,s){if(r+=rv,i+=rv,gD=n*Math.cos(i)+e,yD=n*Math.sin(i)+t,Math.abs(i-r)>D5t)Yg(e-n,t-n),Yg(e+n,t+n);else{const o=l=>Yg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Bd,r<0&&(r+=Bd),i=i%Bd,i<0&&(i+=Bd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Bd,a=r-r%$1,u=0;u<4&&a>i;++u,a-=$1)o(a);else for(a=r-r%$1+$1,u=0;u<4&&a<i;++u,a=a+$1)o(a)}}};function Vhe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Hhe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>G4t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(qhe(u,e,t,n,r)),0<l&&l<1&&i(qhe(l,e,t,n,r))}function qhe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var T0=(T0=S0(1,1))?T0.getContext("2d"):null;const MV=new bs;function hee(e){return function(t,n){if(!T0)return!0;e(T0,t),MV.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=MV;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(T0.isPointInPath(u,a))return!0;return!1}}function pee(e,t){return t.contains(e.x||0,e.y||0)}function z3e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(MV.set(n,r,n+i,r+s))}function V3e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return ow(t,n,r,i,s)}function ow(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function XE(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Zc(e,t){return e??t}function Whe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function $5t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Zc(t.x1,.5)*r,n.y1+Zc(t.y1,.5)*i,Math.max(r,i)*Zc(t.r1,0),n.x1+Zc(t.x2,.5)*r,n.y1+Zc(t.y2,.5)*i,Math.max(r,i)*Zc(t.r2,.5));else{const o=Zc(t.x1,0),a=Zc(t.y1,0),u=Zc(t.x2,1),l=Zc(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=S0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Whe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Whe(s,t.stops)}function H3e(e,t,n){return lee(n)?$5t(e,n,t.bounds):n}function R$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=H3e(e,t,t.fill),!0):!1}var M5t=[];function QE(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=H3e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||M5t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function L5t(e,t){return e.zindex-t.zindex||e.index-t.index}function mee(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(L5t)}function Hf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=mee(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function N$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=mee(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function gee(e){return function(t,n,r){Hf(n,i=>{(!r||r.intersects(i.bounds))&&q3e(e,t,i,i)})}}function F5t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&q3e(e,t,n.items[0],n.items)}}function q3e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(XE(t,n),n.fill&&R$(t,n,i)&&t.fill(),n.stroke&&QE(t,n,i)&&t.stroke()))}function GF(e){return e=e||Ac,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,N$(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function Vk(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function yee(e){return GF(Vk(e))}function gv(e,t){return"translate("+e+","+t+")"}function vee(e){return"rotate("+e+")"}function j5t(e,t){return"scale("+e+","+t+")"}function W3e(e){return gv(e.x||0,e.y||0)}function B5t(e){return gv(e.x||0,e.y||0)+(e.angle?" "+vee(e.angle):"")}function U5t(e){return gv(e.x||0,e.y||0)+(e.angle?" "+vee(e.angle):"")+(e.scaleX||e.scaleY?" "+j5t(e.scaleX||1,e.scaleY||1):"")}function bee(e,t,n){function r(o,a){o("transform",B5t(a)),o("d",t(null,a))}function i(o,a){return t(zk(o,a.angle),a),Zm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=ny),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:gee(s),pick:yee(s),isect:n||hee(s)}}var z5t=bee("arc",A5t);function V5t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function H5t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function q5t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function _ee(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(zk(u),c),Zm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=Vk(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:F5t(s),pick:a,isect:pee,tip:n}}var W5t=_ee("area",C5t,V5t);function G5t(e,t){var n=t.clip;e.save(),vn(n)?(e.beginPath(),n(e),e.clip()):G3e(e,t.group)}function G3e(e,t){e.beginPath(),fee(t)?ES(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Y3e(e){const t=Zc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Y5t(e,t){e("transform",W3e(t))}function K3e(e,t){const n=Y3e(t);e("d",ES(null,t,n,n))}function K5t(e,t){e("class","background"),e("aria-hidden",!0),K3e(e,t)}function X5t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?K3e(e,t):e("d","")}function Q5t(e,t,n){const r=t.clip?dee(n,t,t):null;e("clip-path",r)}function J5t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Zm(e,t),e.translate(t.x||0,t.y||0)}function Z2(e,t,n,r){const i=Y3e(t);e.beginPath(),ES(e,t,(n||0)+i,(r||0)+i)}const Z5t=Vk(Z2),e8t=Vk(Z2,!1),t8t=Vk(Z2,!0);function n8t(e,t,n,r){Hf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(Z2(e,i,s,o),XE(e,i),i.fill&&R$(e,i,u)&&e.fill(),i.stroke&&!a&&QE(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&G3e(e,i),n&&n.translate(-s,-o),Hf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(Z2(e,i,s,o),XE(e,i),QE(e,i,u)&&e.stroke())})}function r8t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return N$(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&fee(u)&&!t8t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&e8t(e,u,o,a)?(e.restore(),u):(l=N$(u,v=>i8t(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&Z5t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function i8t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var s8t={type:"group",tag:"g",nested:!1,attr:Y5t,bound:J5t,draw:n8t,pick:r8t,isect:z3e,content:Q5t,background:K5t,foreground:X5t},eI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function wee(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Eee(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function xee(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function YF(e,t){return e==="center"?t/2:e==="right"?t:0}function KF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function o8t(e,t,n){const r=wee(t,n),i=Eee(t,r),s=xee(t,r),o=(t.x||0)-YF(t.align,i),a=(t.y||0)-KF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,eI["xmlns:xlink"],"xlink:href"),e("transform",gv(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function a8t(e,t){const n=t.image,r=Eee(t,n),i=xee(t,n),s=(t.x||0)-YF(t.align,r),o=(t.y||0)-KF(t.baseline,i);return e.set(s,o,s+r,o+i)}function u8t(e,t,n){Hf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=wee(r,this);let s=Eee(r,i),o=xee(r,i);if(s===0||o===0)return;let a=(r.x||0)-YF(r.align,s),u=(r.y||0)-KF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(XE(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var l8t={type:"image",tag:"image",nested:!1,attr:o8t,bound:a8t,draw:u8t,pick:GF(),isect:Ac,get:wee,xOffset:YF,yOffset:KF},c8t=_ee("line",I5t,H5t);function f8t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",U5t(t)),e("d",t.path)}function _D(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*ny,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=KE(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),J2(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):J2(e,u,r,i,s,o)}function d8t(e,t){return _D(zk(e,t.angle),t)?e.set(0,0,0,0):Zm(e,t,!0)}var h8t={type:"path",tag:"path",nested:!1,attr:f8t,bound:d8t,draw:gee(_D),pick:yee(_D),isect:hee(_D)};function p8t(e,t){e("d",ES(null,t))}function m8t(e,t){var n,r;return Zm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Ghe(e,t){e.beginPath(),ES(e,t)}var g8t={type:"rect",tag:"path",nested:!1,attr:p8t,bound:m8t,draw:gee(Ghe),pick:yee(Ghe),isect:z3e};function y8t(e,t){e("transform",W3e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function v8t(e,t){var n,r;return Zm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function X3e(e,t,n){var r,i,s,o;return t.stroke&&QE(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function b8t(e,t,n){Hf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&X3e(e,r,i)&&(XE(e,r),e.stroke())}})}function _8t(e,t,n,r){return e.isPointInStroke?X3e(e,t,1)&&e.isPointInStroke(n,r):!1}var w8t={type:"rule",tag:"line",nested:!1,attr:y8t,bound:v8t,draw:b8t,pick:GF(_8t),isect:V3e},E8t=bee("shape",k5t),x8t=bee("symbol",R5t,pee);const Yhe=ODe();var Sl={height:qh,measureWidth:See,estimateWidth:P$,width:P$,canvas:Q3e};Q3e(!0);function Q3e(e){Sl.width=e&&T0?See:P$}function P$(e,t){return J3e(iy(e,t),qh(e))}function J3e(e,t){return~~(.8*e.length*t)}function See(e,t){return qh(e)<=0||!(t=iy(e,t))?0:Z3e(t,XF(e))}function Z3e(e,t){const n=`(${t}) ${e}`;let r=Yhe.get(n);return r===void 0&&(T0.font=t,r=T0.measureText(e).width,Yhe.set(n,r)),r}function qh(e){return e.fontSize!=null?+e.fontSize||0:11}function ry(e){return e.lineHeight!=null?e.lineHeight:qh(e)+2}function S8t(e){return Fe(e)?e.length>1?e:e[0]:e}function Hk(e){return S8t(e.lineBreak&&e.text&&!Fe(e.text)?e.text.split(e.lineBreak):e.text)}function Tee(e){const t=Hk(e);return(Fe(t)?t.length-1:0)*ry(e)}function iy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?A8t(e,n):n}function T8t(e){if(Sl.width===See){const t=XF(e);return n=>Z3e(n,t)}else if(Sl.width===P$){const t=qh(e);return n=>J3e(n,t)}else return t=>Sl.width(e,t)}function A8t(e,t){var n=+e.limit,r=T8t(e);if(r(t)<n)return t;var i=e.ellipsis||"…",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function qk(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function XF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+qh(e)+"px "+qk(e,t)}function Aee(e){var t=e.baseline,n=qh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*ry(e):t==="line-bottom"?.29*n-.5*ry(e):0)}const C8t={left:"start",center:"middle",right:"end"},bC=new bs;function QF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-$1,t+=r*Math.cos(i),n+=r*Math.sin(i)),bC.x1=t,bC.y1=n,bC}function I8t(e,t){var n=t.dx||0,r=(t.dy||0)+Aee(t),i=QF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",C8t[t.align]||"start"),a?(u=gv(s,o)+" "+vee(a),(n||r)&&(u+=" "+gv(n,r))):u=gv(s+n,o+r),e("transform",u)}function Cee(e,t,n){var r=Sl.height(t),i=t.align,s=QF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Aee(t)-Math.round(.8*r),c=Hk(t),f;if(Fe(c)?(r+=ry(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Sl.width(t,h)),0)):f=Sl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*ny,o,a);else if(n===2)return e.rotatedPoints(t.angle*ny,o,a);return e}function k8t(e,t,n){Hf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=XF(r),e.textAlign=r.align||"left",s=QF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*ny),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Aee(r),c=Hk(r),XE(e,r),Fe(c))for(l=ry(r),u=0;u<c.length;++u)f=iy(r,c[u]),r.fill&&R$(e,r,i)&&e.fillText(f,o,a),r.stroke&&QE(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=iy(r,c),r.fill&&R$(e,r,i)&&e.fillText(f,o,a),r.stroke&&QE(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function R8t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=QF(t),a=o.x1,u=o.y1,l=Cee(bC,t,1),c=-t.angle*ny,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function N8t(e,t){const n=Cee(bC,e,2);return ow(t,n[0],n[1],n[2],n[3])||ow(t,n[0],n[1],n[4],n[5])||ow(t,n[4],n[5],n[6],n[7])||ow(t,n[2],n[3],n[6],n[7])}var P8t={type:"text",tag:"text",nested:!1,attr:I8t,bound:Cee,draw:k8t,pick:GF(R8t),isect:N8t},D8t=_ee("trail",N5t,q5t),Fl={arc:z5t,area:W5t,group:s8t,image:l8t,line:c8t,path:h8t,rect:g8t,rule:w8t,shape:E8t,symbol:x8t,text:P8t,trail:D8t};function LV(e,t,n){var r=Fl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new bs),e,n)}var Khe={mark:null};function e$e(e,t,n){var r=Fl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Khe.mark=e,l=Khe),c=LV(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new bs,o)for(a=0,u=s.length;a<u;++a)t.union(LV(s[a],i,n));return e.bounds=t}const O8t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function t$e(e,t){return JSON.stringify(e,O8t,t)}function n$e(e){const t=typeof e=="string"?JSON.parse(e):e;return r$e(t)}function r$e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&r$e(n[i]);return t&&e$e(e),e}class i$e{constructor(t){arguments.length?this.root=n$e(t):(this.root=Xhe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new qF(this.root)])}toJSON(t){return t$e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Xhe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Xhe(e,t){const n={bounds:new bs,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Kg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Iee(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function As(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Kg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function uc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function s$e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function JF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function $8t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Fl[i.marktype]).tip){for(o=JF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let kee=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||CF(),this._tooltip=n||M8t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Kg(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=$8t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function M8t(e,t,n,r){e.element().setAttribute("title",r||"")}class Wk{constructor(t){this._el=null,this._bgcolor=null,this._loader=new U3e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const L8t="keydown",F8t="keypress",j8t="keyup",o$e="dragenter",wD="dragleave",a$e="dragover",FV="pointerdown",B8t="pointerup",D$="pointermove",ED="pointerout",u$e="pointerover",jV="mousedown",U8t="mouseup",l$e="mousemove",O$="mouseout",c$e="mouseover",$$="click",z8t="dblclick",V8t="wheel",f$e="mousewheel",M$="touchstart",L$="touchmove",F$="touchend",H8t=[L8t,F8t,j8t,o$e,wD,a$e,FV,B8t,D$,ED,u$e,jV,U8t,l$e,O$,c$e,$$,z8t,V8t,f$e,M$,L$,F$],BV=D$,_C=O$,UV=$$;class Gk extends kee{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=H8t,this.pointermove=Jhe([D$,l$e],[u$e,c$e],[ED,O$]),this.dragover=Jhe([a$e],[o$e],[wD]),this.pointerout=Zhe([ED,O$]),this.dragleave=Zhe([wD])}initialize(t,n,r){return this._canvas=t&&Iee(t,"canvas"),[$$,jV,FV,D$,ED,wD].forEach(i=>Qhe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(f$e,t)}pointerdown(t){this._down=this._active,this.fire(FV,t)}mousedown(t){this._down=this._active,this.fire(jV,t)}click(t){this._down===this._active&&(this.fire($$,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(M$,t,!0)}touchmove(t){this.fire(L$,t,!0)}touchend(t){this.fire(F$,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===UV&&i&&i.href?this.handleHref(n,i,i.href):(t===BV||t===_C)&&this.handleTooltip(n,i,t!==_C),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Qhe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=JF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Fl[t.marktype].pick.call(this,o,t,n,r,i,s)}}const q8t=e=>e===M$||e===L$||e===F$?[M$,L$,F$]:[e];function Qhe(e,t){q8t(t).forEach(n=>W8t(e,n))}function W8t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function EA(e,t,n){t.forEach(r=>e.fire(r,n))}function Jhe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?EA(this,e,r):((!i||!i.exit)&&EA(this,n,r),this._active=s,EA(this,t,r),EA(this,e,r))}}function Zhe(e){return function(t){EA(this,e,t),this._active=null}}function G8t(){return typeof window<"u"&&window.devicePixelRatio||1}function Y8t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?G8t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class j$ extends Wk{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new bs,this._tempb=new bs}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:S0(1,1,this._options.type),t&&this._canvas&&(uc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)Y8t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Me("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=K8t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):X8t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Fl[n.marktype];n.clip&&G5t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const K8t=(e,t,n)=>new bs().set(0,0,t,n).translate(-e[0],-e[1]);function X8t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class d$e extends kee{constructor(t,n){super(t,n);const r=this;r._hrefHandler=m9(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=m9(r,(i,s)=>{r.handleTooltip(i,s,i.type!==_C)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(UV,this._hrefHandler),i.removeEventListener(BV,this._tooltipHandler),i.removeEventListener(_C,this._tooltipHandler)),this._svg=i=t&&Iee(t,"svg"),i&&(i.addEventListener(UV,this._hrefHandler),i.addEventListener(BV,this._tooltipHandler),i.addEventListener(_C,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:m9(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const m9=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},h$e="aria-hidden",Ree="aria-label",Nee="role",Pee="aria-roledescription",p$e="graphics-object",Dee="graphics-symbol",m$e=(e,t,n)=>({[Nee]:e,[Pee]:t,[Ree]:n||void 0}),Q8t=zf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),epe={axis:{desc:"axis",caption:ejt},legend:{desc:"legend",caption:tjt},"title-text":{desc:"title",caption:e=>`Title text '${npe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${npe(e)}'`}},tpe={ariaRole:Nee,ariaRoleDescription:Pee,description:Ree};function g$e(e,t){const n=t.aria===!1;if(e(h$e,n||void 0),n||t.description==null)for(const r in tpe)e(tpe[r],void 0);else{const r=t.mark.marktype;e(Ree,t.description),e(Nee,t.ariaRole||(r==="group"?p$e:Dee)),e(Pee,t.ariaRoleDescription||`${r} mark`)}}function y$e(e){return e.aria===!1?{[h$e]:!0}:Q8t[e.role]?null:epe[e.role]?Z8t(e,epe[e.role]):J8t(e)}function J8t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return m$e(n?p$e:Dee,`${t} mark container`,e.description)}function Z8t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return m$e(t.role||Dee,t.desc,n.description||r(n))}catch{return null}}function npe(e){return ht(e.text).join(" ")}function ejt(e){const t=e.datum,n=e.orient,r=t.title?v$e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${YE(a)?"discrete":a} scale with ${N3e(o,s,e)}`}function tjt(e){const t=e.datum,n=t.title?v$e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return rjt(r)+(n?` titled '${n}'`:"")+` for ${njt(s)} with ${N3e(u,a,e)}`}function v$e(e){try{return ht(Xn(e.items).items[0].text).join(" ")}catch{return null}}function njt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Xn(e)}function rjt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const b$e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ijt=e=>b$e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Oee(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${ijt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=b$e(u),a),toString:()=>e};return a}const _$e=e=>w$e(Oee(),e)+"";function w$e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):w$e(e,r)}return e.close()}const B$={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},U$={blend:"mix-blend-mode"},E$e={fill:"none","stroke-miterlimit":10},TT=0,rpe="http://www.w3.org/2000/xmlns/",Ss=eI.xmlns;class $ee extends Wk{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=As(t,0,"svg",Ss),this._svg.setAttributeNS(rpe,"xmlns",Ss),this._svg.setAttributeNS(rpe,"xmlns:xlink",eI["xmlns:xlink"]),this._svg.setAttribute("version",eI.version),this._svg.setAttribute("class","marks"),uc(t,1),this._root=As(this._svg,TT,"g",Ss),Xg(this._root,E$e),uc(this._svg,TT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Xg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=As(t,TT,"rect",Ss),Xg(r,{width:this._width,height:this._height,fill:n}));const i=_$e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),uc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Fl[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,ipe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,ipe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Fl[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=spe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return uc(c,0),n._svg;c.setAttribute("class",s$e(n));const f=y$e(n);for(const m in f)Na(c,m,f[m]);l||Na(c,"pointer-events",u),Na(c,"clip-path",n.clip?dee(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=spe(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&ajt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Hf(n,p),uc(c,h),c}_update(t,n,r){Vp=n,ea=n.__values__,g$e(wC,r),t.attr(wC,r,this);const i=ljt[t.type];i&&i.call(this,t,n,r),Vp&&this.style(Vp,r)}style(t,n){if(n!=null){for(const r in B$){let i=r==="font"?qk(n):n[r];if(i===ea[r])continue;const s=B$[r];i==null?t.removeAttribute(s):(lee(i)&&(i=D3e(i,this._defs.gradient,x$e())),t.setAttribute(s,i+"")),ea[r]=i}for(const r in U$)xD(t,U$[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=As(t,TT+1,"defs",Ss)),i=sjt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=As(t,TT+1,"defs",Ss)),i=ojt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):uc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function ipe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function sjt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=As(e,n++,"pattern",Ss);Xg(o,{id:k$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=As(o,0,"rect",Ss),Xg(o,{width:1,height:1,fill:`url(${x$e()}#${t.id})`}),e=As(e,n++,"radialGradient",Ss),Xg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=As(e,n++,"linearGradient",Ss),Xg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=As(e,r,"stop",Ss),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return uc(e,r),n}function ojt(e,t,n){let r;return e=As(e,n,"clipPath",Ss),e.setAttribute("id",t.id),t.path?(r=As(e,0,"path",Ss),r.setAttribute("d",t.path)):(r=As(e,0,"rect",Ss),Xg(r,{x:0,y:0,width:t.width,height:t.height})),uc(e,1),n+1}function ajt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Hf(n,o=>{i=e.mark(t,o,i,r),++s}),uc(t,1+s)}function spe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Kg(o,r,Ss),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Kg(o,"path",Ss);s.appendChild(a),a.__data__=e;const u=Kg(o,"g",Ss);s.appendChild(u),u.__data__=e;const l=Kg(o,"path",Ss);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||ujt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function ujt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Vp=null,ea=null;const ljt={group(e,t,n){const r=Vp=t.childNodes[2];ea=r.__values__,e.foreground(wC,n,this),ea=t.__values__,Vp=t.childNodes[1],e.content(wC,n,this);const i=Vp=t.childNodes[0];e.background(wC,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ea.events&&(Na(r,"pointer-events",s),Na(i,"pointer-events",s),ea.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Na(r,"display",null),this.style(i,n),Na(i,"stroke",null),o&&(n.fill=null),ea=r.__values__,this.style(r,n),o&&(n.fill=o),Vp=null}else Na(r,"display","none")},image(e,t,n){n.smooth===!1?(xD(t,"image-rendering","optimizeSpeed"),xD(t,"image-rendering","pixelated")):xD(t,"image-rendering",null)},text(e,t,n){const r=Hk(n);let i,s,o,a;Fe(r)?(s=r.map(u=>iy(n,u)),i=s.join(`
`),i!==ea.text&&(uc(t,0),o=t.ownerDocument,a=ry(n),s.forEach((u,l)=>{const c=Kg(o,"tspan",Ss);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ea.text=i)):(s=iy(n,r),s!==ea.text&&(t.textContent=s,ea.text=s)),Na(t,"font-family",qk(n)),Na(t,"font-size",qh(n)+"px"),Na(t,"font-style",n.fontStyle),Na(t,"font-variant",n.fontVariant),Na(t,"font-weight",n.fontWeight)}};function wC(e,t,n){t!==ea[e]&&(n?cjt(Vp,e,t,n):Na(Vp,e,t),ea[e]=t)}function xD(e,t,n){n!==ea[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ea[t]=n)}function Xg(e,t){for(const n in t)Na(e,n,t[n])}function Na(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function cjt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function x$e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class S$e extends Wk{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Oee();n.open("svg",gn({},eI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",E$e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Fl[n.marktype],i=r.tag,s=[g$e,r.attr];t.open("g",{class:s$e(n),"clip-path":n.clip?dee(this,n,n.group):null},y$e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=Hk(a);if(Fe(l)){const c={x:0,dy:ry(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(iy(a,l[f])).close()}else t.text(iy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Hf(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Hf(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&fjt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:k$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function fjt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=qk(t),e["font-size"]=qh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in B$){let a=t[o];const u=B$[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(lee(a)&&(a=D3e(a,i.gradient,"")),e[u]=a)}for(const o in U$){const a=t[o];a!=null&&(s=s||[],s.push(`${U$[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const af={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function djt(e){af.svgMarkTypes=e.svgMarkTypes??["text"],af.svgOnTop=e.svgOnTop??!0,af.debug=e.debug??!1}class zV extends Wk{constructor(t){super(t),this._svgRenderer=new $ee(t),this._canvasRenderer=new j$(t)}initialize(t,n,r,i,s){this._root_el=As(t,0,"div");const o=As(this._root_el,0,"div"),a=As(this._root_el,1,"div");return this._root_el.style.position="relative",af.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=af.svgOnTop?a:o,this._canvasEl=af.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return af.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!af.svgMarkTypes.includes(s));this._svgRenderer.render(t,af.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return af.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class T$e extends Gk{constructor(t,n){super(t,n)}initialize(t,n,r){const i=As(As(t,0,"div"),af.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const A$e="canvas",C$e="hybrid",I$e="png",k$e="svg",R$e="none",Qg={Canvas:A$e,PNG:I$e,SVG:k$e,Hybrid:C$e,None:R$e},Jv={};Jv[A$e]=Jv[I$e]={renderer:j$,headless:j$,handler:Gk};Jv[k$e]={renderer:$ee,headless:S$e,handler:d$e};Jv[C$e]={renderer:zV,headless:zV,handler:T$e};Jv[R$e]={};function ZF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Jv[e]=t,this):Jv[e]}function N$e(e,t,n){const r=[],i=new bs().union(t),s=e.marktype;return s?P$e(e,i,n,r):s==="group"?D$e(e,i,n,r):Me("Intersect scene must be mark node or group item.")}function P$e(e,t,n,r){if(hjt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)D$e(i[a],t,n,r);else for(const u=Fl[s].isect;a<o;++a){const l=i[a];O$e(l,t,u)&&r.push(l)}}return r}function hjt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function D$e(e,t,n,r){n&&n(e.mark)&&O$e(e,t,Fl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)P$e(i[u],t,n,r);t.translate(o,a)}return r}function O$e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const g9=new bs;function $$e(e){const t=e.clip;if(vn(t))t(zk(g9.clear()));else if(t)g9.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(g9)}const pjt=1e-9;function Mee(e,t,n){return e===t?!0:n==="path"?M$e(e,t):e instanceof Date&&t instanceof Date?+e==+t:ur(e)&&ur(t)?Math.abs(e-t)<=pjt:!e||!t||!mt(e)&&!mt(t)?e==t:mjt(e,t)}function M$e(e,t){return Mee(KE(e),KE(t))}function mjt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Mee(e[i],t[i],i))return!1;return typeof e==typeof t}function gjt(){B3e(),B4t()}const JE="top",yf="left",wf="right",sy="bottom",yjt="top-left",vjt="top-right",bjt="bottom-left",_jt="bottom-right",Lee="start",VV="middle",Oa="end",wjt="x",Ejt="y",e4="group",Fee="axis",jee="title",xjt="frame",Sjt="scope",Bee="legend",L$e="row-header",F$e="row-footer",j$e="row-title",B$e="column-header",U$e="column-footer",z$e="column-title",Tjt="padding",Ajt="symbol",V$e="fit",H$e="fit-x",q$e="fit-y",Cjt="pad",Uee="none",GN="all",HV="each",zee="flush",Jg="column",Zg="row";function W$e(e){Pe.call(this,null,e)}lt(W$e,Pe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Fl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=YN(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===e4||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(YN(l,o))),r.role){case Fee:case Bee:case jee:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(YN(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(YN(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return $$e(r),t.modifies("bounds")}});function YN(e,t,n){return t(e.bounds.clear(),e,n)}const ope=":vega_identifier:";function Vee(e){Pe.call(this,0,e)}Vee.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(Vee,Pe,{transform(e,t){const n=Ijt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Ijt(e){return e._signals[ope]||(e._signals[ope]=e.add(0))}function G$e(e){Pe.call(this,null,e)}lt(G$e,Pe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,kjt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===e4?qF:HF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function kjt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Y$e(e){Pe.call(this,null,e)}const ape={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!K$e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},K$e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),upe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(K$e(i,s=e[n].bounds,t))return!0},Rjt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Njt=(e,t,n)=>{var r=e.range(),i=new bs;return t===JE||t===sy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},lpe=e=>(e.forEach(t=>t.opacity=1),e),cpe=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(Y$e,Pe,{transform(e,t){const n=ape[e.method]||ape.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(lpe(i),t=cpe(t,e)),t;if(i=i.filter(Rjt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=lpe(i),t=cpe(t,e),s.length>=3&&upe(s,r)){do s=n(s,r);while(s.length>=3&&upe(s,r));s.length<3&&!Xn(i).opacity&&(s.length>1&&(Xn(s).opacity=0),Xn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Njt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function X$e(e){Pe.call(this,null,e)}lt(X$e,Pe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Jo=new bs;function aw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Pjt(e){var t=e.items[0].orient;return t===yf||t===wf}function Djt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Ojt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=Djt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Tee(p),v=0,b=0,w,E;switch(Jo.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case JE:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&KN(e,p,E,m,y,0,-1,g);break;case yf:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&KN(e,p,E,m,y,1,-1,g);break;case wf:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&KN(e,p,E,m,y,1,1,g);break;case sy:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&KN(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return Zm(g.translate(v,b),i),aw(i,"x",v+o)|aw(i,"y",b+o)&&(i.bounds=Jo,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function KN(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const fpe=(e,t)=>Math.floor(Math.min(e,t)),dpe=(e,t)=>Math.ceil(Math.max(e,t));function $jt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===e4)switch(i.role){case Fee:case Bee:case jee:break;case L$e:o.rowheaders.push(...s);break;case F$e:o.rowfooters.push(...s);break;case B$e:o.colheaders.push(...s);break;case U$e:o.colfooters.push(...s);break;case j$e:o.rowtitle=s[0];break;case z$e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function Mjt(e){return new bs().set(0,0,e.width||0,e.height||0)}function Ljt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function gi(e,t,n){const r=mt(e)?e[t]:e;return r??(n!==void 0?n:0)}function hpe(e){return e<0?Math.ceil(-e):0}function Q$e(e,t,n){var r=!n.nodirty,i=n.bounds===zee?Mjt:Ljt,s=Jo.set(0,0,0,0),o=gi(n.align,Jg),a=gi(n.align,Zg),u=gi(n.padding,Jg),l=gi(n.padding,Zg),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),S,T,A,C,I,R,M,P,O,F,L;for(T=0;T<c;++T)p[T]=0;for(T=0;T<f;++T)y[T]=0;for(T=0;T<d;++T)R=t[T],I=E[T]=i(R),R.x=R.x||0,b[T]=0,R.y=R.y||0,w[T]=0,A=T%c,C=~~(T/c),m=Math.max(m,M=Math.ceil(I.x2)),v=Math.max(v,P=Math.ceil(I.y2)),p[A]=Math.max(p[A],M),y[C]=Math.max(y[C],P),h[T]=u+hpe(I.x1),g[T]=l+hpe(I.y1),r&&e.dirty(t[T]);for(T=0;T<d;++T)T%c===0&&(h[T]=0),T<c&&(g[T]=0);if(o===HV)for(A=1;A<c;++A){for(L=0,T=A;T<d;T+=c)L<h[T]&&(L=h[T]);for(T=A;T<d;T+=c)h[T]=L+p[A-1]}else if(o===GN){for(L=0,T=0;T<d;++T)T%c&&L<h[T]&&(L=h[T]);for(T=0;T<d;++T)T%c&&(h[T]=L+m)}else for(o=!1,A=1;A<c;++A)for(T=A;T<d;T+=c)h[T]+=p[A-1];if(a===HV)for(C=1;C<f;++C){for(L=0,T=C*c,S=T+c;T<S;++T)L<g[T]&&(L=g[T]);for(T=C*c;T<S;++T)g[T]=L+y[C-1]}else if(a===GN){for(L=0,T=c;T<d;++T)L<g[T]&&(L=g[T]);for(T=c;T<d;++T)g[T]=L+v}else for(a=!1,C=1;C<f;++C)for(T=C*c,S=T+c;T<S;++T)g[T]+=y[C-1];for(O=0,T=0;T<d;++T)O=h[T]+(T%c?O:0),b[T]+=O-t[T].x;for(A=0;A<c;++A)for(F=0,T=A;T<d;T+=c)F+=g[T],w[T]+=F-t[T].y;if(o&&gi(n.center,Jg)&&f>1)for(T=0;T<d;++T)I=o===GN?m:p[T%c],O=I-E[T].x2-t[T].x-b[T],O>0&&(b[T]+=O/2);if(a&&gi(n.center,Zg)&&c!==1)for(T=0;T<d;++T)I=a===GN?v:y[~~(T/c)],F=I-E[T].y2-t[T].y-w[T],F>0&&(w[T]+=F/2);for(T=0;T<d;++T)s.union(E[T].translate(b[T],w[T]));switch(O=gi(n.anchor,wjt),F=gi(n.anchor,Ejt),gi(n.anchor,Jg)){case Oa:O-=s.width();break;case VV:O-=s.width()/2}switch(gi(n.anchor,Zg)){case Oa:F-=s.height();break;case VV:F-=s.height()/2}for(O=Math.round(O),F=Math.round(F),s.clear(),T=0;T<d;++T)t[T].mark.bounds.clear();for(T=0;T<d;++T)R=t[T],R.x+=b[T]+=O,R.y+=w[T]+=F,s.union(R.mark.bounds.union(R.bounds.translate(b[T],w[T]))),r&&e.dirty(R);return s}function Fjt(e,t,n){var r=$jt(t),i=r.marks,s=n.bounds===zee?jjt:Bjt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=Q$e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=gi(n.headerBand,Zg,null),c=XN(e,r.rowheaders,i,a,u,-gi(o,"rowHeader"),fpe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=gi(n.headerBand,Jg,null),f=XN(e,r.colheaders,i,a,a,-gi(o,"columnHeader"),fpe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=gi(n.footerBand,Zg,null),d=XN(e,r.rowfooters,i,a,u,gi(o,"rowFooter"),dpe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=gi(n.footerBand,Jg,null),h=XN(e,r.colfooters,i,a,a,gi(o,"columnFooter"),dpe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=gi(n.titleAnchor,Zg),g=gi(o,"rowTitle"),g=p===Oa?d+g:c-g,m=gi(n.titleBand,Zg,.5),ppe(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=gi(n.titleAnchor,Jg),g=gi(o,"columnTitle"),g=p===Oa?h+g:f-g,m=gi(n.titleBand,Jg,.5),ppe(e,r.coltitle,g,1,y,m))}function jjt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Bjt(e,t){return e.bounds[t]}function XN(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,S,T,A,C;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(S=t[v],E=S.mark.bounds,b=y;b>=0&&(T=n[b])==null;b-=d);a?(A=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),C=m):(A=m,C=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),E.union(S.bounds.translate(A-(S.x||0),C-(S.y||0))),S.x=A,S.y=C,e.dirty(S),g=o(g,E[l])}return g}function ppe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function Ujt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function zjt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Vjt(e,t,n,r,i,s,o){const a=Ujt(n,t),u=zjt(e,a("offset",0)),l=a("anchor",Lee),c=l===Oa?1:l===VV?.5:0,f={align:HV,bounds:a("bounds",zee),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case yf:f.anchor={x:Math.floor(r.x1)-u,column:Oa,y:c*(o||r.height()+2*r.y1),row:l};break;case wf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case JE:f.anchor={y:Math.floor(i.y1)-u,row:Oa,x:c*(s||i.width()+2*i.x1),column:l};break;case sy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case yjt:f.anchor={x:u,y:u};break;case vjt:f.anchor={x:s-u,y:u,column:Oa};break;case bjt:f.anchor={x:u,y:o-u,row:Oa};break;case _jt:f.anchor={x:s-u,y:o-u,column:Oa,row:Oa};break}return f}function Hjt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Wjt(e,n,n.items[0].items[0]),s=qjt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===Ajt&&Gjt(n.items[0].items[0].items[0].items),i!==Uee&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Zm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function qjt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Wjt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&AT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case yf:i+=Math.ceil(o.bounds.width())+u;break;case wf:case sy:break;default:s+=o.bounds.height()+u}switch((i||s)&&AT(e,n,i,s),o.orient){case yf:c+=g_(t,n,o,a,1,1);break;case wf:l+=g_(t,n,o,Oa,0,0)+u,c+=g_(t,n,o,a,1,1);break;case sy:l+=g_(t,n,o,a,0,0),c+=g_(t,n,o,Oa,-1,0,1)+u;break;default:l+=g_(t,n,o,a,0,0)}(l||c)&&AT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(AT(e,n,-l,0),AT(e,o,-l,0))}}function g_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Tee(n);return Math.round(r===Lee?f:r===Oa?d-h:.5*(c-h))}function AT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Gjt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Yjt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===yf||a===wf?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==e4?a===yf?(p=i.y2,h=i.y1):a===wf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===yf&&(p=r,h=0),b=u===Lee?p:u===Oa?h:(p+h)/2,d&&d.text){switch(a){case JE:case sy:v=f.bounds.height()+c;break;case yf:y=f.bounds.width()+c;break;case wf:y=-f.bounds.width()-c;break}Jo.clear().union(d.bounds),Jo.translate(y-(d.x||0),v-(d.y||0)),aw(d,"x",y)|aw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Jo),d.mark.bounds.clear().union(Jo),e.dirty(d)),Jo.clear().union(d.bounds)}else Jo.clear();switch(Jo.union(f.bounds),a){case JE:m=b,g=i.y1-Jo.height()-l;break;case yf:m=i.x1-Jo.width()-l,g=b;break;case wf:m=i.x2+Jo.width()+l,g=b;break;case sy:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return aw(s,"x",m)|aw(s,"y",g)&&(Jo.translate(m,g),e.dirty(s),s.bounds.clear().union(Jo),t.bounds.clear().union(Jo),e.dirty(s)),s.bounds}function J$e(e){Pe.call(this,null,e)}lt(J$e,Pe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Fjt(n,r,e.layout),Xjt(n,r,e)}),Kjt(e.mark.group)?t.reflow():t}});function Kjt(e){return e&&e.mark.role!=="legend-entry"}function Xjt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new bs().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Fee:h=Pjt(f)?a:u,h.union(Ojt(e,f,i,s));break;case jee:c=f;break;case Bee:l.push(Hjt(e,f));break;case xjt:case Sjt:case L$e:case F$e:case j$e:case B$e:case U$e:case z$e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||wf,d!==Uee&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];Q$e(e,v,Vjt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===V$e||n.autosize.type===H$e||n.autosize.type===q$e))switch(y.orient){case yf:case wf:o.add(v.x1,0).add(v.x2,0);break;case JE:case sy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(Yjt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),Qjt(e,t,o,n)}function Qjt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Tjt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Uee?(l=0,f=0,u=o,c=a):s===V$e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===H$e?(u=Math.max(0,o-l-d),a=c+f+h):s===q$e?(o=u+l+d,c=Math.max(0,a-f-h)):s===Cjt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const Jjt=Object.freeze(Object.defineProperty({__proto__:null,bound:W$e,identifier:Vee,mark:G$e,overlap:Y$e,render:X$e,viewlayout:J$e},Symbol.toStringTag,{value:"Module"}));function Z$e(e){Pe.call(this,null,e)}lt(Z$e,Pe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=aee(s,o,e.minstep),u=e.format||A3e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?T3e(s,e.values,a):uee(s,a);return i&&(r.rem=i),i=l.map((c,f)=>_r({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(_r({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function eMe(e){Pe.call(this,null,e)}function Zjt(){return _r({})}function e9t(e){const t=yS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(eMe,Pe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Zjt,s=e.key||Mt,o=this.value;return Fe(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Me("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=e9t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function tMe(e){Pe.call(this,null,e)}lt(tMe,Pe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Fe(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||bg,u=i.enter||bg,l=i.exit||bg,c=(s&&!o?i[s]:a)||bg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==bg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==bg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==bg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function nMe(e){Pe.call(this,[],e)}lt(nMe,Pe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||mD,o=e.scale,a=+e.limit,u=aee(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===mD,c=e.format||R3e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||k3e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===mD?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,vn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=ba(m=p||8),i=i.map((y,v)=>_r({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(_r({index:i.length,label:`…${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===C4t?(d=o.domain(),h=E3e(o,d[0],Xn(d)),f.length<3&&!e.values&&d[0]!==Xn(d)&&(f=[d[0],Xn(d)]),i=f.map((y,v)=>_r({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=F4t(o),i=f.map((y,v)=>_r({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const t9t=e=>e.source.x,n9t=e=>e.source.y,r9t=e=>e.target.x,i9t=e=>e.target.y;function Hee(e){Pe.call(this,{},e)}Hee.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(Hee,Pe,{transform(e,t){var n=e.sourceX||t9t,r=e.sourceY||n9t,i=e.targetX||r9t,s=e.targetY||i9t,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=mpe.get(u+"-"+a)||mpe.get(u);return l||Me("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const rMe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,s9t=(e,t,n,r)=>rMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),iMe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},o9t=(e,t,n,r)=>iMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),sMe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},a9t=(e,t,n,r)=>sMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),u9t=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,l9t=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,c9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},f9t=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},d9t=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},h9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},mpe=yS({line:rMe,"line-radial":s9t,arc:iMe,"arc-radial":o9t,curve:sMe,"curve-radial":a9t,"orthogonal-horizontal":u9t,"orthogonal-vertical":l9t,"orthogonal-radial":c9t,"diagonal-horizontal":f9t,"diagonal-vertical":d9t,"diagonal-radial":h9t});function qee(e){Pe.call(this,null,e)}qee.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(qee,Pe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||pS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/REe(l),h=Iu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const p9t=5;function m9t(e){const t=e.type;return!e.bins&&(t===WE||t===$k||t===Mk)}function oMe(e){return iee(e)&&e!==ah}const g9t=zf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function aMe(e){Pe.call(this,null,e),this.modified(!0)}lt(aMe,Pe,{transform(e,t){var n=t.dataflow,r=this.value,i=y9t(e);(!r||i!==r.type)&&(this.value=r=mr(i)());for(i in e)if(!g9t[i]){if(i==="padding"&&oMe(r.type))continue;vn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return x9t(r,e,E9t(r,e,b9t(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function y9t(e){var t=e.type,n="",r;return t===ah?ah+"-"+WE:(v9t(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?ah+"-":r===3?wS+"-":""),(n+t||WE).toLowerCase())}function v9t(e){const t=e.type;return iee(t)&&t!==Xv&&t!==Qv&&(e.scheme||e.range&&e.range.length&&e.range.every(pt))}function b9t(e,t,n){const r=_9t(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&m9t(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return oMe(s)&&t.padding&&i[0]!==Xn(i)&&(i=w9t(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(uMe(s,i,n)),s===eee&&e.unknown(t.domainImplicit?D7:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&aee(e,t.nice)||null),i.length}function _9t(e,t,n){return t?(e.domain(uMe(e.type,t,n)),t.length):-1}function w9t(e,t,n,r,i,s){var o=Math.abs(Xn(n)-n[0]),a=o/(o-2*r),u=e===Pm?GJ(t,null,a):e===Mk?T$(t,null,a,.5):e===$k?T$(t,null,a,i||1):e===jF?YJ(t,null,a,s||1):WJ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function uMe(e,t,n){if(y3e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+nt(t))}return t}function E9t(e,t,n){let r=t.bins;if(r&&!Fe(r)){const i=e.domain(),s=i[0],o=Xn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Me("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Iu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===tee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function x9t(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=S9t(r,t,n);else if(t.scheme&&(s=T9t(r,t,n),vn(s))){if(e.interpolator)return e.interpolator(s);Me(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&v3e(r))return e.interpolator(zF(qV(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(see(t.interpolate,t.interpolateGamma)):vn(e.round)?e.round(i):vn(e.rangeRound)&&e.interpolate(i?HI:Wm),s&&e.range(qV(s,t.reverse))}function S9t(e,t,n){e!==f3e&&e!==RV&&Me("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===RV?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*ZZ(n,i,r)]}function T9t(e,t,n){var r=t.schemeExtent,i,s;return Fe(t.scheme)?s=zF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=oee(i),s||Me(`Unrecognized scheme name: ${t.scheme}`)),n=e===UF?n+1:e===tee?n-1:e===GE||e===BF?+t.schemeCount||p9t:n,v3e(e)?gpe(s,r,t.reverse):vn(s)?w3e(gpe(s,r),n):e===eee?s:s.slice(0,n)}function gpe(e,t,n){return vn(e)&&(t||n)?_3e(e,qV(t||[0,1],n)):e}function qV(e,t){return t?e.slice().reverse():e}function lMe(e){Pe.call(this,null,e)}lt(lMe,Pe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Db(e.sort)),this.modified(n),t}});const ype="zero",cMe="center",fMe="normalize",dMe=["y0","y1"];function Wee(e){Pe.call(this,null,e)}Wee.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:ype,values:[ype,cMe,fMe]},{name:"as",type:"string",array:!0,length:2,default:dMe}]};lt(Wee,Pe,{transform(e,t){var n=e.as||dMe,r=n[0],i=n[1],s=Db(e.sort),o=e.field||pS,a=e.offset===cMe?A9t:e.offset===fMe?C9t:I9t,u,l,c,f;for(u=k9t(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function A9t(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function C9t(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function I9t(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function k9t(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const R9t=Object.freeze(Object.defineProperty({__proto__:null,axisticks:Z$e,datajoin:eMe,encode:tMe,legendentries:nMe,linkpath:Hee,pie:qee,scale:aMe,sortitems:lMe,stack:Wee},Symbol.toStringTag,{value:"Module"}));var N9t=Math.abs,WV=Math.cos,z$=Math.sin,P9t=1e-6,hMe=Math.PI,GV=hMe/2,vpe=D9t(2);function bpe(e){return e>1?GV:e<-1?-GV:Math.asin(e)}function D9t(e){return e>0?Math.sqrt(e):0}function O9t(e,t){var n=e*z$(t),r=30,i;do t-=i=(t+z$(t)-n)/(1+WV(t));while(N9t(i)>P9t&&--r>0);return t/2}function $9t(e,t,n){function r(i,s){return[e*i*WV(s=O9t(n,s)),t*z$(s)]}return r.invert=function(i,s){return s=bpe(s/t),[i/(e*WV(s)),bpe((2*s+z$(2*s))/n)]},r}var M9t=$9t(vpe/GV,vpe,hMe);function L9t(){return jh(M9t).scale(169.529)}const F9t=sSe(),YV=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function j9t(e,t){return function n(){const r=t();return r.type=e,r.path=sSe().projection(r),r.copy=r.copy||function(){const i=n();return YV.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},m3e(r)}}function Gee(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(V$[e]=j9t(e,t),this):V$[e]||null}function pMe(e){return e&&e.path||F9t}const V$={albers:aSe,albersusa:_ft,azimuthalequalarea:wft,azimuthalequidistant:Eft,conicconformal:Tft,conicequalarea:u3,conicequidistant:Ift,equalEarth:Rft,equirectangular:Aft,gnomonic:Nft,identity:Pft,mercator:xft,mollweide:L9t,naturalEarth1:Dft,orthographic:Oft,stereographic:$ft,transversemercator:Mft};for(const e in V$)Gee(e,V$[e]);function B9t(){}const lp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function mMe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),U9t(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(z9t((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,lp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,lp[m|g<<1].forEach(b);for(lp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,lp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,lp[m|g<<1|y<<2|v<<3].forEach(b);lp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,lp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,lp[y<<2|v<<3].forEach(b);lp[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],S=[w[1][0]+h,w[1][1]+p],T=o(E),A=o(S),C,I;(C=d[T])?(I=f[A])?(delete d[C.end],delete f[I.start],C===I?(C.ring.push(S),c(C.ring)):f[C.start]=d[I.end]={start:C.start,end:I.end,ring:C.ring.concat(I.ring)}):(delete d[C.end],C.ring.push(S),d[C.end=A]=C):(C=f[A])?(I=d[T])?(delete f[C.start],delete d[I.end],C===I?(C.ring.push(S),c(C.ring)):f[I.start]=d[C.end]={start:I.start,end:C.end,ring:I.ring.concat(C.ring)}):(delete f[C.start],C.ring.unshift(E),f[C.start=T]=C):f[T]=d[A]={start:T,end:A,ring:[E,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Me("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:B9t,r):n===a},r}function U9t(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function z9t(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=V9t(e,t[n]))return i;return 0}function V9t(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(H9t(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function H9t(e,t,n){var r;return q9t(e,t,n)&&W9t(e[r=+(e[0]===t[0])],n[r],t[r])}function q9t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function W9t(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function gMe(e,t,n){return function(r){var i=xh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?$0(s,o,e):a/(e+1);return Iu(s+u,o,u)}}function Yee(e){Pe.call(this,null,e)}Yee.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(Yee,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||va,s=mMe().smooth(e.smooth!==!1),o=e.thresholds||G9t(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Fe(o)?o:o(c.values));Y9t(f,c,l,e),f.forEach(d=>{u.push(RF(l,_r(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function G9t(e,t,n){const r=gMe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>d0(t(i).values)))}function Y9t(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(vn(i)&&(i=i(n,r)),vn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(ur(i)?i:i[0])||1,a=(ur(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(yMe(t,o,a,u,l))}function yMe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function _pe(e,t,n){const r=e>=0?e:hZ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function y9(e){return vn(e)?e:ba(+e)}function vMe(){var e=u=>u[0],t=u=>u[1],n=pS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=_pe(r[0],u,e)>>o,f=_pe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),S=h+(+t(w)>>o);E>=0&&E<p&&S>=0&&S<m&&(g[E+S*p]+=+n(w))}),c>0&&f>0?(y_(p,m,g,y,c),v_(p,m,y,g,f),y_(p,m,g,y,c),v_(p,m,y,g,f),y_(p,m,g,y,c),v_(p,m,y,g,f)):c>0?(y_(p,m,g,y,c),y_(p,m,y,g,c),y_(p,m,g,y,c),v=y):f>0&&(v_(p,m,g,y,f),v_(p,m,y,g,f),v_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/REe(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=y9(u),a):e},a.y=function(u){return arguments.length?(t=y9(u),a):t},a.weight=function(u){return arguments.length?(n=y9(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Me("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Me("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=ht(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Me("invalid bandwidth"),r=u,a):r},a}function y_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function v_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Kee(e){Pe.call(this,null,e)}Kee.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const K9t=["x","y","weight","size","cellSize","bandwidth"];function bMe(e,t){return K9t.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(Kee,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=X9t(r,e.groupby),s=(e.groupby||[]).map(Gi),o=bMe(vMe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>_r(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function X9t(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Xee(e){Pe.call(this,null,e)}Xee.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(Xee,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=mMe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||gMe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=bMe(vMe(),e)(i,!0),u=yMe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Fe(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(_r),n}});const KV="Feature",Qee="FeatureCollection",Q9t="MultiPoint";function Jee(e){Pe.call(this,null,e)}Jee.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(Jee,Pe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&va,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(fa(a))||s&&t.modified(fa(s))||o&&t.modified(fa(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:KV,geometry:{type:Q9t,coordinates:r}})),this.value={type:Qee,features:n}}});function Zee(e){Pe.call(this,null,e)}Zee.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(Zee,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||va,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=pMe(e.projection),n.materialize().reflow()):o=i===va||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=J9t(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function J9t(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function ete(e){Pe.call(this,null,e)}ete.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(ete,Pe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function tte(e){Pe.call(this,null,e)}tte.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(tte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=Z9t(pMe(e.projection),e.field||Tc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function Z9t(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function nte(e){Pe.call(this,[],e),this.generator=Zct()}nte.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(nte,Pe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)vn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(bOe(n[0],i)):t.add.push(_r(i)),n[0]=i,t}});function rte(e){Pe.call(this,null,e)}rte.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(rte,Pe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||va,s=tBt(e.opacity,e),o=eBt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?d0(n.map(l=>d0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=gn({},l,u);r||(f.$max=d0(c.values||[])),l[a]=nBt(c,f,o.dep?o:ba(o(f)),s.dep?s:ba(s(f)))}),t.reflow(!0).modifies(a)}});function eBt(e,t){let n;return vn(e)?(n=r=>M0(e(r,t)),n.dep=_Me(e)):n=ba(M0(e||"#888")),n}function tBt(e,t){let n;return vn(e)?(n=r=>e(r,t),n.dep=_Me(e)):e?n=ba(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function _Me(e){if(!vn(e))return!1;const t=zf(fa(e));return t.$x||t.$y||t.$value||t.$max}function nBt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Bg,d=S0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function wMe(e){Pe.call(this,null,e),this.modified(!0)}lt(wMe,Pe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=iBt(e.type),YV.forEach(r=>{e[r]!=null&&wpe(n,r,e[r])})):YV.forEach(r=>{e.modified(r)&&wpe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&rBt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function rBt(e,t){const n=sBt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function iBt(e){const t=Gee((e||"mercator").toLowerCase());return t||Me("Unrecognized projection type: "+e),t()}function wpe(e,t,n){vn(e[t])&&e[t](n)}function sBt(e){return e=ht(e),e.length===1?e[0]:{type:Qee,features:e.reduce((t,n)=>t.concat(oBt(n)),[])}}function oBt(e){return e.type===Qee?e.features:ht(e).filter(t=>t!=null).map(t=>t.type===KV?t:{type:KV,geometry:t})}const aBt=Object.freeze(Object.defineProperty({__proto__:null,contour:Xee,geojson:Jee,geopath:Zee,geopoint:ete,geoshape:tte,graticule:nte,heatmap:rte,isocontour:Yee,kde2d:Kee,projection:wMe},Symbol.toStringTag,{value:"Module"})),Epe={center:Vlt,collide:uct,nbody:bct,link:cct,x:_ct,y:wct},xA="forces",XV=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],uBt=["static","iterations"],EMe=["x","y","vx","vy"];function ite(e){Pe.call(this,null,e)}ite.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:EMe}]};lt(ite,Pe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(XV),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&xMe(n,e,0,t)):(this.value=n=cBt(t.source,e),n.on("tick",lBt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(uBt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==xA||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(EMe)}});function lBt(e,t){return()=>e.touch(t).run()}function cBt(e,t){const n=vct(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),xMe(n,t,!0).on("end",()=>s=!0)}function xMe(e,t,n,r){var i=ht(t.forces),s,o,a,u;for(s=0,o=XV.length;s<o;++s)a=XV[s],a!==xA&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=xA+s,a=n||t.modified(xA,s)?dBt(i[s]):r&&fBt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(xA+s,null);return e.numForces=i.length,e}function fBt(e,t){var n,r;for(n in e)if(vn(r=e[n])&&t.modified(fa(r)))return 1;return 0}function dBt(e){var t,n;Ft(Epe,e.force)||Me("Unrecognized force: "+e.force),t=Epe[e.force]();for(n in e)vn(t[n])&&hBt(t[n],e[n],e);return t}function hBt(e,t,n){e(vn(t)?r=>t(r,n):t)}const pBt=Object.freeze(Object.defineProperty({__proto__:null,force:ite},Symbol.toStringTag,{value:"Module"}));function QV(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function ste(e){Pe.call(this,null,e)}ste.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const mBt=e=>e.values;lt(ste,Pe,{transform(e,t){t.source||Me("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&kF(o.data)&&i.rem.push(o.data)}),this.value=s=HL({values:ht(e.keys).reduce((o,a)=>(o.key(a),o),gBt()).entries(i.source)},mBt),n&&s.each(o=>{o.children&&(o=_r(o.data),i.add.push(o),i.source.push(o))}),QV(s,Mt,Mt)),i.source.root=s,i}});function gBt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function eg(e){Pe.call(this,null,e)}const yBt=(e,t)=>e.parent===t.parent?1:2;lt(eg,Pe,{transform(e,t){(!t.source||!t.source.root)&&Me(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Db(e.sort,o=>o.data)),vBt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?yBt:pS);try{this.value=n(i)}catch(o){Me(o)}return i.each(o=>bBt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function vBt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function bBt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const JV=["x","y","r","depth","children"];function ote(e){eg.call(this,e)}ote.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:JV.length,default:JV}]};lt(ote,eg,{layout:ESe,params:["radius","size","padding"],fields:JV});const ZV=["x0","y0","x1","y1","depth","children"];function ate(e){eg.call(this,e)}ate.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:ZV.length,default:ZV}]};lt(ate,eg,{layout:wdt,params:["size","round","padding"],fields:ZV});function ute(e){Pe.call(this,null,e)}ute.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(ute,Pe,{transform(e,t){t.source||Me("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?QV(nle().id(e.key).parentId(e.parentKey)(i.source),e.key,Ac):QV(nle()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const xpe={tidy:Ndt,cluster:Hft},eH=["x","y","depth","children"];function lte(e){eg.call(this,e)}lte.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:eH.length,default:eH}]};lt(lte,eg,{layout(e){const t=e||"tidy";if(Ft(xpe,t))return xpe[t]();Me("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:eH});function cte(e){Pe.call(this,[],e)}cte.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(cte,Pe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Me("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Mt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Mt(a)]&&s[Mt(u)]&&i.add.push(_r({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Mt(o)]=1),n.forEach(o=>{(s[Mt(o.source)]||s[Mt(o.target)])&&i.mod.push(o)})),i}});const Spe={binary:Ddt,dice:YI,slice:qL,slicedice:Odt,squarify:ASe,resquarify:$dt},tH=["x0","y0","x1","y1","depth","children"];function fte(e){eg.call(this,e)}fte.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:tH.length,default:tH}]};lt(fte,eg,{layout(){const e=Pdt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ft(Spe,t)?e.tile(Spe[t]):Me("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:tH});const _Bt=Object.freeze(Object.defineProperty({__proto__:null,nest:ste,pack:ote,partition:ate,stratify:ute,tree:lte,treelinks:cte,treemap:fte},Symbol.toStringTag,{value:"Module"})),v9=4278190080;function wBt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function EBt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=S0(s,o).getContext("2d"),l=S0(s,o).getContext("2d"),c=a&&S0(s,o).getContext("2d");n.forEach(A=>SD(u,A,!1)),SD(l,t,!1),a&&SD(c,t,!0);const f=b9(u,s,o),d=b9(l,s,o),h=a&&b9(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,S,T;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&v9,T=d[w]&v9,S=a&&h[w]&v9,(E||S||T)&&(v=e(g),b=e(y),!i&&(E||T)&&p.set(v,b),a&&(E||S)&&m.set(v,b));return[p,m]}function b9(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function SD(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>SD(e,s.items,n))}):Fl[r].draw(e,{items:n?t.map(xBt):t})}function xBt(e){const t=RF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const cp=5,Ra=31,tI=32,kg=new Uint32Array(tI+1),ff=new Uint32Array(tI+1);ff[0]=0;kg[0]=~ff[0];for(let e=1;e<=tI;++e)ff[e]=ff[e-1]<<1|1,kg[e]=~ff[e];function SBt(e,t){const n=new Uint32Array(~~((e*t+tI)/tI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>cp]&1<<(a&Ra)},set:(s,o)=>{const a=o*e+s;r(a>>>cp,1<<(a&Ra))},clear:(s,o)=>{const a=o*e+s;i(a>>>cp,~(1<<(a&Ra)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>cp,h=f>>>cp,d===h){if(n[d]&kg[c&Ra]&ff[(f&Ra)+1])return!0}else{if(n[d]&kg[c&Ra]||n[h]&ff[(f&Ra)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>cp,d=c>>>cp,f===d)r(f,kg[l&Ra]&ff[(c&Ra)+1]);else for(r(f,kg[l&Ra]),r(d,ff[(c&Ra)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>cp,d=c>>>cp,f===d)i(f,ff[l&Ra]|kg[(c&Ra)+1]);else for(i(f,ff[l&Ra]),i(d,kg[(c&Ra)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function TBt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>SBt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function ABt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Sl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function H$(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function e0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function CBt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!H$(p,m,d,h,i,s)&&!e0(e,p,m,h,d,g,o,a)&&!e0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,e0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Sl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,S,T,A,C,I,R,M,P,O,F,L,B,U;for(let H=0;H<f;++H){for(v=c[H].x,w=c[H].y,b=c[H].x2===void 0?v:c[H].x2,E=c[H].y2===void 0?w:c[H].y2,v>b&&(U=v,v=b,b=U),w>E&&(U=w,w=E,E=U),I=e(v),M=e(b),R=~~((I+M)/2),P=e(w),F=e(E),O=~~((P+F)/2),A=R;A>=I;--A)for(C=O;C>=P;--C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);for(A=R;A<=M;++A)for(C=O;C<=F;++C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(L=Math.abs(b-v+E-w),S=(v+b)/2,T=(w+E)/2,L>=y&&!H$(S,T,h,d,i,s)&&!e0(e,S,T,d,h,d,o,null)&&(y=L,l.x=S,l.y=T,g=!0))}return m||g?(S=h/2,T=d/2,o.setRange(e(l.x-S),e(l.y-T),e(l.x+S),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const IBt=[-1,-1,1,1],kBt=[-1,1,-1,1];function RBt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Sl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,S,T,A,C,I,R,M,P,O;for(let F=0;F<f;++F){for(b=c[F].x,E=c[F].y,w=c[F].x2===void 0?b:c[F].x2,S=c[F].y2===void 0?E:c[F].y2,p.push([e((b+w)/2),e((E+S)/2)]);p.length;)if([C,I]=p.pop(),!(o.get(C,I)||a.get(C,I)||u.get(C,I))){u.set(C,I);for(let L=0;L<4;++L)T=C+IBt[L],A=I+kBt[L],u.outOfBounds(T,A,T,A)||p.push([T,A]);if(T=e.invert(C),A=e.invert(I),R=m,M=s,!H$(T,A,h,d,i,s)&&!e0(e,T,A,d,h,R,o,a)&&!e0(e,T,A,d,h,d,o,null)){for(;M-R>=1;)P=(R+M)/2,e0(e,T,A,d,h,P,o,a)?M=P:R=P;R>m&&(l.x=T,l.y=A,m=R,g=!0)}}!g&&!n&&(O=Math.abs(w-b+S-E),T=(b+w)/2,A=(E+S)/2,O>=v&&!H$(T,A,h,d,i,s)&&!e0(e,T,A,d,h,d,o,null)&&(v=O,l.x=T,l.y=A,y=!0))}return g||y?(T=h/2,A=d/2,o.setRange(e(l.x-T),e(l.y-A),e(l.x+T),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const NBt=["right","center","left"],PBt=["bottom","middle","top"];function DBt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,S,T,A,C,I,R;for(let M=0;M<u;++M){if(h=(n[M]&3)-1,p=(n[M]>>>2&3)-1,m=h===0&&p===0||r[M]<0,g=h&&p?Math.SQRT1_2:1,y=r[M]<0?-1:1,v=c[1+h]+r[M]*h*g,T=c[4+p]+y*f*p/2+r[M]*p*g,w=T-f/2,E=T+f/2,A=e(v),I=e(w),R=e(E),!d)if(Tpe(A,A,I,R,o,a,v,v,w,E,c,m))d=Sl.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,b=S+d/2,A=e(v),C=e(b),Tpe(A,C,I,R,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:S,l.y=p?p*y<0?E:w:T,l.align=NBt[h*y+1],l.baseline=PBt[p*y+1],o.setRange(A,I,C,R),!0}return!1}}function Tpe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const _9=0,w9=4,E9=8,x9=0,S9=1,T9=2,OBt={"top-left":_9+x9,top:_9+S9,"top-right":_9+T9,left:w9+x9,middle:w9+S9,right:w9+T9,"bottom-left":E9+x9,bottom:E9+S9,"bottom-right":E9+T9},$Bt={naive:ABt,"reduced-search":CBt,floodfill:RBt};function MBt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=LBt(r,f),h=FBt(i,f),p=jBt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=BBt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const S=e.map(I=>{const R=v?Sl.width(I,I.text):void 0;return w=Math.max(w,R),E=Math.max(E,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(I),textWidth:R}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const T=TBt(t[0],t[1],l);let A;if(!b){n&&S.sort((M,P)=>n(M.datum,P.datum));let I=!1;for(let M=0;M<h.length&&!I;++M)I=h[M]===5||d[M]<0;const R=(p&&o||g)&&e.map(M=>M.datum);A=s.length||R?EBt(T,R||[],s,I,g):wBt(T,o&&S)}const C=g?$Bt[c](T,A,o,u):DBt(T,A,h,d);return S.forEach(I=>I.opacity=+C(I)),S}function LBt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function FBt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=OBt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function jBt(e){return e&&e.mark&&e.mark.marktype}function BBt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const nH=["x","y","opacity","align","baseline"],SMe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function dte(e){Pe.call(this,null,e)}dte.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:SMe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:nH.length,default:nH}]};lt(dte,Pe,{transform(e,t){function n(s){const o=e[s];return vn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Me("Size parameter should be specified as a [width, height] array.");const i=e.as||nH;return MBt(t.materialize(t.SOURCE).source||[],e.size,e.sort,ht(e.offset==null?1:e.offset),ht(e.anchor||SMe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const UBt=Object.freeze(Object.defineProperty({__proto__:null,label:dte},Symbol.toStringTag,{value:"Module"}));function TMe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function hte(e){Pe.call(this,null,e)}hte.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(hte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=TMe(r,e.groupby),s=(e.groupby||[]).map(Gi),o=s.length,a=e.as||[Gi(e.x),Gi(e.y)],u=[];i.forEach(l=>{LOe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(_r(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const rH={constant:TZ,linear:AZ,log:DOe,exp:OOe,pow:$Oe,quad:CZ,poly:MOe},zBt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function pte(e){Pe.call(this,null,e)}pte.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(rH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(pte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=TMe(r,e.groupby),s=(e.groupby||[]).map(Gi),o=e.method||"linear",a=e.order==null?3:e.order,u=zBt(o,a),l=e.as||[Gi(e.x),Gi(e.y)],c=rH[o],f=[];let d=e.extent;Ft(rH,o)||Me("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(_r({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||xh(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(_r(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):LF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const VBt=Object.freeze(Object.defineProperty({__proto__:null,loess:hte,regression:pte},Symbol.toStringTag,{value:"Module"}));function mte(e){Pe.call(this,null,e)}mte.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const HBt=[-1e5,-1e5,1e5,1e5];lt(mte,Pe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:HBt;const s=this.value=AY.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!WBt(u)?qBt(u):null}return t.reflow(e.modified()).modifies(n)}});function qBt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function WBt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const GBt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:mte},Symbol.toStringTag,{value:"Module"}));var A9=Math.PI/180,SA=64,TD=2048;function YBt(){var e=[256,256],t,n,r,i,s,o,a,u=AMe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(S0()),m=eUt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,T)=>T.size-S.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,KBt(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?QBt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(SA<<5)/m,p.height=TD/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,S=-E,T,A,C;(T=w(S+=E))&&(A=~~T[0],C=~~T[1],!(Math.min(Math.abs(A),Math.abs(C))>=b));)if(m.x=y+A,m.y=v+C,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!XBt(m,p,e[0]))&&(!g||JBt(m,g))){for(var I=m.sprite,R=m.width>>5,M=e[0]>>5,P=m.x-(R<<4),O=P&127,F=32-O,L=m.y1-m.y0,B=(m.y+m.y0)*M+(P>>5),U,H=0;H<L;H++){U=0;for(var D=0;D<=R;D++)p[B+D]|=U<<F|(D<R?(U=I[H*R+D])>>>O:0);B+=M}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=t1(p),f):n},f.fontStyle=function(p){return arguments.length?(i=t1(p),f):i},f.fontWeight=function(p){return arguments.length?(s=t1(p),f):s},f.rotate=function(p){return arguments.length?(o=t1(p),f):o},f.text=function(p){return arguments.length?(t=t1(p),f):t},f.spiral=function(p){return arguments.length?(u=tUt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=t1(p),f):r},f.padding=function(p){return arguments.length?(a=t1(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function KBt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(SA<<5)/s,TD/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*A9),g=Math.cos(t.rotate*A9),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=SA<<5&&(o=0,a+=u,u=0),a+d>=TD)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*A9),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(SA<<5)/s,TD/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var T=0,A=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var C=f*p+(h>>5),I=E[(a+p)*(SA<<5)+(o+h)<<2]?1<<31-h%32:0;S[C]|=I,T|=I}T?A=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+A,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function XBt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function QBt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function JBt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function AMe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function ZBt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function eUt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function t1(e){return typeof e=="function"?e:function(){return e}}var tUt={archimedean:AMe,rectangular:ZBt};const CMe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],nUt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function gte(e){Pe.call(this,YBt(),e)}gte.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:CMe}]};lt(gte,Pe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Me("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return vn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||nUt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||CMe;let a=e.fontSize||14,u;if(vn(a)?u=e.fontSizeRange:a=ba(a),u){const p=a,m=mr("sqrt")().domain(xh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Ic).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const rUt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:gte},Symbol.toStringTag,{value:"Module"})),iUt=e=>new Uint8Array(e),sUt=e=>new Uint16Array(e),EC=e=>new Uint32Array(e);function oUt(){let e=8,t=[],n=EC(0),r=QN(0,e),i=QN(0,e);return{data:()=>t,seen:()=>n=aUt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=QN(s,e,r),i=QN(s,e))}}}function aUt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function QN(e,t,n){const r=(t<257?iUt:t<65537?sUt:EC)(e);return n&&r.set(n),r}function Ape(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Cpe(){let e=EC(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=EC(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=uUt(h,d),c)p=t,m=e,t=Array(c+f),e=EC(c+f),lUt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[ast(u,a[0],0,l),O0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function uUt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),cst(e,t)}function lUt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function yte(e){Pe.call(this,oUt(),e),this._indices=null,this._dims=null}yte.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(yte,Pe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Cpe()),s.push(Ape(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,S,T;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,S=v.length;E<S;++E)w[v[E]._index]=1;for(E=0;E<h;++E)T=r[E],(!o[E]||e.modified("fields",E)||t.modified(T.fields))&&(y=T.fname,(m=p[y])||(s[y]=g=Cpe(),p[y]=m=g.insert(T,t.source,0)),o[E]=Ape(g,E,i[E]).onAdd(m,u));for(E=0,S=a.data().length;E<S;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function vte(e){Pe.call(this,null,e)}vte.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(vte,Pe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const cUt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:yte,resolvefilter:vte},Symbol.toStringTag,{value:"Module"})),fUt="RawCode",Zv="Literal",dUt="Property",hUt="Identifier",pUt="ArrayExpression",mUt="BinaryExpression",IMe="CallExpression",gUt="ConditionalExpression",yUt="LogicalExpression",vUt="MemberExpression",bUt="ObjectExpression",_Ut="UnaryExpression";function Jf(e){this.type=e}Jf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=wUt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function wUt(e){switch(e.type){case pUt:return e.elements;case mUt:case yUt:return[e.left,e.right];case IMe:return[e.callee].concat(e.arguments);case gUt:return[e.test,e.consequent,e.alternate];case vUt:return[e.object,e.property];case bUt:return e.properties;case dUt:return[e.key,e.value];case _Ut:return[e.argument];case hUt:case Zv:case fUt:default:return[]}}var Wh,kt,$e,ha,Nr,t4=1,Yk=2,eb=3,Fy=4,n4=5,Mb=6,yu=7,Kk=8,EUt=9;Wh={};Wh[t4]="Boolean";Wh[Yk]="<end>";Wh[eb]="Identifier";Wh[Fy]="Keyword";Wh[n4]="Null";Wh[Mb]="Numeric";Wh[yu]="Punctuator";Wh[Kk]="String";Wh[EUt]="RegularExpression";var xUt="ArrayExpression",SUt="BinaryExpression",TUt="CallExpression",AUt="ConditionalExpression",kMe="Identifier",CUt="Literal",IUt="LogicalExpression",kUt="MemberExpression",RUt="ObjectExpression",NUt="Property",PUt="UnaryExpression",to="Unexpected token %0",DUt="Unexpected number",OUt="Unexpected string",$Ut="Unexpected identifier",MUt="Unexpected reserved word",LUt="Unexpected end of input",iH="Invalid regular expression",C9="Invalid regular expression: missing /",RMe="Octal literals are not allowed in strict mode.",FUt="Duplicate data property in object literal not allowed in strict mode",To="ILLEGAL",nI="Disabled.",jUt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),BUt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function r4(e,t){if(!e)throw new Error("ASSERT: "+t)}function xp(e){return e>=48&&e<=57}function bte(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function xC(e){return"01234567".indexOf(e)>=0}function UUt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function rI(e){return e===10||e===13||e===8232||e===8233}function Xk(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&jUt.test(String.fromCharCode(e))}function q$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&BUt.test(String.fromCharCode(e))}const zUt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function NMe(){for(;$e<ha;){const e=kt.charCodeAt($e);if(UUt(e)||rI(e))++$e;else break}}function sH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<ha&&bte(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):hr({},to,To);return String.fromCharCode(i)}function VUt(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&hr({},to,To);$e<ha&&(e=kt[$e++],!!bte(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&hr({},to,To),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function PMe(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&hr({},to,To),++$e,e=sH("u"),(!e||e==="\\"||!Xk(e.charCodeAt(0)))&&hr({},to,To),t=e);$e<ha&&(e=kt.charCodeAt($e),!!q$(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&hr({},to,To),++$e,e=sH("u"),(!e||e==="\\"||!q$(e.charCodeAt(0)))&&hr({},to,To),t+=e);return t}function HUt(){var e,t;for(e=$e++;$e<ha;){if(t=kt.charCodeAt($e),t===92)return $e=e,PMe();if(q$(t))++$e;else break}return kt.slice(e,$e)}function qUt(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?PMe():HUt(),t.length===1?n=eb:zUt.hasOwnProperty(t)?n=Fy:t==="null"?n=n4:t==="true"||t==="false"?n=t4:n=eb,{type:n,value:t,start:e,end:$e}}function I9(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:yu,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:yu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:yu,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:yu,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:yu,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:yu,value:i,start:e,end:$e};if(i==="//"&&hr({},to,To),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:yu,value:r,start:e,end:$e};hr({},to,To)}function WUt(e){let t="";for(;$e<ha&&bte(kt[$e]);)t+=kt[$e++];return t.length===0&&hr({},to,To),Xk(kt.charCodeAt($e))&&hr({},to,To),{type:Mb,value:parseInt("0x"+t,16),start:e,end:$e}}function GUt(e){let t="0"+kt[$e++];for(;$e<ha&&xC(kt[$e]);)t+=kt[$e++];return(Xk(kt.charCodeAt($e))||xp(kt.charCodeAt($e)))&&hr({},to,To),{type:Mb,value:parseInt(t,8),octal:!0,start:e,end:$e}}function Ipe(){var e,t,n;if(n=kt[$e],r4(xp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,WUt(t);if(xC(n))return GUt(t);n&&xp(n.charCodeAt(0))&&hr({},to,To)}for(;xp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];xp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),xp(kt.charCodeAt($e)))for(;xp(kt.charCodeAt($e));)e+=kt[$e++];else hr({},to,To);return Xk(kt.charCodeAt($e))&&hr({},to,To),{type:Mb,value:parseFloat(e),start:t,end:$e}}function YUt(){var e="",t,n,r,i,s=!1;for(t=kt[$e],r4(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<ha;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!rI(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=VUt()):e+=sH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:xC(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<ha&&xC(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<ha&&xC(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(rI(r.charCodeAt(0)))break;e+=r}return t!==""&&hr({},to,To),{type:Kk,value:e,octal:s,start:n,end:$e}}function KUt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";hr({},iH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{hr({},iH)}try{return new RegExp(e,t)}catch{return null}}function XUt(){var e,t,n,r,i;for(e=kt[$e],r4(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<ha;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],rI(e.charCodeAt(0))&&hr({},C9),t+=e;else if(rI(e.charCodeAt(0)))hr({},C9);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||hr({},C9),i=t.substr(1,t.length-2),{value:i,literal:t}}function QUt(){var e,t,n;for(t="",n="";$e<ha&&(e=kt[$e],!!q$(e.charCodeAt(0)));)++$e,e==="\\"&&$e<ha?hr({},to,To):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&hr({},iH,n),{value:n,literal:t}}function JUt(){var e,t,n,r;return Nr=null,NMe(),e=$e,t=XUt(),n=QUt(),r=KUt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function ZUt(e){return e.type===eb||e.type===Fy||e.type===t4||e.type===n4}function DMe(){if(NMe(),$e>=ha)return{type:Yk,start:$e,end:$e};const e=kt.charCodeAt($e);return Xk(e)?qUt():e===40||e===41||e===59?I9():e===39||e===34?YUt():e===46?xp(kt.charCodeAt($e+1))?Ipe():I9():xp(e)?Ipe():I9()}function Tu(){const e=Nr;return $e=e.end,Nr=DMe(),$e=e.end,e}function OMe(){const e=$e;Nr=DMe(),$e=e}function e7t(e){const t=new Jf(xUt);return t.elements=e,t}function kpe(e,t,n){const r=new Jf(e==="||"||e==="&&"?IUt:SUt);return r.operator=e,r.left=t,r.right=n,r}function t7t(e,t){const n=new Jf(TUt);return n.callee=e,n.arguments=t,n}function n7t(e,t,n){const r=new Jf(AUt);return r.test=e,r.consequent=t,r.alternate=n,r}function _te(e){const t=new Jf(kMe);return t.name=e,t}function TA(e){const t=new Jf(CUt);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Rpe(e,t,n){const r=new Jf(kUt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function r7t(e){const t=new Jf(RUt);return t.properties=e,t}function Npe(e,t,n){const r=new Jf(NUt);return r.key=t,r.value=n,r.kind=e,r}function i7t(e,t){const n=new Jf(PUt);return n.operator=e,n.argument=t,n.prefix=!0,n}function hr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(r4(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function i4(e){e.type===Yk&&hr(e,LUt),e.type===Mb&&hr(e,DUt),e.type===Kk&&hr(e,OUt),e.type===eb&&hr(e,$Ut),e.type===Fy&&hr(e,MUt),hr(e,to,e.value)}function pa(e){const t=Tu();(t.type!==yu||t.value!==e)&&i4(t)}function ai(e){return Nr.type===yu&&Nr.value===e}function k9(e){return Nr.type===Fy&&Nr.value===e}function s7t(){const e=[];for($e=Nr.start,pa("[");!ai("]");)ai(",")?(Tu(),e.push(null)):(e.push(tb()),ai("]")||pa(","));return Tu(),e7t(e)}function Ppe(){$e=Nr.start;const e=Tu();return e.type===Kk||e.type===Mb?(e.octal&&hr(e,RMe),TA(e)):_te(e.value)}function o7t(){var e,t,n,r;if($e=Nr.start,e=Nr,e.type===eb)return n=Ppe(),pa(":"),r=tb(),Npe("init",n,r);if(e.type===Yk||e.type===yu)i4(e);else return t=Ppe(),pa(":"),r=tb(),Npe("init",t,r)}function a7t(){var e=[],t,n,r,i={},s=String;for($e=Nr.start,pa("{");!ai("}");)t=o7t(),t.key.type===kMe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?hr({},FUt):i[r]=!0,e.push(t),ai("}")||pa(",");return pa("}"),r7t(e)}function u7t(){pa("(");const e=wte();return pa(")"),e}const l7t={if:1};function c7t(){var e,t,n;if(ai("("))return u7t();if(ai("["))return s7t();if(ai("{"))return a7t();if(e=Nr.type,$e=Nr.start,e===eb||l7t[Nr.value])n=_te(Tu().value);else if(e===Kk||e===Mb)Nr.octal&&hr(Nr,RMe),n=TA(Tu());else{if(e===Fy)throw new Error(nI);e===t4?(t=Tu(),t.value=t.value==="true",n=TA(t)):e===n4?(t=Tu(),t.value=null,n=TA(t)):ai("/")||ai("/=")?(n=TA(JUt()),OMe()):i4(Tu())}return n}function f7t(){const e=[];if(pa("("),!ai(")"))for(;$e<ha&&(e.push(tb()),!ai(")"));)pa(",");return pa(")"),e}function d7t(){$e=Nr.start;const e=Tu();return ZUt(e)||i4(e),_te(e.value)}function h7t(){return pa("."),d7t()}function p7t(){pa("[");const e=wte();return pa("]"),e}function m7t(){var e,t,n;for(e=c7t();;)if(ai("."))n=h7t(),e=Rpe(".",e,n);else if(ai("("))t=f7t(),e=t7t(e,t);else if(ai("["))n=p7t(),e=Rpe("[",e,n);else break;return e}function Dpe(){const e=m7t();if(Nr.type===yu&&(ai("++")||ai("--")))throw new Error(nI);return e}function AD(){var e,t;if(Nr.type!==yu&&Nr.type!==Fy)t=Dpe();else{if(ai("++")||ai("--"))throw new Error(nI);if(ai("+")||ai("-")||ai("~")||ai("!"))e=Tu(),t=AD(),t=i7t(e.value,t);else{if(k9("delete")||k9("void")||k9("typeof"))throw new Error(nI);t=Dpe()}}return t}function Ope(e){let t=0;if(e.type!==yu&&e.type!==Fy)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function g7t(){var e,t,n,r,i,s,o,a,u,l;if(e=Nr,u=AD(),r=Nr,i=Ope(r),i===0)return u;for(r.prec=i,Tu(),t=[e,Nr],o=AD(),s=[u,r,o];(i=Ope(Nr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=kpe(a,u,o),s.push(n);r=Tu(),r.prec=i,s.push(r),t.push(Nr),n=AD(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=kpe(s[l-1].value,s[l-2],n),l-=2;return n}function tb(){var e,t,n;return e=g7t(),ai("?")&&(Tu(),t=tb(),pa(":"),n=tb(),e=n7t(e,t,n)),e}function wte(){const e=tb();if(ai(","))throw new Error(nI);return e}function Ete(e){kt=e,$e=0,ha=kt.length,Nr=null,OMe();const t=wte();if(Nr.type!==Yk)throw new Error("Unexpect token after expression.");return t}var $Me={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function MMe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Me("Missing arguments to clamp function."),o.length>3&&Me("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Me("Missing arguments to if function."),o.length>3&&Me("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function y7t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function LMe(e){e=e||{};const t=e.allowed?zf(e.allowed):{},n=e.forbidden?zf(e.forbidden):{},r=e.constants||$Me,i=(e.functions||MMe)(f),s=e.globalvar,o=e.fieldvar,a=vn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(pt(p))return p;const m=d[p.type];return m==null&&Me("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ft(n,m)?Me("Illegal identifier: "+m):Ft(r,m)?r[m]:Ft(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[y7t(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Me("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Ft(i,m)&&i[m];return y||Me("Unrecognized function: "+m),vn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const $pe=Symbol("vega_selection_getter");function FMe(e){return(!e.getter||!e.getter[$pe])&&(e.getter=Tc(e.field),e.getter[$pe]=!0),e.getter}const xte="intersect",Mpe="union",v7t="vlMulti",b7t="vlPoint",Lpe="or",_7t="and",Ad="_vgsid_",iI=Tc(Ad),w7t="E",E7t="R",x7t="R-E",S7t="R-LE",T7t="R-RE",W$="index:unit";function Fpe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=FMe(a)(e),E0(o)&&(o=ua(o)),E0(r[s])&&(r[s]=ua(r[s])),Fe(r[s])&&E0(r[s][0])&&(r[s]=r[s].map(ua)),a.type===w7t){if(Fe(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===E7t){if(!sw(o,r[s]))return!1}else if(a.type===T7t){if(!sw(o,r[s],!0,!1))return!1}else if(a.type===x7t){if(!sw(o,r[s],!1,!1))return!1}else if(a.type===S7t&&!sw(o,r[s],!1,!0))return!1;return!0}function A7t(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[W$]&&r[W$].value:void 0,o=n===xte,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Fpe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Fpe(t,l),o^h)return h;return a&&o}const jMe=Lx(iI),C7t=jMe.left,I7t=jMe.right;function k7t(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[W$]&&r[W$].value:void 0,o=n===xte,a=iI(t),u=C7t(i,a);if(u===i.length||iI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(I7t(i,a)-u<s.size)return!1}return!0}function R7t(e,t){return e.map(n=>gn(t.fields?{values:t.fields.map(r=>FMe(r)(n.datum))}:{[Ad]:iI(n.datum)},t))}function N7t(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,S;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,S=c.length;E<S;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=R9[`${y}_union`],m[d]=v(g,ht(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(ht(f).reduce((T,A,C)=>(T[c[C].field]=A,T),{})))}else h=Ad,p=iI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Ad]:p}));if(t=t||Mpe,o[Ad]?o[Ad]=R9[`${Ad}_${t}`](...Object.values(o[Ad])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(A=>o[T][A]).reduce((A,C)=>A===void 0?C:R9[`${u[T]}_${t}`](A,C))}),s=Object.keys(a),n&&s.length){const T=r?b7t:v7t;o[T]=t===Mpe?{[Lpe]:s.reduce((A,C)=>(A.push(...a[C]),A),[])}:{[_7t]:s.map(A=>({[Lpe]:a[A]}))}}return o}var R9={[`${Ad}_union`]:bst,[`${Ad}_intersect`]:yst,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ua(t[0]),r=ua(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ua(t[0]),r=ua(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const P7t=":",D7t="@";function Ste(e,t,n,r){t[0].type!==Zv&&Me("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Xn(t).value,o="unit",a=D7t+o,u=P7t+i;s===xte&&!Ft(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ft(r,u)||(r[u]=n.getData(i).tuplesRef())}function BMe(e){const t=this.context.data[e];return t?t.values.value:[]}function O7t(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function $7t(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Ac).insert(t)),1}function M7t(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Qk=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},L7t=Qk("format"),UMe=Qk("timeFormat"),F7t=Qk("utcFormat"),j7t=Qk("timeParse"),B7t=Qk("utcParse"),JN=new Date(2e3,0,1);function s4(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(JN.setYear(2e3),JN.setMonth(e),JN.setDate(t),UMe.call(this,JN,n))}function U7t(e){return s4.call(this,e,1,"%B")}function z7t(e){return s4.call(this,e,1,"%b")}function V7t(e){return s4.call(this,0,2+e,"%A")}function H7t(e){return s4.call(this,0,2+e,"%a")}const q7t=":",W7t="@",oH="%",zMe="$";function Tte(e,t,n,r){t[0].type!==Zv&&Me("First argument to data functions must be a string literal.");const i=t[0].value,s=q7t+i;if(!Ft(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function G7t(e,t,n,r){t[0].type!==Zv&&Me("First argument to indata must be a string literal."),t[1].type!==Zv&&Me("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=W7t+s;Ft(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Wa(e,t,n,r){if(t[0].type===Zv)jpe(n,r,t[0].value);else for(e in n.scales)jpe(n,r,e)}function jpe(e,t,n){const r=oH+n;if(!Ft(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Gh(e,t){if(vn(e))return e;if(pt(e)){const n=t.scales[e];return n&&b4t(n.value)?n.value:void 0}}function Y7t(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Wa,n._range=Wa,n._scale=Wa;const r=i=>"_["+(i.type===Zv?nt(oH+i.value):nt(oH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Ate(e,t){return function(n,r,i){if(n){const s=Gh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const K7t=Ate("area",Pct),X7t=Ate("bounds",Mct),Q7t=Ate("centroid",zct);function J7t(e,t){const n=Gh(e,(t||this).context);return n&&n.scale()}function Z7t(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Cte(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function ezt(){return Cte(this.context.dataflow,"warn",arguments)}function tzt(){return Cte(this.context.dataflow,"info",arguments)}function nzt(){return Cte(this.context.dataflow,"debug",arguments)}function N9(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function aH(e){const t=M0(e),n=N9(t.r),r=N9(t.g),i=N9(t.b);return .2126*n+.7152*r+.0722*i}function rzt(e,t){const n=aH(e),r=aH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function izt(){const e=[].slice.call(arguments);return e.unshift({}),gn(...e)}function VMe(e,t){return e===t||e!==e&&t!==t?!0:Fe(e)?Fe(t)&&e.length===t.length?szt(e,t):!1:mt(e)&&mt(t)?HMe(e,t):!1}function szt(e,t){for(let n=0,r=e.length;n<r;++n)if(!VMe(e[n],t[n]))return!1;return!0}function HMe(e,t){for(const n in e)if(!VMe(e[n],t[n]))return!1;return!0}function Bpe(e){return t=>HMe(e,t)}function ozt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Ac:Fe(n)||kF(n)?n:Bpe(n),c.remove(f)),t&&c.insert(t),r&&(f=Bpe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function azt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function uzt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Upe={};function lzt(e,t){const n=Upe[t]||(Upe[t]=Tc(t));return Fe(e)?e.map(n):n(e)}function Ite(e){return Fe(e)||ArrayBuffer.isView(e)?e:null}function kte(e){return Ite(e)||(pt(e)?e:null)}function czt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ite(e).join(...n)}function fzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return kte(e).indexOf(...n)}function dzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return kte(e).lastIndexOf(...n)}function hzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return kte(e).slice(...n)}function pzt(e,t,n){return vn(n)&&Me("Function argument passed to replace."),String(e).replace(t,n)}function mzt(e){return Ite(e).slice().reverse()}function gzt(e,t,n){return ZZ(e||0,t||0,n||0)}function yzt(e,t){const n=Gh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function vzt(e,t){const n=Gh(e,(t||this).context);return n?n.copy():void 0}function bzt(e,t){const n=Gh(e,(t||this).context);return n?n.domain():[]}function _zt(e,t,n){const r=Gh(e,(n||this).context);return r?Fe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function wzt(e,t){const n=Gh(e,(t||this).context);return n&&n.range?n.range():[]}function Ezt(e,t,n){const r=Gh(e,(n||this).context);return r?r(t):void 0}function xzt(e,t,n,r,i){e=Gh(e,(i||this).context);const s=O3e(t,n);let o=e.domain(),a=o[0],u=Xn(o),l=va;return u-a?l=E3e(e,a,u):e=(e.interpolator?mr("sequential")().interpolator(e.interpolator()):mr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Xn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function Szt(e,t,n){const r=Gh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Tzt(e){let t=null;return function(n){return n?J2(n,t=t||KE(e)):e}}const qMe=e=>e.data;function WMe(e,t){const n=BMe.call(t,e);return n.root&&n.root.lookup||{}}function Azt(e,t,n){const r=WMe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(qMe):void 0}function Czt(e,t){const n=WMe(e,this)[t];return n?n.ancestors().map(qMe):void 0}const GMe=()=>typeof window<"u"&&window||null;function Izt(){const e=GMe();return e?e.screen:{}}function kzt(){const e=GMe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Rzt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function YMe(e,t,n){if(!e)return[];const[r,i]=e,s=new bs().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return N$e(o,s,Nzt(t))}function Nzt(e){let t=null;if(e){const n=ht(e.marktype),r=ht(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Pzt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ht(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Dzt(e){return ht(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Ozt(e,t,n){const{x:r,y:i,mark:s}=n,o=new bs().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),YMe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>$zt(u.x,u.y,t))}function $zt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const sI={random(){return Ic()},cumulativeNormal:OF,cumulativeLogNormal:bZ,cumulativeUniform:xZ,densityNormal:pZ,densityLogNormal:vZ,densityUniform:EZ,quantileNormal:$F,quantileLogNormal:_Z,quantileUniform:SZ,sampleNormal:DF,sampleLogNormal:yZ,sampleUniform:wZ,isArray:Fe,isBoolean:Ly,isDate:E0,isDefined(e){return e!==void 0},isNumber:ur,isObject:mt,isRegExp:PDe,isString:pt,isTuple:kF,isValid(e){return e!=null&&e===e},toBoolean:JJ,toDate(e){return ZJ(e)},toNumber:ua,toString:eZ,indexof:fzt,join:czt,lastindexof:dzt,replace:pzt,reverse:mzt,slice:hzt,flush:RDe,lerp:DDe,merge:izt,pad:MDe,peek:Xn,pluck:lzt,span:Nk,inrange:sw,truncate:LDe,rgb:M0,lab:$O,hcl:MO,hsl:DO,luminance:aH,contrast:rzt,sequence:Iu,format:L7t,utcFormat:F7t,utcParse:B7t,utcOffset:QDe,utcSequence:eOe,timeFormat:UMe,timeParse:j7t,timeOffset:XDe,timeSequence:ZDe,timeUnitSpecifier:jDe,monthFormat:U7t,monthAbbrevFormat:z7t,dayFormat:V7t,dayAbbrevFormat:H7t,quarter:ADe,utcquarter:CDe,week:UDe,utcweek:HDe,dayofyear:BDe,utcdayofyear:VDe,warn:ezt,info:tzt,debug:nzt,extent(e){return xh(e)},inScope:Z7t,intersect:YMe,clampRange:IDe,pinchDistance:azt,pinchAngle:uzt,screen:Izt,containerSize:Rzt,windowSize:kzt,bandspace:gzt,setdata:$7t,pathShape:Tzt,panLinear:EDe,panLog:xDe,panPow:SDe,panSymlog:TDe,zoomLinear:WJ,zoomLog:GJ,zoomPow:T$,zoomSymlog:YJ,encode:M7t,modify:ozt,lassoAppend:Pzt,lassoPath:Dzt,intersectLasso:Ozt},Mzt=["view","item","group","xy","x","y"],Lzt="event.vega.",KMe="this.",Rte={},XMe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${nt(zMe+e)}]`,functions:Fzt,constants:$Me,visitors:Rte},uH=LMe(XMe);function Fzt(e){const t=MMe(e);Mzt.forEach(n=>t[n]=Lzt+n);for(const n in sI)t[n]=KMe+n;return gn(t,Y7t(e,sI,Rte)),t}function cs(e,t,n){return arguments.length===1?sI[e]:(sI[e]=t,n&&(Rte[e]=n),uH&&(uH.functions[e]=KMe+e),this)}cs("bandwidth",yzt,Wa);cs("copy",vzt,Wa);cs("domain",bzt,Wa);cs("range",wzt,Wa);cs("invert",_zt,Wa);cs("scale",Ezt,Wa);cs("gradient",xzt,Wa);cs("geoArea",K7t,Wa);cs("geoBounds",X7t,Wa);cs("geoCentroid",Q7t,Wa);cs("geoShape",Szt,Wa);cs("geoScale",J7t,Wa);cs("indata",O7t,G7t);cs("data",BMe,Tte);cs("treePath",Azt,Tte);cs("treeAncestors",Czt,Tte);cs("vlSelectionTest",A7t,Ste);cs("vlSelectionIdTest",k7t,Ste);cs("vlSelectionResolve",N7t,Ste);cs("vlSelectionTuples",R7t);function Th(e,t){const n={};let r;try{e=pt(e)?e:nt(e)+"",r=Ete(e)}catch{Me("Expression parse error: "+e)}r.visit(s=>{if(s.type!==IMe)return;const o=s.callee.name,a=XMe.visitors[o];a&&a(o,s.arguments,t,n)});const i=uH(r);return i.globals.forEach(s=>{const o=zMe+s;!Ft(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:gn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function jzt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Bzt=zf(["rule"]),zpe=zf(["group","image","rect"]);function Uzt(e,t){let n="";return Bzt[t]||(e.x2&&(e.x?(zpe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(zpe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Nte(e){return(e+"").toLowerCase()}function zzt(e){return Nte(e)==="operator"}function Vzt(e){return Nte(e)==="collect"}function CT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Hzt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var qzt={operator:(e,t)=>CT(e,["_"],t.code),parameter:(e,t)=>CT(e,["datum","_"],t.code),event:(e,t)=>CT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return CT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+nt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Uzt(r,n),i+="return m;",CT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(nt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Hzt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Wzt(e){const t=this;zzt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Gzt(e){const t=this;if(e.params){const n=t.get(e.id);n||Me("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Yzt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Fe(i)?i.map(s=>Vpe(s,n,t)):Vpe(i,n,t)}return t}function Vpe(e,t,n){if(!e||!mt(e))return e;for(let r=0,i=Hpe.length,s;r<i;++r)if(s=Hpe[r],Ft(e,s.key))return s.parse(e,t,n);return e}var Hpe=[{key:"$ref",parse:Kzt},{key:"$key",parse:Qzt},{key:"$expr",parse:Xzt},{key:"$field",parse:Jzt},{key:"$encode",parse:eVt},{key:"$compare",parse:Zzt},{key:"$context",parse:tVt},{key:"$subflow",parse:nVt},{key:"$tupleid",parse:rVt}];function Kzt(e,t){return t.get(e.$ref)||Me("Operator not defined: "+e.$ref)}function Xzt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=tl(t.parameterExpression(e.$expr),e.$fields))}function Qzt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=QJ(e.$key,e.$flat,t.expr.codegen))}function Jzt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Tc(e.$field,e.$name,t.expr.codegen))}function Zzt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ht(e.$compare).map(i=>i&&i.$tupleid?Mt:i);return t.fn[n]||(t.fn[n]=KJ(r,e.$order,t.expr.codegen))}function eVt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=tl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function tVt(e,t){return t}function nVt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function rVt(){return Mt}function iVt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Me("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function sVt(e){var t=this,n=mt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Me("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const oVt={skip:!0};function aVt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function uVt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],oVt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Ac).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function QMe(e,t,n,r){return new JMe(e,t,n,r)}function JMe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||qzt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function qpe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}JMe.prototype=qpe.prototype={fork(){const e=new qpe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Vzt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Nte(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:jzt,parseOperator:Wzt,parseOperatorParameters:Gzt,parseParameters:Yzt,parseStream:iVt,parseUpdate:sVt,getState:aVt,setState:uVt};function lVt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),ZMe(t,e.description()))}function ZMe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function cVt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const P9="default";function fVt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:P9,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?pt(i)?i:i.user:P9,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return pt(r)||(i=r.item,r=r.user),lH(e,r&&r!==P9?r:i||r),i},{cursor:t})}function lH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function G$(e,t){var n=e._runtime.data;return Ft(n,t)||Me("Unrecognized data set: "+t),n[t]}function dVt(e,t){return arguments.length<2?G$(this,e).values.value:o4.call(this,e,Ob().remove(Ac).insert(t))}function o4(e,t){_Oe(t)||Me("Second argument to changes must be a changeset.");const n=G$(this,e);return n.modified=!0,this.pulse(n.input,t)}function hVt(e,t){return o4.call(this,e,Ob().insert(t))}function pVt(e,t){return o4.call(this,e,Ob().remove(t))}function eLe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function tLe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function a4(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function mVt(e){var t=a4(e),n=eLe(e),r=tLe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function gVt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=a4(e),o=t.changedTouches?t.changedTouches[0]:t,s=JF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=yVt(e,n,s),t}function yVt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;pt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:ba(e),item:ba(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Wpe="view",vVt="timer",bVt="window",_Vt={trap:!1};function wVt(e){const t=gn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Fe(r[s])&&(r[s]=zf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function nLe(e,t,n,r){e._eventListeners.push({type:n,sources:ht(t),handler:r})}function EVt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function ZN(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||mt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function xVt(e,t,n){var r=this,i=new PF(n),s=function(l,c){r.runAsync(null,()=>{e===Wpe&&EVt(r,t)&&l.preventDefault(),i.receive(gVt(r,l,c))})},o;if(e===vVt)ZN(r,"timer",t)&&r.timer(s,t);else if(e===Wpe)ZN(r,"view",t)&&r.addEventListener(t,s,_Vt);else if(e===bVt?ZN(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&ZN(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);nLe(r,o,t,s)}return i}function Gpe(e){return e.item}function Ype(e){return e.item.mark.source}function Kpe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function SVt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Gpe),Ype,Kpe(e)),this.on(this.events("view","pointerout",Gpe),Ype,Kpe(t)),this}function TVt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Tl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const AVt="vega-bind",CVt="vega-bind-name",IVt="vega-bind-radio";function kVt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=XJ(r.debounce,i.update))),(r.input==null&&r.element?RVt:PVt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function RVt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),nLe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(NVt(i))}}function NVt(e){return typeof Event<"u"?new Event(e):{type:e}}function PVt(e,t,n,r){const i=r.signal(n.signal),s=Tl("div",{class:AVt}),o=n.input==="radio"?s:s.appendChild(Tl("label"));o.appendChild(Tl("span",{class:CVt},n.name||n.signal)),t.appendChild(s);let a=DVt;switch(n.input){case"checkbox":a=OVt;break;case"select":a=$Vt;break;case"radio":a=MVt;break;case"range":a=LVt;break}a(e,o,n,i)}function DVt(e,t,n,r){const i=Tl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function OVt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Tl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function $Vt(e,t,n,r){const i=Tl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};Y$(o,r)&&(u.selected=!0),i.appendChild(Tl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(Y$(n.options[a],o)){i.selectedIndex=a;return}}}function MVt(e,t,n,r){const i=Tl("span",{class:IVt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};Y$(o,r)&&(u.checked=!0);const l=Tl("input",u);l.addEventListener("change",()=>e.update(o));const c=Tl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)Y$(a[l].value,o)&&(a[l].checked=!0)}}function LVt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||$0(s,i,100),a=Tl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Tl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function Y$(e,t){return e===t||e+""==t+""}function rLe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,eLe(e),tLe(e),a4(e),i,s).background(e.background())}function Pte(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function FVt(e,t,n,r){const i=new r(e.loader(),Pte(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,a4(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function jVt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=ZF(r);e=n._el=e?D9(n,e,!0):null,lVt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||Gk,a=e?s.renderer:s.headless;return n._renderer=a?rLe(n,n._renderer,e,a):null,n._handler=FVt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=D9(n,t,!0):e.appendChild(Tl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=D9(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{kVt(n,u.element||t,u)})),n}function D9(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const IT=e=>+e||0,BVt=e=>({top:e,bottom:e,left:e,right:e});function Xpe(e){return mt(e)?{top:IT(e.top),bottom:IT(e.bottom),left:IT(e.left),right:IT(e.right)}:BVt(IT(e))}async function Dte(e,t,n,r){const i=ZF(t),s=i&&i.headless;return s||Me("Unrecognized renderer type: "+t),await e.runAsync(),rLe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function UVt(e,t){e!==Qg.Canvas&&e!==Qg.SVG&&e!==Qg.PNG&&Me("Unrecognized image type: "+e);const n=await Dte(this,e,t);return e===Qg.SVG?zVt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function zVt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function VVt(e,t){return(await Dte(this,Qg.Canvas,e,t)).canvas()}async function HVt(e){return(await Dte(this,Qg.SVG,e)).svg()}function qVt(e,t,n){return QMe(e,qE,sI,n).parse(t)}function WVt(e){var t=this._runtime.scales;return Ft(t,e)||Me("Unrecognized scale or projection: "+e),t[e].value}var iLe="width",sLe="height",Ote="padding",Qpe={skip:!0};function oLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Ote?r.left+r.right:0)}function aLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Ote?r.top+r.bottom:0)}function GVt(e){var t=e._signals,n=t[iLe],r=t[sLe],i=t[Ote];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=oLe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=aLe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function YVt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(iLe,n,Qpe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(sLe,r,Qpe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function KVt(e){return this._runtime.getState(e||{data:XVt,signals:QVt,recurse:!0})}function XVt(e,t){return t.modified&&Fe(t.input.value)&&!e.startsWith("_:vega:_")}function QVt(e,t){return!(e==="parent"||t instanceof qE.proxy)}function JVt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function ZVt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(qat(n,t))}function eHt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",tHt(r))}function tHt(e){return e==null?"":Fe(e)?uLe(e):mt(e)&&!E0(e)?nHt(e):e+""}function nHt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Fe(n)?uLe(n):lLe(n))}).join(`
`)}function uLe(e){return"["+e.map(lLe).join(", ")+"]"}function lLe(e){return Fe(e)?"[…]":mt(e)&&!E0(e)?"{…}":e}function rHt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function cLe(e,t){const n=this;if(t=t||{},zw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=gn({},e.locale,t.locale);n.locale(cOe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Qg.Canvas,n._scenegraph=new i$e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||eHt,n._redraw=!0,n._handler=new Gk().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=wVt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=qVt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:gn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=oLe(n,n._width),n._viewHeight=aLe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,GVt(n),cVt(n),fVt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function eP(e,t){return Ft(e._signals,t)?e._signals[t]:Me("Unrecognized signal name: "+nt(t))}function fLe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Jpe(e,t,n,r){let i=fLe(n,r);return i||(i=Pte(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Zpe(e,t,n){const r=fLe(t,n);return r&&t._targets.remove(r),e}lt(cLe,zw,{async evaluate(e,t,n){if(await zw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,mVt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&hD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&ZMe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=eP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Xpe(e)):Xpe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(ZF(e)||Me("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(zw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(eP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:YVt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Pte(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Jpe(this,e,eP(this,e),t)},removeSignalListener(e,t){return Zpe(this,eP(this,e),t)},addDataListener(e,t){return Jpe(this,e,G$(this,e).values,t)},removeDataListener(e,t){return Zpe(this,G$(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=lH(this,null);this._globalCursor=!!e,t&&lH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:ZVt,events:xVt,finalize:TVt,hover:SVt,data:dVt,change:o4,insert:hVt,remove:pVt,scale:WVt,initialize:jVt,toImageURL:UVt,toCanvas:VVt,toSVG:HVt,getState:KVt,setState:JVt,_watchPixelRatio:rHt});const iHt="view",K$="[",X$="]",dLe="{",hLe="}",sHt=":",pLe=",",oHt="@",aHt=">",uHt=/[[\]{}]/,lHt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let mLe,gLe;function jy(e,t,n){return mLe=t||iHt,gLe=n||lHt,yLe(e.trim()).map(cH)}function cHt(e){return gLe[e]}function SC(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function yLe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=SC(e,i,pLe,K$+dLe,X$+hLe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function cH(e){return e[0]==="["?fHt(e):dHt(e)}function fHt(e){const t=e.length;let n=1,r;if(n=SC(e,n,X$,K$,X$),n===t)throw"Empty between selector: "+e;if(r=yLe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==aHt)throw"Expected '>' after between selector: "+e;r=r.map(cH);const i=cH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function dHt(e){const t={source:mLe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===hLe){if(a=e.lastIndexOf(dLe),a>=0){try{r=hHt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===oHt&&(i=++a),u=SC(e,a,sHt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=SC(e,a,K$),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=SC(e,a,X$),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==K$)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||uHt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):cHt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function hHt(e){const t=e.split(pLe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function pHt(e){return mt(e)?e:{type:e||"pad"}}const kT=e=>+e||0,mHt=e=>({top:e,bottom:e,left:e,right:e});function gHt(e){return mt(e)?e.signal?e:{top:kT(e.top),bottom:kT(e.bottom),left:kT(e.left),right:kT(e.right)}:mHt(kT(e))}const no=e=>mt(e)&&!Fe(e)?gn({},e):{value:e};function eme(e,t,n,r){return n!=null?(mt(n)&&!Fe(n)||Fe(n)&&n.length&&mt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Oo(e,t,n){for(const r in t)eme(e,r,t[r]);for(const r in n)eme(e,r,n[r],"update")}function xS(e,t,n){for(const r in t)n&&Ft(n,r)||(e[r]=gn(e[r]||{},t[r]));return e}function M_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const $te="mark",Mte="frame",Lte="scope",yHt="axis",vHt="axis-domain",bHt="axis-grid",_Ht="axis-label",wHt="axis-tick",EHt="axis-title",xHt="legend",SHt="legend-band",THt="legend-entry",AHt="legend-gradient",vLe="legend-label",CHt="legend-symbol",IHt="legend-title",kHt="title",RHt="title-text",NHt="title-subtitle";function PHt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!M_(u,e)&&O9(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Mte?i.group:n===$te?gn({},i.mark,i[t]):null;for(u in c)l=M_(u,e)||(u==="fill"||u==="stroke")&&(M_("fill",e)||M_("stroke",e)),l||O9(s,u,c[u]);ht(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)M_(h,e)||O9(s,h,d[h])}),e=gn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=gn(o,e.enter),a&&(e.update=gn(a,e.update)),e}function O9(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const bLe=e=>pt(e)?nt(e):e.signal?`(${e.signal})`:_Le(e);function u4(e){if(e.gradient!=null)return OHt(e);let t=e.signal?`(${e.signal})`:e.color?DHt(e.color):e.field!=null?_Le(e.field):e.value!==void 0?nt(e.value):void 0;return e.scale!=null&&(t=$Ht(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${CD(e.exponent)})`),e.mult!=null&&(t+=`*${CD(e.mult)}`),e.offset!=null&&(t+=`+${CD(e.offset)}`),e.round&&(t=`round(${t})`),t}const tP=(e,t,n,r)=>`(${e}(${[t,n,r].map(u4).join(",")})+'')`;function DHt(e){return e.c?tP("hcl",e.h,e.c,e.l):e.h||e.s?tP("hsl",e.h,e.s,e.l):e.l||e.a?tP("lab",e.l,e.a,e.b):e.r||e.g||e.b?tP("rgb",e.r,e.g,e.b):null}function OHt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:nt(n));for(;t.length&&Xn(t)==null;)t.pop();return t.unshift(bLe(e.gradient)),`gradient(${t.join(",")})`}function CD(e){return mt(e)?"("+u4(e)+")":e}function _Le(e){return wLe(mt(e)?e:{datum:e})}function wLe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Me("Invalid field reference: "+nt(e));return e.signal||(r=pt(r)?Hh(r).map(nt).join("]["):wLe(r)),t+"["+r+"]"}function $Ht(e,t){const n=bLe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+CD(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function MHt(e){let t="";return e.forEach(n=>{const r=u4(n);t+=n.test?`(${n.test})?${r}:`:r}),Xn(t)===":"&&(t+="null"),t}function ELe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=PHt(e,t,n,r,i.config);for(const a in e)o[a]=LHt(e[a],t,s,i);return s}function LHt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=jHt(FHt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function FHt(e){return Fe(e)?MHt(e):u4(e)}function jHt(e,t,n,r){const i=Th(e,t);return i.$fields.forEach(s=>r[s]=1),gn(n,i.$params),i.$expr}const BHt="outer",UHt=["value","update","init","react","bind"];function tme(e,t){Me(e+' for "outer" push: '+nt(t))}function xLe(e,t){const n=e.name;if(e.push===BHt)t.signals[n]||tme("No prior signal definition",n),UHt.forEach(r=>{e[r]!==void 0&&tme("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function fH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function l4(e,t,n,r){return new fH(e,t,n,r)}function Q$(e,t){return l4("operator",e,t)}function $t(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function oI(e,t){return t?{$field:e,$name:t}:{$field:e}}const dH=oI("key");function nme(e,t){return{$compare:e,$order:t}}function zHt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const VHt="ascending",HHt="descending";function qHt(e){return mt(e)?(e.order===HHt?"-":"+")+c4(e.op,e.field):""}function c4(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Fte="scope",hH="view";function Ds(e){return e&&e.signal}function WHt(e){return e&&e.expr}function ID(e){if(Ds(e))return!0;if(mt(e)){for(const t in e)if(ID(e[t]))return!0}return!1}function uf(e,t){return e??t}function yv(e){return e&&e.signal||e}const rme="timer";function aI(e,t){return(e.merge?YHt:e.stream?KHt:e.type?XHt:Me("Invalid stream specification: "+nt(e)))(e,t)}function GHt(e){return e===Fte?hH:e||hH}function YHt(e,t){const n=e.merge.map(i=>aI(i,t)),r=jte({merge:n},e,t);return t.addStream(r).id}function KHt(e,t){const n=aI(e.stream,t),r=jte({stream:n},e,t);return t.addStream(r).id}function XHt(e,t){let n;e.type===rme?(n=t.event(rme,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(GHt(e.source),e.type);const r=jte({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function jte(e,t,n){let r=t.between;return r&&(r.length!==2&&Me('Stream "between" parameter must have 2 entries: '+nt(t)),e.between=[aI(r[0],n),aI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(QHt(t.marktype,t.markname,t.markrole)),t.source===Fte&&r.push("inScope(event.item)"),r.length&&(e.filter=Th("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function QHt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const JHt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function ZHt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Me("Signal update missing events specification."),pt(s)&&(s=jy(s,t.isSubscope()?Fte:hH)),s=ht(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[tqt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Me("Signal encode and update are mutually exclusive."),o="encode(item(),"+nt(r)+")"),i.update=pt(o)?Th(o,t):o.expr!=null?Th(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:JHt,$params:{$value:t.signalRef(o.signal)}}:Me("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(gn(eqt(u,t),i)))}function eqt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):aI(e,t)}}function tqt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function nqt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Me("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Th(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>ZHt(i,t,n.id))}const Br=e=>(t,n,r)=>l4(e,n,t||void 0,r),SLe=Br("aggregate"),rqt=Br("axisticks"),TLe=Br("bound"),Zf=Br("collect"),ime=Br("compare"),iqt=Br("datajoin"),ALe=Br("encode"),sqt=Br("expression"),oqt=Br("facet"),aqt=Br("field"),uqt=Br("key"),lqt=Br("legendentries"),cqt=Br("load"),fqt=Br("mark"),dqt=Br("multiextent"),hqt=Br("multivalues"),pqt=Br("overlap"),mqt=Br("params"),CLe=Br("prefacet"),gqt=Br("projection"),yqt=Br("proxy"),vqt=Br("relay"),ILe=Br("render"),bqt=Br("scale"),Lb=Br("sieve"),_qt=Br("sortitems"),kLe=Br("viewlayout"),wqt=Br("values");let Eqt=0;const RLe={min:"min",max:"max",count:"sum"};function xqt(e,t){const n=e.type||"linear";g3e(n)||Me("Unrecognized scale type: "+nt(n)),t.addScale(e.name,{type:n,domain:void 0})}function Sqt(e,t){const n=t.getScale(e.name).params;let r;n.domain=NLe(e.domain,e,t),e.range!=null&&(n.range=DLe(e,t,n)),e.interpolate!=null&&Oqt(e.interpolate,n),e.nice!=null&&(n.nice=Dqt(e.nice,t)),e.bins!=null&&(n.bins=Pqt(e.bins,t));for(r in e)Ft(n,r)||r==="name"||(n[r]=pc(e[r],t))}function pc(e,t){return mt(e)?e.signal?t.signalRef(e.signal):Me("Unsupported object: "+nt(e)):e}function kD(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>pc(n,t))}function f4(e){Me("Can not find data set: "+nt(e))}function NLe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Me("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Fe(e)?Tqt:e.fields?Cqt:Aqt)(e,t,n)}function Tqt(e,t,n){return e.map(r=>pc(r,n))}function Aqt(e,t,n){const r=n.getData(e.data);return r||f4(e.data),YE(t.type)?r.valuesRef(n,e.field,PLe(e.sort,!1)):b3e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Cqt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=pt(o)?{data:r,field:o}:Fe(o)||o.signal?Iqt(o,n):o,s.push(o),s),[]);return(YE(t.type)?kqt:b3e(t.type)?Rqt:Nqt)(e,n,i)}function Iqt(e,t){const n="_:vega:_"+Eqt++,r=Zf({});if(Fe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+nt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Lb({})]),{data:n,field:"data"}}function kqt(e,t,n){const r=PLe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||f4(l.data),c.countsRef(t,l.field,r)}),a={groupby:dH,pulse:o};r&&(i=r.op||"count",s=r.field?c4(i,r.field):"count",a.ops=[RLe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(SLe(a));const u=t.add(Zf({pulse:$t(i)}));return s=t.add(wqt({field:dH,sort:t.sortRef(r),pulse:$t(u)})),$t(s)}function PLe(e,t){return e&&(!e.field&&!e.op?mt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Me("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!RLe[e.op]&&Me("Multiple domain scales can not be sorted using "+e.op)),e}function Rqt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||f4(i.data),s.domainRef(t,i.field)});return $t(t.add(hqt({values:r})))}function Nqt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||f4(i.data),s.extentRef(t,i.field)});return $t(t.add(dqt({extents:r})))}function Pqt(e,t){return e.signal||Fe(e)?kD(e,t):t.objectProperty(e)}function Dqt(e,t){return e.signal?t.signalRef(e.signal):mt(e)?{interval:pc(e.interval),step:pc(e.step)}:pc(e)}function Oqt(e,t){t.interpolate=pc(e.type||e),e.gamma!=null&&(t.interpolateGamma=pc(e.gamma))}function DLe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(pt(i)){if(r&&Ft(r,i))return e=gn({},e,{range:r[i]}),DLe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=YE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Me("Unrecognized scale range value: "+nt(i))}else if(i.scheme){n.scheme=Fe(i.scheme)?kD(i.scheme,t):pc(i.scheme,t),i.extent&&(n.schemeExtent=kD(i.extent,t)),i.count&&(n.schemeCount=pc(i.count,t));return}else if(i.step){n.rangeStep=pc(i.step,t);return}else{if(YE(e.type)&&!Fe(i))return NLe(i,e,t);Fe(i)||Me("Unsupported range type: "+nt(i))}return i.map(s=>(Fe(s)?kD:pc)(s,t))}function $qt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=pH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=pH(n[i],i,t));t.addProjection(e.name,r)}function pH(e,t,n){return Fe(e)?e.map(r=>pH(r,t,n)):mt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Me("Unsupported parameter object: "+nt(e)):e}const ed="top",SS="left",TS="right",oy="bottom",OLe="center",Mqt="vertical",Lqt="start",Fqt="middle",jqt="end",mH="index",Bte="label",Bqt="offset",ZE="perc",Uqt="perc2",yc="value",Jk="guide-label",Ute="guide-title",zqt="group-title",Vqt="group-subtitle",sme="symbol",RD="gradient",gH="discrete",yH="size",Hqt="shape",qqt="fill",Wqt="stroke",Gqt="strokeWidth",Yqt="strokeDash",Kqt="opacity",zte=[yH,Hqt,qqt,Wqt,Gqt,Yqt,Kqt],Zk={name:1,style:1,interactive:1},er={value:0},vc={value:1},d4="group",$Le="rect",Vte="rule",Xqt="symbol",Fb="text";function uI(e){return e.type=d4,e.interactive=e.interactive||!1,e}function nl(e,t){const n=(r,i)=>uf(e[r],uf(t[r],i));return n.isVertical=r=>Mqt===uf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>uf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>uf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>uf(e.columns,uf(t.columns,+n.isVertical(!0))),n}function MLe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Qqt(e,t,n){const r=t.config.style[n];return r&&r[e]}function h4(e,t,n){return`item.anchor === '${Lqt}' ? ${e} : item.anchor === '${jqt}' ? ${t} : ${n}`}const Hte=h4(nt(SS),nt(TS),nt(OLe));function Jqt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},mt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function LLe(e,t){return t?e?mt(e)?Object.assign({},e,{offset:LLe(e.offset,t)}):{value:e,offset:t}:t:e}function jl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=xS(e.encode,t,Zk)):e.interactive=!1,e}function Zqt(e,t,n,r){const i=nl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:er,x:er,y:er,width:no(f),height:no(d)},update:gn({},u,{opacity:vc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:er}};return Oo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),jl({type:$Le,role:AHt,encode:h},r)}function eWt(e,t,n,r,i){const s=nl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:er,fill:{scale:t,field:yc}};p[l]={signal:h+"datum."+ZE,mult:u},p[c]=er,p[f]={signal:h+"datum."+Uqt,mult:u},p[d]=no(a);const m={enter:p,update:gn({},p,{opacity:vc}),exit:{opacity:er}};return Oo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),jl({type:$Le,role:SHt,key:yc,from:i,encode:m},r)}const tWt=`datum.${ZE}<=0?"${SS}":datum.${ZE}>=1?"${TS}":"${OLe}"`,nWt=`datum.${ZE}<=0?"${oy}":datum.${ZE}>=1?"${ed}":"${Fqt}"`;function ome(e,t,n,r){const i=nl(e,t),s=i.isVertical(),o=no(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:er},update:c={opacity:vc,text:{field:Bte}},exit:{opacity:er}};return Oo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:uf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:nWt},f="y",d="x",h="1-"):(l.align=c.align={signal:tWt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+ZE,mult:a},l[d]=c[d]=o,o.offset=uf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+mH}:void 0,jl({type:Fb,role:vLe,style:Jk,key:yc,from:r,encode:p,overlap:u},n)}function rWt(e,t,n,r,i){const s=nl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Bqt} : datum.${yH}`,h=l?no(l):{field:yH},p=`datum.${mH}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:er,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:vc,x:y.x,y:y.y},exit:{opacity:er}};let E=null,S=null;e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Oo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),zte.forEach(I=>{e[I]&&(v[I]=y[I]={scale:e[I],field:yc})});const T=jl({type:Xqt,role:CHt,key:yc,from:f,clip:l?!0:void 0,encode:g},n.symbols),A=no(c);A.offset=s("labelOffset"),g={enter:y={opacity:er,x:{signal:d,offset:A},y:h},update:v={opacity:vc,text:{field:Bte},x:y.x,y:y.y},exit:{opacity:er}},Oo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const C=jl({type:Fb,role:vLe,style:Jk,key:yc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:er,height:l?no(l):er,opacity:er},exit:{opacity:er},update:v={opacity:vc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:mH}},uI({role:Lte,from:r,encode:xS(g,o,Zk),marks:[T,C],name:u,interactive:a,sort:w})}function iWt(e,t){const n=nl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const qte='item.orient === "left"',Wte='item.orient === "right"',p4=`(${qte} || ${Wte})`,sWt=`datum.vgrad && ${p4}`,oWt=h4('"top"','"bottom"','"middle"'),aWt=h4('"right"','"left"','"center"'),uWt=`datum.vgrad && ${Wte} ? (${aWt}) : (${p4} && !(datum.vgrad && ${qte})) ? "left" : ${Hte}`,lWt=`item._anchor || (${p4} ? "middle" : "start")`,cWt=`${sWt} ? (${qte} ? -90 : 90) : 0`,fWt=`${p4} ? (datum.vgrad ? (${Wte} ? "bottom" : "top") : ${oWt}) : "top"`;function dWt(e,t,n,r){const i=nl(e,t),s={enter:{opacity:er},update:{opacity:vc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:er}};return Oo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:lWt},angle:{signal:cWt},align:{signal:uWt},baseline:{signal:fWt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),jl({type:Fb,role:IHt,style:Ute,from:r,encode:s},n)}function hWt(e,t){let n;return mt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+ame(e.path)+")":e.sphere&&(n="geoShape("+ame(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function ame(e){return mt(e)&&e.signal?e.signal:nt(e)}function FLe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===d4?Lte:t||$te}function pWt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||FLe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function mWt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Gte(e,t){const n=xOe(e.type);n||Me("Unrecognized transform type: "+nt(e.type));const r=l4(n.type.toLowerCase(),null,jLe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function jLe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=gWt(o,t,n)}return r}function gWt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return yWt(e,t,n);if(i===void 0){e.required&&Me("Missing required "+nt(t.type)+" parameter: "+nt(e.name));return}else{if(r==="param")return vWt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Ds(i)?i.map(s=>ume(e,s,n)):ume(e,i,n)}function ume(e,t,n){const r=e.type;if(Ds(t))return cme(r)?Me("Expression references can not be signals."):$9(r)?n.fieldRef(t):fme(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||$9(r);return i&&bWt(t)?n.exprRef(t.expr,t.as):i&&_Wt(t)?oI(t.field,t.as):cme(r)?Th(t,n):wWt(r)?$t(n.getData(t).values):$9(r)?oI(t):fme(r)?n.compareRef(t):t}}function yWt(e,t,n){return pt(t.from)||Me('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function vWt(e,t,n){const r=t[e.name];return e.array?(Fe(r)||Me("Expected an array of sub-parameters. Instead: "+nt(r)),r.map(i=>lme(e,i,n))):lme(e,r,n)}function lme(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Me("Unsupported parameter: "+nt(t));const s=gn(jLe(i,t,n),i.key);return $t(n.add(mqt(s)))}const bWt=e=>e&&e.expr,_Wt=e=>e&&e.field,wWt=e=>e==="data",cme=e=>e==="expr",$9=e=>e==="field",fme=e=>e==="compare";function EWt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Me("Only group marks can be faceted."),r.field!=null?o=a=ND(r,n):(e.data?a=$t(n.getData(e.data).aggregate):(s=Gte(gn({type:"aggregate",groupby:ht(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=ND(r,n),o=a=$t(n.add(s))),i=n.keyRef(r.groupby,!0))):o=$t(n.add(Zf(null,[{}]))),o||(o=ND(e,n)),{key:i,pulse:o,parent:a}}function ND(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:$t(t.getData(e.data).output)}function nb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}nb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=$t(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new nb(e,s,i,r,o)};function BLe(e){return pt(e)?e:null}function dme(e,t,n){const r=c4(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function RT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=qHt(s);let l=BLe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:dH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:$t(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(l4(r,void 0,d)),o&&(t.index[i]=f),c=$t(f),l!=null&&(a[l]=c)}return c}nb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=BLe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&dme(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:$t(r.output)},n&&n.field&&dme(e,u,n),a=e.add(SLe(u)),o=e.add(Zf({pulse:$t(a)})),o={agg:a,ref:$t(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return $t(this.values)},extentRef(e,t){return RT(e,this,"extent","extent",t,!1)},domainRef(e,t){return RT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return RT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return RT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return RT(e,this,"indata","tupleindex",t,!0,!0)}};function xWt(e,t,n){const r=e.from.facet,i=r.name,s=ND(r,t);let o;r.name||Me("Facet must have a name: "+nt(r)),r.data||Me("Facet must reference a data set: "+nt(r)),r.field?o=t.add(CLe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(oqt({key:t.keyRef(r.groupby),group:$t(t.proxy(n.parent)),pulse:s})):Me("Facet must specify groupby or field: "+nt(r));const a=t.fork(),u=a.add(Zf()),l=a.add(Lb({pulse:$t(u)}));a.addData(i,new nb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function SWt(e,t,n){const r=t.add(CLe({pulse:n.pulse})),i=t.fork();i.add(Lb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function ULe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(Q$()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Th(l,t);u.update=c.$expr,u.params=c.$params}function m4(e,t){const n=FLe(e),r=e.type===d4,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Lte||n===Mte,a,u,l,c,f,d,h;const p=n===$te||o||i,m=EWt(e.from,r,t);u=t.add(iqt({key:m.key||(e.key?oI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=$t(u);u=l=t.add(Zf({pulse:g})),u=t.add(fqt({markdef:pWt(e),interactive:mWt(e.interactive,t),clip:hWt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$t(u)}));const y=$t(u);u=c=t.add(ALe(ELe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const T=Gte(S,t),A=T.metadata;(A.generates||A.changes)&&Me("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),T.params.pulse=$t(u),t.add(u=T)}),e.sort&&(u=t.add(_qt({sort:t.compareRef(e.sort),pulse:$t(u)})));const v=$t(u);(i||o)&&(o=t.add(kLe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=$t(o));const b=t.add(TLe({mark:y,pulse:d||v}));h=$t(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?xWt(e,t,m):p?SWt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=TWt(s,h,t));const w=t.add(ILe({pulse:h})),E=t.add(Lb({pulse:$t(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new nb(t,l,w,E)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Me("Marks only support modify triggers."),ULe(S,t,f)}))}function TWt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Ds(s)?n.signalRef(s.signal):s,method:Ds(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Ds(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return $t(n.add(pqt(o)))}function AWt(e,t){const n=t.config.legend,r=e.encode||{},i=nl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;zte.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Me("Missing valid scale for legend.");const p=CWt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=$t(t.add(Zf(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=$t(t.add(lqt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===RD?(h=[Zqt(e,c,n,r.gradient),ome(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${yv(i.gradientLength())})/100))`)):p===gH?h=[eWt(e,c,n,r.gradient,v),ome(e,n,r.labels,v)]:(f=iWt(e,n),h=[rWt(e,n,r,v,yv(f.columns))],d.size=RWt(e,t,h[0].marks)),h=[uI({role:THt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(dWt(e,n,r.title,g)),m4(uI({role:xHt,from:g,encode:xS(kWt(i,e,n),s,Zk),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function CWt(e,t){let n=e.type||sme;return!e.type&&IWt(e)===1&&(e.fill||e.stroke)&&(n=iee(t)?RD:NV(t)?gH:sme),n!==RD?n:NV(t)?gH:RD}function IWt(e){return zte.reduce((t,n)=>t+(e[n]?1:0),0)}function kWt(e,t,n){const r={enter:{},update:{}};return Oo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function RWt(e,t,n){const r=yv(hme("size",e,n)),i=yv(hme("strokeWidth",e,n)),s=yv(NWt(n[1].encode,t,Jk));return Th(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function hme(e,t,n){return t[e]?`scale("${t[e]}",datum)`:MLe(e,n[0].encode)}function NWt(e,t,n){return MLe("fontSize",e)||Qqt("fontSize",t,n)}const PWt=`item.orient==="${SS}"?-90:item.orient==="${TS}"?90:0`;function DWt(e,t){e=pt(e)?{text:e}:e;const n=nl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=$t(t.add(Zf(null,[l])));return u.push(MWt(e,n,OWt(e),c)),e.subtitle&&u.push(LWt(e,n,r.subtitle,c)),m4(uI({role:kHt,from:c,encode:$Wt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function OWt(e){const t=e.encode;return t&&t.title||gn({name:e.name,interactive:e.interactive,style:e.style},t)}function $Wt(e,t){const n={enter:{},update:{}};return Oo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Hte},angle:{signal:PWt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),xS(n,t,Zk)}function MWt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Oo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),jl({type:Fb,role:RHt,style:zqt,from:r,encode:o},n)}function LWt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Oo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),jl({type:Fb,role:NHt,style:Vqt,from:r,encode:o},n)}function FWt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Gte(r,t))}),e.on&&e.on.forEach(r=>{ULe(r,t,e.name)}),t.addDataPipeline(e.name,jWt(e,t,n))}function jWt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Ds(e.values)||ID(e.format)?(r.push(pme(t,e)),r.push(i=n1())):r.push(i=n1({$ingest:e.values,$format:e.format})):e.url?ID(e.url)||ID(e.format)?(r.push(pme(t,e)),r.push(i=n1())):r.push(i=n1({$request:e.url,$format:e.format})):e.source&&(i=a=ht(e.source).map(d=>$t(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=n1()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=vqt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,n1())),i||r.push(n1()),r.push(Lb({})),r}function n1(e){const t=Zf({},e);return t.metadata={source:!0},t}function pme(e,t){return cqt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const zLe=e=>e===oy||e===ed,g4=(e,t,n)=>Ds(e)?VWt(e.signal,t,n):e===SS||e===ed?t:n,ro=(e,t,n)=>Ds(e)?UWt(e.signal,t,n):zLe(e)?t:n,Df=(e,t,n)=>Ds(e)?zWt(e.signal,t,n):zLe(e)?n:t,VLe=(e,t,n)=>Ds(e)?HWt(e.signal,t,n):e===ed?{value:t}:{value:n},BWt=(e,t,n)=>Ds(e)?qWt(e.signal,t,n):e===TS?{value:t}:{value:n},UWt=(e,t,n)=>HLe(`${e} === '${ed}' || ${e} === '${oy}'`,t,n),zWt=(e,t,n)=>HLe(`${e} !== '${ed}' && ${e} !== '${oy}'`,t,n),VWt=(e,t,n)=>Yte(`${e} === '${SS}' || ${e} === '${ed}'`,t,n),HWt=(e,t,n)=>Yte(`${e} === '${ed}'`,t,n),qWt=(e,t,n)=>Yte(`${e} === '${TS}'`,t,n),HLe=(e,t,n)=>(t=t!=null?no(t):t,n=n!=null?no(n):n,mme(t)&&mme(n)?(t=t?t.signal||nt(t.value):null,n=n?n.signal||nt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[gn({test:e},t)].concat(n||[])),mme=e=>e==null||Object.keys(e).length===1,Yte=(e,t,n)=>({signal:`${e} ? (${uw(t)}) : (${uw(n)})`}),WWt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${SS}' ? (${uw(r)}) : `:"")+(n!=null?`${e} === '${oy}' ? (${uw(n)}) : `:"")+(i!=null?`${e} === '${TS}' ? (${uw(i)}) : `:"")+(t!=null?`${e} === '${ed}' ? (${uw(t)}) : `:"")+"(null)"}),uw=e=>Ds(e)?e.signal:e==null?null:nt(e),GWt=(e,t)=>t===0?0:Ds(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Vw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function b_(e,t,n,r){let i;if(t&&Ft(t,e))return t[e];if(Ft(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Ute][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Jk][i]}return null}function gme(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function YWt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Ds(o)){const f=gme([n.axisX,n.axisY]),d=gme([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=ro(o,b_(l,n.axisX,i,r),b_(l,n.axisY,i,r));u={};for(l of d)u[l]=WWt(o.signal,b_(l,n.axisTop,i,r),b_(l,n.axisBottom,i,r),b_(l,n.axisLeft,i,r),b_(l,n.axisRight,i,r))}else a=o===ed||o===oy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?gn({},i,a,u,s):i}function KWt(e,t,n,r){const i=nl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:er},update:a={opacity:vc},exit:{opacity:er}};Oo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=yme(e,0),c=yme(e,1);return o.x=a.x=ro(s,l,er),o.x2=a.x2=ro(s,c),o.y=a.y=Df(s,l,er),o.y2=a.y2=Df(s,c),jl({type:Vte,role:vHt,from:r,encode:u},n)}function yme(e,t){return{scale:e.scale,range:t}}function XWt(e,t,n,r,i){const s=nl(e,t),o=e.orient,a=e.gridScale,u=g4(o,1,-1),l=QWt(e.offset,u);let c,f,d;const h={enter:c={opacity:er},update:d={opacity:vc},exit:f={opacity:er}};Oo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:yc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=ro(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:gn(m,{mult:u,offset:l});return c.x=d.x=ro(o,p,g),c.y=d.y=Df(o,p,g),c.x2=d.x2=Df(o,y),c.y2=d.y2=ro(o,y),f.x=ro(o,p),f.y=Df(o,p),jl({type:Vte,role:bHt,key:yc,from:r,encode:h},n)}function QWt(e,t){if(t!==1)if(!mt(e))e=Ds(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=gn({},e);for(;n.mult!=null;)if(mt(n.mult))n=n.mult=gn({},n.mult);else return n.mult=Ds(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function JWt(e,t,n,r,i,s){const o=nl(e,t),a=e.orient,u=g4(a,-1,1);let l,c,f;const d={enter:l={opacity:er},update:f={opacity:vc},exit:c={opacity:er}};Oo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=no(i);h.mult=u;const p={scale:e.scale,field:yc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=ro(a,er,p),f.y2=l.y2=ro(a,h),c.x=ro(a,p),f.x=l.x=Df(a,er,p),f.x2=l.x2=Df(a,h),c.y=Df(a,p),jl({type:Vte,role:wHt,key:yc,from:r,encode:d},n)}function M9(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function ZWt(e,t,n,r,i,s){const o=nl(e,t),a=e.orient,u=e.scale,l=g4(a,-1,1),c=yv(o("labelFlush")),f=yv(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=no(i);g.mult=l,g.offset=no(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:yc,band:.5,offset:LLe(s.offset,o("labelOffset"))},v=ro(a,p?M9(u,c,'"left"','"right"','"center"'):{value:"center"},BWt(a,"left","right")),b=ro(a,VLe(a,"bottom","top"),p?M9(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=M9(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:er,x:ro(a,y,g),y:Df(a,y,g)},S={enter:E,update:m={opacity:vc,text:{field:Bte},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:er,x:E.x,y:E.y}};Oo(S,{dx:!d&&p?ro(a,w):null,dy:!h&&p?Df(a,w):null}),Oo(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const T=o("labelBound");let A=o("labelOverlap");return A=A||T?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:T?{scale:u,orient:a,tolerance:T}:null}:void 0,m.align!==v&&(m.align=Vw(m.align,v)),m.baseline!==b&&(m.baseline=Vw(m.baseline,b)),jl({type:Fb,role:_Ht,style:Jk,key:yc,from:r,encode:S,overlap:A},n)}function eGt(e,t,n,r){const i=nl(e,t),s=e.orient,o=g4(s,-1,1);let a,u;const l={enter:a={opacity:er,anchor:no(i("titleAnchor",null)),align:{signal:Hte}},update:u=gn({},a,{opacity:vc,text:no(e.title)}),exit:{opacity:er}},c={signal:`lerp(range("${e.scale}"), ${h4(0,1,.5)})`};return u.x=ro(s,c),u.y=Df(s,c),a.angle=ro(s,er,GWt(o,90)),a.baseline=ro(s,VLe(s,oy,ed),{value:oy}),u.angle=a.angle,u.baseline=a.baseline,Oo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),tGt(i,s,l,n),l.update.align=Vw(l.update.align,a.align),l.update.angle=Vw(l.update.angle,a.angle),l.update.baseline=Vw(l.update.baseline,a.baseline),jl({type:Fb,role:EHt,style:Ute,from:r,encode:l},n)}function tGt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Vw(no(a),n.update[u]),!1):!M_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?no(o):ro(t,no(o),no(s))}function nGt(e,t){const n=YWt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=nl(e,n),l=Jqt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=$t(t.add(Zf({},[c]))),d=$t(t.add(rqt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(XWt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(JWt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(ZWt(e,n,r.labels,d,p,l))),c.domain&&h.push(KWt(e,n,r.domain,f)),c.title&&h.push(eGt(e,n,r.title,f)),m4(uI({role:yHt,from:f,encode:xS(rGt(u,e),i,Zk),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function rGt(e,t){const n={enter:{},update:{}};return Oo(n,{orient:e("orient"),offset:e("offset")||0,position:uf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function qLe(e,t,n){const r=ht(e.signals),i=ht(e.scales);return n||r.forEach(s=>xLe(s,t)),ht(e.projections).forEach(s=>$qt(s,t)),i.forEach(s=>xqt(s,t)),ht(e.data).forEach(s=>FWt(s,t)),i.forEach(s=>Sqt(s,t)),(n||r).forEach(s=>nqt(s,t)),ht(e.axes).forEach(s=>nGt(s,t)),ht(e.marks).forEach(s=>m4(s,t)),ht(e.legends).forEach(s=>AWt(s,t)),e.title&&DWt(e.title,t),t.parseLambdas(),t}const iGt=e=>xS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function sGt(e,t){const n=t.config,r=$t(t.root=t.add(Q$())),i=oGt(e,n);i.forEach(l=>xLe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Zf()),o=t.add(ALe(ELe(iGt(e.encode),d4,Mte,e.style,t,{pulse:$t(s)}))),a=t.add(kLe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:$t(o)}));t.operators.pop(),t.pushState($t(o),$t(a),null),qLe(e,t,i),t.operators.push(a);let u=t.add(TLe({mark:r,pulse:$t(a)}));return u=t.add(ILe({pulse:$t(u)})),u=t.add(Lb({pulse:$t(u)})),t.addData("root",new nb(t,s,s,u)),t}function NT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function oGt(e,t){const n=o=>uf(e[o],t[o]),r=[NT("background",n("background")),NT("autosize",pHt(n("autosize"))),NT("padding",gHt(n("padding"))),NT("width",n("width")||0),NT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ht(e.signals).forEach(o=>{Ft(i,o.name)?o=gn(i[o.name],o):r.push(o),s[o.name]=o}),ht(t.signals).forEach(o=>{!Ft(s,o.name)&&!Ft(i,o.name)&&r.push(o)}),r}function WLe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function vme(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}WLe.prototype=vme.prototype={parse(e){return qLe(e,this)},fork(){return new vme(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof fH?$t(e):e;return this.add(yqt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push($t(this.add(Lb({pulse:e})))),this._parent.push(t),this._lookup.push(n?$t(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Xn(this._parent)},encode(){return Xn(this._encode)},lookup(){return Xn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(pt(e))return oI(e,t);e.signal||Me("Unsupported field reference: "+nt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=$t(this.add(aqt(i)))}return r},compareRef(e){let t=!1;const n=s=>Ds(s)?(t=!0,this.signalRef(s.signal)):WHt(s)?(t=!0,this.exprRef(s.expr)):s,r=ht(e.field).map(n),i=ht(e.order).map(n);return t?$t(this.add(ime({fields:r,orders:i}))):nme(r,i)},keyRef(e,t){let n=!1;const r=s=>Ds(s)?(n=!0,$t(i[s.signal])):s,i=this.signals;return e=ht(e).map(r),n?$t(this.add(uqt({fields:e,flat:t}))):zHt(e,t)},sortRef(e){if(!e)return e;const t=c4(e.op,e.field),n=e.order||VHt;return n.signal?$t(this.add(ime({fields:t,orders:this.signalRef(n.signal)}))):nme(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ft(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Me("Duplicate signal name: "+nt(e));const n=t instanceof fH?t:this.add(Q$(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Me("Unrecognized signal name: "+nt(e)),this.signals[e]},signalRef(e){return this.signals[e]?$t(this.signals[e]):(Ft(this.lambdas,e)||(this.lambdas[e]=this.add(Q$(null))),$t(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Th(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!mt(e)?e:this.signalRef(e.signal||Kte(e))},exprRef(e,t){const n={expr:Th(e,this)};return t&&(n.expr.$name=t),$t(this.add(sqt(n)))},addBinding(e,t){this.bindings||Me("Nested signals do not support binding: "+nt(e)),this.bindings.push(gn({signal:e},t))},addScaleProj(e,t){Ft(this.scales,e)&&Me("Duplicate scale or projection name: "+nt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,bqt(t))},addProjection(e,t){this.addScaleProj(e,gqt(t))},getScale(e){return this.scales[e]||Me("Unrecognized scale name: "+nt(e)),this.scales[e]},scaleRef(e){return $t(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ft(this.data,e)&&Me("Duplicate data set name: "+nt(e)),this.data[e]=t},getData(e){return this.data[e]||Me("Undefined data set name: "+nt(e)),this.data[e]},addDataPipeline(e,t){return Ft(this.data,e)&&Me("Duplicate data set name: "+nt(e)),this.addData(e,nb.fromEntries(this,t))}};function Kte(e){return(Fe(e)?aGt:uGt)(e)}function aGt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(mt(i)?i.signal||Kte(i):nt(i))}return n+"]"}function uGt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+nt(r)+":"+(mt(i)?i.signal||Kte(i):nt(i));return t+"}"}function lGt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function cGt(e,t,n){return mt(e)||Me("Input Vega specification must be an object."),t=mS(lGt(),t,e.config),sGt(e,new WLe(t,n)).toRuntime()}var fGt="5.29.0";gn(qE,c4t,Jjt,R9t,aBt,pBt,UBt,_Bt,VBt,GBt,rUt,cUt);const dGt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:bs,CanvasHandler:Gk,CanvasRenderer:j$,DATE:Ku,DAY:aa,DAYOFYEAR:Sh,Dataflow:zw,Debug:yDe,Error:VJ,EventStream:PF,Gradient:O3e,GroupItem:qF,HOURS:Ml,Handler:kee,HybridHandler:T$e,HybridRenderer:zV,Info:gDe,Item:HF,MILLISECONDS:Vf,MINUTES:Ll,MONTH:da,Marks:Fl,MultiPulse:lZ,None:mDe,Operator:Wr,Parameters:NF,Pulse:x0,QUARTER:Yu,RenderType:Qg,Renderer:Wk,ResourceLoader:U3e,SECONDS:Cc,SVGHandler:d$e,SVGRenderer:$ee,SVGStringRenderer:S$e,Scenegraph:i$e,TIME_UNITS:tZ,Transform:Pe,View:cLe,WEEK:Is,Warn:HJ,YEAR:ko,accessor:tl,accessorFields:fa,accessorName:Gi,array:ht,ascending:TF,bandwidthNRD:hZ,bin:AOe,bootstrapCI:COe,boundClip:$$e,boundContext:zk,boundItem:LV,boundMark:e$e,boundStroke:Zm,changeset:Ob,clampRange:IDe,codegenExpression:LMe,compare:KJ,constant:ba,cumulativeLogNormal:bZ,cumulativeNormal:OF,cumulativeUniform:xZ,dayofyear:BDe,debounce:XJ,defaultLocale:iZ,definition:xOe,densityLogNormal:vZ,densityNormal:pZ,densityUniform:EZ,domChild:As,domClear:uc,domCreate:Kg,domFind:Iee,dotbin:IOe,error:Me,expressionFunction:cs,extend:gn,extent:xh,extentIndex:kDe,falsy:bg,fastmap:yS,field:Tc,flush:RDe,font:XF,fontFamily:qk,fontSize:qh,format:dD,formatLocale:A$,formats:aZ,hasOwnProperty:Ft,id:Rk,identity:va,inferType:dOe,inferTypes:hOe,ingest:_r,inherits:lt,inrange:sw,interpolate:see,interpolateColors:zF,interpolateRange:_3e,intersect:N$e,intersectBoxLine:ow,intersectPath:hee,intersectPoint:pee,intersectRule:V3e,isArray:Fe,isBoolean:Ly,isDate:E0,isFunction:vn,isIterable:NDe,isNumber:ur,isObject:mt,isRegExp:PDe,isString:pt,isTuple:kF,key:QJ,lerp:DDe,lineHeight:ry,loader:CF,locale:cOe,logger:qJ,lruCache:ODe,markup:Oee,merge:$De,mergeConfig:mS,multiLineOffset:Tee,one:pS,pad:MDe,panLinear:EDe,panLog:xDe,panPow:SDe,panSymlog:TDe,parse:cGt,parseExpression:Ete,parseSelector:jy,path:BL,pathCurves:cee,pathEqual:M$e,pathParse:KE,pathRectangle:L3e,pathRender:J2,pathSymbols:M3e,pathTrail:F3e,peek:Xn,point:JF,projection:Gee,quantileLogNormal:_Z,quantileNormal:$F,quantileUniform:SZ,quantiles:fZ,quantizeInterpolator:w3e,quarter:ADe,quartiles:dZ,get random(){return Ic},randomInteger:pFt,randomKDE:gZ,randomLCG:hFt,randomLogNormal:ROe,randomMixture:NOe,randomNormal:mZ,randomUniform:POe,read:gOe,regressionConstant:TZ,regressionExp:OOe,regressionLinear:AZ,regressionLoess:LOe,regressionLog:DOe,regressionPoly:MOe,regressionPow:$Oe,regressionQuad:CZ,renderModule:ZF,repeat:pA,resetDefaultLocale:c6t,resetSVGClipId:B3e,resetSVGDefIds:gjt,responseType:mOe,runtimeContext:QMe,sampleCurve:LF,sampleLogNormal:yZ,sampleNormal:DF,sampleUniform:wZ,scale:mr,sceneEqual:Mee,sceneFromJSON:n$e,scenePickVisit:N$,sceneToJSON:t$e,sceneVisit:Hf,sceneZOrder:mee,scheme:oee,serializeXML:_$e,setHybridRendererOptions:djt,setRandom:fFt,span:Nk,splitAccessPath:Hh,stringValue:nt,textMetrics:Sl,timeBin:rOe,timeFloor:GDe,timeFormatLocale:K2,timeInterval:vS,timeOffset:XDe,timeSequence:ZDe,timeUnitSpecifier:jDe,timeUnits:nZ,toBoolean:JJ,toDate:ZJ,toNumber:ua,toSet:zf,toString:eZ,transform:SOe,transforms:qE,truncate:LDe,truthy:Ac,tupleid:Mt,typeParsers:IV,utcFloor:YDe,utcInterval:bS,utcOffset:QDe,utcSequence:eOe,utcdayofyear:VDe,utcquarter:CDe,utcweek:HDe,version:fGt,visitArray:Cg,week:UDe,writeConfig:gS,zero:Bg,zoomLinear:WJ,zoomLog:GJ,zoomPow:T$,zoomSymlog:YJ},Symbol.toStringTag,{value:"Module"}));function hGt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var pGt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},mGt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},gGt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const yGt=Array.prototype.slice,r1=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,yGt.call(t,1))},vGt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var bGt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:vGt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return r1("join",arguments)},indexof:function(){return r1("indexOf",arguments)},lastindexof:function(){return r1("lastIndexOf",arguments)},slice:function(){return r1("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return r1("substring",arguments,String)},split:function(){return r1("split",arguments,String)},replace:function(){return r1("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const _Gt=["view","item","group","xy","x","y"],vH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&vH.add(setImmediate);const wGt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:pGt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),vH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||bGt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>mGt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>gGt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,vH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function PT(e,t,n,r,i,s){const o=a=>wGt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,_Gt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var EGt={operator(e,t){const n=t.ast,r=e.functions;return i=>PT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>PT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>PT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return PT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=PT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&hGt(o,r,s),l}}};const xGt="vega-lite",SGt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',TGt="5.18.1",AGt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],CGt="https://vega.github.io/vega-lite/",IGt="Vega-Lite is a concise high-level language for interactive visualization.",kGt=["vega","chart","visualization"],RGt="build/vega-lite.js",NGt="build/vega-lite.min.js",PGt="build/vega-lite.min.js",DGt="build/src/index",OGt="build/src/index.d.ts",$Gt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},MGt=["bin","build","src","vega-lite*","tsconfig.json"],LGt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},FGt={type:"git",url:"https://github.com/vega/vega-lite.git"},jGt="BSD-3-Clause",BGt={url:"https://github.com/vega/vega-lite/issues"},UGt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},zGt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},VGt={vega:"^5.24.0"},HGt={node:">=18"},qGt="yarn@1.22.19",WGt={name:xGt,author:SGt,version:TGt,collaborators:AGt,homepage:CGt,description:IGt,keywords:kGt,main:RGt,unpkg:NGt,jsdelivr:PGt,module:DGt,types:OGt,bin:$Gt,files:MGt,scripts:LGt,repository:FGt,license:jGt,bugs:BGt,devDependencies:UGt,dependencies:zGt,peerDependencies:VGt,engines:HGt,packageManager:qGt};function Xte(e){return!!e.or}function Qte(e){return!!e.and}function Jte(e){return!!e.not}function PD(e,t){if(Jte(e))PD(e.not,t);else if(Qte(e))for(const n of e.and)PD(n,t);else if(Xte(e))for(const n of e.or)PD(n,t);else t(e)}function Hw(e,t){return Jte(e)?{not:Hw(e.not,t)}:Qte(e)?{and:e.and.map(n=>Hw(n,t))}:Xte(e)?{or:e.or.map(n=>Hw(n,t))}:t(e)}const en=structuredClone;function GLe(e){throw new Error(e)}function ex(e,t){const n={};for(const r of t)Ft(e,r)&&(n[r]=e[r]);return n}function ju(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Lr(e)).join(",")})`};function zn(e){if(ur(e))return e;const t=pt(e)?e:Lr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function bH(e){return e===!1||e===null}function Vn(e,t){return e.includes(t)}function rb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Zte(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function YLe(e,...t){for(const n of t)GGt(e,n??{});return e}function GGt(e,t){for(const n of Ye(t))gS(e,n,t[n],!0)}function Gd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function YGt(e,t){const n=Ye(e),r=Ye(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function KLe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ene(e,t){for(const n of e)if(t.has(n))return!0;return!1}function _H(e){const t=new Set;for(const n of e){const i=Hh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function tne(e,t){return e===void 0||t===void 0?!0:ene(_H(e),_H(t))}function Mr(e){return Ye(e).length===0}const Ye=Object.keys,Ro=Object.values,ay=Object.entries;function lI(e){return e===!0||e===!1}function Ei(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function TC(e,t){return Jte(e)?`!(${TC(e.not,t)})`:Qte(e)?`(${e.and.map(n=>TC(n,t)).join(") && (")})`:Xte(e)?`(${e.or.map(n=>TC(n,t)).join(") || (")})`:t(e)}function J$(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&J$(e[n],t)&&delete e[n],Mr(e)}function eR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function nne(e,t="datum"){const n=Hh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(nt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function XLe(e,t="datum"){return`${t}[${nt(Hh(e).join("."))}]`}function KGt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function kc(e){return`${Hh(e).map(KGt).join("\\.")}`}function ib(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function AS(e){return`${Hh(e).join(".")}`}function tx(e){return e?Hh(e).length:0}function as(...e){for(const t of e)if(t!==void 0)return t}let QLe=42;function JLe(e){const t=++QLe;return e?String(e)+t:t}function XGt(){QLe=42}function ZLe(e){return e6e(e)?e:`__${e}`}function e6e(e){return e.startsWith("__")}function cI(e){if(e!==void 0)return(e%360+360)%360}function y4(e){return ur(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const bme=Object.getPrototypeOf(structuredClone({}));function El(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!El(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!El(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==bme.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==bme.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!El(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Lr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const em="row",tm="column",v4="facet",xi="x",lo="y",td="x2",Yh="y2",By="xOffset",CS="yOffset",nd="radius",tg="radius2",Uc="theta",ng="theta2",rd="latitude",id="longitude",sd="latitude2",Rc="longitude2",Xu="color",Kh="fill",Xh="stroke",Qu="shape",rg="size",jb="angle",ig="opacity",Uy="fillOpacity",zy="strokeOpacity",Vy="strokeWidth",Hy="strokeDash",tR="text",nx="order",nR="detail",b4="key",sb="tooltip",_4="href",w4="url",E4="description",QGt={x:1,y:1,x2:1,y2:1},t6e={theta:1,theta2:1,radius:1,radius2:1};function n6e(e){return e in t6e}const rne={longitude:1,longitude2:1,latitude:1,latitude2:1};function r6e(e){switch(e){case rd:return"y";case sd:return"y2";case id:return"x";case Rc:return"x2"}}function i6e(e){return e in rne}const JGt=Ye(rne),ine={...QGt,...t6e,...rne,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function qw(e){return e===Xu||e===Kh||e===Xh}const s6e={row:1,column:1,facet:1},mc=Ye(s6e),sne={...ine,...s6e},ZGt=Ye(sne),{order:Rsn,detail:Nsn,tooltip:Psn,...eYt}=sne,{row:Dsn,column:Osn,facet:$sn,...tYt}=eYt;function nYt(e){return!!tYt[e]}function o6e(e){return!!sne[e]}const rYt=[td,Yh,sd,Rc,ng,tg];function a6e(e){return Bb(e)!==e}function Bb(e){switch(e){case td:return xi;case Yh:return lo;case sd:return rd;case Rc:return id;case ng:return Uc;case tg:return nd}return e}function uy(e){if(n6e(e))switch(e){case Uc:return"startAngle";case ng:return"endAngle";case nd:return"outerRadius";case tg:return"innerRadius"}return e}function Qh(e){switch(e){case xi:return td;case lo:return Yh;case rd:return sd;case id:return Rc;case Uc:return ng;case nd:return tg}}function Ju(e){switch(e){case xi:case td:return"width";case lo:case Yh:return"height"}}function u6e(e){switch(e){case xi:return"xOffset";case lo:return"yOffset";case td:return"x2Offset";case Yh:return"y2Offset";case Uc:return"thetaOffset";case nd:return"radiusOffset";case ng:return"theta2Offset";case tg:return"radius2Offset"}}function one(e){switch(e){case xi:return"xOffset";case lo:return"yOffset"}}function iYt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const sYt=Ye(ine),{x:Msn,y:Lsn,x2:Fsn,y2:jsn,xOffset:Bsn,yOffset:Usn,latitude:zsn,longitude:Vsn,latitude2:Hsn,longitude2:qsn,theta:Wsn,theta2:Gsn,radius:Ysn,radius2:Ksn,...ane}=ine,oYt=Ye(ane),une={x:1,y:1},Jh=Ye(une);function us(e){return e in une}const lne={theta:1,radius:1},aYt=Ye(lne);function x4(e){return e==="width"?xi:lo}const l6e={xOffset:1,yOffset:1};function rR(e){return e in l6e}const{text:Xsn,tooltip:Qsn,href:Jsn,url:Zsn,description:eon,detail:ton,key:non,order:ron,...c6e}=ane,uYt=Ye(c6e);function lYt(e){return!!ane[e]}function cYt(e){switch(e){case Xu:case Kh:case Xh:case rg:case Qu:case ig:case Vy:case Hy:return!0;case Uy:case zy:case jb:return!1}}const f6e={...une,...lne,...l6e,...c6e},S4=Ye(f6e);function sg(e){return!!f6e[e]}function fYt(e,t){return hYt(e)[t]}const d6e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:ion,...dYt}=d6e;function hYt(e){switch(e){case Xu:case Kh:case Xh:case E4:case nR:case b4:case sb:case _4:case nx:case ig:case Uy:case zy:case Vy:case v4:case em:case tm:return d6e;case xi:case lo:case By:case CS:case rd:case id:return dYt;case td:case Yh:case sd:case Rc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case rg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Hy:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Qu:return{point:"always",geoshape:"always"};case tR:return{text:"always"};case jb:return{point:"always",square:"always",text:"always"};case w4:return{image:"always"};case Uc:return{text:"always",arc:"always"};case nd:return{text:"always",arc:"always"};case ng:case tg:return{arc:"always"}}}function L9(e){switch(e){case xi:case lo:case Uc:case nd:case By:case CS:case rg:case jb:case Vy:case ig:case Uy:case zy:case td:case Yh:case ng:case tg:return;case v4:case em:case tm:case Qu:case Hy:case tR:case sb:case _4:case w4:case E4:return"discrete";case Xu:case Kh:case Xh:return"flexible";case rd:case id:case sd:case Rc:case nR:case b4:case nx:return}}const pYt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},mYt={count:1,min:1,max:1};function Dm(e){return!!e&&!!e.argmin}function qy(e){return!!e&&!!e.argmax}function cne(e){return pt(e)&&!!pYt[e]}const gYt=new Set(["count","valid","missing","distinct"]);function h6e(e){return pt(e)&&gYt.has(e)}function yYt(e){return pt(e)&&Vn(["min","max"],e)}const vYt=new Set(["count","sum","distinct","valid","missing"]),bYt=new Set(["mean","average","median","q1","q3","min","max"]);function p6e(e){return Ly(e)&&(e=M4(e,void 0)),"bin"+Ye(e).map(t=>T4(e[t])?Ei(`_${t}_${ay(e[t])}`):Ei(`_${t}_${e[t]}`)).join("")}function ri(e){return e===!0||Ub(e)&&!e.binned}function wo(e){return e==="binned"||Ub(e)&&e.binned===!0}function Ub(e){return mt(e)}function T4(e){return e==null?void 0:e.param}function _me(e){switch(e){case em:case tm:case rg:case Xu:case Kh:case Xh:case Vy:case ig:case Uy:case zy:case Qu:return 6;case Hy:return 4;default:return 10}}function iR(e){return!!(e!=null&&e.expr)}function Eu(e){const t=Ye(e||{}),n={};for(const r of t)n[r]=ml(e[r]);return n}function m6e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=ex(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Rg(e){return pt(e)||Fe(e)&&pt(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function Wy(e){return!!e.step}function _Yt(e){return Fe(e)?!1:"fields"in e&&!("data"in e)}function wYt(e){return Fe(e)?!1:"fields"in e&&"data"in e}function Hp(e){return Fe(e)?!1:"field"in e&&"data"in e}const EYt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},xYt=Ye(EYt),SYt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},wH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function g6e(e){const t=Fe(e.condition)?e.condition.map(wme):wme(e.condition);return{...ml(e),condition:t}}function ml(e){if(iR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function wme(e){if(iR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function ui(e){if(iR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function TYt(e){return Rt(e)?e.signal:nt(e)}function Eme(e){return Rt(e)?e.signal:nt(e.value)}function Ef(e){return Rt(e)?e.signal:e==null?null:nt(e)}function AYt(e,t,n){for(const r of n){const i=Om(r,t.markDef,t.config);i!==void 0&&(e[r]=ui(i))}return e}function y6e(e){return[].concat(e.type,e.style??[])}function br(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Om(e,t,n,r)}function Om(e,t,n,{vgChannel:r}={}){return as(r?Z$(e,t,n.style):void 0,Z$(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function Z$(e,t,n){return v6e(e,y6e(t),n)}function v6e(e,t,n){t=ht(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function b6e(e,t){return ht(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function _6e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(El(i,r))return;n.push(r)}),n}function w6e(e,t){return El(e,t)||!t?e:e?[...ht(e),...ht(t)].join(", "):t}function E6e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Rg(n)||Rt(n))&&(Rg(r)||Rt(r)))return{explicit:e.explicit,value:w6e(n,r)};if(Rg(n)||Rt(n))return{explicit:e.explicit,value:n};if(Rg(r)||Rt(r))return{explicit:e.explicit,value:r};if(!Rg(n)&&!Rt(n)&&!Rg(r)&&!Rt(r))return{explicit:e.explicit,value:_6e(n,r)};throw new Error("It should never reach here")}function fne(e){return`Invalid specification ${Lr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const CYt='Autosize "fit" only works for single views and layered views.';function xme(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Sme(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Tme(e){return e?`Dropping "fit-${e}" because spec has discrete ${Ju(e)}.`:'Dropping "fit" because spec has discrete size.'}function dne(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Ame(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function IYt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function kYt(e){return`The "nearest" transform is not supported for ${e} marks.`}function x6e(e){return`Selection not supported for ${e} yet.`}function RYt(e){return`Cannot find a selection named "${e}".`}const NYt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",PYt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",DYt="Legend bindings are only supported for selections over an individual field or encoding channel.";function OYt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function $Yt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const MYt="The same selection must be used to override scale domains in a layered view.",LYt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function FYt(e){return`Unknown repeated value "${e}".`}function Cme(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const jYt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function BYt(e){return`Unrecognized parse "${e}".`}function Ime(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const UYt="Attempt to add the same child twice.";function zYt(e){return`Ignoring an invalid transform: ${Lr(e)}.`}const VYt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function kme(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function HYt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Lr(t)} is overridden by a child projection ${Lr(n)}.`}const qYt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function WYt(e){return`${e}Offset dropped because ${e} is continuous`}function GYt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Lr(n)}}.`}function S6e(e){return`Invalid field type "${e}".`}function YYt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function KYt(e){return`Invalid aggregation operator "${e}".`}function T6e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function XYt(e){return`Position range does not support relative band size for ${e}.`}function EH(e,t){return`Dropping ${Lr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const QYt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function A4(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function JYt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function ZYt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function eKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function tKt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function F9(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function nKt(e){return`The ${e} for range marks cannot be an expression`}function rKt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function iKt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function sKt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function oKt(e){return`Cannot use the relative band size with ${e} scale.`}function aKt(e){return`Using unaggregated domain with raw field has no effect (${Lr(e)}).`}function uKt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function lKt(e){return`Unaggregated domain is currently unsupported for log scale (${Lr(e)}).`}function cKt(e){return`Cannot apply size to non-oriented mark "${e}".`}function fKt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function dKt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function A6e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function C6e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function hKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Lr(n)} and ${Lr(r)}). Using ${Lr(n)}.`}function pKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Lr(n)} and ${Lr(r)}). Using the union of the two domains.`}function mKt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function gKt(e){return`Dropping sort property ${Lr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Rme="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",yKt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",vKt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",bKt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function _Kt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function wKt(e){return`Stack is applied to a non-linear scale (${e}).`}function EKt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function eM(e,t){return`Invalid ${e}: ${Lr(t)}.`}function xKt(e){return`Dropping day from datetime ${Lr(e)} as day cannot be combined with other units.`}function SKt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function TKt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function AKt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Nme(e){return`1D error band does not support ${e}.`}function I6e(e){return`Channel ${e} is required for "binned" bin.`}function CKt(e){return`Channel ${e} should not be used with "binned" bin.`}function IKt(e){return`Domain for ${e} is required for threshold scale.`}const k6e=qJ(HJ);let rx=k6e;function kKt(e){return rx=e,rx}function RKt(){return rx=k6e,rx}function Je(...e){rx.warn(...e)}function NKt(...e){rx.debug(...e)}function zb(e){if(e&&mt(e)){for(const t of pne)if(t in e)return!0}return!1}const R6e=["january","february","march","april","may","june","july","august","september","october","november","december"],PKt=R6e.map(e=>e.substr(0,3)),N6e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],DKt=N6e.map(e=>e.substr(0,3));function OKt(e){if(y4(e)&&(e=+e),ur(e))return e>4&&Je(eM("quarter",e)),e-1;throw new Error(eM("quarter",e))}function $Kt(e){if(y4(e)&&(e=+e),ur(e))return e-1;{const t=e.toLowerCase(),n=R6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=PKt.indexOf(r);if(i!==-1)return i;throw new Error(eM("month",e))}}function MKt(e){if(y4(e)&&(e=+e),ur(e))return e%7;{const t=e.toLowerCase(),n=N6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=DKt.indexOf(r);if(i!==-1)return i;throw new Error(eM("day",e))}}function hne(e,t){const n=[];if(t&&e.day!==void 0&&Ye(e).length>1&&(Je(xKt(e)),e=en(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?$Kt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?OKt(e.quarter):e.quarter;n.push(ur(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?MKt(e.day):e.day;n.push(ur(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function ob(e){const n=hne(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function LKt(e){const n=hne(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function FKt(e){const t=hne(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const P6e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},pne=Ye(P6e);function jKt(e){return!!P6e[e]}function Vb(e){return mt(e)?e.binned:D6e(e)}function D6e(e){return e&&e.startsWith("binned")}function mne(e){return e.startsWith("utc")}function BKt(e){return e.substring(3)}const UKt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function C4(e){return pne.filter(t=>$6e(e,t))}function O6e(e){const t=C4(e);return t[t.length-1]}function $6e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function zKt(e,t,{end:n}={end:!1}){const r=nne(t),i=mne(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of pne)$6e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),LKt(a)}function M6e(e){if(!e)return;const t=C4(e);return`timeUnitSpecifier(${Lr(t)}, ${Lr(UKt)})`}function VKt(e,t,n){if(!e)return;const r=M6e(e);return`${n||mne(e)?"utc":"time"}Format(${t}, ${r})`}function oo(e){if(!e)return;let t;return pt(e)?D6e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:mt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),mne(t.unit)&&(t.utc=!0,t.unit=BKt(t.unit)),t}function HKt(e){const{utc:t,...n}=oo(e);return n.unit?(t?"utc":"")+Ye(n).map(r=>Ei(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ye(n).map(r=>Ei(`_${r}_${n[r]}`)).join("")}function L6e(e,t=n=>n){const n=oo(e),r=O6e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=F6e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(ob(a))} - ${t(ob(i))}`}}const qKt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function WKt(e){return!!qKt[e]}function F6e(e,t=1){if(WKt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function GKt(e){return e==null?void 0:e.param}function gne(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function yne(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function vne(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function bne(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function _ne(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function wne(e){if(e!=null&&e.field){if(Fe(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function Ene(e){return!!(e!=null&&e.field)&&(Fe(e.oneOf)||Fe(e.in))}function YKt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function j6e(e){return Ene(e)||gne(e)||wne(e)||yne(e)||bne(e)||vne(e)||_ne(e)}function md(e,t){return L4(e,{timeUnit:t,wrapTime:!0})}function KKt(e,t){return e.map(n=>md(n,t))}function B6e(e,t=!0){const{field:n}=e,r=oo(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:zKt(i,n)})`:o;if(gne(e))return`${a}===${md(e.equal,i)}`;if(yne(e)){const u=e.lt;return`${a}<${md(u,i)}`}else if(bne(e)){const u=e.gt;return`${a}>${md(u,i)}`}else if(vne(e)){const u=e.lte;return`${a}<=${md(u,i)}`}else if(_ne(e)){const u=e.gte;return`${a}>=${md(u,i)}`}else{if(Ene(e))return`indexof([${KKt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(YKt(e))return xne(a,e.valid);if(wne(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+md(l,i)+", "+md(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${md(l,i)}`),c!==null&&f.push(`${a} <= ${md(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Lr(e)}`)}function xne(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function XKt(e){return j6e(e)&&e.timeUnit?{...e,timeUnit:oo(e.timeUnit)}:e}const sR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function QKt(e){return e==="quantitative"||e==="temporal"}function U6e(e){return e==="ordinal"||e==="nominal"}const ab=sR.quantitative,Sne=sR.ordinal,ix=sR.temporal,Tne=sR.nominal,IS=sR.geojson;function JKt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case ab:return"quantitative";case"t":case ix:return"temporal";case"o":case Sne:return"ordinal";case"n":case Tne:return"nominal";case IS:return"geojson"}}const Bu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},xH={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function ZKt(e,t){const n=xH[e],r=xH[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const eXt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Pme(e){return eXt[e]}const z6e=new Set(["linear","log","pow","sqrt","symlog"]),V6e=new Set([...z6e,"time","utc"]);function H6e(e){return z6e.has(e)}const q6e=new Set(["quantile","quantize","threshold"]),tXt=new Set([...V6e,...q6e,"sequential","identity"]),nXt=new Set(["ordinal","bin-ordinal","point","band"]);function ao(e){return nXt.has(e)}function Bl(e){return tXt.has(e)}function xf(e){return V6e.has(e)}function sx(e){return q6e.has(e)}const rXt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function iXt(e){return!pt(e)&&!!e.name}function W6e(e){return e==null?void 0:e.param}function sXt(e){return e==null?void 0:e.unionWith}function oXt(e){return mt(e)&&"field"in e}const aXt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:son,domain:oon,range:aon,rangeMax:uon,rangeMin:lon,scheme:con,...uXt}=aXt,lXt=Ye(uXt);function SH(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return xf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return xf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return xf(e);case"nice":return xf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Bl(e)&&!Vn(["log","time","utc","threshold","quantile"],e)}}function G6e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return qw(e)?void 0:sKt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function cXt(e,t){return Vn([Sne,Tne],t)?e===void 0||ao(e):t===ix?Vn([Bu.TIME,Bu.UTC,void 0],e):t===ab?H6e(e)||sx(e)||e===void 0:!0}function fXt(e,t,n=!1){if(!sg(e))return!1;switch(e){case xi:case lo:case By:case CS:case Uc:case nd:return xf(t)||t==="band"?!0:t==="point"?!n:!1;case rg:case Vy:case ig:case Uy:case zy:case jb:return xf(t)||sx(t)||Vn(["band","point","ordinal"],t);case Xu:case Kh:case Xh:return t!=="band";case Hy:case Qu:return t==="ordinal"||sx(t)}}function Ane(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Ine(e);return Ze(n)&&!h6e(n.aggregate)&&i&&xf(i.get("type"))?dXt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function dXt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return br("invalid",n,i)===null?[hXt(e,t),r]:r}function hXt(e,t){const n=Cne(e,!0),i=Bb(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Cne(e,t=!0){return xne(pt(e)?e:at(e,{expr:"datum"}),!t)}function pXt(e){const{datum:t}=e;return zb(t)?ob(t):`${Lr(t)}`}function vv(e,t,n,r){const i={};if(t&&(i.scale=t),Zh(e)){const{datum:s}=e;zb(s)?i.signal=ob(s):Rt(s)?i.signal=s.signal:iR(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function tM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function mXt({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Ine({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(an(t)){const f=o==null?void 0:o.get("type");if(Za(t)){c??(c=ly({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ri(d)||c&&h&&p===ix)return a!=null&&a.impute?vv(t,s,{binSuffix:"mid"},{offset:u}):c&&!ao(f)?tM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):vv(t,s,lR(t,e)?{binSuffix:"range"}:{},{offset:u});if(wo(d)){if(Ze(n))return tM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Je(I6e(e===xi?td:Yh))}}return vv(t,s,ao(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(qf(t)){const f=t.value,d=u?{offset:u}:{};return{...AC(e,f),...d}}}return vn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function AC(e,t){return Vn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Vn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:ui(t)}function ub(e){return e&&e!=="number"&&e!=="time"}function Y6e(e,t,n){return`${e}(${t}${n?`, ${Lr(n)}`:""})`}const gXt=" – ";function kne({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(ub(n))return Sf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=K6e(e,r,i),a=ox(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Sf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Sf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return Sf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(ux(e)){const c=vXt({field:o,timeUnit:Ze(e)?(u=oo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:qb(e)&&((l=e.scale)==null?void 0:l.type)===Bu.UTC});return c?{signal:c}:void 0}if(t=TH({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ze(e)&&ri(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:oR(o,c,t,n,s)}}else return t||ox(e)==="quantitative"?{signal:`${J6e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function K6e(e,t,n){return Ze(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):pXt(e)}function Sf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=K6e(e,r,i)),o!=="datum.value"&&Ze(e)&&ri(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:oR(o,a,t,n,s)}}return{signal:Y6e(n,o,t)}}function X6e(e,t,n,r,i,s){var o;if(!(pt(r)&&ub(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&ox(e)==="quantitative"&&(i.normalizedNumberFormatType&&ax(e)&&e.stack==="normalize"||i.numberFormatType))){if(ax(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return TH({type:"quantitative",config:i,normalizeStack:!0});if(ux(e)){const a=Ze(e)?(o=oo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:yXt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return TH({type:t,specifiedFormat:n,config:i})}}function Q6e(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(ux(t)&&n!=="time"&&n!=="utc")return Ze(t)&&((r=oo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function TH({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(pt(t))return t;if(e===ab)return r?n.normalizedNumberFormat:n.numberFormat}function yXt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:M6e(t)}:r?void 0:n.timeFormat)}function J6e(e,t){return`format(${e}, "${t||""}")`}function Dme(e,t,n,r){return ub(n)?Y6e(n,e,t):J6e(e,(pt(t)?t:void 0)??r.numberFormat)}function oR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return oR(e,t,i.numberFormat,i.numberFormatType,i);const s=Dme(e,n,r,i),o=Dme(t,n,r,i);return`${xne(e,!1)} ? "null" : ${s} + "${gXt}" + ${o}`}function vXt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=pt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):VKt(t,e,s)}const su={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Z6e=su.arc,I4=su.area,k4=su.bar,bXt=su.image,R4=su.line,N4=su.point,_Xt=su.rect,nM=su.rule,eFe=su.text,Rne=su.tick,wXt=su.trail,Nne=su.circle,Pne=su.square,tFe=su.geoshape;function Hb(e){return["line","area","trail"].includes(e)}function fI(e){return["rect","bar","image","arc"].includes(e)}const EXt=new Set(Ye(su));function Ah(e){return e.type}const xXt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],SXt=["fill","fillOpacity"],TXt=[...xXt,...SXt],AXt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Ome=Ye(AXt),CXt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},IXt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},kXt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},nFe=Ye(kXt);function lb(e){return e&&e.band!=null}const RXt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},rFe=5,NXt={binSpacing:1,continuousBandSize:rFe,minBandSize:.25,timeUnitBandPosition:.5},PXt={binSpacing:0,continuousBandSize:rFe,minBandSize:.25,timeUnitBandPosition:.5},DXt={thickness:1};function OXt(e){return Ah(e)?e.type:e}const P4="min",$Xt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function $me(e){return e in $Xt}function iFe(e){return!!(e!=null&&e.encoding)}function uh(e){return e&&(e.op==="count"||!!e.field)}function sFe(e){return e&&Fe(e)}function aR(e){return"row"in e||"column"in e}function Dne(e){return!!e&&"header"in e}function D4(e){return"facet"in e}function MXt(e){return e.param}function LXt(e){return e&&!pt(e)&&"repeat"in e}function Mme(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function One(e){return"sort"in e}function ly({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(an(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Om("timeUnitBandPosition",n,r);if(ri(s))return .5}}function oFe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Ju(e),u=br(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ze(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Om("timeUnitBandSize",r,i)};if(ri(h)&&!ao(s))return{band:1}}if(fI(r.type))return s?ao(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function aFe(e,t,n,r){return ri(e.bin)||e.timeUnit&&Za(e)&&e.type==="temporal"?ly({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function uFe(e){return e&&!!e.sort&&!e.field}function O4(e){return e&&"condition"in e}function $4(e){const t=e==null?void 0:e.condition;return!!t&&!Fe(t)&&Ze(t)}function uR(e){const t=e==null?void 0:e.condition;return!!t&&!Fe(t)&&an(t)}function FXt(e){const t=e==null?void 0:e.condition;return!!t&&(Fe(t)||qf(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function ox(e){return e==null?void 0:e.type}function Zh(e){return e&&"datum"in e}function t0(e){return Za(e)&&!iM(e)||rM(e)}function Lme(e){return Za(e)&&e.type==="quantitative"&&!e.bin||rM(e)}function rM(e){return Zh(e)&&ur(e.datum)}function an(e){return Ze(e)||Zh(e)}function Za(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function qf(e){return e&&"value"in e&&"value"in e}function qb(e){return e&&("scale"in e||"sort"in e)}function ax(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function lFe(e){return e&&"legend"in e}function cFe(e){return e&&("format"in e||"formatType"in e)}function jXt(e){return ju(e,["legend","axis","header","scale"])}function BXt(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(zXt(e))n=ZLe("count");else{let o;if(!t.nofn)if(BXt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ri(a)?(o=p6e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?qy(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Dm(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!Vb(l)&&(o=HKt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?AS(n):t.expr?XLe(n,t.expr)+s:kc(n)+s}function iM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(S6e(e.type))}function UXt(e){var t;return qb(e)&&sx((t=e.scale)==null?void 0:t.type)}function zXt(e){return e.aggregate==="count"}function VXt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ri(r))return`${n} (binned)`;if(i&&!Vb(i)){const a=(o=oo(i))==null?void 0:o.unit;if(a)return`${n} (${C4(a).join("-")})`}else if(s)return qy(s)?`${n} for max ${s.argmax}`:Dm(s)?`${n} for min ${s.argmin}`:`${eR(s)} of ${n}`;return n}function HXt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(qy(t))return`${i} for argmax(${t.argmax})`;if(Dm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!Vb(r)?oo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ri(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const fFe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return HXt(e);default:return VXt(e,t)}};let dFe=fFe;function hFe(e){dFe=e}function qXt(){hFe(fFe)}function Ww(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=$ne(e))==null?void 0:a.title;if(!Ze(e))return i??e.title;const s=e,o=r?Mne(s,t):void 0;return n?as(i,s.title,o):i??s.title??o}function $ne(e){if(ax(e)&&e.axis)return e.axis;if(lFe(e)&&e.legend)return e.legend;if(Dne(e)&&e.header)return e.header}function Mne(e,t){return dFe(e,t)}function sM(e){if(cFe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=$ne(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function WXt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(One(e)&&Fe(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!qy(n)&&!Dm(n))return"quantitative";if(qb(e)&&((s=e.scale)!=null&&s.type))switch(xH[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Ch(e){if(Ze(e))return e;if($4(e))return e.condition}function ks(e){if(an(e))return e;if(uR(e))return e.condition}function pFe(e,t,n,r={}){if(pt(e)||ur(e)||Ly(e)){const i=pt(e)?"string":ur(e)?"number":"boolean";return Je(GYt(t,i,e)),{value:e}}return an(e)?oM(e,t,n,r):uR(e)?{...e,condition:oM(e.condition,t,n,r)}:e}function oM(e,t,n,r){if(cFe(e)){const{format:i,formatType:s,...o}=e;if(ub(s)&&!n.customFormatTypes)return Je(kme(t)),oM(o,t,n,r)}else{const i=ax(e)?"axis":lFe(e)?"legend":Dne(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(ub(o)&&!n.customFormatTypes)return Je(kme(t)),oM({...e,[i]:a},t,n,r)}}return Ze(e)?Lne(e,t,r):GXt(e)}function GXt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ur(n)?"quantitative":pt(n)?"nominal":zb(n)?"temporal":void 0,{...e,type:t}}function Lne(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!cne(r)&&!qy(r)&&!Dm(r)&&(Je(KYt(r)),delete a.aggregate),i&&(a.timeUnit=oo(i)),o&&(a.field=`${o}`),ri(s)&&(a.bin=M4(s,t)),wo(s)&&!us(t)&&Je(CKt(t)),Za(a)){const{type:u}=a,l=JKt(u);u!==l&&(a.type=l),u!=="quantitative"&&h6e(r)&&(Je(YYt(u,r)),a.type="quantitative")}else if(!a6e(t)){const u=WXt(a,t);a.type=u}if(Za(a)){const{compatible:u,warning:l}=YXt(a,t)||{};u===!1&&Je(l)}if(One(a)&&pt(a.sort)){const{sort:u}=a;if($me(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&$me(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Dne(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function M4(e,t){return Ly(e)?{maxbins:_me(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:_me(t)}:e}const __={compatible:!0};function YXt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case em:case tm:case v4:return iM(e)?__:{compatible:!1,warning:ZYt(t)};case xi:case lo:case By:case CS:case Xu:case Kh:case Xh:case tR:case nR:case b4:case sb:case _4:case w4:case jb:case Uc:case nd:case E4:return __;case id:case Rc:case rd:case sd:return n!==ab?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:__;case ig:case Uy:case zy:case Vy:case rg:case ng:case tg:case td:case Yh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:__;case Qu:case Hy:return!iM(e)&&!UXt(e)?{compatible:!1,warning:eKt(t)}:__;case nx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:__}}function ux(e){const{formatType:t}=sM(e);return t==="time"||!t&&KXt(e)}function KXt(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function L4(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=oo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return iR(e)?a=e.expr:Rt(e)?a=e.signal:zb(e)?(o=!0,a=ob(e)):(pt(e)||ur(e))&&o&&(a=`datetime(${Lr(e)})`,jKt(s)&&(ur(e)&&e<1e4||pt(e)&&isNaN(Date.parse(e)))&&(a=ob({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Lr(e)}function mFe(e,t){const{type:n}=e;return t.map(r=>{const i=Ze(e)&&!Vb(e.timeUnit)?e.timeUnit:void 0,s=L4(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function lR(e,t){return ri(e.bin)?sg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Fme={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function cR(e){return e==null?void 0:e.condition}const gFe=["domain","grid","labels","ticks","title"],XXt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},yFe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},QXt={...yFe,style:1,labelExpr:1,encoding:1};function jme(e){return!!QXt[e]}const JXt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},vFe=Ye(JXt);function og(e){return"mark"in e}class F4{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return og(t)?OXt(t.mark)===this.name:!1}}function bv(e,t){const n=e&&e[t];return n?Fe(n)?rb(n,r=>!!r.field):Ze(n)||$4(n):!1}function bFe(e,t){const n=e&&e[t];return n?Fe(n)?rb(n,r=>!!r.field):Ze(n)||Zh(n)||uR(n):!1}function _Fe(e,t){if(us(t)){const n=e[t];if((Ze(n)||Zh(n))&&(U6e(n.type)||Ze(n)&&n.timeUnit)){const r=one(t);return bFe(e,r)}}return!1}function Fne(e){return rb(ZGt,t=>{if(bv(e,t)){const n=e[t];if(Fe(n))return rb(n,r=>!!r.aggregate);{const r=Ch(n);return r&&!!r.aggregate}}return!1})}function wFe(e,t){const n=[],r=[],i=[],s=[],o={};return jne(e,(a,u)=>{if(Ze(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=$ne(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:Ww(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(qy(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Dm(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),Za(a)&&ri(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),lR(a,u)&&n.push(at(a,{binSuffix:"range"})),us(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",a6e(u)||(y.type=ab)}else if(d&&!Vb(d)){i.push({timeUnit:d,field:l,as:g});const v=Za(a)&&a.type!==ix&&"time";v&&(u===tR||u===sb?y.formatType=v:lYt(u)?y.legend={formatType:v,...y.legend}:us(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function ZXt(e,t,n){const r=fYt(t,n);if(r){if(r==="binned"){const i=e[t===td?xi:lo];return!!(Ze(i)&&Ze(e[t])&&wo(i.bin))}}else return!1;return!0}function eQt(e,t,n,r){const i={};for(const s of Ye(e))o6e(s)||Je(JYt(s));for(let s of sYt){if(!e[s])continue;const o=e[s];if(rR(s)){const a=iYt(s),u=i[a];if(Ze(u)&&QKt(u.type)&&Ze(o)&&!u.timeUnit){Je(WYt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Je(qYt),s=Uc),!ZXt(e,s,t)){Je(A4(s,t));continue}if(s===rg&&t==="line"){const a=Ch(e[s]);if(a!=null&&a.aggregate){Je(QYt);continue}}if(s===Xu&&(n?"fill"in e:"stroke"in e)){Je(T6e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===nR||s===nx&&!Fe(o)&&!qf(o)||s===sb&&Fe(o)){if(o){if(s===nx){const a=e[s];if(uFe(a)){i[s]=a;continue}}i[s]=ht(o).reduce((a,u)=>(Ze(u)?a.push(Lne(u,s)):Je(EH(u,s)),a),[])}}else{if(s===sb&&o===null)i[s]=null;else if(!Ze(o)&&!Zh(o)&&!qf(o)&&!O4(o)&&!Rt(o)){Je(EH(o,s));continue}i[s]=pFe(o,s,r)}}return i}function j4(e,t){const n={};for(const r of Ye(e)){const i=pFe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function tQt(e){const t=[];for(const n of Ye(e))if(bv(e,n)){const r=e[n],i=ht(r);for(const s of i)Ze(s)?t.push(s):$4(s)&&t.push(s.condition)}return t}function jne(e,t,n){if(e)for(const r of Ye(e)){const i=e[r];if(Fe(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function nQt(e,t,n,r){return e?Ye(e).reduce((i,s)=>{const o=e[s];return Fe(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function EFe(e,t){return Ye(t).reduce((n,r)=>{switch(r){case xi:case lo:case _4:case E4:case w4:case td:case Yh:case By:case CS:case Uc:case ng:case nd:case tg:case rd:case id:case sd:case Rc:case tR:case Qu:case jb:case sb:return n;case nx:if(e==="line"||e==="trail")return n;case nR:case b4:{const i=t[r];if(Fe(i)||Ze(i))for(const s of ht(i))s.aggregate||n.push(at(s,{}));return n}case rg:if(e==="trail")return n;case Xu:case Kh:case Xh:case ig:case Uy:case zy:case Hy:case Vy:{const i=Ch(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function rQt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Fe(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Fe(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function AH(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Bne(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=tQt(n).map(jXt);return{tooltip:[...i,...Gd(s,zn)]}}function Bne(e){const{title:t,field:n}=e;return as(t,n)}function Une(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Bne(n);return xFe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...pt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function xFe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Ah(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Ly(e[t])?{}:e[t]}}]:[]}function SFe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:nP(s,n),continuousAxisChannelDef2:nP(o,n),continuousAxisChannelDefError:nP(a,n),continuousAxisChannelDefError2:nP(u,n),continuousAxis:i}}function nP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Je(AKt(n,t)),r}else return e}function TFe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Ah(n)&&n.orient)return n.orient;if(t0(i)){if(t0(s)){const o=Ze(i)&&i.aggregate,a=Ze(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return ux(s)&&!ux(i)?"horizontal":"vertical"}return"horizontal"}else{if(t0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const aM="boxplot",iQt=["box","median","outliers","rule","ticks"],sQt=new F4(aM,CFe);function AFe(e){return ur(e)?"tukey":e}function CFe(e,{config:t}){e={...e,encoding:j4(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Ah(n)?n:{type:n};i&&Je(x6e("boxplot"));const u=a.extent??t.boxplot.extent,l=br("size",a,t),c=a.invalid,f=AFe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:S}=oQt(e,u,t),T=AS(m.field),{color:A,size:C,...I}=b,R=ke=>Une(a,g,m,ke,t.boxplot),M=R(I),P=R(b),O=(mt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=R({...I,...C?{size:C}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...A||{value:O}}}}),L=AH([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?L:AH([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),H=[...M({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...M({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...M({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...M({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],D=[...f!=="tukey"?H:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:L}),...F({partName:"median",mark:{type:"tick",invalid:c,...mt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:L})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:D};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,q=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,ne=`datum["${m.field}"]`,ce={joinaggregate:IFe(m.field),groupby:y},de={transform:[{filter:`(${q} <= ${ne}) && (${ne} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${T}`},{op:"max",field:m.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${T}`},...v],groupby:y}],layer:H},{tooltip:he,...ye}=I,{scale:Ie,axis:ve}=m,Ke=Bne(m),Ue=ju(ve,["title"]),gt=xFe(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${q}) || (${ne} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ke!==void 0?{title:Ke}:{},...Ie!==void 0?{scale:Ie}:{},...Mr(Ue)?{}:{axis:Ue}},...ye,...A?{color:A}:{},...S?{tooltip:S}:{}}})[0];let rt;const be=[...d,...h,ce];return gt?rt={transform:be,layer:[gt,de]}:(rt=de,rt.transform.unshift(...be)),{...o,layer:[rt,{transform:p,layer:D}]}}function IFe(e){const t=AS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function oQt(e,t,n){const r=TFe(e,aM),{continuousAxisChannelDef:i,continuousAxis:s}=SFe(e,r,aM),o=i.field,a=AS(o),u=AFe(t),l=[...IFe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=rQt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=wFe(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const zne="errorbar",aQt=["ticks","rule"],uQt=new F4(zne,kFe);function kFe(e,{config:t}){e={...e,encoding:j4(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=RFe(e,zne,t);delete s.size;const c=Une(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function lQt(e,t){const{encoding:n}=e;if(cQt(n))return{orient:TFe(e,t),inputType:"raw"};const r=fQt(n),i=dQt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(an(a)&&an(u))throw new Error(`${t} cannot have both x2 and y2`);if(an(a)){if(t0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(an(u)){if(t0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(an(u)&&!an(a))throw new Error(`${t} cannot have xError2 without xError`);if(an(c)&&!an(l))throw new Error(`${t} cannot have yError2 without yError`);if(an(a)&&an(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(an(a)){if(t0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(an(l)){if(t0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function cQt(e){return(an(e.x)||an(e.y))&&!an(e.x2)&&!an(e.y2)&&!an(e.xError)&&!an(e.xError2)&&!an(e.yError)&&!an(e.yError2)}function fQt(e){return an(e.x2)||an(e.y2)}function dQt(e){return an(e.xError)||an(e.xError2)||an(e.yError)||an(e.yError2)}function RFe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Ah(r)?r:{type:r};s&&Je(x6e(t));const{orient:l,inputType:c}=lQt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=SFe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=hQt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:T,...A}=i,{bins:C,timeUnits:I,aggregate:R,groupby:M,encoding:P}=wFe(A,n),O=[...R,...g],F=c!=="raw"?[]:M,L=AH(v,f,P,b);return{transform:[...a.transform??[],...C,...I,...O.length===0?[]:[{aggregate:O,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:L}}function hQt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Je(TKt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:eR(h)},{fieldPrefix:"upper_",titlePrefix:Bme(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Bme(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Ww({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Ww({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Ww({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Je(SKt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:ib(ib(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Bme(e,t,n){return`${eR(e)} ${n} ${t}`}const Vne="errorband",pQt=["band","borders"],mQt=new F4(Vne,NFe);function NFe(e,{config:t}){e={...e,encoding:j4(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=RFe(e,Vne,t),l=o,c=Une(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Je(Nme("interpolate")):l.tension&&Je(Nme("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const PFe={};function Hne(e,t,n){const r=new F4(e,t);PFe[e]={normalizer:r,parts:n}}function gQt(){return Ye(PFe)}Hne(aM,CFe,iQt);Hne(zne,kFe,aQt);Hne(Vne,NFe,pQt);const yQt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],DFe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},OFe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},vQt=Ye(DFe),bQt=Ye(OFe),_Qt={header:1,headerRow:1,headerColumn:1,headerFacet:1},$Fe=Ye(_Qt),MFe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],wQt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},EQt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Wf="_vgsid_",xQt={point:{on:"click",fields:[Wf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function qne(e){return e==="legend"||!!(e!=null&&e.legend)}function j9(e){return qne(e)&&mt(e)}function Wne(e){return!!(e!=null&&e.select)}function LFe(e){const t=[];for(const n of e||[]){if(Wne(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function SQt(e){return B4(e)||Yne(e)||Gne(e)}function Gne(e){return"concat"in e}function B4(e){return"vconcat"in e}function Yne(e){return"hconcat"in e}function FFe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Ih(e){return mt(e)&&e.step!==void 0}function Ume(e){return e.view||e.width||e.height}const zme=20,TQt={align:1,bounds:1,center:1,columns:1,spacing:1},AQt=Ye(TQt);function CQt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(D4(e)&&!aR(e.facet)||Gne(e))&&(i.columns=o),B4(e)&&(i.columns=1);for(const a of AQt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=ur(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function CH(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function uM(e,t){const n=lM(e,t);return Ih(n)?n.step:jFe}function lM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return as(n,{step:e.step})}const jFe=20,IQt={continuousWidth:200,continuousHeight:200,step:jFe},kQt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:IQt,mark:IXt,arc:{},area:{},bar:NXt,circle:{},geoshape:{},image:{},line:{},point:{},rect:PXt,rule:{color:"black"},square:{},text:{color:"black"},tick:DXt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:rXt,projection:{},legend:wQt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:xQt,style:{},title:{},facet:{spacing:zme},concat:{spacing:zme},normalizedNumberFormat:".0%"},fp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Vme={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Hme={blue:fp[0],orange:fp[1],red:fp[2],teal:fp[3],green:fp[4],yellow:fp[5],purple:fp[6],pink:fp[7],brown:fp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function RQt(e={}){return{signals:[{name:"color",value:mt(e)?{...Hme,...e}:Hme}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function NQt(e){return{signals:[{name:"fontSize",value:mt(e)?{...Vme,...e}:Vme}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function PQt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function BFe(e){const t=Ye(e||{}),n={};for(const r of t){const i=e[r];n[r]=cR(i)?g6e(i):ml(i)}return n}function DQt(e){const t=Ye(e),n={};for(const r of t)n[r]=BFe(e[r]);return n}const OQt=[...nFe,...vFe,...$Fe,"background","padding","legend","lineBreak","scale","style","title","view"];function UFe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=mS({},en(kQt),n?PQt(n):{},t?RQt(t):{},r?NQt(r):{},s||{});i&&gS(o,"selection",i,!0);const a=ju(o,OQt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=ml(o[u]));for(const u of nFe)o[u]&&(a[u]=Eu(o[u]));for(const u of vFe)o[u]&&(a[u]=BFe(o[u]));for(const u of $Fe)o[u]&&(a[u]=Eu(o[u]));return o.legend&&(a.legend=Eu(o.legend)),o.scale&&(a.scale=Eu(o.scale)),o.style&&(a.style=DQt(o.style)),o.title&&(a.title=Eu(o.title)),o.view&&(a.view=Eu(o.view)),a}const $Qt=new Set(["view",...EXt]),MQt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],LQt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...CXt};function FQt(e){e=en(e);for(const t of MQt)delete e[t];if(e.axis)for(const t in e.axis)cR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of yQt)delete e.legend[t];if(e.mark){for(const t of Ome)delete e.mark[t];e.mark.tooltip&&mt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(LFe(e.params)),delete e.params);for(const t of $Qt){for(const r of Ome)delete e[t][r];const n=LQt[t];if(n)for(const r of n)delete e[t][r];BQt(e,t)}for(const t of gQt())delete e[t];jQt(e);for(const t in e)mt(e[t])&&Mr(e[t])&&delete e[t];return Mr(e)?void 0:e}function jQt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=m6e(e.title);Mr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Mr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Mr(r)?delete e.title:e.title=r}function BQt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Mr(s)||(e.style[n??t]=s),delete e[t]}function U4(e){return"layer"in e}function UQt(e){return"repeat"in e}function zQt(e){return!Fe(e.repeat)&&e.repeat.layer}class Kne{map(t,n){return D4(t)?this.mapFacet(t,n):UQt(t)?this.mapRepeat(t,n):Yne(t)?this.mapHConcat(t,n):B4(t)?this.mapVConcat(t,n):Gne(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(U4(t))return this.mapLayer(t,n);if(og(t))return this.mapUnit(t,n);throw new Error(fne(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const VQt={zero:1,center:1,normalize:1};function HQt(e){return e in VQt}const qQt=new Set([Z6e,k4,I4,nM,N4,Nne,Pne,R4,eFe,Rne]),WQt=new Set([k4,I4,Z6e]);function w_(e){return Ze(e)&&ox(e)==="quantitative"&&!e.bin}function qme(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ze(o)&&Ze(a))if(w_(o)&&w_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(w_(o))return t;if(w_(a))return i}else{if(w_(o))return s&&n==="vertical"?void 0:t;if(w_(a))return s&&n==="horizontal"?void 0:i}}function GQt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function zFe(e,t){var m,g;const n=Ah(e)?e:{type:e},r=n.type;if(!qQt.has(r))return null;const i=qme(t,"x",n)||qme(t,"theta",n);if(!i)return null;const s=t[i],o=Ze(s)?at(s,{}):void 0,a=GQt(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ze(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ze(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=oYt.reduce((y,v)=>{if(v!=="tooltip"&&bv(t,v)){const b=t[v];for(const w of ht(b)){const E=Ch(w);if(E.aggregate)continue;const S=at(E,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Ly(s.stack)?p=s.stack?"zero":null:p=s.stack:WQt.has(r)&&(p="zero"),!p||!HQt(p)||Fne(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Bu.LINEAR&&s!=null&&s.stack&&Je(wKt(s.scale.type)),an(t[Qh(i)])?(s.stack!==void 0&&Je(_Kt(i)),null):(Ze(s)&&s.aggregate&&!vYt.has(s.aggregate)&&Je(EKt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Hb(r),stackBy:h,offset:p}))}function VFe(e,t,n){const r=Eu(e),i=br("orient",r,n);if(r.orient=QQt(r.type,t,i),i!==void 0&&i!==r.orient&&Je(iKt(r.orient,i)),r.type==="bar"&&r.orient){const u=br("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:RXt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=br("opacity",r,n),o=br("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=KQt(r.type,t)),br("cursor",r,n)===void 0&&(r.cursor=YQt(r,t,n)),r}function YQt(e,t,n){return t.href||e.href||br("href",e,n)?"pointer":e.cursor}function KQt(e,t){if(Vn([N4,Rne,Nne,Pne],e)&&!Fne(t))return .7}function XQt(e,t,{graticule:n}){if(n)return!1;const r=Om("filled",e,t),i=e.type;return as(r,i!==N4&&i!==R4&&i!==nM)}function QQt(e,t,n){switch(e){case N4:case Nne:case Pne:case eFe:case _Xt:case bXt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case k4:if(Ze(r)&&(wo(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(wo(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ze(r)&&r.type===ab&&!ri(r.bin)||rM(r))&&Ze(i)&&wo(i.bin)?"horizontal":"vertical";if(!o)return(Ze(i)&&i.type===ab&&!ri(i.bin)||rM(i))&&Ze(r)&&wo(r.bin)?"vertical":"horizontal"}case nM:if(s&&!(Ze(r)&&wo(r.bin))&&o&&!(Ze(i)&&wo(i.bin)))return;case I4:if(o)return Ze(i)&&wo(i.bin)?"horizontal":"vertical";if(s)return Ze(r)&&wo(r.bin)?"vertical":"horizontal";if(e===nM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case R4:case Rne:{const a=Lme(r),u=Lme(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Za(r)&&r.type===ix,c=Za(i)&&i.type===ix;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function JQt(e){const{point:t,line:n,...r}=e;return Ye(r).length>1?r:r.type}function ZQt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ju(e[t],["point","line"])});return e}function B9(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?mt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?mt(t.point)?t.point:{}:void 0}function Wme(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class eJt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(og(t)){const{mark:r,encoding:i}=t,s=Ah(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!B9(s,n[s.type],i);case"area":return!!B9(s,n[s.type],i)||!!Wme(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=j4(l,i),d=Ah(a)?a:{type:a},h=B9(d,i[d.type],f),p=d.type==="area"&&Wme(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:JQt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:ju(f,["shape"])}],g=zFe(VFe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=ju(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...ex(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...ex(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:ZQt(i)})}}function tJt(e,t){return t?aR(e)?qFe(e,t):HFe(e,t):e}function U9(e,t){return t?qFe(e,t):e}function IH(e,t,n){const r=t[e];if(LXt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Je(FYt(r.repeat));return}return t}function HFe(e,t){if(e=IH("field",e,t),e!==void 0){if(e===null)return null;if(One(e)&&uh(e.sort)){const n=IH("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Gme(e,t){if(Ze(e))return HFe(e,t);{const n=IH("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Yme(e,t){if(an(e)){const n=Gme(e,t);if(n)return n;if(O4(e))return{condition:e.condition}}else{if(uR(e)){const n=Gme(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function qFe(e,t){const n={};for(const r in e)if(Ft(e,r)){const i=e[r];if(Fe(i))n[r]=i.map(s=>Yme(s,t)).filter(s=>s);else{const s=Yme(i,t);s!==void 0&&(n[r]=s)}}return n}class nJt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(og(t)){const{encoding:n,mark:r}=t;if(r==="line"||Ah(r)&&r.type==="line")for(const i of rYt){const s=Bb(i),o=n[s];if(n[i]&&(Ze(o)&&!wo(o.bin)||Zh(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Je(rKt(!!i.x2,!!i.y2)),r({...t,mark:mt(s)?{...s,type:"rule"}:"rule"},n)}}class rJt extends Kne{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[sQt,uQt,mQt,new eJt,new nJt]}map(t,n){if(og(t)){const r=bv(t.encoding,em),i=bv(t.encoding,tm),s=bv(t.encoding,v4);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=U9(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return zQt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ei(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Fe(r)&&t.columns&&(t=ju(t,["columns"]),Je(Cme("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Fe(r)&&r.row||[u?u.row:null],f=!Fe(r)&&r.column||[u?u.column:null],d=Fe(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Fe(r)?`${Ei(p)}`:(r.row?`row_${Ei(m)}`:"")+(r.column?`column_${Ei(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(ju(b,["data"]))}const h=Fe(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return aR(r)&&t.columns&&(t=ju(t,["columns"]),Je(Cme("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Xme({parentProjection:o,projection:i}),l=Kme({parentEncoding:s,encoding:U9(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=U9(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Je(tKt([...r?[em]:[],...i?[tm]:[]]));const o={},a={};for(const u of[em,tm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:tJt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Kme({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Xme({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Kme({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ye(e),...Ye(t)]);for(const s of i){const o=t[s],a=e[s];if(an(o)){const u={...a,...o};r[s]=u}else uR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||qf(a)||Rt(a)||an(a)||Fe(a))&&(r[s]=a)}}else r=t;return!r||Mr(r)?void 0:r}function Xme(e){const{parentProjection:t,projection:n}=e;return t&&n&&Je(HYt({parentProjection:t,projection:n})),n??t}function Xne(e){return"filter"in e}function iJt(e){return(e==null?void 0:e.stop)!==void 0}function WFe(e){return"lookup"in e}function sJt(e){return"data"in e}function oJt(e){return"param"in e}function aJt(e){return"pivot"in e}function uJt(e){return"density"in e}function lJt(e){return"quantile"in e}function cJt(e){return"regression"in e}function fJt(e){return"loess"in e}function dJt(e){return"sample"in e}function hJt(e){return"window"in e}function pJt(e){return"joinaggregate"in e}function mJt(e){return"flatten"in e}function gJt(e){return"calculate"in e}function GFe(e){return"bin"in e}function yJt(e){return"impute"in e}function vJt(e){return"timeUnit"in e}function bJt(e){return"aggregate"in e}function _Jt(e){return"stack"in e}function wJt(e){return"fold"in e}function EJt(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function xJt(e){return e.map(t=>Xne(t)?{filter:Hw(t.filter,XKt)}:t)}class SJt extends Kne{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Qme(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Qme(t,n),t.encoding){const r={};for(const[i,s]of ay(t.encoding))r[i]=YFe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:ay(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Ro(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Qme(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Xne(s))return{filter:kH(s,t)};if(GFe(s)&&Ub(s.bin))return{...s,bin:KFe(s.bin)};if(WFe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function YFe(e,t){var r,i;const n=en(e);if(Ze(n)&&Ub(n.bin)&&(n.bin=KFe(n.bin)),qb(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(O4(n))if(Fe(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:kH(s,t)}});else{const{selection:s,param:o,test:a,...u}=YFe(n.condition,t);n.condition=o?n.condition:{...u,test:kH(n.condition,t)}}return n}function KFe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function kH(e,t){const n=r=>Hw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Hw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class RH extends Kne{map(t,n){const r=n.selections??[];if(t.params&&!og(t)){const i=[];for(const s of t.params)Wne(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(pt(a)&&(a===t.name||i.includes(a))||Fe(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=RH.prototype[e];RH.prototype[e]=function(n,r){return t.call(this,n,TJt(n,r))}}function TJt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function XFe(e,t){t===void 0&&(t=UFe(e.config));const n=kJt(e,t),{width:r,height:i}=e,s=RJt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const AJt=new rJt,CJt=new SJt,IJt=new RH;function kJt(e,t={}){const n={config:t};return IJt.map(AJt.map(CJt.map(e,n),n),n)}function Jme(e){return pt(e)?{type:e}:e??{}}function RJt(e,t,n){let{width:r,height:i}=t;const s=og(e)||U4(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Je(xme("width")),r=void 0),i=="container"&&(Je(xme("height")),i=void 0));const a={type:"pad",...o,...n?Jme(n.autosize):{},...Jme(e.autosize)};if(a.type==="fit"&&!s&&(Je(CYt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Je(Sme("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Je(Sme("height")),!El(a,{type:"pad"}))return a}function NJt(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function PJt(e){return e?`fit-${x4(e)}`:"fit"}const DJt=["background","padding"];function Zme(e,t){const n={};for(const r of DJt)e&&e[r]!==void 0&&(n[r]=ml(e[r]));return t&&(n.params=e.params),n}class ag{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ag(en(this.explicit),en(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return as(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ye(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Td(e){return{explicit:!0,value:e}}function al(e){return{explicit:!1,value:e}}function QFe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:z4(t,n,r,i)}}function z4(e,t,n,r){return e.explicit&&t.explicit&&Je(hKt(n,r,e.value,t.value)),e}function cy(e,t,n,r,i=z4){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:El(e.value,t.value)?e:i(e,t,n,r)}class OJt extends ag{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function lx(e){return"url"in e}function dI(e){return"values"in e}function JFe(e){return"name"in e&&!lx(e)&&!dI(e)&&!A0(e)}function A0(e){return e&&(ZFe(e)||e4e(e)||Qne(e))}function ZFe(e){return"sequence"in e}function e4e(e){return"sphere"in e}function Qne(e){return"graticule"in e}var vi;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(vi||(vi={}));function t4e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=kc(i.field),i}function cb(e,t=!0,n=va){if(Fe(e)){const r=e.map(i=>cb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(zb(e))return n(t?ob(e):FKt(e));return t?n(Lr(e)):e}function $Jt(e,t){for(const n of Ro(e.component.selection??{})){const r=n.name;let i=`${r}${dy}, ${n.resolve==="global"?"true":`{unit: ${_v(e)}}`}`;for(const s of W4)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+hZt,on:[{events:{signal:n.name+dy},update:`modify(${nt(n.name+fb)}, ${i})`}]})}return Jne(t)}function MJt(e,t){if(e.component.selection&&Ye(e.component.selection).length){const n=nt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:jy("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Jne(t)}function LJt(e,t){let n=!1;for(const r of Ro(e.component.selection??{})){const i=r.name,s=nt(i+fb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${b4e}(${s}, ${nt(a)}${u}`})}n=!0;for(const a of W4)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Jne(t)}function FJt(e,t){const n=[...t],r=_v(e,{escape:!1});for(const i of Ro(e.component.selection??{})){const s={name:i.name+fb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Wf}}]),i.init){const a=i.project.items.map(t4e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Wf]:cb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:cb(u,!1)}))}n.filter(a=>a.name===i.name+fb).length||n.push(s)}return n}function n4e(e,t){for(const n of Ro(e.component.selection??{}))for(const r of W4)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function jJt(e,t){for(const n of e.children)Hi(n)&&(t=n4e(n,t));return t}function BJt(e,t,n,r){const i=S4e(e,t.param,t);return{signal:Bl(n.get("type"))&&Fe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Jne(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Dr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Je(UYt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Uu extends Dr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${JLe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function z9(e){return e.as!==void 0}function ege(e){return`${e}_end`}class lh extends Dr{clone(){return new lh(null,en(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(Vb(u)){if(Hi(n)){const{mark:c,markDef:f,config:d}=n,h=ly({fieldDef:s,markDef:f,config:d});(fI(c)||h)&&(l={timeUnit:oo(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Hi(n)){const{mark:c,markDef:f,config:d}=n,h=ly({fieldDef:s,markDef:f,config:d});fI(c)&&us(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[zn(l)]=l)}return i},{});return Mr(r)?null:new lh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=oo(r),o={...i,timeUnit:s};return new lh(t,{[zn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of ay(this.timeUnits)){const s=z9(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Ro(this.timeUnits).map(t=>z9(t)?t.as:ege(t.field)))}dependentFields(){return new Set(Ro(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${zn(this.timeUnits)}`}assemble(){const t=[];for(const n of Ro(this.timeUnits)){const{rectBandPosition:r}=n,i=oo(n.timeUnit);if(z9(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:kc(s),type:"timeunit",...a?{units:C4(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...tge(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=r4e({timeUnit:i,field:o}),u=ege(o);t.push({type:"formula",expr:a,as:u}),t.push(...tge([o,u],r,i))}}return t}}const V4="offsetted_rect_start",H4="offsetted_rect_end";function r4e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=O6e(r),{part:o,step:a}=F6e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function tge([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:nge([r4e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${V4}`},{type:"formula",expr:nge([i,s],n+.5),as:`${e}_${H4}`}]}return[]}function nge([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const fR="_tuple_fields";class UJt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const zJt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new UJt),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ei(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ei(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?ht(n.value):null;let{fields:d,encodings:h}=mt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(mt(p))for(const m of Ye(p))nYt(m)?(h||(h=[])).push(m):l==="interval"?(Je(LYt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Je(IYt(p,m.aggregate));continue}else if(!g){Je(Ame(p));continue}if(m.timeUnit&&!Vb(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[zn(y)]=y}if(!s[g]){const y=l==="interval"&&sg(p)&&Bl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Wf,i6e(p)?(v.geoChannel=p,v.channel=r6e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Je(Ame(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Wf}f&&(t.init=f.map(p=>i.items.map(m=>mt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Mr(o)||(i.timeUnit=new lh(null,o))},signals:(e,t,n)=>{const r=t.name+fR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(t4e)})}},nm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!sg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Je(PYt),!s||!Bl(o)){Je(NYt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||rge(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(b4e)>=0)i.update=`{${r.map(o=>`${nt(kc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${nt(kc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!rge(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function NH(e,t){return`domain(${nt(e.scaleName(t))})`}function rge(e){return e.parent&&DS(e.parent)&&!e.parent.parent}const Gw="_brush",i4e="_scale_trigger",DT="geo_interval_init_tick",s4e="_init",VJt="_center",HJt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...mt(n.select)?n.select:{}};i.fields=[Wf],i.encodings||(i.encodings=n.value?Ye(n.value):[id,rd]),n.select={type:"interval",...i}}if(t.translate&&!nm.defined(t)){const i=`!event.item || event.item.mark.name !== ${nt(t.name+Gw)}`;for(const s of t.events){if(!s.between){Je(`${s} is not an ordered event stream for interval selections.`);continue}const o=ht((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+dy,s=Ro(t.project.hasChannel).filter(a=>a.channel===xi||a.channel===lo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(qJt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=nt(e.projectionName()),u=e.projectionName()+VJt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+s4e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${nt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${_v(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:DT}]:[]],update:b}]})}else{if(!nm.defined(t)){const l=r+i4e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=nt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Bl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${_v(e)}, fields: ${r+fR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${cb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Hi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===DT).length||n.unshift({name:DT,value:null,on:[{events:"timer{1}",update:`${DT} === null ? {} : ${DT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${nt(t.name+fb)})`;if(nm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ye(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${_v(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ye(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+Gw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Gw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function qJt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=nt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===xi?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=nm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:cb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+i4e},update:Bl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:cb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===xi?0:1,h=t.name+s4e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const WJt={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+fR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Ro(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Gw):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${_v(e)}, `;if(t.project.hasSelectionId)l+=`${Wf}: ${o}[${nt(Wf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${nt(e.vgField(d.channel,{}))}], ${o}[${nt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${nt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+dy,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function kS(e,t,n,r){const i=O4(t)&&t.condition,s=r(t);if(i){const a=ht(i).map(u=>{const l=r(u);if(MXt(u)){const{param:c,empty:f}=u;return{test:x4e(e,{param:c,empty:f}),...l}}else return{test:dM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Zne(e,t="text"){const n=e.encoding[t];return kS(e,n,t,r=>q4(r,e.config))}function q4(e,t,n="datum"){if(e){if(qf(e))return ui(e.value);if(an(e)){const{format:r,formatType:i}=sM(e);return kne({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function o4e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Fe(o))return{tooltip:ige({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return kS(e,o,"tooltip",u=>{const l=q4(u,i,a);if(l)return l;if(u===null)return;let c=br("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),pt(c))return{value:c};if(mt(c))return Rt(c)?c:c.content==="encoding"?ige(n,s,i,t):{signal:a}})}}function a4e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Bb(f),h=Za(c)?c:{...c,type:e[d].type},p=h.title||Mne(h,i),m=ht(p).join(", ").replaceAll(/"/g,'\\"');let g;if(us(f)){const y=f==="x"?"x2":"y2",v=Ch(e[y]);if(wo(h.bin)&&v){const b=at(h,{expr:o}),w=at(v,{expr:o}),{format:E,formatType:S}=sM(h);g=oR(b,w,E,S,i),s[y]=!0}}if((us(f)||f===Uc||f===nd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=sM(h);g=kne({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=q4(h,i,o).signal),a.push({channel:f,key:m,value:g})}jne(e,(c,f)=>{Ze(c)?u(c,f):$4(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function ige(e,t,n,{reactiveGeom:r}={}){const i=a4e(e,t,n,{reactiveGeom:r}),s=ay(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function GJt(e){const{markDef:t,config:n}=e,r=br("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...YJt(e),...KJt(e)}}function YJt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=br("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in SYt?{}:{ariaRoleDescription:{value:t}}}function KJt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return kS(e,s,"description",u=>q4(u,e.config));const o=br("description",n,r);if(o!=null)return{description:ui(o)};if(r.aria===!1)return{};const a=a4e(t,i,r);if(!Mr(a))return{description:{signal:ay(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Qs(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=br(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=ui(u)));const l=i[e];return kS(t,l,o??e,c=>Ine({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function u4e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??br("filled",n,i),a=Vn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=br(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=br(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:ui(u)}:{},...l?{stroke:ui(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Je(T6e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Qs("color",e,{vgChannel:c,defaultValue:o?u:l}),...Qs("fill",e,{defaultValue:r.fill?u:void 0}),...Qs("stroke",e,{defaultValue:r.stroke?l:void 0})}}function XJt(e){const{encoding:t,mark:n}=e,r=t.order;return!Hb(n)&&qf(r)?kS(e,r,"zindex",i=>ui(i.value)):{}}function cx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Ine({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:ui(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function la(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Qh(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=cx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=ere({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&us(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:QJt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function QJt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(an(n)&&i&&t===i.fieldChannel){if(Ze(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return tM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return vv(n,r,{suffix:"end"},{offset:s})}return Ane(e)}function ere({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Bb(n),u=uy(n),l=br(n,s,o,{vgChannel:u});if(l!==void 0)return AC(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Vn([Bu.LOG,Bu.TIME,Bu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Ju(n)],mult:.5}}}}const JJt={left:"x",center:"xc",right:"x2"},ZJt={top:"y",middle:"yc",bottom:"y2"};function l4e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return uy(e);const i=e==="x"?"align":"baseline",s=br(i,t,n);let o;return Rt(s)?(Je(nKt(i)),o=void 0):o=s,e==="x"?JJt[o||(r==="top"?"left":"center")]:ZJt[o||r]}function cM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?c4e(e,t,{defaultPos:n,defaultPos2:r}):la(e,t,{defaultPos:n})}function c4e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Qh(e),a=Ju(e),u=eZt(t,r,o),l=u[a]?l4e(e,i,s):uy(e);return{...la(e,t,{defaultPos:n,vgChannel:l}),...u}}function eZt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Bb(n),l=Ju(n),c=uy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?cx({channel:n,markDef:s,encoding:r,model:e}):cx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Ju(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=tZt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:rP(n,s)||rP(n,{[n]:Z$(n,s,a.style),[l]:Z$(l,s,a.style)})||rP(n,a[i])||rP(n,a.mark)||{[c]:ere({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function tZt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return an(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?vv(t,s,{suffix:"start"},{offset:u}):Ane({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function rP(e,t){const n=Ju(e),r=uy(e);if(t[r]!==void 0)return{[r]:AC(e,t[r])};if(t[e]!==void 0)return{[r]:AC(e,t[e])};if(t[n]){const i=t[n];if(lb(i))Je(XYt(n));else return{[n]:AC(e,i)}}}function fy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Qh(t),a=Ju(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??br("size",i,n,{vgChannel:a}),p=u6e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ze(u)&&(ri(u.bin)||wo(u.bin)||u.timeUnit&&!l)&&!(h&&!lb(h))&&!r[p]&&!ao(f)?iZt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(an(u)&&ao(f)||m)&&!l?rZt(u,t,e):c4e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function nZt(e,t,n,r,i,s,o){if(lb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Om("minBandSize",{type:o},r);return{signal:c?`max(${Ef(c)}, ${l})`:l}}else i.band!==1&&(Je(oKt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Wy(u)&&ur(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=as(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(ur(f))return{signal:`${1-f} * ${e}`}}return{value:uM(r.view,e)-2}}function rZt(e,t,n){var C,I;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Ju(t),f=Qh(t),d=u6e(t),h=n.scaleName(d),p=n.getScaleComponent(one(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Qs("size",n,{vgChannel:c,defaultRef:ui(r.size)}):Je(cKt(r.type)));const y=!!g,v=oFe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(C=l||p)==null?void 0:C.get("type"),useVlSizeChannel:m});g=g||{[c]:nZt(c,h||u,p||l,s,v,!!e,r.type)};const b=((I=l||p)==null?void 0:I.get("type"))==="band"&&lb(v)&&!y?"top":"middle",w=l4e(t,r,s,b),E=w==="xc"||w==="yc",{offset:S,offsetType:T}=cx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),A=Ane({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:ere({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?T==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:lb(v)?(1-v.band)/2:0});if(c)return{[w]:A,...g};{const R=uy(f),M=g[c],P=S?{...M,offset:S}:M;return{[w]:A,[R]:Fe(A)?[A[0],{...A[1],offset:P}]:{...A,offset:P}}}}function sge(e,t,n,r,i,s,o){if(n6e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=Ef(n),c=Ef(i),f=Ef(r),d=Ef(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function iZt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var I;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=oFe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(I=r.component.axes[n])==null?void 0:I[0],h=(d==null?void 0:d.get("translate"))??.5,p=us(n)?br("binSpacing",s,i)??0:0,m=Qh(n),g=uy(n),y=uy(m),v=Om("minBandSize",s,i),{offset:b}=cx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=cx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=mXt({fieldDef:e,scaleName:u}),S=sge(n,p,c,h,b,v,E),T=sge(m,p,c,h,w??b,v,E),A=Rt(f)?{signal:`(1-${f.signal})/2`}:lb(f)?(1-f.band)/2:.5,C=ly({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ri(e.bin)||e.timeUnit){const R=e.timeUnit&&C!==.5;return{[y]:oge({fieldDef:e,scaleName:u,bandPosition:A,offset:T,useRectOffsetField:R}),[g]:oge({fieldDef:e,scaleName:u,bandPosition:Rt(A)?{signal:`1-${A.signal}`}:1-A,offset:S,useRectOffsetField:R})}}else if(wo(e.bin)){const R=vv(e,u,{},{offset:T});if(Ze(t))return{[y]:R,[g]:vv(t,u,{},{offset:S})};if(Ub(e.bin)&&e.bin.step)return{[y]:R,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}Je(I6e(m))}function oge({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return tM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:V4,endSuffix:H4}:{}})}const sZt=new Set(["aria","width","height"]);function zc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?u4e(e):{};return{...oZt(e.markDef,t),...age(e,"fill",n),...age(e,"stroke",r),...Qs("opacity",e),...Qs("fillOpacity",e),...Qs("strokeOpacity",e),...Qs("strokeWidth",e),...Qs("strokeDash",e),...XJt(e),...o4e(e),...Zne(e,"href"),...GJt(e)}}function age(e,t,n){const{config:r,mark:i,markDef:s}=e;if(br("invalid",s,r)==="hide"&&n&&!Hb(i)){const a=aZt(e,{invalid:!0,channels:S4});if(a)return{[t]:[{test:a,value:null},...ht(n)]}}return n?{[t]:n}:{}}function oZt(e,t){return xYt.reduce((n,r)=>(!sZt.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=ui(e[r])),n),{})}function aZt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Bl(u)&&(s[l]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Cne(o,t)).join(` ${s} `)}}function tre(e){const{config:t,markDef:n}=e;if(br("invalid",n,t)){const i=uZt(e,{channels:Jh});if(i)return{defined:{signal:i}}}return{}}function uZt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Bl(l)&&(s[c]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Cne(o,t)).join(` ${s} `)}}function uge(e,t){if(t!==void 0)return{[e]:ui(t)}}const V9="voronoi",f4e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(V9)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Hb(s))return Je(kYt(s)),n;const o={name:e.getName(V9),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...o4e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(V9)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},d4e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!qne(e.bind),parse:(e,t,n)=>_4e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=f4e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ei(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:cb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${nt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+dy)[0],o=r+fR,a=i.items.map(l=>Ei(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},fM="_toggle",h4e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+fM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+dy,r=t.name+fM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${_v(e)}}, `)+`${r} ? ${n} : null`}},lZt={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=pt(t.clear)?jy(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(d4e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ei(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+dy);r(i,"null"),h4e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+fM),r(i,"false"))}return n}},p4e={defined:e=>{const t=e.resolve==="global"&&e.bind&&qne(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Wf;return t&&!n&&Je(DYt),t&&n},parse:(e,t,n)=>{const r=en(n);if(r.select=pt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},_4e(t,r),mt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ht(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=j9(t.bind)?t.bind.legend:"click",s=pt(i)?jy(i,"view"):ht(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=j9(t.bind)&&t.bind.legend,s=o=>a=>{const u=en(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ei(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+dy),o=r+fR,a=i.items.filter(d=>d.hasLegend).map(d=>Ei(`${r}_${Ei(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+fM),f=j9(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function cZt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Ro(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&p4e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const m4e="_translate_anchor",g4e="_translate_delta",fZt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=nm.defined(t),s=r+m4e,{x:o,y:a}=t.project.hasChannel;let u=jy(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Gw,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?NH(e,xi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?NH(e,lo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+g4e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&lge(e,t,o,"width",n),a!==void 0&&lge(e,t,a,"height",n),n}};function lge(e,t,n,r,i){const s=t.name,o=s+m4e,a=s+g4e,u=n.channel,l=nm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===xi?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const y4e="_zoom_anchor",v4e="_zoom_delta",dZt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=nm.defined(t),s=r+v4e,{x:o,y:a}=t.project.hasChannel,u=nt(e.scaleName(xi)),l=nt(e.scaleName(lo));let c=jy(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Gw,f))),n.push({name:r+y4e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&cge(e,t,o,"width",n),a!==void 0&&cge(e,t,a,"height",n),n}};function cge(e,t,n,r,i){const s=t.name,o=n.channel,a=nm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?NH(e,o):u.name,h=s+v4e,p=`${s}${y4e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const fb="_store",dy="_tuple",hZt="_modify",b4e="vlSelectionResolve",W4=[WJt,HJt,zJt,h4e,d4e,nm,p4e,lZt,fZt,dZt,f4e];function pZt(e){let t=e.parent;for(;t&&!Al(t);)t=t.parent;return t}function _v(e,{escape:t}={escape:!0}){let n=t?nt(e.name):e.name;const r=pZt(e);if(r){const{facet:i}=r;for(const s of mc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${nt(r.vgField(s))}])`)}return n}function nre(e){return Ro(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function _4e(e,t){(pt(t.select)||!t.select.on)&&delete e.events,(pt(t.select)||!t.select.clear)&&delete e.clear,(pt(t.select)||!t.select.toggle)&&delete e.toggle}function PH(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...PH(e.object)),t.push(...PH(e.property))),t)}function w4e(e){return e.object.type==="MemberExpression"?w4e(e.object):e.object.name==="datum"}function E4e(e){const t=Ete(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&w4e(r)&&n.add(PH(r).slice(1).join("."))}),n}class RS extends Dr{clone(){return new RS(null,this.model,en(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=dM(this.model,this.filter,this),this._dependentFields=E4e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function mZt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ei(i.name),o=i.select,a=pt(o)?o:o.type,u=mt(o)?en(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=en(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:pt(u.on)?jy(u.on,"scope"):ht(en(u.on))},f=en(i);for(const d of W4)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function x4e(e,t,n,r="datum"){const i=pt(t)?t:t.param,s=Ei(i),o=nt(s+fb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${nt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function S4e(e,t,n){const r=Ei(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Je(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${nt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Je((a.length?"Multiple ":"No ")+`matching ${nt(i)} encoding found for selection ${nt(n.param)}. Using "field": ${nt(s)}.`)):s=a[0].field}return`${o.name}[${nt(kc(s))}]`}function gZt(e,t){for(const[n,r]of ay(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Uu(new RS(t,e,{param:n}),i,vi.Lookup,e.component.data.outputNodeRefCounts)}}function dM(e,t,n){return TC(t,r=>pt(r)?r:GKt(r)?x4e(e,r,n):B6e(r))}function yZt(e,t){if(e)return Fe(e)&&!Rg(e)?e.map(n=>Mne(n,t)).join(", "):e}function H9(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function AA(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=XXt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(cR(m)){const{condition:g,...y}=m,v=ht(g),b=Fme[h];if(b){const{vgProp:w,part:E}=b,S=[...v.map(T=>{const{test:A,...C}=T;return{test:dM(null,A),...C}}),y];H9(c,E,w,S),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:S,...T}=E;return`${dM(null,S)} ? ${Eme(T)} : `}).join("")+Eme(y)};c[h]=w}}else if(Rt(m)){const g=Fme[h];if(g){const{vgProp:y,part:v}=g;H9(c,v,y,m),delete c[h]}}Vn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Mr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:as(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=ib(a,"datum.label",c.encode.labels.update.text.signal)),H9(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of gFe)e.hasAxisPart(p)||delete c.encode[p];Mr(c.encode)&&delete c.encode}const h=yZt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:as(l,0)}}}}function T4e(e){const{axes:t}=e.component,n=[];for(const r of Jh)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function vZt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>AA(i,"grid",t)),...r.map(i=>AA(i,"grid",t)),...n.map(i=>AA(i,"main",t)),...r.map(i=>AA(i,"main",t))].filter(i=>i)}function fge(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ye(o),...Ye(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Ef(o[c])} : ${Ef(a[c])}`};return l}return t[i]})])}function bZt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:H6e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${eR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:fge(a,r,e,n),vgAxisConfig:fge(u,r,e,n),axisConfigStyle:_Zt([...u,...a],r)}}function _Zt(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=ht(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function DH(e,t,n,r={}){var s;const i=v6e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const dge={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??wZt(n,e),gridScale:({model:e,channel:t})=>EZt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||C4e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||A4e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??SZt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??TZt(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??CZt({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:IZt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=I4e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return _6e(i?[Mme(i)]:[],Ze(o)?[Mme(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>kZt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??RZt(n,t)};function wZt(e,t){return!ao(e)&&Ze(t)&&!ri(t==null?void 0:t.bin)&&!wo(t==null?void 0:t.bin)}function EZt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function xZt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:cI(s);{const{configValue:o}=DH("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?cI(o):n===xi&&Vn([Tne,Sne],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function OH(e){return`(((${e.signal} % 360) + 360) % 360)`}function A4e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=OH(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=OH(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function C4e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=OH(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function SZt(e,t){if(t==="x"&&Vn(["quantitative","temporal"],e))return!0}function TZt(e,t,n,r){if(n&&!mt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function AZt(e){return e==="x"?"bottom":"left"}function CZt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ao(t)&&t!=="log"){if(Ze(e)){if(ri(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Vn(["month","hours","day","quarter"],(i=oo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function IZt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ze(t)){const{timeUnit:n}=t;if(n){const r=L6e(n);if(r)return{signal:r}}}}function I4e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return w6e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function kZt(e,t){const n=e.values;if(Fe(n))return mFe(t,n);if(Rt(n))return n}function RZt(e,t){return e==="rect"&&iM(t)?1:0}class fx extends Dr{clone(){return new fx(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=E4e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(qb(r)&&sFe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${B6e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new fx(t,{calculate:u,as:dx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${zn(this.transform)}`}}function dx(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function G4(e,t){return Vn(["top","bottom"],t)?"column":Vn(["left","right"],t)||e==="row"?"row":"column"}function hx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return as((t||{})[e],i[e],n.header[e])}function Y4(e,t,n,r){const i={};for(const s of e){const o=hx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const rre=["row","column"],ire=["header","footer"];function NZt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=Y4(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=G4(t,a),l=cI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...R4e(l,u),...k4e(u,l,s),...N4e(r,i,t,vQt,DFe)}}}function k4e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=C4e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function R4e(e,t){const n=A4e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function PZt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of ire)if(n[i])for(const s of n[i]){const o=OZt(e,t,i,n,s);o!=null&&r.push(o)}return r}function DZt(e,t){const{sort:n}=e;return uh(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:Fe(n)?{field:dx(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function $H(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=Y4(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=kne({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=G4(t,a);return{text:{signal:u?ib(ib(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...R4e(s,c),...k4e(c,s,o),...N4e(n,e,t,bQt,OFe)}}function OZt(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=Y4(["labelOrient"],o.header,a,t);(t==="row"&&!Vn(["top","bottom"],f)||t==="column"&&!Vn(["left","right"],f))&&(s=$H(o,t,a))}const u=Al(e)&&!aR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:DZt(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const $Zt={column:{start:0,end:1},row:{start:1,end:0}};function MZt(e,t){return $Zt[t][e]}function LZt(e,t){const n={};for(const r of mc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=Y4(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=G4(r,o),u=MZt(s,a);u!==void 0&&(n[a]=u)}}return Mr(n)?void 0:n}function N4e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=hx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function sre(e){return[...iP(e,"width"),...iP(e,"height"),...iP(e,"childWidth"),...iP(e,"childHeight")]}function iP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(ao(o)&&Wy(a)){const u=e.scaleName(n);return Al(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[hge(u,a)]:[hge(u,a),{name:i,update:P4e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=CH(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function hge(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function P4e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=as(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Ef(o)}, ${Ef(s)}) * ${e}_step`}function D4e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function O4e(e,t){return Ye(e).reduce((n,r)=>{const i=e[r];return{...n,...kS(t,i,r,s=>ui(s.value))}},{})}function $4e(e,t){if(Al(t))return e==="theta"?"independent":"shared";if(DS(t))return"shared";if(dre(t))return us(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function ore(e,t){const n=e.scale[t],r=us(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Je(mKt(t)),"independent"):e[r][t]||"shared"}const FZt={...EQt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},M4e=Ye(FZt);class jZt extends ag{}const pge={symbols:BZt,gradient:UZt,labels:zZt,entries:VZt};function BZt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...AYt({},n,TXt),...u4e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?L4e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Xu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=ui(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=ui(m??1));else if(Fe(f.fill)){const g=MH(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=ui(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Xu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Fe(f.stroke)){const g=as(MH(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==ig){const g=Ze(t)&&j4e(n,i,t);g?f.opacity=[{test:g,...ui(m??1)},ui(u.legend.unselectedOpacity)]:m&&(f.opacity=ui(m))}return f={...f,...e},Mr(f)?void 0:f}function UZt(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?L4e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=ui(l)),a={...a,...e},Mr(a)?void 0:a}function zZt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ze(t)?j4e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;ub(c)?f=Sf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Sf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(f=Sf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Mr(d)?void 0:d}function VZt(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function L4e(e){return F4e(e,(t,n)=>Math.max(t,n.value))}function MH(e){return F4e(e,(t,n)=>as(t,n.value))}function F4e(e,t){if(FXt(e))return ht(e.condition).reduce(t,e.value);if(qf(e))return e.value}function j4e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=nt(n.field);return r.map(s=>`(!length(data(${nt(Ei(s)+fb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const mge={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return X6e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Q6e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??XZt(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??QZt(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??qZt(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Ww(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(qw(n)&&xf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>HZt(t,e)};function HZt(e,t){const n=e.values;if(Fe(n))return mFe(t,n);if(Rt(n))return n}function qZt(e,t,n,r){if(t!=="shape"){const i=MH(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function WZt(e){const{legend:t}=e;return as(t.type,GZt(e))}function GZt({channel:e,timeUnit:t,scaleType:n}){if(qw(e)){if(Vn(["quarter","month","day"],t))return"symbol";if(xf(n))return"gradient"}return"symbol"}function YZt({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??KZt(n,t)}function KZt(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function XZt({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(xf(i))return n==="horizontal"?r==="top"||r==="bottom"?gge(t,"width",o,s):o:gge(t,"height",u,a)}function gge(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function QZt(e){if(Vn(["quantile","threshold","log","symlog"],e))return"greedy"}function B4e(e){const t=Hi(e)?JZt(e):nen(e);return e.component.legends=t,t}function JZt(e){const{encoding:t}=e,n={};for(const r of[Xu,...MFe]){const i=ks(t[r]);!i||!e.getScaleComponent(r)||r===Qu&&Ze(i)&&i.type===IS||(n[r]=ten(e,r))}return n}function ZZt(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function een(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function ten(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new jZt({},ZZt(e,t));cZt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=ks(i[t]),f=Ze(c)?(w=oo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=WZt({legend:n,channel:t,timeUnit:f,scaleType:l}),p=YZt({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of M4e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const S=E in mge?mge[E](m):n[E];if(S!==void 0){const T=een(S,E,n,e.fieldDef(t));(T||s.legend[E]===void 0)&&a.set(E,S,T)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const S=O4e(g[E]??{},e),T=E in pge?pge[E](S,b):S;T!==void 0&&!Mr(T)&&(v[E]={...y!=null&&y.length&&Ze(c)?{name:`${Ei(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:T})}return Mr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function nen(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){B4e(r);for(const i of Ye(r.component.legends))n.legend[i]=ore(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=U4e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ye(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function U4e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of M4e){const c=cy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return ren(f,d);case"title":return E6e(f,d);case"type":return i=!0,al("symbol")}return z4(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&J$(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&J$(e.explicit,["encode","gradient"])),e}function ren(e,t){return t.value==="circle"?t:e}function ien(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function z4e(e){const t=e.component.legends,n={};for(const i of Ye(t)){const s=e.getScaleComponent(i),o=Lr(s.get("domains"));if(n[o])for(const a of n[o])U4e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Ro(n).flat().map(i=>sen(i,e.config)).filter(i=>i!==void 0)}function sen(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of MFe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=ib(r,"datum.label",s.encode.labels.update.text.signal)),ien(s,"labels","text",{signal:l})}return s}}function oen(e){return DS(e)||dre(e)?aen(e):V4e(e)}function aen(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),V4e(e))}function V4e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Vn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const uen=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class H4e extends ag{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function q4e(e){e.component.projection=Hi(e)?len(e):den(e)}function len(e){if(e.hasProjection){const t=Eu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?cen(e):void 0,s=new H4e(e.projectionName(!0),{...Eu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function cen(e){const t=[],{encoding:n}=e;for(const r of[[id,rd],[Rc,sd]])(ks(n[r[0]])||ks(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Qu)&&e.typedFieldDef(Qu).type===IS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(vi.Main)),t}function fen(e,t){const n=Zte(uen,i=>!!(!Ft(e.explicit,i)&&!Ft(t.explicit,i)||Ft(e.explicit,i)&&Ft(t.explicit,i)&&El(e.get(i),t.get(i))));if(El(e.size,t.size)){if(n)return e;if(El(e.explicit,{}))return t;if(El(t.explicit,{}))return e}return null}function den(e){if(e.children.length===0)return;let t;for(const r of e.children)q4e(r);const n=Zte(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=fen(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new H4e(r,t.specifiedProjection,t.size,en(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function hen(e,t,n,r){if(lR(t,n)){const i=Hi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:oR(s,o,i.format,i.formatType,r)}}return{}}function W4e(e,t){return`${p6e(e)}_${t}`}function pen(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function are(e,t,n){const r=M4(n,void 0)??{},i=W4e(r,t);return e.getName(`${i}_bins`)}function men(e){return"as"in e}function yge(e,t,n){let r,i;men(e)?r=pt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...M4(t,void 0)},o=W4e(s,e.field),{signal:a,extentSignal:u}=pen(n,o);if(T4(s.extent)){const c=s.extent;i=S4e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class ch extends Dr{clone(){return new ch(null,en(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Za(s)&&ri(s.bin)){const{key:a,binComponent:u}=yge(s,s.bin,n);i[a]={...u,...i[a],...hen(n,s,o,n.config)}}return i},{});return Mr(r)?null:new ch(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=yge(n,n.bin,r);return new ch(t,{[i]:s})}merge(t,n){for(const r of Ye(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Gd([...this.bins[r].as,...t.bins[r].as],zn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Ro(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ro(this.bins).map(t=>t.field))}hash(){return`Bin ${zn(this.bins)}`}assemble(){return Ro(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:kc(t.field),as:r,signal:t.signal,...T4(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:kc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function gen(e,t,n,r){var s;const i=Hi(r)?r.encoding[Qh(t)]:void 0;if(Za(n)&&Hi(r)&&aFe(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=ly({fieldDef:n,markDef:a,config:u});fI(o)&&l!==.5&&us(t)&&(e.add(at(n,{suffix:V4})),e.add(at(n,{suffix:H4}))),n.bin&&lR(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(i6e(t)){const o=r6e(t);e.add(r.getName(o))}else e.add(at(n));return qb(n)&&oXt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function yen(e,t){for(const n of Ye(t)){const r=t[n];for(const i of Ye(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Of extends Dr{clone(){return new Of(null,new Set(this.dimensions),en(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Dm(u)||qy(u)){const c=Dm(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);sg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else gen(s,a,o,n)}),s.size+Ye(i).length===0)?null:new Of(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ye(i).length===0?null:new Of(t,r,i)}merge(t){return KLe(this.dimensions,t.dimensions)?(yen(this.measures,t.measures),!0):(NKt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ye(this.measures)])}producedFields(){const t=new Set;for(const n of Ye(this.measures))for(const r of Ye(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${zn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ye(this.measures))for(const o of Ye(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:kc(s));return{type:"aggregate",groupby:[...this.dimensions].map(kc),ops:t,fields:n,as:r}}}class NS extends Dr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of mc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...ri(a)?[at(o,{binSuffix:"end"})]:[]],...uh(u)?{sortField:u}:Fe(u)?{sortIndexField:dx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of mc)this[n]&&(t+=` ${n.charAt(0)}:${zn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of mc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of mc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Jh){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(ao(i)&&Wy(s)){const o=K4(this.childModel,n),a=fre(o);a?t[n]=a:Je(dne(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=P4,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of rre){for(const c of ire){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[tm,em])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function vge(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function ven(e,t){const n=nne(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=vge(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=vge(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Je(BYt(t)),null}function ben(e){const t={};return PD(e.filter,n=>{if(j6e(n)){let r=null;gne(n)?r=ml(n.equal):vne(n)?r=ml(n.lte):yne(n)?r=ml(n.lt):bne(n)?r=ml(n.gt):_ne(n)?r=ml(n.gte):wne(n)?r=n.range[0]:Ene(n)&&(r=(n.oneOf??n.in)[0]),r&&(zb(r)?t[n.field]="date":ur(r)?t[n.field]="number":pt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function _en(e){const t={};function n(r){ux(r)?t[r.field]="date":r.type==="quantitative"&&yYt(r.aggregate)?t[r.field]="number":tx(r.field)>1?r.field in t||(t[r.field]="flatten"):qb(r)&&uh(r.sort)&&tx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Hi(e)||Al(e))&&e.forEachFieldDef((r,i)=>{if(Za(r))n(r);else{const s=Bb(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Hi(e)){const{mark:r,markDef:i,encoding:s}=e;if(Hb(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ze(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function wen(e){const t={};if(Hi(e)&&e.component.selection)for(const n of Ye(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&tx(i.field)>1&&(t[i.field]="flatten")}return t}class ca extends Dr{clone(){return new ca(null,en(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${zn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!A0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ye(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Je(Ime(a,r[a],u.value)))}for(const a of Ye(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Je(Ime(a,n[a],u)))}const s=new ag(n,r);i.copyAll(s);const o={};for(const a of Ye(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ye(o).length===0||i.parseNothing?null:new ca(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ye(this._parse)){const r=this._parse[n];tx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ye(this._parse))}dependentFields(){return new Set(Ye(this._parse))}assembleTransforms(t=!1){return Ye(this._parse).filter(n=>t?tx(n)>1:!0).map(n=>{const r=ven(n,this._parse[n]);return r?{type:"formula",expr:r,as:AS(n)}:null}).filter(n=>n!==null)}}class hy extends Dr{clone(){return new hy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Wf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Wf}}}class dR extends Dr{clone(){return new dR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${zn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class hR extends Dr{clone(){return new hR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${zn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class db extends Dr{constructor(t){super(null),t??(t={name:"source"});let n;if(A0(t)||(n=t.format?{...ju(t.format,["parse"])}:{}),dI(t))this._data={values:t.values};else if(lx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Vn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else e4e(t)?this._data={values:[{type:"Sphere"}]}:(JFe(t)||A0(t))&&(this._data={});this._generator=A0(t),t.name&&(this._name=t.name),n&&!Mr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var bge=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Een=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},CA;function ure(e){return e instanceof db||e instanceof dR||e instanceof hR}class lre{constructor(){CA.set(this,void 0),bge(this,CA,!1,"f")}setModified(){bge(this,CA,!0,"f")}get modifiedFlag(){return Een(this,CA,"f")}}CA=new WeakMap;class Wb extends lre{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class cre extends lre{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class xen extends cre{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ye(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Sen extends cre{constructor(t){super(),this.requiresSelectionId=t&&nre(t)}run(t){t instanceof hy&&(this.requiresSelectionId&&(ure(t.parent)||t.parent instanceof Of||t.parent instanceof ca)||(this.setModified(),t.remove()))}}class Ten extends lre{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof lh&&(r=t.producedFields(),ene(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Aen extends cre{constructor(){super()}run(t){t instanceof Uu&&!t.isRequired()&&(this.setModified(),t.remove())}}class Cen extends Wb{run(t){if(!ure(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ca)if(t instanceof ca)this.setModified(),t.merge(n);else{if(tne(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Ien extends Wb{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ca);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ye(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Mr(i)){this.setModified();const o=new ca(t,i);for(const a of n){if(a instanceof ca)for(const u of Ye(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ca&&Ye(a.parse).length===0&&a.remove()}}}}}class ken extends Wb{run(t){t instanceof Uu||t.numChildren()>0||t instanceof NS||t instanceof db||(this.setModified(),t.remove())}}class Ren extends Wb{run(t){const n=t.children.filter(i=>i instanceof lh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Nen extends Wb{run(t){const n=t.children.filter(i=>i instanceof Of),r={};for(const i of n){const s=zn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ye(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Pen extends Wb{constructor(t){super(),this.model=t}run(t){const n=!(ure(t)||t instanceof RS||t instanceof ca||t instanceof hy),r=[],i=[];for(const s of t.children)s instanceof ch&&(n&&!tne(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof ch?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Den extends Wb{run(t){const n=[...t.children];if(!rb(n,o=>o instanceof Uu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Uu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Uu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class Gb extends Dr{clone(){return new Gb(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Gd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${zn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Oen(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function $en(e){return Fe(e)&&e.every(t=>pt(t))&&e.length>1}class rm extends Dr{clone(){return new rm(null,en(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(as(f.order,"ascending"));const l={field:a,order:u};let c;return $en(s)?c=s:pt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new rm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Ch(p)}).filter(h=>!!h),c=Oen(n),f=n.encoding.order;let d;if(Fe(f)||Ze(f))d=b6e(f);else{const h=uFe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new rm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${zn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class PS extends Dr{clone(){return new PS(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Gd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${zn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>cne(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Men(e){function t(n){if(!(n instanceof NS)){const r=n.clone();if(r instanceof Uu){const i=FH+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Of||r instanceof rm||r instanceof PS||r instanceof Gb)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function LH(e){if(e instanceof NS)if(e.numChildren()===1&&!(e.children[0]instanceof Uu)){const t=e.children[0];(t instanceof Of||t instanceof rm||t instanceof PS||t instanceof Gb)&&t.addDimensions(e.fields),t.swapWithParent(),LH(e)}else{const t=e.model.component.data.main;G4e(t);const n=Men(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(LH)}function G4e(e){if(e instanceof Uu&&e.type===vi.Main&&e.numChildren()===1){const t=e.children[0];t instanceof NS||(t.swapWithParent(),G4e(e))}}const FH="scale_",sP=5;function jH(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!jH(t.children))return!1}return!0}function Kc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function _ge(e,t,n){let r=e.sources,i=!1;return i=Kc(new Aen,r)||i,i=Kc(new Sen(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Kc(new ken,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Kc(new Cen,r)||i,i=Kc(new Pen(t),r)||i,i=Kc(new Ten,r)||i,i=Kc(new Ien,r)||i,i=Kc(new Nen,r)||i,i=Kc(new Ren,r)||i,i=Kc(new xen,r)||i,i=Kc(new Den,r)||i),e.sources=r,i}function Len(e,t){jH(e.sources);let n=0,r=0;for(let i=0;i<sP&&_ge(e,t,!0);i++)n++;e.sources.map(LH);for(let i=0;i<sP&&_ge(e,t,!1);i++)r++;jH(e.sources),Math.max(n,r)===sP&&Je(`Maximum optimization runs(${sP}) reached.`)}class Ks{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Ks(()=>t(n))}}function Y4e(e){Hi(e)?Fen(e):jen(e)}function Fen(e){const t=e.component.scales;for(const n of Ye(t)){const r=Uen(e,n);if(t[n].setWithExplicit("domains",r),Ven(e,n),e.component.data.isFaceted){let s=e;for(;!Al(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Hp(a)&&(a.data=FH+a.data.replace(FH,""))}}}function jen(e){for(const n of e.children)Y4e(n);const t=e.component.scales;for(const n of Ye(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=cy(r,o.getWithExplicit("domains"),"domains","scale",BH);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Je(MYt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Ben(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=wge(t,n);if(!i){Je(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=wge(t,n);if(i)return"unaggregated"}return e}function Uen(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Ben(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&ks(r.x2)?ks(r.x)?cy(wg(n,i,e,"x"),wg(n,i,e,"x2"),"domain","scale",BH):wg(n,i,e,"x2"):t==="y"&&ks(r.y2)?ks(r.y)?cy(wg(n,i,e,"y"),wg(n,i,e,"y2"),"domain","scale",BH):wg(n,i,e,"y2"):wg(n,i,e,t)}function zen(e,t,n){return e.map(r=>({signal:`{data: ${L4(r,{timeUnit:n,type:t})}}`}))}function q9(e,t,n){var i;const r=(i=oo(n))==null?void 0:i.unit;return t==="temporal"||r?zen(e,t,r):[e]}function wg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=ks(i[r]),{type:c}=l,f=l.timeUnit;if(sXt(t)){const p=wg(e,void 0,n,r),m=q9(t.unionWith,c,f);return Td([...m,...p.value])}else{if(Rt(t))return Td([t]);if(t&&t!=="unaggregated"&&!W6e(t))return Td(q9(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return al([[0,1]]);const p=n.requestDataName(vi.Main);return al([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=sg(r)&&Ze(l)?Hen(n,r,e):void 0;if(Zh(l)){const p=q9([l.datum],c,f);return al(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(vi.Main),{field:m}=l;return al([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(ri(h.bin)){if(ao(e))return al(e==="bin-ordinal"?[]:[{data:lI(d)?n.requestDataName(vi.Main):n.requestDataName(vi.Raw),field:n.vgField(r,lR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!mt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ri(p)){const m=are(n,h.field,p);return al([new Ks(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return al([{data:n.requestDataName(vi.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Vn(["time","utc"],e)){const p=i[Qh(r)];if(aFe(h,p,s,a)){const m=n.requestDataName(vi.Main),g=ly({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=fI(o)&&g!==.5&&us(r);return al([{data:m,field:n.vgField(r,y?{suffix:V4}:{})},{data:m,field:n.vgField(r,{suffix:y?H4:"end"})}])}}return al(d?[{data:lI(d)?n.requestDataName(vi.Main):n.requestDataName(vi.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(vi.Main),field:n.vgField(r)}])}function W9(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":P4),...r?{field:kc(r)}:{},...i?{order:i}:{}}}function Ven(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=W6e(r)&&r,o=Ub(i)&&T4(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Hen(e,t,n){if(!ao(n))return;const r=e.fieldDef(t),i=r.sort;if(sFe(i))return{op:"min",field:dx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(uh(i)){const a=s&&!o.has(i.field);return W9(i,a)}else if(iFe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Dm(c)||qy(c))return W9({field:at(l),order:u},d);if(cne(c)||!c)return W9({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Vn(["ascending",void 0],i))return!0}}function wge(e,t){const{aggregate:n,type:r}=e;return n?pt(n)&&!bYt.has(n)?{valid:!1,reason:uKt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:lKt(e)}:{valid:!0}:{valid:!1,reason:aKt(e)}}function BH(e,t,n,r){return e.explicit&&t.explicit&&Je(pKt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function qen(e){const t=Gd(e.map(o=>{if(Hp(o)){const{sort:a,...u}=o;return u}return o}),zn),n=Gd(e.map(o=>{if(Hp(o)){const a=o.sort;return a!==void 0&&!lI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),zn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Hp(o)&&n.length>0){let a=n[0];if(n.length>1){Je(Rme);const u=n.filter(l=>mt(l)&&"op"in l&&l.op!=="min");n.every(l=>mt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(mt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Gd(n.map(o=>lI(o)||!("op"in o)||pt(o.op)&&o.op in mYt?o:(Je(gKt(o)),!0)),zn);let i;r.length===1?i=r[0]:r.length>1&&(Je(Rme),i=!0);const s=Gd(e.map(o=>Hp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function fre(e){if(Hp(e)&&pt(e.field))return e.field;if(_Yt(e)){let t;for(const n of e.fields)if(Hp(n)&&pt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Je(yKt),t}return Je(vKt),t}else if(wYt(e)){Je(bKt);const t=e.fields[0];return pt(t)?t:void 0}}function K4(e,t){const r=e.component.scales[t].get("domains").map(i=>(Hp(i)&&(i.data=e.lookupDataSource(i.data)),i));return qen(r)}function K4e(e){return DS(e)||dre(e)?e.children.reduce((t,n)=>t.concat(K4e(n)),Ege(e)):Ege(e)}function Ege(e){return Ye(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Wen(i.range,s,n,e),h=K4(e,n),p=a?BJt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Wen(e,t,n,r){if(us(n)){if(Wy(e))return{step:{signal:`${t}_step`}}}else if(mt(e)&&Hp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class X4e extends ag{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:rb(this.get("domains"),t=>Fe(t)&&t.length===2&&ur(t[0])&&t[0]<=0&&ur(t[1])&&t[1]>=0)}}const Gen=["range","scheme"];function Yen(e){const t=e.component.scales;for(const n of S4){const r=t[n];if(!r)continue;const i=Ken(n,e);r.setWithExplicit("range",i)}}function xge(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Ju(t),o=e.getName(s);if(mt(r)&&r.binned&&r.step!==void 0)return new Ks(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ri(r)){const a=are(e,i,r);return new Ks(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Ken(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Gen)if(n[f]!==void 0){const d=SH(s,f),h=G6e(e,f);if(!d)Je(A6e(s,f,e));else if(h)Je(h);else switch(f){case"range":{const p=n.range;if(Fe(p)){if(us(e))return Td(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Ks.fromName(y,g)}return m}))}else if(mt(p))return Td({data:t.requestDataName(vi.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Td(p)}case"scheme":return Td(Xen(n[f]))}}const o=e===xi||e==="xOffset"?"width":"height",a=r[o];if(Ih(a)){if(us(e))if(ao(s)){const f=J4e(a,t,e);if(f)return Td({step:f})}else Je(C6e(o));else if(rR(e)){const f=e===By?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=Z4e(a,s);if(p)return Td(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Qen(e,t);return(u!==void 0||l!==void 0)&&SH(s,"rangeMin")&&Fe(c)&&c.length===2?Td([u??c[0],l??c[1]]):al(c)}function Xen(e){return iXt(e)?{scheme:e.name,...ju(e,["name"])}:{scheme:e}}function Q4e(e,t,n,{center:r}={}){const i=Ju(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===lo&&Bl(n)?r?[Ks.fromName(a=>`${o(a)}/2`,s),Ks.fromName(a=>`-${o(a)}/2`,s)]:[Ks.fromName(o,s),0]:r?[Ks.fromName(a=>`-${o(a)}/2`,s),Ks.fromName(a=>`${o(a)}/2`,s)]:[0,Ks.fromName(o,s)]}function Qen(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=ks(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case xi:case lo:{if(Vn(["point","band"],u)){const f=e5e(e,n,r.view);if(Ih(f))return{step:J4e(f,t,e)}}return Q4e(e,t,u)}case By:case CS:return Jen(e,t,u);case rg:{const f=t.component.scales[e].get("zero"),d=t5e(i,f,r),h=ttn(i,n,t,r);return sx(u)?etn(d,h,Zen(u,r,l,e)):[d,h]}case Uc:return[0,Math.PI*2];case jb:return[0,360];case nd:return[0,new Ks(()=>{const f=t.getSignalName(Al(t.parent)?"child_width":"width"),d=t.getSignalName(Al(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Vy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Hy:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Qu:return"symbol";case Xu:case Kh:case Xh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case ig:case Uy:case zy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function J4e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=one(n),o=r[s];if(FFe({step:e,offsetIsDiscrete:an(o)&&U6e(o.type)})==="offset"&&bFe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${TYt(f)})`}}else return e.step}function Z4e(e,t){if(FFe({step:e,offsetIsDiscrete:ao(t)})==="offset")return{step:e.step}}function Jen(e,t,n){const r=e===By?"x":"y",i=t.getScaleComponent(r);if(!i)return Q4e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=e5e(r,t.size,t.config.view);if(Ih(l)){const c=Z4e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ze(l)&&l.timeUnit){const c=L6e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=ly({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return GLe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function e5e(e,t,n){const r=e===xi?"width":"height",i=t[r];return i||lM(n,r)}function Zen(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Fe(n)?n.length+1:(Je(IKt(r)),3)}}function etn(e,t,n){const r=()=>{const i=Ef(t),s=Ef(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new Ks(r):{signal:r()}}function t5e(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${t5e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(A4("size",e))}const Sge=.95;function ttn(e,t,n,r){const i={x:xge(n,"x"),y:xge(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Tge(t,i,r.view);return ur(s)?s-1:new Ks(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Tge(t,i,r.view);return ur(s)?Math.pow(Sge*s,2):new Ks(()=>`pow(${Sge} * ${s.signal}, 2)`)}}throw new Error(A4("size",e))}function Tge(e,t,n){const r=Ih(e.width)?e.width.step:uM(n,"width"),i=Ih(e.height)?e.height.step:uM(n,"height");return t.x||t.y?new Ks(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function n5e(e,t){Hi(e)?ntn(e,t):i5e(e,t)}function ntn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ye(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=ks(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=SH(h,t),y=G6e(a,t);if(d!==void 0&&(g?y&&Je(y):Je(A6e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":zb(u[t])||b==="temporal"||v?l.set(t,{signal:L4(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in Age?Age[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:_Fe(i,a),hasSecondaryRangeChannel:!!i[Qh(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const Age={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?rtn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>itn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>stn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>otn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>atn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>utn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return ltn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>ctn(e,t,n,r,i,s.scale,o)};function r5e(e){Hi(e)?Yen(e):i5e(e,"range")}function i5e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?r5e(r):n5e(r,t);for(const r of Ye(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=cy(i,a,t,"scale",QFe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function rtn(e,t){const n=t.bin;if(ri(n)){const r=are(e,t.field,n);return new Ks(()=>e.getSignalName(r))}else if(wo(n)&&Ub(n)&&n.step!==void 0)return{step:n.step}}function itn(e,t){if(Vn([Xu,Kh,Xh],e)&&t!=="nominal")return"hcl"}function stn(e,t,n,r,i,s){var o;if(!((o=Ch(s))!=null&&o.bin||Fe(n)||i!=null||r!=null||Vn([Bu.TIME,Bu.UTC],e)))return us(t)?!0:void 0}function otn(e,t,n,r,i,s){if(us(e)){if(xf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Bu.POINT)return n.pointPadding}}function atn(e,t,n,r,i,s=!1){if(e===void 0){if(us(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:as(o,n==="bar"?a:u)}else if(rR(t)&&r===Bu.BAND)return i.offsetBandPaddingInner}}function utn(e,t,n,r,i,s=!1){if(e===void 0){if(us(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Bu.BAND)return as(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(rR(t)){if(n===Bu.POINT)return .5;if(n===Bu.BAND)return i.offsetBandPaddingOuter}}}function ltn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Bl(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Bl(e)&&t==="descending")return!0}function ctn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Bl(i)){if(Fe(n)){const u=n[0],l=n[n.length-1];if(ur(u)&&u<=0&&ur(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!sx(i))return!0;if(!(Ze(t)&&t.bin)&&Vn([...Jh,...aYt],e)){const{orient:u,type:l}=r;return Vn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Vn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function ftn(e,t,n,r,i=!1){const s=dtn(t,n,r,i),{type:o}=e;return sg(t)?o!==void 0?fXt(t,o)?Ze(n)&&!cXt(o,n.type)?(Je(dKt(o,s)),s):o:(Je(fKt(t,o,s)),s):s:null}function dtn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(qw(e)||L9(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Je(F9(e,"ordinal")),"ordinal";if(us(e)||rR(e)){if(Vn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in lne)return"band";const s=n[Ju(e)];return lb(s)||ax(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return qw(e)?"time":L9(e)==="discrete"?(Je(F9(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&oo(t.timeUnit).utc?"utc":"time";case"quantitative":return qw(e)?Ze(t)&&ri(t.bin)?"bin-ordinal":"linear":L9(e)==="discrete"?(Je(F9(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(S6e(t.type))}function htn(e,{ignoreRange:t}={}){s5e(e),Y4e(e);for(const n of lXt)n5e(e,n);t||r5e(e)}function s5e(e){Hi(e)?e.component.scales=ptn(e):e.component.scales=gtn(e)}function ptn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of S4){const o=ks(t[s]);if(o&&n===tFe&&s===Qu&&o.type===IS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=_Fe(t,s),l=ftn(a,s,o,r,u);i[s]=new X4e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const mtn=QFe((e,t)=>Pme(e)-Pme(t));function gtn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){s5e(s);for(const o of Ye(s.component.scales))if((t=i.scale)[o]??(t[o]=$4e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?ZKt(a.value,u.value)?r[o]=cy(a,u,"type","scale",mtn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ye(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new X4e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class G9{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Hi(e){return(e==null?void 0:e.type)==="unit"}function Al(e){return(e==null?void 0:e.type)==="facet"}function dre(e){return(e==null?void 0:e.type)==="concat"}function DS(e){return(e==null?void 0:e.type)==="layer"}class hre{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Eu(a),this.name=t.name??i,this.title=Rg(t.title)?{text:t.title}:t.title?Eu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new G9,this.projectionNameMap=r?r.projectionNameMap:new G9,this.signalNameMap=r?r.signalNameMap:new G9,this.data=t.data,this.description=t.description,this.transforms=xJt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:CQt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:D4(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new ag,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?en(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){htn(this)}parseProjection(){q4e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){B4e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ye(r)){const o=r[s];o!==void 0&&(i[s]=ui(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=ui(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Mr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=LZt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of mc)t[r].title&&n.push(NZt(this,r));for(const r of rre)n=n.concat(PZt(this,r));return n}assembleAxes(){return vZt(this.component.axes,this.config)}assembleLegends(){return z4e(this)}assembleProjections(){return oen(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...m6e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Vn(["unit","layer"],this.type)?Vn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Mr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Al(this.parent)?K4e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ei((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(vi[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Al(this.parent)){const n=D4e(t),r=x4(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(ao(s)&&Wy(o)){const a=i.get("name"),u=K4(this,r),l=fre(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:P4e(a,i,c)}}else return Je(dne(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(o6e(t)&&sg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(RYt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class o5e extends hre{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return nQt(this.getMapping(),(r,i,s)=>{const o=Ch(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){jne(this.getMapping(),(r,i)=>{const s=Ch(r);s&&t(s,i)},n)}}class X4 extends Dr{clone(){return new X4(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${zn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class Q4 extends Dr{clone(){return new Q4(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${zn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class hI extends Dr{clone(){return new hI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(br("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=sg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Bl(d)&&l.aggregate!=="count"&&!Hb(i)&&(u[l.field]=l)}return u},{});return Ye(a).length?new hI(t,a):null}dependentFields(){return new Set(Ye(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${zn(this.filter)}`}assemble(){const t=Ye(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class J4 extends Dr{clone(){return new J4(this.parent,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${zn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Z4 extends Dr{clone(){return new Z4(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${zn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Yw extends Dr{clone(){return new Yw(null,en(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[id,rd],[Rc,sd]]){const s=i.map(o=>{const a=ks(n.encoding[o]);return Ze(a)?a.field:Zh(a)?{expr:`${a.datum}`}:qf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Yw(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Qu)){const i=n.typedFieldDef(Qu);i.type===IS&&(t=new Yw(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(pt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${zn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class pI extends Dr{clone(){return new pI(null,this.projection,en(this.fields),en(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[id,rd],[Rc,sd]]){const i=r.map(o=>{const a=ks(n.encoding[o]);return Ze(a)?a.field:Zh(a)?{expr:`${a.datum}`}:qf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Rc?"2":"";(i[0]||i[1])&&(t=new pI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(pt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${zn(this.fields)} ${zn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class wv extends Dr{clone(){return new wv(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new wv(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ze(i)&&Ze(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=EFe(n.mark,r);return new wv(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${zn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:iJt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class e5 extends Dr{clone(){return new e5(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${zn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class mI extends Dr{clone(){return new mI(null,en(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(sJt(o)){let u=l5e(o.data,s);u||(u=new db(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Uu(u,l,vi.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(oJt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ei(u),u)}catch{throw new Error(OYt(u))}if(a=l.materialized,!a)throw new Error($Yt(u))}return new mI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ht(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${zn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ht(this.transform.as)}:{}};else{let n=this.transform.as;pt(n)||(Je(VYt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class t5 extends Dr{clone(){return new t5(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${zn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class n5 extends Dr{clone(){return new n5(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${zn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class r5 extends Dr{clone(){return new r5(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Gd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${zn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class i5 extends Dr{clone(){return new i5(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${zn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function a5e(e){let t=0;function n(r,i){if(r instanceof db&&!r.isGenerator&&!lx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ca&&(r.parent instanceof db&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof NS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof dR||r instanceof hR||r instanceof hI||r instanceof RS||r instanceof fx||r instanceof pI||r instanceof Of||r instanceof mI||r instanceof PS||r instanceof Gb||r instanceof Z4||r instanceof J4||r instanceof X4||r instanceof e5||r instanceof t5||r instanceof n5||r instanceof hy||r instanceof i5||r instanceof r5||r instanceof Q4)&&i.transform.push(r.assemble()),(r instanceof ch||r instanceof lh||r instanceof wv||r instanceof rm||r instanceof Yw)&&i.transform.push(...r.assemble()),r instanceof Uu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Uu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Uu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function ytn(e){const t=[],n=a5e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function vtn(e,t){const n=[],r=a5e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function btn(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function _tn(e){for(const t of mc)wtn(e,t);Cge(e,"x"),Cge(e,"y")}function wtn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=hx("title",null,r,t);let l=Ww(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Fe(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=hx("labelOrient",a.header,r,t),f=a.header!==null?as((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Vn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[u5e(e,t,f)]}}}function u5e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Cge(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=ore(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=btn(a.get("orient"));o[u]??(o[u]=[u5e(e,s,!1)]);const l=AA(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Etn(e){pre(e),hM(e,"width"),hM(e,"height")}function xtn(e){pre(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";hM(e,t),hM(e,n)}function pre(e){for(const t of e.children)t.parseLayoutSize()}function hM(e,t){const n=D4e(t),r=x4(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??$4e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=cy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Stn(e){const{size:t,component:n}=e;for(const r of Jh){const i=Ju(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Ih(s)?"step":s,!0)}else{const s=Ttn(e,i);n.layoutSize.set(i,s,!1)}}}function Ttn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(ao(s)){const a=lM(r.view,t);return Wy(o)||Ih(a)?"step":a}else return CH(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return CH(r.view,t);{const s=lM(r.view,t);return Ih(s)?s.step:s}}}function UH(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class CC extends o5e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=bre(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!aR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ye(t),r={};for(const i of n){if(![em,tm].includes(i)){Je(A4(i,"facet"));break}const s=t[i];if(s.field===void 0){Je(EH(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Lne(t,n);return r.header?r.header=Eu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=s5(this),this.child.parseData()}parseLayoutSize(){pre(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),_tn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of mc)for(const r of ire){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=hx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=G4(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof CC))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof CC?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof CC){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Jh){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(ao(o)&&Wy(a)){const u=K4(this.child,i),l=fre(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Je(dne(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of mc){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(ri(d)&&u.push(at(f,{binSuffix:"end"})),uh(h)){const{field:p,op:m=P4}=h,g=UH(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Fe(h)){const p=dx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?uh(r.sort)?[UH(r,r.sort,{expr:"datum"})]:Fe(r.sort)?[dx(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(uh(i)?i.order:!Fe(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return $H(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of rre)if(t[s]){const o=hx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return $H(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=ytn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:mc.map(u=>this.facetSortFields(u)).flat(),order:mc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(MJt(this,[]))}]}getMapping(){return this.facet}}function Atn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(uh(s.sort)){const{field:o,op:a=P4}=s.sort;e=i=new Gb(e,{joinaggregate:[{op:a,field:o,as:UH(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function l5e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(dI(e)&&dI(a)){if(El(e.values,a.values))return o}else if(lx(e)&&lx(a)){if(e.url===a.url)return o}else if(JFe(e)&&e.name===o.dataName)return o}}return null}function Ctn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new db({values:[]});return t.push(r),r}const n=l5e(e.data,t);if(n)return A0(e.data)||(n.data.format=YLe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new db(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Itn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(gJt(i))o=e=new fx(e,i),s="derived";else if(Xne(i)){const a=ben(i);o=e=ca.makeWithAncestors(e,{},a,n)??e,e=new RS(e,t,i.filter)}else if(GFe(i))o=e=ch.makeFromTransform(e,i,t),s="number";else if(vJt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ca(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=lh.makeFromTransform(e,i);else if(bJt(i))o=e=Of.makeFromTransform(e,i),s="number",nre(t)&&(e=new hy(e));else if(WFe(i))o=e=mI.make(e,t,i,r++),s="derived";else if(hJt(i))o=e=new PS(e,i),s="number";else if(pJt(i))o=e=new Gb(e,i),s="number";else if(_Jt(i))o=e=rm.makeFromTransform(e,i),s="derived";else if(wJt(i))o=e=new Z4(e,i),s="derived";else if(EJt(i))o=e=new Q4(e,i),s="derived";else if(mJt(i))o=e=new J4(e,i),s="derived";else if(aJt(i))o=e=new r5(e,i),s="derived";else if(dJt(i))e=new i5(e,i);else if(yJt(i))o=e=wv.makeFromTransform(e,i),s="derived";else if(uJt(i))o=e=new X4(e,i),s="derived";else if(lJt(i))o=e=new t5(e,i),s="derived";else if(cJt(i))o=e=new n5(e,i),s="derived";else if(fJt(i))o=e=new e5(e,i),s="derived";else{Je(zYt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function s5(e){var h;let t=Ctn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(A0(i)||lx(i)||dI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new OJt;A0(i)?(ZFe(i)?t=new hR(t,i.sequence):Qne(i)&&(t=new dR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ca.makeExplicit(t,e,o)??t,t=new hy(t);const a=e.parent&&DS(e.parent);(Hi(e)||Al(e))&&a&&(t=ch.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Itn(t,e,o));const u=wen(e),l=_en(e);t=ca.makeWithAncestors(t,{},{...u,...l},o)??t,Hi(e)&&(t=Yw.parseAll(t,e),t=pI.parseAll(t,e)),(Hi(e)||Al(e))&&(a||(t=ch.makeFromEncoding(t,e)??t),t=lh.makeFromEncoding(t,e)??t,t=fx.parseAllForSortIndex(t,e));const c=t=Ige(vi.Raw,e,t);if(Hi(e)){const p=Of.makeFromEncoding(t,e);p&&(t=p,nre(e)&&(t=new hy(t))),t=wv.makeFromEncoding(t,e)??t,t=rm.makeFromEncoding(t,e)??t}Hi(e)&&(t=hI.make(t,e)??t);const f=t=Ige(vi.Main,e,t);Hi(e)&&gZt(e,f);let d=null;if(Al(e)){const p=e.getName("facet");t=Atn(t,e.facet)??t,d=new NS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function Ige(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Uu(n,s,e,i);return r[s]=o,o}class ktn extends hre{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Je(jYt),this.children=this.getChildren(t).map((l,c)=>bre(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=s5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return B4(t)?t.vconcat:Yne(t)?t.hconcat:t.concat}parseLayoutSize(){xtn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=sre(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Rtn(e){return e===!1||e===null}const Ntn={disable:1,gridScale:1,scale:1,...yFe,labelExpr:1,encode:1},c5e=Ye(Ntn);class mre extends ag{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new mre(en(this.explicit),en(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Rtn(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function Ptn(e,t,n){const{encoding:r,config:i}=e,s=ks(r[t])??ks(r[Qh(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(ub(u))return{text:Sf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(ox(s)==="quantitative"){if(ax(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Sf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Sf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(ox(s)==="temporal"&&i.timeFormatType&&Ze(s)&&!s.timeUnit)return{text:Sf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Dtn(e){return Jh.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Btn(n,e)]),t),{})}const Otn={bottom:"top",top:"bottom",left:"right",right:"left"};function $tn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ye(i.component.axes))n.axis[s]=ore(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Mtn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Jh){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=Otn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Mtn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Ltn(i,s)}}}else return t.map(n=>n.clone());return e}function Ltn(e,t){for(const n of c5e){const r=cy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return E6e(i,s);case"gridScale":return{explicit:i.explicit,value:as(i.value,s.value)}}return z4(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Ftn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:cI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===I4e(r,i))return!0}return e===n[t]}const jtn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Btn(e,t){var y,v;let n=t.axis(e);const r=new mre,i=ks(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||AZt(e),u=t.getScaleComponent(e).get("type"),l=bZt(e,u,a,t.config),c=n!==void 0?!n:DH("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=xZt(i,n,e,o.style,l),d=Q6e(n.formatType,i,u),h=X6e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of c5e){const w=b in dge?dge[b](p):jme(b)?n[b]:void 0,E=w!==void 0,S=Ftn(w,b,n,t,e);if(E&&S)r.set(b,w,S);else{const{configValue:T=void 0,configFrom:A=void 0}=jme(b)&&b!=="values"?DH(b,o.style,n.style,l):{},C=T!==void 0;E&&!C?r.set(b,w,S):(A!=="vgAxisConfig"||jtn.has(b)&&C||cR(T)||Rt(T))&&r.set(b,T,!1)}}const m=n.encoding??{},g=gFe.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=O4e(m[w]??{},t),S=w==="labels"?Ptn(t,e,E):E;return S!==void 0&&!Mr(S)&&(b[w]={update:S}),b},{});return Mr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Utn({encoding:e,size:t}){for(const n of Jh){const r=Ju(n);Ih(t[r])&&t0(e[n])&&(delete t[r],Je(C6e(r)))}return t}const ztn={vgMark:"arc",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...fy(e,"radius"),...fy(e,"theta")})},Vtn={vgMark:"area",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...cM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...cM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...tre(e)})},Htn={vgMark:"rect",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fy(e,"x"),...fy(e,"y")})},qtn={vgMark:"shape",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ze(n)&&n.type===IS?{field:at(n,{expr:"datum"})}:{}}]}},Wtn={vgMark:"image",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...fy(e,"x"),...fy(e,"y"),...Zne(e,"url")})},Gtn={vgMark:"line",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...Qs("size",e,{vgChannel:"strokeWidth"}),...tre(e)})},Ytn={vgMark:"trail",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...Qs("size",e),...tre(e)})};function gre(e,t){const{config:n}=e;return{...zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...Qs("size",e),...Qs("angle",e),...Ktn(e,n,t)}}function Ktn(e,t,n){return n?{shape:{value:n}}:Qs("shape",e)}const Xtn={vgMark:"symbol",encodeEntry:e=>gre(e)},Qtn={vgMark:"symbol",encodeEntry:e=>gre(e,"circle")},Jtn={vgMark:"symbol",encodeEntry:e=>gre(e,"square")},Ztn={vgMark:"rect",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fy(e,"x"),...fy(e,"y")})},enn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...cM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...cM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Qs("size",e,{vgChannel:"strokeWidth"})}}},tnn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...zc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...Zne(e),...Qs("size",e,{vgChannel:"fontSize"}),...Qs("angle",e),...uge("align",nnn(e.markDef,n,t)),...uge("baseline",rnn(e.markDef,n,t)),...la("radius",e,{defaultPos:null}),...la("theta",e,{defaultPos:null})}}};function nnn(e,t,n){if(br("align",e,n)===void 0)return"center"}function rnn(e,t,n){if(br("baseline",e,n)===void 0)return"middle"}const inn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid",vgChannel:"xc"}),...la("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Qs("size",e,{defaultValue:snn(e),vgChannel:i}),[s]:ui(br("thickness",n,t))}}};function snn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=br("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Wy(a)&&ur(a.step)?a.step*3/4:uM(t.view,i)*3/4}}const oP={arc:ztn,area:Vtn,bar:Htn,circle:Qtn,geoshape:qtn,image:Wtn,line:Gtn,point:Xtn,rect:Ztn,rule:enn,square:Jtn,text:tnn,tick:inn,trail:Ytn};function onn(e){if(Vn([R4,I4,wXt],e.mark)){const t=EFe(e.mark,e.encoding);if(t.length>0)return ann(e,t)}else if(e.mark===k4){const t=wH.some(n=>br(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return unn(e)}return yre(e)}const kge="faceted_path_";function ann(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:kge+e.requestDataName(vi.Main),data:e.requestDataName(vi.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:yre(e,{fromPrefix:kge})}]}const Rge="stack_group_";function unn(e){var l;const[t]=yre(e,{fromPrefix:Rge}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...ex(t.encode.update,["y","yc","y2","height",...wH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ju(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...ex(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ju(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of wH){const f=Om(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=ui(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Om(f,e.markDef,e.config);return d!==void 0?{...c,[f]:ui(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(vi.Main),name:Rge+e.requestDataName(vi.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function lnn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Fe(o)&&qf(o)&&bH(o.value)||!o&&bH(br("order",i,s)))){if((Fe(o)||Ze(o))&&!n)return b6e(o,{expr:"datum"});if(Hb(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ze(l)){const c=l.sort;if(Fe(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(uh(c))return{field:at({aggregate:Fne(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(iFe(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function yre(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=as(r.clip,cnn(e),fnn(e)),a=y6e(r),u=i.key,l=lnn(e),c=dnn(e),f=br("aria",r,s),d=oP[n].postEncodingTransform?oP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:oP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(vi.Main)},encode:{update:oP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function cnn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function fnn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function dnn(e){if(!e.component.selection)return null;const t=Ye(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ye(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class f5e extends o5e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Ume(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Ah(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=XQt(o,s,{graticule:t.data&&Qne(t.data)}));const u=this.encoding=eQt(t.encoding||{},a,o.filled,s);this.markDef=VFe(o,u,s),this.size=Utn({encoding:u,size:Ume(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=zFe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Wne(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===tFe,r=t&&JGt.some(i=>an(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return S4.reduce((r,i)=>{const s=ks(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Eu(t);return Fe(n)&&(i.domain=n.map(ml)),Fe(r)&&(i.range=r.map(ml)),i}initAxes(t){return Jh.reduce((n,r)=>{const i=t[r];if(an(i)||r===xi&&an(t.x2)||r===lo&&an(t.y2)){const s=an(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ye(t),r={};for(const i of n){const s=t[i];r[i]=cR(s)?g6e(s):ml(s)}return r}initLegends(t){return uYt.reduce((n,r)=>{const i=ks(t[r]);if(i&&cYt(r)){const s=i.legend;n[r]=s&&Eu(s)}return n},{})}parseData(){this.component.data=s5(this)}parseLayoutSize(){Stn(this)}parseSelections(){this.component.selection=mZt(this,this.selection)}parseMarkGroup(){this.component.mark=onn(this)}parseAxesAndHeaders(){this.component.axes=Dtn(this)}assembleSelectionTopLevelSignals(t){return LJt(this,t)}assembleSignals(){return[...T4e(this),...$Jt(this,[])]}assembleSelectionData(t){return FJt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return sre(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!DS(this.parent))&&(t=n4e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return bv(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Ch(n)}typedFieldDef(t){const n=this.fieldDef(t);return Za(n)?n:null}}class vre extends hre{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(U4(a))return new vre(a,this,this.getName(`layer_${u}`),o,s);if(og(a))return new f5e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(fne(a))})}parseData(){this.component.data=s5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Etn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){$tn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),T4e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),sre(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ht(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return jJt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),z4e(this))}}function bre(e,t,n,r,i){if(D4(e))return new CC(e,t,n,i);if(U4(e))return new vre(e,t,n,r,i);if(og(e))return new f5e(e,t,n,r,i);if(SQt(e))return new ktn(e,t,n,i);throw new Error(fne(e))}function hnn(e,t={}){t.logger&&kKt(t.logger),t.fieldTitle&&hFe(t.fieldTitle);try{const n=UFe(mS(t.config,e.config)),r=XFe(e,n),i=bre(r,null,"",void 0,n);return i.parse(),Len(i.component.data,i),{spec:mnn(i,pnn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&RKt(),t.fieldTitle&&qXt()}}function pnn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):pt(t)&&(t={type:t}),i&&s&&NJt(t.type)){if(i==="step"&&s==="step")Je(Tme()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Je(Tme(x4(o)));const a=o==="width"?"height":"width";t.type=PJt(a)}}return{...Ye(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Zme(n,!1),...Zme(e,!0)}}function mnn(e,t,n={},r){const i=e.config?FQt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),vtn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...LFe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const gnn=WGt.version,ynn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:tx,accessPathWithDatum:nne,compile:hnn,contains:Vn,deepEqual:El,deleteNestedProperty:J$,duplicate:en,entries:ay,every:Zte,fieldIntersection:tne,flatAccessWithDatum:XLe,getFirstDefined:as,hasIntersection:ene,hash:zn,internalField:ZLe,isBoolean:lI,isEmpty:Mr,isEqual:YGt,isInternalField:e6e,isNullOrFalse:bH,isNumeric:y4,keys:Ye,logicalExpr:TC,mergeDeep:YLe,never:GLe,normalize:XFe,normalizeAngle:cI,omit:ju,pick:ex,prefixGenerator:_H,removePathFromField:AS,replaceAll:ib,replacePathInField:kc,resetIdCounter:XGt,setEqual:KLe,some:rb,stringify:Lr,titleCase:eR,unique:Gd,uniqueId:JLe,vals:Ro,varName:Ei,version:gnn},Symbol.toStringTag,{value:"Module"}));function d5e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var vnn="vega-themes",bnn="2.15.0",_nn="Themes for stylized Vega and Vega-Lite visualizations.",wnn=["vega","vega-lite","themes","style"],Enn="BSD-3-Clause",xnn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Snn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Tnn="build/vega-themes.js",_re="build/vega-themes.module.js",Ann="build/vega-themes.min.js",Cnn="build/vega-themes.min.js",Inn="build/vega-themes.module.d.ts",knn={type:"git",url:"https://github.com/vega/vega-themes.git"},Rnn=["src","build"],Nnn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Pnn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Dnn={vega:"*","vega-lite":"*"},Onn={},$nn={name:vnn,version:bnn,description:_nn,keywords:wnn,license:Enn,author:xnn,contributors:Snn,main:Tnn,module:_re,unpkg:Ann,jsdelivr:Cnn,types:Inn,repository:knn,files:Rnn,scripts:Nnn,devDependencies:Pnn,peerDependencies:Dnn,dependencies:Onn};const E_="#fff",Nge="#888",Mnn={background:"#333",view:{stroke:Nge},title:{color:E_,subtitleColor:E_},style:{"guide-label":{fill:E_},"guide-title":{fill:E_}},axis:{domainColor:E_,gridColor:Nge,tickColor:E_}},i1="#4572a7",Lnn={background:"#fff",arc:{fill:i1},area:{fill:i1},line:{stroke:i1,strokeWidth:2},path:{stroke:i1},rect:{fill:i1},shape:{stroke:i1},symbol:{fill:i1,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},s1="#30a2da",Y9="#cbcbcb",Fnn="#999",jnn="#333",Pge="#f0f0f0",Dge="#333",Bnn={arc:{fill:s1},area:{fill:s1},axis:{domainColor:Y9,grid:!0,gridColor:Y9,gridWidth:1,labelColor:Fnn,labelFontSize:10,titleColor:jnn,tickColor:Y9,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Pge,group:{fill:Pge},legend:{labelColor:Dge,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Dge,titleFontSize:14,titlePadding:10},line:{stroke:s1,strokeWidth:2},path:{stroke:s1,strokeWidth:.5},rect:{fill:s1},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:s1},bar:{binSpacing:2,fill:s1,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},o1="#000",Unn={group:{fill:"#e5e5e5"},arc:{fill:o1},area:{fill:o1},line:{stroke:o1},path:{stroke:o1},rect:{fill:o1},shape:{stroke:o1},symbol:{fill:o1,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},znn=22,Vnn="normal",Oge="Benton Gothic, sans-serif",$ge=11.5,Hnn="normal",a1="#82c6df",K9="Benton Gothic Bold, sans-serif",Mge="normal",Lge=13,OT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},qnn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:K9,fontSize:znn,fontWeight:Vnn},arc:{fill:a1},area:{fill:a1},line:{stroke:a1,strokeWidth:2},path:{stroke:a1},rect:{fill:a1},shape:{stroke:a1},symbol:{fill:a1,size:30},axis:{labelFont:Oge,labelFontSize:$ge,labelFontWeight:Hnn,titleFont:K9,titleFontSize:Lge,titleFontWeight:Mge},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Oge,labelFontSize:$ge,symbolType:"square",titleFont:K9,titleFontSize:Lge,titleFontWeight:Mge},range:{category:OT["category-6"],diverging:OT["fireandice-6"],heatmap:OT["fire-7"],ordinal:OT["fire-7"],ramp:OT["fire-7"]}},u1="#ab5787",aP="#979797",Wnn={background:"#f9f9f9",arc:{fill:u1},area:{fill:u1},line:{stroke:u1},path:{stroke:u1},rect:{fill:u1},shape:{stroke:u1},symbol:{fill:u1,size:30},axis:{domainColor:aP,domainWidth:.5,gridWidth:.2,labelColor:aP,tickColor:aP,tickWidth:.2,titleColor:aP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},l1="#3e5c69",Gnn={background:"#fff",arc:{fill:l1},area:{fill:l1},line:{stroke:l1},path:{stroke:l1},rect:{fill:l1},shape:{stroke:l1},symbol:{fill:l1},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Jl="#1696d2",Fge="#000000",Ynn="#FFFFFF",uP="Lato",X9="Lato",Knn="Lato",Xnn="#DEDDDD",Qnn=18,$T={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Jnn={background:Ynn,title:{anchor:"start",fontSize:Qnn,font:uP},axisX:{domain:!0,domainColor:Fge,domainWidth:1,grid:!1,labelFontSize:12,labelFont:X9,labelAngle:0,tickColor:Fge,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:uP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Xnn,gridWidth:1,labelFontSize:12,labelFont:X9,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:uP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:X9,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:uP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:$T["six-groups-cat-1"],diverging:$T["diverging-colors"],heatmap:$T["diverging-colors"],ordinal:$T["six-groups-seq"],ramp:$T["shades-blue"]},area:{fill:Jl},rect:{fill:Jl},line:{color:Jl,stroke:Jl,strokeWidth:5},trail:{color:Jl,stroke:Jl,strokeWidth:0,size:1},path:{stroke:Jl,strokeWidth:.5},point:{filled:!0},text:{font:Knn,color:Jl,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Jl,stroke:null}},arc:{fill:Jl},shape:{stroke:Jl},symbol:{fill:Jl,size:30}},c1="#3366CC",jge="#ccc",lP="Arial, sans-serif",Znn={arc:{fill:c1},area:{fill:c1},path:{stroke:c1},rect:{fill:c1},shape:{stroke:c1},symbol:{stroke:c1},circle:{fill:c1},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:lP,fontSize:12},"guide-title":{font:lP,fontSize:12},"group-title":{font:lP,fontSize:12}},title:{font:lP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:jge,tickColor:jge,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},wre=e=>e*(1/3+1),Bge=wre(9),Uge=wre(10),zge=wre(12),MT="Segoe UI",Vge="wf_standard-font, helvetica, arial, sans-serif",Hge="#252423",LT="#605E5C",qge="transparent",ern="#C8C6C4",ef="#118DFF",trn="#12239E",nrn="#E66C37",rrn="#6B007B",irn="#E044A7",srn="#744EC2",orn="#D9B300",arn="#D64550",h5e=ef,p5e="#DEEFFF",Wge=[p5e,h5e],urn=[p5e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",h5e],lrn={view:{stroke:qge},background:qge,font:MT,header:{titleFont:Vge,titleFontSize:zge,titleColor:Hge,labelFont:MT,labelFontSize:Uge,labelColor:LT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:LT,labelFontSize:Bge,titleFont:Vge,titleColor:Hge,titleFontSize:zge,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:ern,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ef},line:{stroke:ef,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:MT,fontSize:Bge,fill:LT},arc:{fill:ef},area:{fill:ef,line:!0,opacity:.6},path:{stroke:ef},rect:{fill:ef},point:{fill:ef,filled:!0,size:75},shape:{stroke:ef},symbol:{fill:ef,strokeWidth:1.5,size:50},legend:{titleFont:MT,titleFontWeight:"bold",titleColor:LT,labelFont:MT,labelFontSize:Uge,labelColor:LT,symbolType:"circle",symbolSize:75},range:{category:[ef,trn,nrn,rrn,irn,srn,orn,arn],diverging:Wge,heatmap:Wge,ordinal:urn}},Q9='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',crn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',J9=400,cP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},frn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],drn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function o5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=cP.gridBg[e],i=cP.textPrimary[e],s=cP.textSecondary[e],o=n==="dark"?frn:drn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:Q9,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:crn,labelFontWeight:J9,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:cP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:Q9,fill:s,fontWeight:J9},"guide-title":{font:Q9,fill:s,fontWeight:J9}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const hrn=o5({theme:"white",background:"#ffffff"}),prn=o5({theme:"g10",background:"#f4f4f4"}),mrn=o5({theme:"g90",background:"#262626"}),grn=o5({theme:"g100",background:"#161616"}),yrn=$nn.version,vrn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:prn,carbong100:grn,carbong90:mrn,carbonwhite:hrn,dark:Mnn,excel:Lnn,fivethirtyeight:Bnn,ggplot2:Unn,googlecharts:Znn,latimes:qnn,powerbi:lrn,quartz:Wnn,urbaninstitute:Jnn,version:yrn,vox:Gnn},Symbol.toStringTag,{value:"Module"}));function brn(e,t,n,r){if(Fe(e))return`[${e.map(i=>t(pt(i)?i:Gge(i,n))).join(", ")}]`;if(mt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(mt(c)&&(c=Gge(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function _rn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Gge(e,t){return JSON.stringify(e,_rn(t))}var wrn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const m5e="vg-tooltip-element",Ern={offsetX:10,offsetY:10,id:m5e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:xrn,maxDepth:2,formatTooltip:brn,baseURL:""};function xrn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Srn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return wrn.toString().replace(m5e,e)}function Trn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Arn{constructor(t){this.options={...Ern,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Srn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Trn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var Z9={};function Crn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eB,Yge;function Irn(){return Yge||(Yge=1,eB=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),eB}var krn=gr;gr.Node=hb;gr.create=gr;function gr(e){var t=this;if(t instanceof gr||(t=new gr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}gr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};gr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};gr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};gr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Nrn(this,arguments[e]);return this.length};gr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Prn(this,arguments[e]);return this.length};gr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};gr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};gr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};gr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};gr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};gr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};gr.prototype.map=function(e,t){t=t||this;for(var n=new gr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};gr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new gr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};gr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};gr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};gr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};gr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};gr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new gr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};gr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new gr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};gr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Rrn(this,i,n[r]);return s};gr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Rrn(e,t,n){var r=t===e.head?new hb(n,null,t,e):new hb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Nrn(e,t){e.tail=new hb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Prn(e,t){e.head=new hb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function hb(e,t,n,r){if(!(this instanceof hb))return new hb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Irn()(gr)}catch{}const Drn=krn,F1=Symbol("max"),Sp=Symbol("length"),x_=Symbol("lengthCalculator"),IC=Symbol("allowStale"),iv=Symbol("maxAge"),vp=Symbol("dispose"),Kge=Symbol("noDisposeOnSet"),Hs=Symbol("lruList"),tf=Symbol("cache"),g5e=Symbol("updateAgeOnGet"),tB=()=>1;class Orn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[F1]=t.max||1/0;const n=t.length||tB;if(this[x_]=typeof n!="function"?tB:n,this[IC]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[iv]=t.maxAge||0,this[vp]=t.dispose,this[Kge]=t.noDisposeOnSet||!1,this[g5e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[F1]=t||1/0,FT(this)}get max(){return this[F1]}set allowStale(t){this[IC]=!!t}get allowStale(){return this[IC]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[iv]=t,FT(this)}get maxAge(){return this[iv]}set lengthCalculator(t){typeof t!="function"&&(t=tB),t!==this[x_]&&(this[x_]=t,this[Sp]=0,this[Hs].forEach(n=>{n.length=this[x_](n.value,n.key),this[Sp]+=n.length})),FT(this)}get lengthCalculator(){return this[x_]}get length(){return this[Sp]}get itemCount(){return this[Hs].length}rforEach(t,n){n=n||this;for(let r=this[Hs].tail;r!==null;){const i=r.prev;Xge(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Hs].head;r!==null;){const i=r.next;Xge(this,t,r,n),r=i}}keys(){return this[Hs].toArray().map(t=>t.key)}values(){return this[Hs].toArray().map(t=>t.value)}reset(){this[vp]&&this[Hs]&&this[Hs].length&&this[Hs].forEach(t=>this[vp](t.key,t.value)),this[tf]=new Map,this[Hs]=new Drn,this[Sp]=0}dump(){return this[Hs].map(t=>pM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Hs]}set(t,n,r){if(r=r||this[iv],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[x_](n,t);if(this[tf].has(t)){if(s>this[F1])return Kw(this,this[tf].get(t)),!1;const u=this[tf].get(t).value;return this[vp]&&(this[Kge]||this[vp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Sp]+=s-u.length,u.length=s,this.get(t),FT(this),!0}const o=new $rn(t,n,s,i,r);return o.length>this[F1]?(this[vp]&&this[vp](t,n),!1):(this[Sp]+=o.length,this[Hs].unshift(o),this[tf].set(t,this[Hs].head),FT(this),!0)}has(t){if(!this[tf].has(t))return!1;const n=this[tf].get(t).value;return!pM(this,n)}get(t){return nB(this,t,!0)}peek(t){return nB(this,t,!1)}pop(){const t=this[Hs].tail;return t?(Kw(this,t),t.value):null}del(t){Kw(this,this[tf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[tf].forEach((t,n)=>nB(this,n,!1))}}const nB=(e,t,n)=>{const r=e[tf].get(t);if(r){const i=r.value;if(pM(e,i)){if(Kw(e,r),!e[IC])return}else n&&(e[g5e]&&(r.value.now=Date.now()),e[Hs].unshiftNode(r));return i.value}},pM=(e,t)=>{if(!t||!t.maxAge&&!e[iv])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[iv]&&n>e[iv]},FT=e=>{if(e[Sp]>e[F1])for(let t=e[Hs].tail;e[Sp]>e[F1]&&t!==null;){const n=t.prev;Kw(e,t),t=n}},Kw=(e,t)=>{if(t){const n=t.value;e[vp]&&e[vp](n.key,n.value),e[Sp]-=n.length,e[tf].delete(n.key),e[Hs].removeNode(t)}};class $rn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Xge=(e,t,n,r)=>{let i=n.value;pM(e,i)&&(Kw(e,n),e[IC]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Mrn=Orn;const Lrn=Object.freeze({loose:!0}),Frn=Object.freeze({}),jrn=e=>e?typeof e!="object"?Lrn:e:Frn;var Ere=jrn,zH={exports:{}};const Brn="2.0.0",y5e=256,Urn=Number.MAX_SAFE_INTEGER||9007199254740991,zrn=16,Vrn=y5e-6,Hrn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var xre={MAX_LENGTH:y5e,MAX_SAFE_COMPONENT_LENGTH:zrn,MAX_SAFE_BUILD_LENGTH:Vrn,MAX_SAFE_INTEGER:Urn,RELEASE_TYPES:Hrn,SEMVER_SPEC_VERSION:Brn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const qrn=typeof process=="object"&&Z9&&Z9.NODE_DEBUG&&/\bsemver\b/i.test(Z9.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var a5=qrn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=xre,s=a5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(zH,zH.exports);var Sre=zH.exports;const Qge=/^[0-9]+$/,v5e=(e,t)=>{const n=Qge.test(e),r=Qge.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Wrn=(e,t)=>v5e(t,e);var Grn={compareIdentifiers:v5e,rcompareIdentifiers:Wrn};const fP=a5,{MAX_LENGTH:Jge,MAX_SAFE_INTEGER:dP}=xre,{safeRe:Zge,t:e0e}=Sre,Yrn=Ere,{compareIdentifiers:S_}=Grn;let Krn=class gd{constructor(t,n){if(n=Yrn(n),t instanceof gd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Jge)throw new TypeError(`version is longer than ${Jge} characters`);fP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Zge[e0e.LOOSE]:Zge[e0e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>dP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>dP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>dP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<dP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(fP("SemVer.compare",this.version,this.options,t),!(t instanceof gd)){if(typeof t=="string"&&t===this.version)return 0;t=new gd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof gd||(t=new gd(t,this.options)),S_(this.major,t.major)||S_(this.minor,t.minor)||S_(this.patch,t.patch)}comparePre(t){if(t instanceof gd||(t=new gd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(fP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return S_(r,i)}while(++n)}compareBuild(t){t instanceof gd||(t=new gd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(fP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return S_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),S_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Tre=Krn;const t0e=Tre,Xrn=(e,t,n)=>new t0e(e,n).compare(new t0e(t,n));var OS=Xrn;const Qrn=OS,Jrn=(e,t,n)=>Qrn(e,t,n)===0;var Zrn=Jrn;const ein=OS,tin=(e,t,n)=>ein(e,t,n)!==0;var nin=tin;const rin=OS,iin=(e,t,n)=>rin(e,t,n)>0;var sin=iin;const oin=OS,ain=(e,t,n)=>oin(e,t,n)>=0;var uin=ain;const lin=OS,cin=(e,t,n)=>lin(e,t,n)<0;var fin=cin;const din=OS,hin=(e,t,n)=>din(e,t,n)<=0;var pin=hin;const min=Zrn,gin=nin,yin=sin,vin=uin,bin=fin,_in=pin,win=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return min(e,n,r);case"!=":return gin(e,n,r);case">":return yin(e,n,r);case">=":return vin(e,n,r);case"<":return bin(e,n,r);case"<=":return _in(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Ein=win,rB,n0e;function xin(){if(n0e)return rB;n0e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}rB=t;const n=Ere,{safeRe:r,t:i}=Sre,s=Ein,o=a5,a=Tre,u=b5e();return rB}var iB,r0e;function b5e(){if(r0e)return iB;r0e=1;class e{constructor(O,F){if(F=r(F),O instanceof e)return O.loose===!!F.loose&&O.includePrerelease===!!F.includePrerelease?O:new e(O.raw,F);if(O instanceof i)return this.raw=O.value,this.set=[[O]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=O.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map(O=>O.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(O){const L=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+O,B=n.get(L);if(B)return B;const U=this.options.loose,H=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];O=O.replace(H,R(this.options.includePrerelease)),s("hyphen replace",O),O=O.replace(a[u.COMPARATORTRIM],l),s("comparator trim",O),O=O.replace(a[u.TILDETRIM],c),s("tilde trim",O),O=O.replace(a[u.CARETTRIM],f),s("caret trim",O);let D=O.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>I(q,this.options));U&&(D=D.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",D);const z=new Map,W=D.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(L,j),j}intersects(O,F){if(!(O instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>g(L,F)&&O.set.some(B=>g(B,F)&&L.every(U=>B.every(H=>U.intersects(H,F)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new o(O,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(M(this.set[F],O,this.options))return!0;return!1}}iB=e;const t=Mrn,n=new t({max:1e3}),r=Ere,i=xin(),s=a5,o=Tre,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Sre,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=xre,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,O)=>{let F=!0;const L=P.slice();let B=L.pop();for(;F&&L.length;)F=L.every(U=>B.intersects(U,O)),B=L.pop();return F},y=(P,O)=>(s("comp",P,O),P=E(P,O),s("caret",P),P=b(P,O),s("tildes",P),P=T(P,O),s("xrange",P),P=C(P,O),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",b=(P,O)=>P.trim().split(/\s+/).map(F=>w(F,O)).join(" "),w=(P,O)=>{const F=O.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(F,(L,B,U,H,D)=>{s("tilde",P,L,B,U,H,D);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(H)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:D?(s("replaceTilde pr",D),z=`>=${B}.${U}.${H}-${D} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${H} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},E=(P,O)=>P.trim().split(/\s+/).map(F=>S(F,O)).join(" "),S=(P,O)=>{s("caret",P,O);const F=O.loose?a[u.CARETLOOSE]:a[u.CARET],L=O.includePrerelease?"-0":"";return P.replace(F,(B,U,H,D,z)=>{s("caret",P,B,U,H,D,z);let W;return v(U)?W="":v(H)?W=`>=${U}.0.0${L} <${+U+1}.0.0-0`:v(D)?U==="0"?W=`>=${U}.${H}.0${L} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.0${L} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?H==="0"?W=`>=${U}.${H}.${D}-${z} <${U}.${H}.${+D+1}-0`:W=`>=${U}.${H}.${D}-${z} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${D}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?H==="0"?W=`>=${U}.${H}.${D}${L} <${U}.${H}.${+D+1}-0`:W=`>=${U}.${H}.${D}${L} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${D} <${+U+1}.0.0-0`),s("caret return",W),W})},T=(P,O)=>(s("replaceXRanges",P,O),P.split(/\s+/).map(F=>A(F,O)).join(" ")),A=(P,O)=>{P=P.trim();const F=O.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(F,(L,B,U,H,D,z)=>{s("xRange",P,L,B,U,H,D,z);const W=v(U),j=W||v(H),q=j||v(D),G=q;return B==="="&&G&&(B=""),z=O.includePrerelease?"-0":"",W?B===">"||B==="<"?L="<0.0.0-0":L="*":B&&G?(j&&(H=0),D=0,B===">"?(B=">=",j?(U=+U+1,H=0,D=0):(H=+H+1,D=0)):B==="<="&&(B="<",j?U=+U+1:H=+H+1),B==="<"&&(z="-0"),L=`${B+U}.${H}.${D}${z}`):j?L=`>=${U}.0.0${z} <${+U+1}.0.0-0`:q&&(L=`>=${U}.${H}.0${z} <${U}.${+H+1}.0-0`),s("xRange return",L),L})},C=(P,O)=>(s("replaceStars",P,O),P.trim().replace(a[u.STAR],"")),I=(P,O)=>(s("replaceGTE0",P,O),P.trim().replace(a[O.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=P=>(O,F,L,B,U,H,D,z,W,j,q,G,ne)=>(v(L)?F="":v(B)?F=`>=${L}.0.0${P?"-0":""}`:v(U)?F=`>=${L}.${B}.0${P?"-0":""}`:H?F=`>=${F}`:F=`>=${F}${P?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(q)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${q}-${G}`:P?z=`<${W}.${j}.${+q+1}-0`:z=`<=${z}`,`${F} ${z}`.trim()),M=(P,O,F)=>{for(let L=0;L<P.length;L++)if(!P[L].test(O))return!1;if(O.prerelease.length&&!F.includePrerelease){for(let L=0;L<P.length;L++)if(s(P[L].semver),P[L].semver!==i.ANY&&P[L].semver.prerelease.length>0){const B=P[L].semver;if(B.major===O.major&&B.minor===O.minor&&B.patch===O.patch)return!0}return!1}return!0};return iB}const Sin=b5e(),Tin=(e,t,n)=>{try{t=new Sin(t,n)}catch{return!1}return t.test(e)};var Ain=Tin,_5e=Crn(Ain);function Cin(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Iin=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function w5e(e,...t){for(const n of t)kin(e,n);return e}function kin(e,t){for(const n of Object.keys(t))gS(e,n,t[n],!0)}const rf=dGt;let gI=ynn;const hP=typeof window<"u"?window:void 0;var l0e;gI===void 0&&((l0e=hP==null?void 0:hP.vl)!=null&&l0e.compile)&&(gI=hP.vl);const Rin={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Nin={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},IA={vega:"Vega","vega-lite":"Vega-Lite"},mM={vega:rf.version,"vega-lite":gI?gI.version:"not available"},Pin={vega:e=>e,"vega-lite":(e,t)=>gI.compile(e,{config:t}).spec},Din=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Oin="chart-wrapper";function $in(e){return typeof e=="function"}function i0e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${IA[r]} JSON Source`}function Min(e,t){if(e.$schema){const n=d5e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${IA[n.library]}, but mode argument sets ${IA[t]??t}.`);const r=n.library;return _5e(mM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${IA[r]} ${n.version}, but the current version of ${IA[r]} is v${mM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function E5e(e){return!!(e&&"load"in e)}function s0e(e){return E5e(e)?e:rf.loader(e)}function Lin(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return pt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Fin(e,t,n={}){let r,i;pt(t)?(i=s0e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Lin(r),o=s.loader;(!i||o)&&(i=s0e(n.loader??o));const a=await o0e(s,i),u=await o0e(n,i),l={...w5e(u,a),config:mS(u.config??{},a.config??{})};return await Bin(e,r,l,i)}async function o0e(e,t){const n=pt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=pt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function jin(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Bin(e,t,n={},r){const i=n.theme?mS(vrn[n.theme],n.config??{}):n.config,s=Ly(n.actions)?n.actions:w5e({},Rin,n.actions??{}),o={...Nin,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??rf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:S,rootContainer:T}=jin(c);if(!S.getElementById(E)){const A=document.createElement("style");A.id=E,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Iin.toString():n.defaultStyle,T.appendChild(A)}}const f=Min(t,n.mode);let d=Pin[f](t,i);if(f==="vega-lite"&&d.$schema){const E=d5e(d.$schema);_5e(mM.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${mM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(Oin),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):EF(d,p,!0,!1).newDocument),n.formatLocale&&rf.formatLocale(n.formatLocale),n.timeFormatLocale&&rf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const S=n.expressionFunctions[E];"fn"in S?rf.expressionFunction(E,S.fn,S.visitor):S instanceof Function&&rf.expressionFunction(E,S)}const{ast:m}=n,g=rf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||rf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:rf.expressionInterpreter??n.expr??EGt}:{}});if(y.addSignalListener("autosize",(E,S)=>{const{type:T}=S;T=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):T=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):T=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:S}=n,T=E&&!E5e(E)?E==null?void 0:E.baseURL:void 0,A=$in(S)?S:new Arn({baseURL:T,...S===!0?{}:S}).call;y.tooltip(A)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(E,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=o.CLICK_TO_VIEW_ACTIONS,c.append(T),E=T;const A=document.createElement("summary");A.innerHTML=Din,T.append(A),b=C=>{T.contains(C.target)||T.removeAttribute("open")},document.addEventListener("click",b)}const S=document.createElement("div");if(E.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const T of["svg","png"])if(s===!0||s.export===!0||s.export[T]){const A=o[`${T.toUpperCase()}_ACTION`],C=document.createElement("a"),I=mt(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;C.text=A,C.href="#",C.target="_blank",C.download=`${l}.${T}`,C.addEventListener("mousedown",async function(R){R.preventDefault();const M=await y.toImageURL(T,I);this.href=M}),S.append(C)}}if(s===!0||s.source!==!1){const T=document.createElement("a");T.text=o.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(A){i0e(s9(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),S.append(T)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const T=document.createElement("a");T.text=o.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(A){i0e(s9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),S.append(T)}if(s===!0||s.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=o.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(C){Cin(window,T,{config:i,mode:f,renderer:a,spec:s9(t)}),C.preventDefault()}),S.append(A)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function Uin(e){return!!e&&{}.toString.call(e)==="[object Function]"}function zin(e,t,n){n&&(Uin(n)?n(e.data(t)):e.change(t,rf.changeset().remove(()=>!0).insert(n)))}function Vin(e,t){Object.keys(t).forEach(n=>{zin(e,n,t[n])})}function x5e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const S5e=()=>{};function sB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Hin(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=x5e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!$P(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function a0e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function oB(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function kA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class T5e extends qi.PureComponent{constructor(){super(...arguments),kA(this,"containerRef",qi.createRef()),kA(this,"resultPromise",void 0),kA(this,"handleError",t=>{const{onError:n=S5e}=this.props;n(t,this.containerRef.current),console.warn(t)}),kA(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=x5e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Hin(oB(this.props),oB(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!pV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&a0e(a,s),i&&sB(a,i)),a.run()})}else pV(i,s)||this.modifyView(o=>{s&&a0e(o,s),i&&sB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=oB(this.props);this.resultPromise=Fin(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;sB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return qi.createElement("div",{ref:this.containerRef,className:t,style:n})}}kA(T5e,"propTypes",{className:hhe.string,onError:hhe.func});function VH(){return VH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VH.apply(this,arguments)}function HH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const qin={};class A5e extends qi.PureComponent{constructor(){super(...arguments),HH(this,"vegaEmbed",qi.createRef()),HH(this,"handleNewView",t=>{this.update();const{onNewView:n=S5e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){pV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Vin(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return qi.createElement(T5e,VH({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}HH(A5e,"defaultProps",{data:qin});function qH(){return qH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qH.apply(this,arguments)}function Win(e){return qi.createElement(A5e,qH({},e,{mode:"vega-lite"}))}function u0e(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function Gin(e){const{studyId:t,allParticipants:n,config:r}=e,i=Vm(),[s,o]=gw(),a=n.filter(y=>y.completed).map(y=>Math.max(...Object.values(y.answers).map(v=>v.endTime).filter(v=>v!==void 0))).filter(y=>Number.isFinite(y)),[u,l]=N.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),c=N.useMemo(()=>n.filter(y=>y.completed&&u0e(y.answers,u)),[n,u]),f=N.useMemo(()=>n.filter(y=>!y.completed&&u0e(y.answers,u)),[n,u]),d=N.useMemo(()=>{var y,v;return c.length>0?[{Date:(y=u[0])==null?void 0:y.getTime(),Participants:0},...c.map(b=>Math.max(...Object.values(b.answers).map(w=>w.endTime).flat())).sort((b,w)=>b-w).map((b,w)=>({Date:b,Participants:w})),{Date:(v=u[1])==null?void 0:v.getTime(),Participants:c.length}]:[]},[c,u]),h=N.useMemo(()=>{var y,v;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(y=u[0])==null?void 0:y.getTime(),(v=u[1])==null?void 0:v.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[o.width,u,d]),[p,{close:m,open:g}]=yw(!1);return _.jsx(Nh,{children:_.jsxs(Ey,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Jt,{align:"center",mb:16,justify:"space-between",children:[_.jsxs(Jt,{direction:"column",children:[_.jsx(rs,{order:5,mb:4,children:t}),_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[_.jsxs(Gp,{size:"sm",color:"orange",children:["Total: ",f.length+c.length]}),_.jsxs(Gp,{size:"sm",color:"green",children:["Completed: ",c.length]}),_.jsxs(Gp,{size:"sm",color:"cyan",children:["In Progress: ",f.length]})]})]}),_.jsxs(Os,{children:[_.jsx(BPe,{allParticipants:n,studyId:t,config:r}),_.jsxs(Qr,{opened:p,children:[_.jsx(Qr.Target,{children:_.jsx(Rn,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:g,onMouseLeave:m,px:4,children:_.jsx(WYe,{})})}),_.jsx(Qr.Dropdown,{children:_.jsx(ot,{children:"Analyze and manage study data"})})]})]})]}),_.jsx(BJ,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:u,onChange:l}),d.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ot,{mt:16,children:"Finished Participants"}),_.jsx(Win,{spec:h,actions:!1})]}):_.jsx(Ee,{h:293.4,children:_.jsx(dm,{style:{height:"100%"},children:_.jsx(ot,{children:"Not enough participants for chart"})})})]})})}function Yin(e){const{globalConfig:t}=e,[n,r]=N.useState(!1),[i,s]=N.useState({}),[o,a]=N.useState({}),{storageEngine:u}=wa();return N.useEffect(()=>{(async()=>{r(!0);const c={},f={},d=async p=>{const m=await uF(p,t);if(u){if(c[p]=await u.getAllParticipantsDataByStudy(p),m===null)return;f[p]=m}};await(async()=>{const p=t.configsList.map(m=>d(m));try{await Promise.all(p),s(c),a(f)}catch(m){console.error("Error fetching data:",m)}finally{r(!1)}})()})()},[t,u]),_.jsxs(Ee,{children:[_.jsx(rs,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(Ba,{children:[t.configsList.map(l=>i[l]&&_.jsx(Ba.Col,{span:{md:12,xl:6},children:_.jsx(Gin,{studyId:l,allParticipants:i[l],config:o[l]})},`${l}-panel`)),_.jsx(Ec,{visible:n})]})]})}function Kin({globalConfig:e}){return _.jsxs(_.Fragment,{children:[_.jsx(vC,{studyIds:e.configsList}),_.jsx(ci.Main,{children:_.jsx(Nh,{fluid:!0,children:_.jsx(Yin,{globalConfig:e})})})]})}function Xin(){const{user:e,triggerAuth:t}=hS(),{storageEngine:n}=wa(),[r,i]=N.useState(!1),[s,o]=N.useState([]),[a,u]=N.useState(!1),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(!1),[m,g]=N.useState(""),[y,v]=N.useState(null),b=vEe({initialValues:{email:""},validate:{email:Bit("Invalid email")}});N.useEffect(()=>{(async()=>{if(u(!0),n instanceof Ep){const R=await(n==null?void 0:n.getUserManagementData("authentication"));i(R==null?void 0:R.isEnabled);const M=await(n==null?void 0:n.getUserManagementData("adminUsers"));M&&M.adminUsersList&&o(M==null?void 0:M.adminUsersList.map(P=>P.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof Ep){const I=await UPe(n,u);I&&I.email&&v({email:I.email,uid:I.uid}),p(!0)}u(!1)},E=async I=>{u(!0),n instanceof Ep&&I&&(await n.changeAuth(!0),await n.addAdminUser(I),o([I.email]),i(!0),t()),p(!1),u(!1)},S=async()=>{if(u(!0),n instanceof Ep){await n.addAdminUser({email:b.values.email,uid:null});const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(R=>R.email))}u(!1),c(!1),b.setValues({email:""})},T=I=>{d(!0),g(I)},A=async()=>{if(u(!0),n instanceof Ep){await n.removeAdminUser(m);const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(R=>R.email))}d(!1),u(!1)},C=N.useMemo(()=>n instanceof Ep,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Nh,{children:_.jsxs(Ey,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(rs,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Jt,{children:_.jsx(ot,{children:"Authentication is enabled."})}):_.jsxs(Jt,{justify:"space-between",children:[_.jsx(Ee,{children:_.jsx(ot,{children:"Authentication is currently disabled."})}),_.jsx(sa,{label:"You can only enable auth when using Firebase",disabled:C,children:_.jsx(Rn,{onClick:I=>C?w():I.preventDefault(),color:"green","data-disabled":C?void 0:!0,style:{"&[data-disabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Jt,{mt:40,direction:"column",children:[_.jsxs(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(rs,{order:6,children:"Enabled Users"}),_.jsx($G,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(I=>{var R;return _.jsxs(Jt,{justify:"space-between",mb:10,children:[_.jsx(ot,{children:I}),I===((R=e.user)==null?void 0:R.email)?_.jsx(ot,{color:"blue",size:"xs",children:"You"}):_.jsx(N0,{variant:"subtle",onClick:()=>T(I),children:_.jsx(p_e,{color:"red"})})]},I)}):null]}):null]})}),_.jsx(vs,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(Ee,{component:"form",onSubmit:b.onSubmit(()=>S()),children:[_.jsx(uv,{leftSection:_.jsx(zYe,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),_.jsxs(Jt,{mt:30,justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(Rn,{type:"submit",children:"Save"})]})]})}),_.jsxs(vs,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(ot,{fw:700,children:["Remove",m,"?"]}),children:[_.jsxs(ot,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:m})," ","as an administrator?"]}),_.jsxs(Jt,{mt:40,justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(Rn,{onClick:()=>A(),children:"Yes, I'm sure."})]})]}),_.jsxs(vs,{opened:h,size:"md",onClose:()=>d(!1),title:_.jsx(ot,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(ot,{mt:40,children:["User"," ",_.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Jt,{mt:40,justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(Rn,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),_.jsx(Ec,{visible:a})]})}class Qin extends MPe{constructor(){super("localStorage");sl(this,"studyDatabase")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await hV.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await Uw(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s){var l;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this.studyDatabase.getItem(this.currentParticipantId);if(o)return o;const a=await Uw(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await((l=this.studyDatabase)==null?void 0:l.setItem(this.currentParticipantId,u)),u}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=w$();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=hV.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=w$();this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i;let s=await this.studyDatabase.getItem(i);if(!s){const o=await Uw(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await this.studyDatabase.setItem(i,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}_verifyStudyDatabase(n){return n!==void 0}}async function Jin(){let e;{const t=new Qin;await t.connect(),e=t}return e}async function Zin(){const t=await(await fetch(`${Oh}global.json`)).text();return j2t(t)}function esn(){const[e,t]=N.useState(null),[n,r]=N.useState({});N.useEffect(()=>{async function o(){e&&r(await iMt(e))}o()},[e]),N.useEffect(()=>{e||Zin().then(o=>{t(o)})},[e]);const{storageEngine:i,setStorageEngine:s}=wa();return N.useEffect(()=>{if(i!==void 0)return;async function o(){const a=await Jin();s(a)}o()},[s,i]),e?_.jsx(PYe,{basename:Oh,children:_.jsx(W$t,{children:_.jsx(FYe,{children:_.jsx(ci,{padding:"md",header:{height:70},children:_.jsxs(IYe,{children:[_.jsx(dp,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(vC,{studyIds:e.configsList}),_.jsx(Wnt,{globalConfig:e,studyConfigs:n})]})}),_.jsx(dp,{path:"/:studyId/*",element:_.jsx(sMt,{globalConfig:e})}),_.jsx(dp,{path:"/analysis/dashboard",element:_.jsx(r9,{children:_.jsx(Kin,{globalConfig:e})})}),_.jsx(dp,{path:"/analysis",element:_.jsx(Fz,{to:"/analysis/dashboard"})}),_.jsx(dp,{path:"/analysis/stats/:studyId/:tab",element:_.jsx(r9,{children:_.jsx(cMt,{globalConfig:e})})}),_.jsx(dp,{path:"/analysis/stats/:studyId",element:_.jsx(Fz,{to:"./table",replace:!0})}),_.jsx(dp,{path:"/settings",element:_.jsxs(r9,{children:[_.jsx(vC,{studyIds:e.configsList}),_.jsx(ci.Main,{children:_.jsx(Xin,{})})]})}),_.jsx(dp,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(vC,{studyIds:e.configsList}),_.jsx(ci.Main,{children:_.jsx(fMt,{})})]})})]})})})})}):null}aB.createRoot(document.getElementById("root")).render(_.jsx(qi.StrictMode,{children:_.jsx(FGe,{children:_.jsx(q1e,{children:_.jsx(esn,{})})})}))});export default tsn();
